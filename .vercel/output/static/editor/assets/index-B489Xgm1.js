const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/output-DMPsce-H.js","assets/dataUtils-XrCV_Bny.js","assets/comparison-C-3EnatI.js","assets/typeConversion-Dht7g6FP.js","assets/forEach-9OFFvcAY.js","assets/whileLoop-BWu1MzO-.js","assets/conditionalBranch-CkXXrdZr.js","assets/logic-ePm9P3Wg.js","assets/arrayAggregate-CkKjWZHZ.js","assets/pathUtils-DFB8bYko.js","assets/arrayCreate-CWf8_DP0.js","assets/arrayDistinct-BWVL-7wK.js","assets/arrayFilter-K5CDwtc6.js","assets/arrayGroupBy-CYBBXmnL.js","assets/arrayMap-CliYjwMt.js","assets/arrayMerge-DTWeiSuC.js","assets/arrayProcessor-3bzHxIk3.js","assets/arraySlice-CQXToVqn.js","assets/arraySort-D7ytYpDA.js","assets/debugViewer-DCC5-KnR.js","assets/fieldExtractor-CLOjMr49.js","assets/math-BT4bU4qf.js","assets/objectCreate-Cp_MSNis.js","assets/objectFilter-EJheFovF.js","assets/objectKeysValues-DCvxA3oL.js","assets/objectMerge-BDO1RdGM.js","assets/objectPick-DE_VODpI.js","assets/objectRename-Txwo_3ZR.js","assets/objectSetProperty-D743SG3x.js","assets/objectToArray-3882GLb-.js","assets/objectTransform-CmxYo7p8.js","assets/round-DvGedJfu.js","assets/stringOps-BU9R2q4Y.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function tc(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const yt={},ur=[],Cn=()=>{},tp=()=>!1,Aa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),nc=e=>e.startsWith("onUpdate:"),jt=Object.assign,oc=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},uv=Object.prototype.hasOwnProperty,dt=(e,t)=>uv.call(e,t),Ve=Array.isArray,cr=e=>Gs(e)==="[object Map]",Vr=e=>Gs(e)==="[object Set]",Kc=e=>Gs(e)==="[object Date]",je=e=>typeof e=="function",kt=e=>typeof e=="string",fn=e=>typeof e=="symbol",pt=e=>e!==null&&typeof e=="object",np=e=>(pt(e)||je(e))&&je(e.then)&&je(e.catch),op=Object.prototype.toString,Gs=e=>op.call(e),cv=e=>Gs(e).slice(8,-1),rp=e=>Gs(e)==="[object Object]",rc=e=>kt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,us=tc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ia=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},dv=/-\w/g,nn=Ia(e=>e.replace(dv,t=>t.slice(1).toUpperCase())),fv=/\B([A-Z])/g,No=Ia(e=>e.replace(fv,"-$1").toLowerCase()),Oa=Ia(e=>e.charAt(0).toUpperCase()+e.slice(1)),gl=Ia(e=>e?`on${Oa(e)}`:""),Gn=(e,t)=>!Object.is(e,t),$i=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},sp=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},Wi=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Xc;const Ra=()=>Xc||(Xc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vt(e){if(Ve(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],r=kt(o)?mv(o):vt(o);if(r)for(const s in r)t[s]=r[s]}return t}else if(kt(e)||pt(e))return e}const hv=/;(?![^(]*\))/g,pv=/:([^]+)/,gv=/\/\*[^]*?\*\//g;function mv(e){const t={};return e.replace(gv,"").split(hv).forEach(n=>{if(n){const o=n.split(pv);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function qe(e){let t="";if(kt(e))t=e;else if(Ve(e))for(let n=0;n<e.length;n++){const o=qe(e[n]);o&&(t+=o+" ")}else if(pt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Ze(e){if(!e)return null;let{class:t,style:n}=e;return t&&!kt(t)&&(e.class=qe(t)),n&&(e.style=vt(n)),e}const yv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",vv=tc(yv);function ip(e){return!!e||e===""}function bv(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=Zs(e[o],t[o]);return n}function Zs(e,t){if(e===t)return!0;let n=Kc(e),o=Kc(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=fn(e),o=fn(t),n||o)return e===t;if(n=Ve(e),o=Ve(t),n||o)return n&&o?bv(e,t):!1;if(n=pt(e),o=pt(t),n||o){if(!n||!o)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const i in e){const a=e.hasOwnProperty(i),l=t.hasOwnProperty(i);if(a&&!l||!a&&l||!Zs(e[i],t[i]))return!1}}return String(e)===String(t)}function sc(e,t){return e.findIndex(n=>Zs(n,t))}const ap=e=>!!(e&&e.__v_isRef===!0),be=e=>kt(e)?e:e==null?"":Ve(e)||pt(e)&&(e.toString===op||!je(e.toString))?ap(e)?be(e.value):JSON.stringify(e,lp,2):String(e),lp=(e,t)=>ap(t)?lp(e,t.value):cr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,r],s)=>(n[ml(o,s)+" =>"]=r,n),{})}:Vr(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>ml(n))}:fn(t)?ml(t):pt(t)&&!Ve(t)&&!rp(t)?String(t):t,ml=(e,t="")=>{var n;return fn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zt;class up{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=zt,!t&&zt&&(this.index=(zt.scopes||(zt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=zt;try{return zt=this,t()}finally{zt=n}}}on(){++this._on===1&&(this.prevScope=zt,zt=this)}off(){this._on>0&&--this._on===0&&(zt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Ma(e){return new up(e)}function Da(){return zt}function cs(e,t=!1){zt&&zt.cleanups.push(e)}let bt;const yl=new WeakSet;class cp{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,zt&&zt.active&&zt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,yl.has(this)&&(yl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||fp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Jc(this),hp(this);const t=bt,n=cn;bt=this,cn=!0;try{return this.fn()}finally{pp(this),bt=t,cn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)lc(t);this.deps=this.depsTail=void 0,Jc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?yl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Zl(this)&&this.run()}get dirty(){return Zl(this)}}let dp=0,ds,fs;function fp(e,t=!1){if(e.flags|=8,t){e.next=fs,fs=e;return}e.next=ds,ds=e}function ic(){dp++}function ac(){if(--dp>0)return;if(fs){let t=fs;for(fs=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ds;){let t=ds;for(ds=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function hp(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function pp(e){let t,n=e.depsTail,o=n;for(;o;){const r=o.prevDep;o.version===-1?(o===n&&(n=r),lc(o),xv(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=r}e.deps=t,e.depsTail=n}function Zl(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(gp(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function gp(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ks)||(e.globalVersion=ks,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Zl(e))))return;e.flags|=2;const t=e.dep,n=bt,o=cn;bt=e,cn=!0;try{hp(e);const r=e.fn(e._value);(t.version===0||Gn(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{bt=n,cn=o,pp(e),e.flags&=-3}}function lc(e,t=!1){const{dep:n,prevSub:o,nextSub:r}=e;if(o&&(o.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)lc(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function xv(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let cn=!0;const mp=[];function Kn(){mp.push(cn),cn=!1}function Xn(){const e=mp.pop();cn=e===void 0?!0:e}function Jc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=bt;bt=void 0;try{t()}finally{bt=n}}}let ks=0;class _v{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Pa{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!bt||!cn||bt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==bt)n=this.activeLink=new _v(bt,this),bt.deps?(n.prevDep=bt.depsTail,bt.depsTail.nextDep=n,bt.depsTail=n):bt.deps=bt.depsTail=n,yp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=bt.depsTail,n.nextDep=void 0,bt.depsTail.nextDep=n,bt.depsTail=n,bt.deps===n&&(bt.deps=o)}return n}trigger(t){this.version++,ks++,this.notify(t)}notify(t){ic();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ac()}}}function yp(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)yp(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Yi=new WeakMap,zo=Symbol(""),Kl=Symbol(""),Es=Symbol("");function Ht(e,t,n){if(cn&&bt){let o=Yi.get(e);o||Yi.set(e,o=new Map);let r=o.get(n);r||(o.set(n,r=new Pa),r.map=o,r.key=n),r.track()}}function Ln(e,t,n,o,r,s){const i=Yi.get(e);if(!i){ks++;return}const a=l=>{l&&l.trigger()};if(ic(),t==="clear")i.forEach(a);else{const l=Ve(e),u=l&&rc(n);if(l&&n==="length"){const c=Number(o);i.forEach((d,f)=>{(f==="length"||f===Es||!fn(f)&&f>=c)&&a(d)})}else switch((n!==void 0||i.has(void 0))&&a(i.get(n)),u&&a(i.get(Es)),t){case"add":l?u&&a(i.get("length")):(a(i.get(zo)),cr(e)&&a(i.get(Kl)));break;case"delete":l||(a(i.get(zo)),cr(e)&&a(i.get(Kl)));break;case"set":cr(e)&&a(i.get(zo));break}}ac()}function wv(e,t){const n=Yi.get(e);return n&&n.get(t)}function tr(e){const t=it(e);return t===e?t:(Ht(t,"iterate",Es),tn(e)?t:t.map(Pt))}function Va(e){return Ht(e=it(e),"iterate",Es),e}const kv={__proto__:null,[Symbol.iterator](){return vl(this,Symbol.iterator,Pt)},concat(...e){return tr(this).concat(...e.map(t=>Ve(t)?tr(t):t))},entries(){return vl(this,"entries",e=>(e[1]=Pt(e[1]),e))},every(e,t){return Pn(this,"every",e,t,void 0,arguments)},filter(e,t){return Pn(this,"filter",e,t,n=>n.map(Pt),arguments)},find(e,t){return Pn(this,"find",e,t,Pt,arguments)},findIndex(e,t){return Pn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Pn(this,"findLast",e,t,Pt,arguments)},findLastIndex(e,t){return Pn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Pn(this,"forEach",e,t,void 0,arguments)},includes(...e){return bl(this,"includes",e)},indexOf(...e){return bl(this,"indexOf",e)},join(e){return tr(this).join(e)},lastIndexOf(...e){return bl(this,"lastIndexOf",e)},map(e,t){return Pn(this,"map",e,t,void 0,arguments)},pop(){return Br(this,"pop")},push(...e){return Br(this,"push",e)},reduce(e,...t){return Qc(this,"reduce",e,t)},reduceRight(e,...t){return Qc(this,"reduceRight",e,t)},shift(){return Br(this,"shift")},some(e,t){return Pn(this,"some",e,t,void 0,arguments)},splice(...e){return Br(this,"splice",e)},toReversed(){return tr(this).toReversed()},toSorted(e){return tr(this).toSorted(e)},toSpliced(...e){return tr(this).toSpliced(...e)},unshift(...e){return Br(this,"unshift",e)},values(){return vl(this,"values",Pt)}};function vl(e,t,n){const o=Va(e),r=o[t]();return o!==e&&!tn(e)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.done||(s.value=n(s.value)),s}),r}const Ev=Array.prototype;function Pn(e,t,n,o,r,s){const i=Va(e),a=i!==e&&!tn(e),l=i[t];if(l!==Ev[t]){const d=l.apply(e,s);return a?Pt(d):d}let u=n;i!==e&&(a?u=function(d,f){return n.call(this,Pt(d),f,e)}:n.length>2&&(u=function(d,f){return n.call(this,d,f,e)}));const c=l.call(i,u,o);return a&&r?r(c):c}function Qc(e,t,n,o){const r=Va(e);let s=n;return r!==e&&(tn(e)?n.length>3&&(s=function(i,a,l){return n.call(this,i,a,l,e)}):s=function(i,a,l){return n.call(this,i,Pt(a),l,e)}),r[t](s,...o)}function bl(e,t,n){const o=it(e);Ht(o,"iterate",Es);const r=o[t](...n);return(r===-1||r===!1)&&dc(n[0])?(n[0]=it(n[0]),o[t](...n)):r}function Br(e,t,n=[]){Kn(),ic();const o=it(e)[t].apply(e,n);return ac(),Xn(),o}const Sv=tc("__proto__,__v_isRef,__isVue"),vp=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(fn));function $v(e){fn(e)||(e=String(e));const t=it(this);return Ht(t,"has",e),t.hasOwnProperty(e)}class bp{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return s;if(n==="__v_raw")return o===(r?s?Pv:kp:s?wp:_p).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const i=Ve(t);if(!r){let l;if(i&&(l=kv[n]))return l;if(n==="hasOwnProperty")return $v}const a=Reflect.get(t,n,xt(t)?t:o);if((fn(n)?vp.has(n):Sv(n))||(r||Ht(t,"get",n),s))return a;if(xt(a)){const l=i&&rc(n)?a:a.value;return r&&pt(l)?Gi(l):l}return pt(a)?r?Gi(a):zr(a):a}}class xp extends bp{constructor(t=!1){super(!1,t)}set(t,n,o,r){let s=t[n];if(!this._isShallow){const l=Eo(s);if(!tn(o)&&!Eo(o)&&(s=it(s),o=it(o)),!Ve(t)&&xt(s)&&!xt(o))return l||(s.value=o),!0}const i=Ve(t)&&rc(n)?Number(n)<t.length:dt(t,n),a=Reflect.set(t,n,o,xt(t)?t:r);return t===it(r)&&(i?Gn(o,s)&&Ln(t,"set",n,o):Ln(t,"add",n,o)),a}deleteProperty(t,n){const o=dt(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&o&&Ln(t,"delete",n,void 0),r}has(t,n){const o=Reflect.has(t,n);return(!fn(n)||!vp.has(n))&&Ht(t,"has",n),o}ownKeys(t){return Ht(t,"iterate",Ve(t)?"length":zo),Reflect.ownKeys(t)}}class Cv extends bp{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Nv=new xp,Tv=new Cv,Av=new xp(!0);const Xl=e=>e,ai=e=>Reflect.getPrototypeOf(e);function Iv(e,t,n){return function(...o){const r=this.__v_raw,s=it(r),i=cr(s),a=e==="entries"||e===Symbol.iterator&&i,l=e==="keys"&&i,u=r[e](...o),c=n?Xl:t?Zi:Pt;return!t&&Ht(s,"iterate",l?Kl:zo),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function li(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ov(e,t){const n={get(r){const s=this.__v_raw,i=it(s),a=it(r);e||(Gn(r,a)&&Ht(i,"get",r),Ht(i,"get",a));const{has:l}=ai(i),u=t?Xl:e?Zi:Pt;if(l.call(i,r))return u(s.get(r));if(l.call(i,a))return u(s.get(a));s!==i&&s.get(r)},get size(){const r=this.__v_raw;return!e&&Ht(it(r),"iterate",zo),r.size},has(r){const s=this.__v_raw,i=it(s),a=it(r);return e||(Gn(r,a)&&Ht(i,"has",r),Ht(i,"has",a)),r===a?s.has(r):s.has(r)||s.has(a)},forEach(r,s){const i=this,a=i.__v_raw,l=it(a),u=t?Xl:e?Zi:Pt;return!e&&Ht(l,"iterate",zo),a.forEach((c,d)=>r.call(s,u(c),u(d),i))}};return jt(n,e?{add:li("add"),set:li("set"),delete:li("delete"),clear:li("clear")}:{add(r){!t&&!tn(r)&&!Eo(r)&&(r=it(r));const s=it(this);return ai(s).has.call(s,r)||(s.add(r),Ln(s,"add",r,r)),this},set(r,s){!t&&!tn(s)&&!Eo(s)&&(s=it(s));const i=it(this),{has:a,get:l}=ai(i);let u=a.call(i,r);u||(r=it(r),u=a.call(i,r));const c=l.call(i,r);return i.set(r,s),u?Gn(s,c)&&Ln(i,"set",r,s):Ln(i,"add",r,s),this},delete(r){const s=it(this),{has:i,get:a}=ai(s);let l=i.call(s,r);l||(r=it(r),l=i.call(s,r)),a&&a.call(s,r);const u=s.delete(r);return l&&Ln(s,"delete",r,void 0),u},clear(){const r=it(this),s=r.size!==0,i=r.clear();return s&&Ln(r,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=Iv(r,e,t)}),n}function uc(e,t){const n=Ov(e,t);return(o,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?o:Reflect.get(dt(n,r)&&r in o?n:o,r,s)}const Rv={get:uc(!1,!1)},Mv={get:uc(!1,!0)},Dv={get:uc(!0,!1)};const _p=new WeakMap,wp=new WeakMap,kp=new WeakMap,Pv=new WeakMap;function Vv(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zv(e){return e.__v_skip||!Object.isExtensible(e)?0:Vv(cv(e))}function zr(e){return Eo(e)?e:cc(e,!1,Nv,Rv,_p)}function Ep(e){return cc(e,!1,Av,Mv,wp)}function Gi(e){return cc(e,!0,Tv,Dv,kp)}function cc(e,t,n,o,r){if(!pt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=zv(e);if(s===0)return e;const i=r.get(e);if(i)return i;const a=new Proxy(e,s===2?o:n);return r.set(e,a),a}function _o(e){return Eo(e)?_o(e.__v_raw):!!(e&&e.__v_isReactive)}function Eo(e){return!!(e&&e.__v_isReadonly)}function tn(e){return!!(e&&e.__v_isShallow)}function dc(e){return e?!!e.__v_raw:!1}function it(e){const t=e&&e.__v_raw;return t?it(t):e}function Ho(e){return!dt(e,"__v_skip")&&Object.isExtensible(e)&&sp(e,"__v_skip",!0),e}const Pt=e=>pt(e)?zr(e):e,Zi=e=>pt(e)?Gi(e):e;function xt(e){return e?e.__v_isRef===!0:!1}function de(e){return Sp(e,!1)}function yr(e){return Sp(e,!0)}function Sp(e,t){return xt(e)?e:new Hv(e,t)}class Hv{constructor(t,n){this.dep=new Pa,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:it(t),this._value=n?t:Pt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||tn(t)||Eo(t);t=o?t:it(t),Gn(t,n)&&(this._rawValue=t,this._value=o?t:Pt(t),this.dep.trigger())}}function ye(e){return xt(e)?e.value:e}function et(e){return je(e)?e():ye(e)}const Fv={get:(e,t,n)=>t==="__v_raw"?e:ye(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const r=e[t];return xt(r)&&!xt(n)?(r.value=n,!0):Reflect.set(e,t,n,o)}};function $p(e){return _o(e)?e:new Proxy(e,Fv)}class Lv{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Pa,{get:o,set:r}=t(n.track.bind(n),n.trigger.bind(n));this._get=o,this._set=r}get value(){return this._value=this._get()}set value(t){this._set(t)}}function Bv(e){return new Lv(e)}function Cp(e){const t=Ve(e)?new Array(e.length):{};for(const n in e)t[n]=Np(e,n);return t}class jv{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return wv(it(this._object),this._key)}}class Uv{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function ft(e,t,n){return xt(e)?e:je(e)?new Uv(e):pt(e)&&arguments.length>1?Np(e,t,n):de(e)}function Np(e,t,n){const o=e[t];return xt(o)?o:new jv(e,t,n)}class qv{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Pa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ks-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return fp(this,!0),!0}get value(){const t=this.dep.track();return gp(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Wv(e,t,n=!1){let o,r;return je(e)?o=e:(o=e.get,r=e.set),new qv(o,r,n)}const ui={},Ki=new WeakMap;let Io;function Yv(e,t=!1,n=Io){if(n){let o=Ki.get(n);o||Ki.set(n,o=[]),o.push(e)}}function Gv(e,t,n=yt){const{immediate:o,deep:r,once:s,scheduler:i,augmentJob:a,call:l}=n,u=A=>r?A:tn(A)||r===!1||r===0?Bn(A,1):Bn(A);let c,d,f,h,p=!1,y=!1;if(xt(e)?(d=()=>e.value,p=tn(e)):_o(e)?(d=()=>u(e),p=!0):Ve(e)?(y=!0,p=e.some(A=>_o(A)||tn(A)),d=()=>e.map(A=>{if(xt(A))return A.value;if(_o(A))return u(A);if(je(A))return l?l(A,2):A()})):je(e)?t?d=l?()=>l(e,2):e:d=()=>{if(f){Kn();try{f()}finally{Xn()}}const A=Io;Io=c;try{return l?l(e,3,[h]):e(h)}finally{Io=A}}:d=Cn,t&&r){const A=d,Y=r===!0?1/0:r;d=()=>Bn(A(),Y)}const m=Da(),v=()=>{c.stop(),m&&m.active&&oc(m.effects,c)};if(s&&t){const A=t;t=(...Y)=>{A(...Y),v()}}let E=y?new Array(e.length).fill(ui):ui;const _=A=>{if(!(!(c.flags&1)||!c.dirty&&!A))if(t){const Y=c.run();if(r||p||(y?Y.some((j,H)=>Gn(j,E[H])):Gn(Y,E))){f&&f();const j=Io;Io=c;try{const H=[Y,E===ui?void 0:y&&E[0]===ui?[]:E,h];E=Y,l?l(t,3,H):t(...H)}finally{Io=j}}}else c.run()};return a&&a(_),c=new cp(d),c.scheduler=i?()=>i(_,!1):_,h=A=>Yv(A,!1,c),f=c.onStop=()=>{const A=Ki.get(c);if(A){if(l)l(A,4);else for(const Y of A)Y();Ki.delete(c)}},t?o?_(!0):E=c.run():i?i(_.bind(null,!0),!0):c.run(),v.pause=c.pause.bind(c),v.resume=c.resume.bind(c),v.stop=v,v}function Bn(e,t=1/0,n){if(t<=0||!pt(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,xt(e))Bn(e.value,t,n);else if(Ve(e))for(let o=0;o<e.length;o++)Bn(e[o],t,n);else if(Vr(e)||cr(e))e.forEach(o=>{Bn(o,t,n)});else if(rp(e)){for(const o in e)Bn(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Bn(e[o],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ks(e,t,n,o){try{return o?e(...o):e()}catch(r){za(r,t,n)}}function In(e,t,n,o){if(je(e)){const r=Ks(e,t,n,o);return r&&np(r)&&r.catch(s=>{za(s,t,n)}),r}if(Ve(e)){const r=[];for(let s=0;s<e.length;s++)r.push(In(e[s],t,n,o));return r}}function za(e,t,n,o=!0){const r=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||yt;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](e,l,u)===!1)return}a=a.parent}if(s){Kn(),Ks(s,null,10,[e,l,u]),Xn();return}}Zv(e,n,r,o,i)}function Zv(e,t,n,o=!0,r=!1){if(r)throw e;console.error(e)}const qt=[];let xn=-1;const dr=[];let co=null,sr=0;const Tp=Promise.resolve();let Xi=null;function Bt(e){const t=Xi||Tp;return e?t.then(this?e.bind(this):e):t}function Kv(e){let t=xn+1,n=qt.length;for(;t<n;){const o=t+n>>>1,r=qt[o],s=Ss(r);s<e||s===e&&r.flags&2?t=o+1:n=o}return t}function fc(e){if(!(e.flags&1)){const t=Ss(e),n=qt[qt.length-1];!n||!(e.flags&2)&&t>=Ss(n)?qt.push(e):qt.splice(Kv(t),0,e),e.flags|=1,Ap()}}function Ap(){Xi||(Xi=Tp.then(Op))}function Xv(e){Ve(e)?dr.push(...e):co&&e.id===-1?co.splice(sr+1,0,e):e.flags&1||(dr.push(e),e.flags|=1),Ap()}function ed(e,t,n=xn+1){for(;n<qt.length;n++){const o=qt[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;qt.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Ip(e){if(dr.length){const t=[...new Set(dr)].sort((n,o)=>Ss(n)-Ss(o));if(dr.length=0,co){co.push(...t);return}for(co=t,sr=0;sr<co.length;sr++){const n=co[sr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}co=null,sr=0}}const Ss=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Op(e){try{for(xn=0;xn<qt.length;xn++){const t=qt[xn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ks(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;xn<qt.length;xn++){const t=qt[xn];t&&(t.flags&=-2)}xn=-1,qt.length=0,Ip(),Xi=null,(qt.length||dr.length)&&Op()}}let Vt=null,Rp=null;function Ji(e){const t=Vt;return Vt=e,Rp=e&&e.type.__scopeId||null,t}function ze(e,t=Vt,n){if(!t||e._n)return e;const o=(...r)=>{o._d&&ta(-1);const s=Ji(t);let i;try{i=e(...r)}finally{Ji(s),o._d&&ta(1)}return i};return o._n=!0,o._c=!0,o._d=!0,o}function Ue(e,t){if(Vt===null)return e;const n=Ua(Vt),o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[s,i,a,l=yt]=t[r];s&&(je(s)&&(s={mounted:s,updated:s}),s.deep&&Bn(i),o.push({dir:s,instance:n,value:i,oldValue:void 0,arg:a,modifiers:l}))}return e}function To(e,t,n,o){const r=e.dirs,s=t&&t.dirs;for(let i=0;i<r.length;i++){const a=r[i];s&&(a.oldValue=s[i].value);let l=a.dir[o];l&&(Kn(),In(l,n,8,[e.el,a,e,t]),Xn())}}const Jv=Symbol("_vte"),Qv=e=>e.__isTeleport,e0=Symbol("_leaveCb");function hc(e,t){e.shapeFlag&6&&e.component?(e.transition=t,hc(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ht(e,t){return je(e)?jt({name:e.name},t,{setup:e}):e}function Mp(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Qi=new WeakMap;function hs(e,t,n,o,r=!1){if(Ve(e)){e.forEach((p,y)=>hs(p,t&&(Ve(t)?t[y]:t),n,o,r));return}if(fr(o)&&!r){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&hs(e,t,n,o.component.subTree);return}const s=o.shapeFlag&4?Ua(o.component):o.el,i=r?null:s,{i:a,r:l}=e,u=t&&t.r,c=a.refs===yt?a.refs={}:a.refs,d=a.setupState,f=it(d),h=d===yt?tp:p=>dt(f,p);if(u!=null&&u!==l){if(td(t),kt(u))c[u]=null,h(u)&&(d[u]=null);else if(xt(u)){u.value=null;const p=t;p.k&&(c[p.k]=null)}}if(je(l))Ks(l,a,12,[i,c]);else{const p=kt(l),y=xt(l);if(p||y){const m=()=>{if(e.f){const v=p?h(l)?d[l]:c[l]:l.value;if(r)Ve(v)&&oc(v,s);else if(Ve(v))v.includes(s)||v.push(s);else if(p)c[l]=[s],h(l)&&(d[l]=c[l]);else{const E=[s];l.value=E,e.k&&(c[e.k]=E)}}else p?(c[l]=i,h(l)&&(d[l]=i)):y&&(l.value=i,e.k&&(c[e.k]=i))};if(i){const v=()=>{m(),Qi.delete(e)};v.id=-1,Qi.set(e,v),Jt(v,n)}else td(e),m()}}}function td(e){const t=Qi.get(e);t&&(t.flags|=8,Qi.delete(e))}Ra().requestIdleCallback;Ra().cancelIdleCallback;const fr=e=>!!e.type.__asyncLoader,Dp=e=>e.type.__isKeepAlive;function t0(e,t){Pp(e,"a",t)}function n0(e,t){Pp(e,"da",t)}function Pp(e,t,n=Ft){const o=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Ha(t,o,n),n){let r=n.parent;for(;r&&r.parent;)Dp(r.parent.vnode)&&o0(o,t,n,r),r=r.parent}}function o0(e,t,n,o){const r=Ha(t,e,o,!0);Hr(()=>{oc(o[t],r)},n)}function Ha(e,t,n=Ft,o=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...i)=>{Kn();const a=Xs(n),l=In(t,n,e,i);return a(),Xn(),l});return o?r.unshift(s):r.push(s),s}}const oo=e=>(t,n=Ft)=>{(!Ns||e==="sp")&&Ha(e,(...o)=>t(...o),n)},Vp=oo("bm"),wt=oo("m"),r0=oo("bu"),s0=oo("u"),Fa=oo("bum"),Hr=oo("um"),i0=oo("sp"),a0=oo("rtg"),l0=oo("rtc");function u0(e,t=Ft){Ha("ec",e,t)}const zp="components";function La(e,t){return Fp(zp,e,!0,t)||e}const Hp=Symbol.for("v-ndc");function yo(e){return kt(e)?Fp(zp,e,!1)||e:e||Hp}function Fp(e,t,n=!0,o=!1){const r=Vt||Ft;if(r){const s=r.type;{const a=K0(s,!1);if(a&&(a===t||a===nn(t)||a===Oa(nn(t))))return s}const i=nd(r[e]||s[e],t)||nd(r.appContext[e],t);return!i&&o?s:i}}function nd(e,t){return e&&(e[t]||e[nn(t)]||e[Oa(nn(t))])}function at(e,t,n,o){let r;const s=n&&n[o],i=Ve(e);if(i||kt(e)){const a=i&&_o(e);let l=!1,u=!1;a&&(l=!tn(e),u=Eo(e),e=Va(e)),r=new Array(e.length);for(let c=0,d=e.length;c<d;c++)r[c]=t(l?u?Zi(Pt(e[c])):Pt(e[c]):e[c],c,void 0,s&&s[c])}else if(typeof e=="number"){r=new Array(e);for(let a=0;a<e;a++)r[a]=t(a+1,a,void 0,s&&s[a])}else if(pt(e))if(e[Symbol.iterator])r=Array.from(e,(a,l)=>t(a,l,void 0,s&&s[l]));else{const a=Object.keys(e);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];r[l]=t(e[c],c,l,s&&s[l])}}else r=[];return n&&(n[o]=r),r}function _t(e,t,n={},o,r){if(Vt.ce||Vt.parent&&fr(Vt.parent)&&Vt.parent.ce){const u=Object.keys(n).length>0;return t!=="default"&&(n.name=t),O(),ut(Pe,null,[ue("slot",n,o&&o())],u?-2:64)}let s=e[t];s&&s._c&&(s._d=!1),O();const i=s&&Lp(s(n)),a=n.key||i&&i.key,l=ut(Pe,{key:(a&&!fn(a)?a:`_${t}`)+(!i&&o?"_fb":"")},i||(o?o():[]),i&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function Lp(e){return e.some(t=>$s(t)?!(t.type===Jn||t.type===Pe&&!Lp(t.children)):!0)?e:null}const Jl=e=>e?lg(e)?Ua(e):Jl(e.parent):null,ps=jt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Jl(e.parent),$root:e=>Jl(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>qp(e),$forceUpdate:e=>e.f||(e.f=()=>{fc(e.update)}),$nextTick:e=>e.n||(e.n=Bt.bind(e.proxy)),$watch:e=>R0.bind(e)}),xl=(e,t)=>e!==yt&&!e.__isScriptSetup&&dt(e,t),c0={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:r,props:s,accessCache:i,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const h=i[t];if(h!==void 0)switch(h){case 1:return o[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(xl(o,t))return i[t]=1,o[t];if(r!==yt&&dt(r,t))return i[t]=2,r[t];if((u=e.propsOptions[0])&&dt(u,t))return i[t]=3,s[t];if(n!==yt&&dt(n,t))return i[t]=4,n[t];Ql&&(i[t]=0)}}const c=ps[t];let d,f;if(c)return t==="$attrs"&&Ht(e.attrs,"get",""),c(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==yt&&dt(n,t))return i[t]=4,n[t];if(f=l.config.globalProperties,dt(f,t))return f[t]},set({_:e},t,n){const{data:o,setupState:r,ctx:s}=e;return xl(r,t)?(r[t]=n,!0):o!==yt&&dt(o,t)?(o[t]=n,!0):dt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:r,propsOptions:s,type:i}},a){let l,u;return!!(n[a]||e!==yt&&a[0]!=="$"&&dt(e,a)||xl(t,a)||(l=s[0])&&dt(l,a)||dt(o,a)||dt(ps,a)||dt(r.config.globalProperties,a)||(u=i.__cssModules)&&u[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:dt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Bp(){return jp().slots}function pc(){return jp().attrs}function jp(e){const t=ro();return t.setupContext||(t.setupContext=cg(t))}function od(e){return Ve(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function d0(e,t){const n={};for(const o in e)t.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>e[o]});return n}let Ql=!0;function f0(e){const t=qp(e),n=e.proxy,o=e.ctx;Ql=!1,t.beforeCreate&&rd(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:i,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:y,deactivated:m,beforeDestroy:v,beforeUnmount:E,destroyed:_,unmounted:A,render:Y,renderTracked:j,renderTriggered:H,errorCaptured:I,serverPrefetch:L,expose:B,inheritAttrs:V,components:S,directives:z,filters:g}=t;if(u&&h0(u,o,null),i)for(const F in i){const P=i[F];je(P)&&(o[F]=P.bind(n))}if(r){const F=r.call(n,n);pt(F)&&(e.data=zr(F))}if(Ql=!0,s)for(const F in s){const P=s[F],X=je(P)?P.bind(n,n):je(P.get)?P.get.bind(n,n):Cn,G=!je(P)&&je(P.set)?P.set.bind(n):Cn,oe=ne({get:X,set:G});Object.defineProperty(o,F,{enumerable:!0,configurable:!0,get:()=>oe.value,set:ge=>oe.value=ge})}if(a)for(const F in a)Up(a[F],o,n,F);if(l){const F=je(l)?l.call(n):l;Reflect.ownKeys(F).forEach(P=>{dn(P,F[P])})}c&&rd(c,e,"c");function w(F,P){Ve(P)?P.forEach(X=>F(X.bind(n))):P&&F(P.bind(n))}if(w(Vp,d),w(wt,f),w(r0,h),w(s0,p),w(t0,y),w(n0,m),w(u0,I),w(l0,j),w(a0,H),w(Fa,E),w(Hr,A),w(i0,L),Ve(B))if(B.length){const F=e.exposed||(e.exposed={});B.forEach(P=>{Object.defineProperty(F,P,{get:()=>n[P],set:X=>n[P]=X,enumerable:!0})})}else e.exposed||(e.exposed={});Y&&e.render===Cn&&(e.render=Y),V!=null&&(e.inheritAttrs=V),S&&(e.components=S),z&&(e.directives=z),L&&Mp(e)}function h0(e,t,n=Cn){Ve(e)&&(e=eu(e));for(const o in e){const r=e[o];let s;pt(r)?"default"in r?s=Ot(r.from||o,r.default,!0):s=Ot(r.from||o):s=Ot(r),xt(s)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:i=>s.value=i}):t[o]=s}}function rd(e,t,n){In(Ve(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function Up(e,t,n,o){let r=o.includes(".")?og(n,o):()=>n[o];if(kt(e)){const s=t[e];je(s)&&Fe(r,s)}else if(je(e))Fe(r,e.bind(n));else if(pt(e))if(Ve(e))e.forEach(s=>Up(s,t,n,o));else{const s=je(e.handler)?e.handler.bind(n):t[e.handler];je(s)&&Fe(r,s,e)}}function qp(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:i}}=e.appContext,a=s.get(t);let l;return a?l=a:!r.length&&!n&&!o?l=t:(l={},r.length&&r.forEach(u=>ea(l,u,i,!0)),ea(l,t,i)),pt(t)&&s.set(t,l),l}function ea(e,t,n,o=!1){const{mixins:r,extends:s}=t;s&&ea(e,s,n,!0),r&&r.forEach(i=>ea(e,i,n,!0));for(const i in t)if(!(o&&i==="expose")){const a=p0[i]||n&&n[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const p0={data:sd,props:id,emits:id,methods:Qr,computed:Qr,beforeCreate:Ut,created:Ut,beforeMount:Ut,mounted:Ut,beforeUpdate:Ut,updated:Ut,beforeDestroy:Ut,beforeUnmount:Ut,destroyed:Ut,unmounted:Ut,activated:Ut,deactivated:Ut,errorCaptured:Ut,serverPrefetch:Ut,components:Qr,directives:Qr,watch:m0,provide:sd,inject:g0};function sd(e,t){return t?e?function(){return jt(je(e)?e.call(this,this):e,je(t)?t.call(this,this):t)}:t:e}function g0(e,t){return Qr(eu(e),eu(t))}function eu(e){if(Ve(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ut(e,t){return e?[...new Set([].concat(e,t))]:t}function Qr(e,t){return e?jt(Object.create(null),e,t):t}function id(e,t){return e?Ve(e)&&Ve(t)?[...new Set([...e,...t])]:jt(Object.create(null),od(e),od(t??{})):t}function m0(e,t){if(!e)return t;if(!t)return e;const n=jt(Object.create(null),e);for(const o in t)n[o]=Ut(e[o],t[o]);return n}function Wp(){return{app:null,config:{isNativeTag:tp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let y0=0;function v0(e,t){return function(o,r=null){je(o)||(o=jt({},o)),r!=null&&!pt(r)&&(r=null);const s=Wp(),i=new WeakSet,a=[];let l=!1;const u=s.app={_uid:y0++,_component:o,_props:r,_container:null,_context:s,_instance:null,version:Q0,get config(){return s.config},set config(c){},use(c,...d){return i.has(c)||(c&&je(c.install)?(i.add(c),c.install(u,...d)):je(c)&&(i.add(c),c(u,...d))),u},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),u},component(c,d){return d?(s.components[c]=d,u):s.components[c]},directive(c,d){return d?(s.directives[c]=d,u):s.directives[c]},mount(c,d,f){if(!l){const h=u._ceVNode||ue(o,r);return h.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),e(h,c,f),l=!0,u._container=c,c.__vue_app__=u,Ua(h.component)}},onUnmount(c){a.push(c)},unmount(){l&&(In(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,d){return s.provides[c]=d,u},runWithContext(c){const d=Fo;Fo=u;try{return c()}finally{Fo=d}}};return u}}let Fo=null;function dn(e,t){if(Ft){let n=Ft.provides;const o=Ft.parent&&Ft.parent.provides;o===n&&(n=Ft.provides=Object.create(o)),n[e]=t}}function Ot(e,t,n=!1){const o=ro();if(o||Fo){let r=Fo?Fo._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&je(t)?t.call(o&&o.proxy):t}}function b0(){return!!(ro()||Fo)}const Yp={},Gp=()=>Object.create(Yp),Zp=e=>Object.getPrototypeOf(e)===Yp;function x0(e,t,n,o=!1){const r={},s=Gp();e.propsDefaults=Object.create(null),Kp(e,t,r,s);for(const i in e.propsOptions[0])i in r||(r[i]=void 0);n?e.props=o?r:Ep(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function _0(e,t,n,o){const{props:r,attrs:s,vnode:{patchFlag:i}}=e,a=it(r),[l]=e.propsOptions;let u=!1;if((o||i>0)&&!(i&16)){if(i&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(Ba(e.emitsOptions,f))continue;const h=t[f];if(l)if(dt(s,f))h!==s[f]&&(s[f]=h,u=!0);else{const p=nn(f);r[p]=tu(l,a,p,h,e,!1)}else h!==s[f]&&(s[f]=h,u=!0)}}}else{Kp(e,t,r,s)&&(u=!0);let c;for(const d in a)(!t||!dt(t,d)&&((c=No(d))===d||!dt(t,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(r[d]=tu(l,a,d,void 0,e,!0)):delete r[d]);if(s!==a)for(const d in s)(!t||!dt(t,d))&&(delete s[d],u=!0)}u&&Ln(e.attrs,"set","")}function Kp(e,t,n,o){const[r,s]=e.propsOptions;let i=!1,a;if(t)for(let l in t){if(us(l))continue;const u=t[l];let c;r&&dt(r,c=nn(l))?!s||!s.includes(c)?n[c]=u:(a||(a={}))[c]=u:Ba(e.emitsOptions,l)||(!(l in o)||u!==o[l])&&(o[l]=u,i=!0)}if(s){const l=it(n),u=a||yt;for(let c=0;c<s.length;c++){const d=s[c];n[d]=tu(r,l,d,u[d],e,!dt(u,d))}}return i}function tu(e,t,n,o,r,s){const i=e[n];if(i!=null){const a=dt(i,"default");if(a&&o===void 0){const l=i.default;if(i.type!==Function&&!i.skipFactory&&je(l)){const{propsDefaults:u}=r;if(n in u)o=u[n];else{const c=Xs(r);o=u[n]=l.call(null,t),c()}}else o=l;r.ce&&r.ce._setProp(n,o)}i[0]&&(s&&!a?o=!1:i[1]&&(o===""||o===No(n))&&(o=!0))}return o}const w0=new WeakMap;function Xp(e,t,n=!1){const o=n?w0:t.propsCache,r=o.get(e);if(r)return r;const s=e.props,i={},a=[];let l=!1;if(!je(e)){const c=d=>{l=!0;const[f,h]=Xp(d,t,!0);jt(i,f),h&&a.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!l)return pt(e)&&o.set(e,ur),ur;if(Ve(s))for(let c=0;c<s.length;c++){const d=nn(s[c]);ad(d)&&(i[d]=yt)}else if(s)for(const c in s){const d=nn(c);if(ad(d)){const f=s[c],h=i[d]=Ve(f)||je(f)?{type:f}:jt({},f),p=h.type;let y=!1,m=!0;if(Ve(p))for(let v=0;v<p.length;++v){const E=p[v],_=je(E)&&E.name;if(_==="Boolean"){y=!0;break}else _==="String"&&(m=!1)}else y=je(p)&&p.name==="Boolean";h[0]=y,h[1]=m,(y||dt(h,"default"))&&a.push(d)}}const u=[i,a];return pt(e)&&o.set(e,u),u}function ad(e){return e[0]!=="$"&&!us(e)}const gc=e=>e==="_"||e==="_ctx"||e==="$stable",mc=e=>Ve(e)?e.map(wn):[wn(e)],k0=(e,t,n)=>{if(t._n)return t;const o=ze((...r)=>mc(t(...r)),n);return o._c=!1,o},Jp=(e,t,n)=>{const o=e._ctx;for(const r in e){if(gc(r))continue;const s=e[r];if(je(s))t[r]=k0(r,s,o);else if(s!=null){const i=mc(s);t[r]=()=>i}}},Qp=(e,t)=>{const n=mc(t);e.slots.default=()=>n},eg=(e,t,n)=>{for(const o in t)(n||!gc(o))&&(e[o]=t[o])},E0=(e,t,n)=>{const o=e.slots=Gp();if(e.vnode.shapeFlag&32){const r=t._;r?(eg(o,t,n),n&&sp(o,"_",r,!0)):Jp(t,o)}else t&&Qp(e,t)},S0=(e,t,n)=>{const{vnode:o,slots:r}=e;let s=!0,i=yt;if(o.shapeFlag&32){const a=t._;a?n&&a===1?s=!1:eg(r,t,n):(s=!t.$stable,Jp(t,r)),i=t}else t&&(Qp(e,t),i={default:1});if(s)for(const a in r)!gc(a)&&i[a]==null&&delete r[a]},Jt=L0;function $0(e){return C0(e)}function C0(e,t){const n=Ra();n.__VUE__=!0;const{insert:o,remove:r,patchProp:s,createElement:i,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=Cn,insertStaticContent:p}=e,y=(T,R,x,k=null,N=null,$=null,U=void 0,te=null,ee=!!R.dynamicChildren)=>{if(T===R)return;T&&!jr(T,R)&&(k=K(T),ge(T,N,$,!0),T=null),R.patchFlag===-2&&(ee=!1,R.dynamicChildren=null);const{type:J,ref:he,shapeFlag:fe}=R;switch(J){case ja:m(T,R,x,k);break;case Jn:v(T,R,x,k);break;case Ci:T==null&&E(R,x,k,U);break;case Pe:S(T,R,x,k,N,$,U,te,ee);break;default:fe&1?Y(T,R,x,k,N,$,U,te,ee):fe&6?z(T,R,x,k,N,$,U,te,ee):(fe&64||fe&128)&&J.process(T,R,x,k,N,$,U,te,ee,_e)}he!=null&&N?hs(he,T&&T.ref,$,R||T,!R):he==null&&T&&T.ref!=null&&hs(T.ref,null,$,T,!0)},m=(T,R,x,k)=>{if(T==null)o(R.el=a(R.children),x,k);else{const N=R.el=T.el;R.children!==T.children&&u(N,R.children)}},v=(T,R,x,k)=>{T==null?o(R.el=l(R.children||""),x,k):R.el=T.el},E=(T,R,x,k)=>{[T.el,T.anchor]=p(T.children,R,x,k,T.el,T.anchor)},_=({el:T,anchor:R},x,k)=>{let N;for(;T&&T!==R;)N=f(T),o(T,x,k),T=N;o(R,x,k)},A=({el:T,anchor:R})=>{let x;for(;T&&T!==R;)x=f(T),r(T),T=x;r(R)},Y=(T,R,x,k,N,$,U,te,ee)=>{R.type==="svg"?U="svg":R.type==="math"&&(U="mathml"),T==null?j(R,x,k,N,$,U,te,ee):L(T,R,N,$,U,te,ee)},j=(T,R,x,k,N,$,U,te)=>{let ee,J;const{props:he,shapeFlag:fe,transition:ke,dirs:$e}=T;if(ee=T.el=i(T.type,$,he&&he.is,he),fe&8?c(ee,T.children):fe&16&&I(T.children,ee,null,k,N,_l(T,$),U,te),$e&&To(T,null,k,"created"),H(ee,T,T.scopeId,U,k),he){for(const Q in he)Q!=="value"&&!us(Q)&&s(ee,Q,null,he[Q],$,k);"value"in he&&s(ee,"value",null,he.value,$),(J=he.onVnodeBeforeMount)&&yn(J,k,T)}$e&&To(T,null,k,"beforeMount");const M=N0(N,ke);M&&ke.beforeEnter(ee),o(ee,R,x),((J=he&&he.onVnodeMounted)||M||$e)&&Jt(()=>{J&&yn(J,k,T),M&&ke.enter(ee),$e&&To(T,null,k,"mounted")},N)},H=(T,R,x,k,N)=>{if(x&&h(T,x),k)for(let $=0;$<k.length;$++)h(T,k[$]);if(N){let $=N.subTree;if(R===$||sg($.type)&&($.ssContent===R||$.ssFallback===R)){const U=N.vnode;H(T,U,U.scopeId,U.slotScopeIds,N.parent)}}},I=(T,R,x,k,N,$,U,te,ee=0)=>{for(let J=ee;J<T.length;J++){const he=T[J]=te?fo(T[J]):wn(T[J]);y(null,he,R,x,k,N,$,U,te)}},L=(T,R,x,k,N,$,U)=>{const te=R.el=T.el;let{patchFlag:ee,dynamicChildren:J,dirs:he}=R;ee|=T.patchFlag&16;const fe=T.props||yt,ke=R.props||yt;let $e;if(x&&Ao(x,!1),($e=ke.onVnodeBeforeUpdate)&&yn($e,x,R,T),he&&To(R,T,x,"beforeUpdate"),x&&Ao(x,!0),(fe.innerHTML&&ke.innerHTML==null||fe.textContent&&ke.textContent==null)&&c(te,""),J?B(T.dynamicChildren,J,te,x,k,_l(R,N),$):U||P(T,R,te,null,x,k,_l(R,N),$,!1),ee>0){if(ee&16)V(te,fe,ke,x,N);else if(ee&2&&fe.class!==ke.class&&s(te,"class",null,ke.class,N),ee&4&&s(te,"style",fe.style,ke.style,N),ee&8){const M=R.dynamicProps;for(let Q=0;Q<M.length;Q++){const W=M[Q],Te=fe[W],Me=ke[W];(Me!==Te||W==="value")&&s(te,W,Te,Me,N,x)}}ee&1&&T.children!==R.children&&c(te,R.children)}else!U&&J==null&&V(te,fe,ke,x,N);(($e=ke.onVnodeUpdated)||he)&&Jt(()=>{$e&&yn($e,x,R,T),he&&To(R,T,x,"updated")},k)},B=(T,R,x,k,N,$,U)=>{for(let te=0;te<R.length;te++){const ee=T[te],J=R[te],he=ee.el&&(ee.type===Pe||!jr(ee,J)||ee.shapeFlag&198)?d(ee.el):x;y(ee,J,he,null,k,N,$,U,!0)}},V=(T,R,x,k,N)=>{if(R!==x){if(R!==yt)for(const $ in R)!us($)&&!($ in x)&&s(T,$,R[$],null,N,k);for(const $ in x){if(us($))continue;const U=x[$],te=R[$];U!==te&&$!=="value"&&s(T,$,te,U,N,k)}"value"in x&&s(T,"value",R.value,x.value,N)}},S=(T,R,x,k,N,$,U,te,ee)=>{const J=R.el=T?T.el:a(""),he=R.anchor=T?T.anchor:a("");let{patchFlag:fe,dynamicChildren:ke,slotScopeIds:$e}=R;$e&&(te=te?te.concat($e):$e),T==null?(o(J,x,k),o(he,x,k),I(R.children||[],x,he,N,$,U,te,ee)):fe>0&&fe&64&&ke&&T.dynamicChildren?(B(T.dynamicChildren,ke,x,N,$,U,te),(R.key!=null||N&&R===N.subTree)&&tg(T,R,!0)):P(T,R,x,he,N,$,U,te,ee)},z=(T,R,x,k,N,$,U,te,ee)=>{R.slotScopeIds=te,T==null?R.shapeFlag&512?N.ctx.activate(R,x,k,U,ee):g(R,x,k,N,$,U,ee):C(T,R,ee)},g=(T,R,x,k,N,$,U)=>{const te=T.component=W0(T,k,N);if(Dp(T)&&(te.ctx.renderer=_e),Y0(te,!1,U),te.asyncDep){if(N&&N.registerDep(te,w,U),!T.el){const ee=te.subTree=ue(Jn);v(null,ee,R,x),T.placeholder=ee.el}}else w(te,T,R,x,N,$,U)},C=(T,R,x)=>{const k=R.component=T.component;if(H0(T,R,x))if(k.asyncDep&&!k.asyncResolved){F(k,R,x);return}else k.next=R,k.update();else R.el=T.el,k.vnode=R},w=(T,R,x,k,N,$,U)=>{const te=()=>{if(T.isMounted){let{next:fe,bu:ke,u:$e,parent:M,vnode:Q}=T;{const q=ng(T);if(q){fe&&(fe.el=Q.el,F(T,fe,U)),q.asyncDep.then(()=>{T.isUnmounted||te()});return}}let W=fe,Te;Ao(T,!1),fe?(fe.el=Q.el,F(T,fe,U)):fe=Q,ke&&$i(ke),(Te=fe.props&&fe.props.onVnodeBeforeUpdate)&&yn(Te,M,fe,Q),Ao(T,!0);const Me=ud(T),He=T.subTree;T.subTree=Me,y(He,Me,d(He.el),K(He),T,N,$),fe.el=Me.el,W===null&&F0(T,Me.el),$e&&Jt($e,N),(Te=fe.props&&fe.props.onVnodeUpdated)&&Jt(()=>yn(Te,M,fe,Q),N)}else{let fe;const{el:ke,props:$e}=R,{bm:M,m:Q,parent:W,root:Te,type:Me}=T,He=fr(R);Ao(T,!1),M&&$i(M),!He&&(fe=$e&&$e.onVnodeBeforeMount)&&yn(fe,W,R),Ao(T,!0);{Te.ce&&Te.ce._def.shadowRoot!==!1&&Te.ce._injectChildStyle(Me);const q=T.subTree=ud(T);y(null,q,x,k,T,N,$),R.el=q.el}if(Q&&Jt(Q,N),!He&&(fe=$e&&$e.onVnodeMounted)){const q=R;Jt(()=>yn(fe,W,q),N)}(R.shapeFlag&256||W&&fr(W.vnode)&&W.vnode.shapeFlag&256)&&T.a&&Jt(T.a,N),T.isMounted=!0,R=x=k=null}};T.scope.on();const ee=T.effect=new cp(te);T.scope.off();const J=T.update=ee.run.bind(ee),he=T.job=ee.runIfDirty.bind(ee);he.i=T,he.id=T.uid,ee.scheduler=()=>fc(he),Ao(T,!0),J()},F=(T,R,x)=>{R.component=T;const k=T.vnode.props;T.vnode=R,T.next=null,_0(T,R.props,k,x),S0(T,R.children,x),Kn(),ed(T),Xn()},P=(T,R,x,k,N,$,U,te,ee=!1)=>{const J=T&&T.children,he=T?T.shapeFlag:0,fe=R.children,{patchFlag:ke,shapeFlag:$e}=R;if(ke>0){if(ke&128){G(J,fe,x,k,N,$,U,te,ee);return}else if(ke&256){X(J,fe,x,k,N,$,U,te,ee);return}}$e&8?(he&16&&xe(J,N,$),fe!==J&&c(x,fe)):he&16?$e&16?G(J,fe,x,k,N,$,U,te,ee):xe(J,N,$,!0):(he&8&&c(x,""),$e&16&&I(fe,x,k,N,$,U,te,ee))},X=(T,R,x,k,N,$,U,te,ee)=>{T=T||ur,R=R||ur;const J=T.length,he=R.length,fe=Math.min(J,he);let ke;for(ke=0;ke<fe;ke++){const $e=R[ke]=ee?fo(R[ke]):wn(R[ke]);y(T[ke],$e,x,null,N,$,U,te,ee)}J>he?xe(T,N,$,!0,!1,fe):I(R,x,k,N,$,U,te,ee,fe)},G=(T,R,x,k,N,$,U,te,ee)=>{let J=0;const he=R.length;let fe=T.length-1,ke=he-1;for(;J<=fe&&J<=ke;){const $e=T[J],M=R[J]=ee?fo(R[J]):wn(R[J]);if(jr($e,M))y($e,M,x,null,N,$,U,te,ee);else break;J++}for(;J<=fe&&J<=ke;){const $e=T[fe],M=R[ke]=ee?fo(R[ke]):wn(R[ke]);if(jr($e,M))y($e,M,x,null,N,$,U,te,ee);else break;fe--,ke--}if(J>fe){if(J<=ke){const $e=ke+1,M=$e<he?R[$e].el:k;for(;J<=ke;)y(null,R[J]=ee?fo(R[J]):wn(R[J]),x,M,N,$,U,te,ee),J++}}else if(J>ke)for(;J<=fe;)ge(T[J],N,$,!0),J++;else{const $e=J,M=J,Q=new Map;for(J=M;J<=ke;J++){const ae=R[J]=ee?fo(R[J]):wn(R[J]);ae.key!=null&&Q.set(ae.key,J)}let W,Te=0;const Me=ke-M+1;let He=!1,q=0;const re=new Array(Me);for(J=0;J<Me;J++)re[J]=0;for(J=$e;J<=fe;J++){const ae=T[J];if(Te>=Me){ge(ae,N,$,!0);continue}let Se;if(ae.key!=null)Se=Q.get(ae.key);else for(W=M;W<=ke;W++)if(re[W-M]===0&&jr(ae,R[W])){Se=W;break}Se===void 0?ge(ae,N,$,!0):(re[Se-M]=J+1,Se>=q?q=Se:He=!0,y(ae,R[Se],x,null,N,$,U,te,ee),Te++)}const me=He?T0(re):ur;for(W=me.length-1,J=Me-1;J>=0;J--){const ae=M+J,Se=R[ae],Ae=R[ae+1],ve=ae+1<he?Ae.el||Ae.placeholder:k;re[J]===0?y(null,Se,x,ve,N,$,U,te,ee):He&&(W<0||J!==me[W]?oe(Se,x,ve,2):W--)}}},oe=(T,R,x,k,N=null)=>{const{el:$,type:U,transition:te,children:ee,shapeFlag:J}=T;if(J&6){oe(T.component.subTree,R,x,k);return}if(J&128){T.suspense.move(R,x,k);return}if(J&64){U.move(T,R,x,_e);return}if(U===Pe){o($,R,x);for(let fe=0;fe<ee.length;fe++)oe(ee[fe],R,x,k);o(T.anchor,R,x);return}if(U===Ci){_(T,R,x);return}if(k!==2&&J&1&&te)if(k===0)te.beforeEnter($),o($,R,x),Jt(()=>te.enter($),N);else{const{leave:fe,delayLeave:ke,afterLeave:$e}=te,M=()=>{T.ctx.isUnmounted?r($):o($,R,x)},Q=()=>{$._isLeaving&&$[e0](!0),fe($,()=>{M(),$e&&$e()})};ke?ke($,M,Q):Q()}else o($,R,x)},ge=(T,R,x,k=!1,N=!1)=>{const{type:$,props:U,ref:te,children:ee,dynamicChildren:J,shapeFlag:he,patchFlag:fe,dirs:ke,cacheIndex:$e}=T;if(fe===-2&&(N=!1),te!=null&&(Kn(),hs(te,null,x,T,!0),Xn()),$e!=null&&(R.renderCache[$e]=void 0),he&256){R.ctx.deactivate(T);return}const M=he&1&&ke,Q=!fr(T);let W;if(Q&&(W=U&&U.onVnodeBeforeUnmount)&&yn(W,R,T),he&6)pe(T.component,x,k);else{if(he&128){T.suspense.unmount(x,k);return}M&&To(T,null,R,"beforeUnmount"),he&64?T.type.remove(T,R,x,_e,k):J&&!J.hasOnce&&($!==Pe||fe>0&&fe&64)?xe(J,R,x,!1,!0):($===Pe&&fe&384||!N&&he&16)&&xe(ee,R,x),k&&Z(T)}(Q&&(W=U&&U.onVnodeUnmounted)||M)&&Jt(()=>{W&&yn(W,R,T),M&&To(T,null,R,"unmounted")},x)},Z=T=>{const{type:R,el:x,anchor:k,transition:N}=T;if(R===Pe){ce(x,k);return}if(R===Ci){A(T);return}const $=()=>{r(x),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(T.shapeFlag&1&&N&&!N.persisted){const{leave:U,delayLeave:te}=N,ee=()=>U(x,$);te?te(T.el,$,ee):ee()}else $()},ce=(T,R)=>{let x;for(;T!==R;)x=f(T),r(T),T=x;r(R)},pe=(T,R,x)=>{const{bum:k,scope:N,job:$,subTree:U,um:te,m:ee,a:J}=T;ld(ee),ld(J),k&&$i(k),N.stop(),$&&($.flags|=8,ge(U,T,R,x)),te&&Jt(te,R),Jt(()=>{T.isUnmounted=!0},R)},xe=(T,R,x,k=!1,N=!1,$=0)=>{for(let U=$;U<T.length;U++)ge(T[U],R,x,k,N)},K=T=>{if(T.shapeFlag&6)return K(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const R=f(T.anchor||T.el),x=R&&R[Jv];return x?f(x):R};let le=!1;const ie=(T,R,x)=>{T==null?R._vnode&&ge(R._vnode,null,null,!0):y(R._vnode||null,T,R,null,null,null,x),R._vnode=T,le||(le=!0,ed(),Ip(),le=!1)},_e={p:y,um:ge,m:oe,r:Z,mt:g,mc:I,pc:P,pbc:B,n:K,o:e};return{render:ie,hydrate:void 0,createApp:v0(ie)}}function _l({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ao({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function N0(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function tg(e,t,n=!1){const o=e.children,r=t.children;if(Ve(o)&&Ve(r))for(let s=0;s<o.length;s++){const i=o[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=fo(r[s]),a.el=i.el),!n&&a.patchFlag!==-2&&tg(i,a)),a.type===ja&&a.patchFlag!==-1&&(a.el=i.el),a.type===Jn&&!a.el&&(a.el=i.el)}}function T0(e){const t=e.slice(),n=[0];let o,r,s,i,a;const l=e.length;for(o=0;o<l;o++){const u=e[o];if(u!==0){if(r=n[n.length-1],e[r]<u){t[o]=r,n.push(o);continue}for(s=0,i=n.length-1;s<i;)a=s+i>>1,e[n[a]]<u?s=a+1:i=a;u<e[n[s]]&&(s>0&&(t[o]=n[s-1]),n[s]=o)}}for(s=n.length,i=n[s-1];s-- >0;)n[s]=i,i=t[i];return n}function ng(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ng(t)}function ld(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const A0=Symbol.for("v-scx"),I0=()=>Ot(A0);function O0(e,t){return yc(e,null,t)}function Fe(e,t,n){return yc(e,t,n)}function yc(e,t,n=yt){const{immediate:o,deep:r,flush:s,once:i}=n,a=jt({},n),l=t&&o||!t&&s!=="post";let u;if(Ns){if(s==="sync"){const h=I0();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Cn,h.resume=Cn,h.pause=Cn,h}}const c=Ft;a.call=(h,p,y)=>In(h,c,p,y);let d=!1;s==="post"?a.scheduler=h=>{Jt(h,c&&c.suspense)}:s!=="sync"&&(d=!0,a.scheduler=(h,p)=>{p?h():fc(h)}),a.augmentJob=h=>{t&&(h.flags|=4),d&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const f=Gv(e,t,a);return Ns&&(u?u.push(f):l&&f()),f}function R0(e,t,n){const o=this.proxy,r=kt(e)?e.includes(".")?og(o,e):()=>o[e]:e.bind(o,o);let s;je(t)?s=t:(s=t.handler,n=t);const i=Xs(this),a=yc(r,s.bind(o),n);return i(),a}function og(e,t){const n=t.split(".");return()=>{let o=e;for(let r=0;r<n.length&&o;r++)o=o[n[r]];return o}}const M0=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${nn(t)}Modifiers`]||e[`${No(t)}Modifiers`];function D0(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||yt;let r=n;const s=t.startsWith("update:"),i=s&&M0(o,t.slice(7));i&&(i.trim&&(r=n.map(c=>kt(c)?c.trim():c)),i.number&&(r=n.map(Wi)));let a,l=o[a=gl(t)]||o[a=gl(nn(t))];!l&&s&&(l=o[a=gl(No(t))]),l&&In(l,e,6,r);const u=o[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,In(u,e,6,r)}}const P0=new WeakMap;function rg(e,t,n=!1){const o=n?P0:t.emitsCache,r=o.get(e);if(r!==void 0)return r;const s=e.emits;let i={},a=!1;if(!je(e)){const l=u=>{const c=rg(u,t,!0);c&&(a=!0,jt(i,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(pt(e)&&o.set(e,null),null):(Ve(s)?s.forEach(l=>i[l]=null):jt(i,s),pt(e)&&o.set(e,i),i)}function Ba(e,t){return!e||!Aa(t)?!1:(t=t.slice(2).replace(/Once$/,""),dt(e,t[0].toLowerCase()+t.slice(1))||dt(e,No(t))||dt(e,t))}function ud(e){const{type:t,vnode:n,proxy:o,withProxy:r,propsOptions:[s],slots:i,attrs:a,emit:l,render:u,renderCache:c,props:d,data:f,setupState:h,ctx:p,inheritAttrs:y}=e,m=Ji(e);let v,E;try{if(n.shapeFlag&4){const A=r||o,Y=A;v=wn(u.call(Y,A,c,d,h,f,p)),E=a}else{const A=t;v=wn(A.length>1?A(d,{attrs:a,slots:i,emit:l}):A(d,null)),E=t.props?a:V0(a)}}catch(A){gs.length=0,za(A,e,1),v=ue(Jn)}let _=v;if(E&&y!==!1){const A=Object.keys(E),{shapeFlag:Y}=_;A.length&&Y&7&&(s&&A.some(nc)&&(E=z0(E,s)),_=br(_,E,!1,!0))}return n.dirs&&(_=br(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&hc(_,n.transition),v=_,Ji(m),v}const V0=e=>{let t;for(const n in e)(n==="class"||n==="style"||Aa(n))&&((t||(t={}))[n]=e[n]);return t},z0=(e,t)=>{const n={};for(const o in e)(!nc(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function H0(e,t,n){const{props:o,children:r,component:s}=e,{props:i,children:a,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return o?cd(o,i,u):!!i;if(l&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(i[f]!==o[f]&&!Ba(u,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:o===i?!1:o?i?cd(o,i,u):!0:!!i;return!1}function cd(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let r=0;r<o.length;r++){const s=o[r];if(t[s]!==e[s]&&!Ba(n,s))return!0}return!1}function F0({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const sg=e=>e.__isSuspense;function L0(e,t){t&&t.pendingBranch?Ve(e)?t.effects.push(...e):t.effects.push(e):Xv(e)}const Pe=Symbol.for("v-fgt"),ja=Symbol.for("v-txt"),Jn=Symbol.for("v-cmt"),Ci=Symbol.for("v-stc"),gs=[];let Wt=null;function O(e=!1){gs.push(Wt=e?null:[])}function B0(){gs.pop(),Wt=gs[gs.length-1]||null}let vr=1;function ta(e,t=!1){vr+=e,e<0&&Wt&&t&&(Wt.hasOnce=!0)}function ig(e){return e.dynamicChildren=vr>0?Wt||ur:null,B0(),vr>0&&Wt&&Wt.push(e),e}function D(e,t,n,o,r,s){return ig(b(e,t,n,o,r,s,!0))}function ut(e,t,n,o,r){return ig(ue(e,t,n,o,r,!0))}function $s(e){return e?e.__v_isVNode===!0:!1}function jr(e,t){return e.type===t.type&&e.key===t.key}const ag=({key:e})=>e??null,Ni=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?kt(e)||xt(e)||je(e)?{i:Vt,r:e,k:t,f:!!n}:e:null);function b(e,t=null,n=null,o=0,r=null,s=e===Pe?0:1,i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ag(t),ref:t&&Ni(t),scopeId:Rp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:o,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Vt};return a?(vc(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=kt(n)?8:16),vr>0&&!i&&Wt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Wt.push(l),l}const ue=j0;function j0(e,t=null,n=null,o=0,r=null,s=!1){if((!e||e===Hp)&&(e=Jn),$s(e)){const a=br(e,t,!0);return n&&vc(a,n),vr>0&&!s&&Wt&&(a.shapeFlag&6?Wt[Wt.indexOf(e)]=a:Wt.push(a)),a.patchFlag=-2,a}if(X0(e)&&(e=e.__vccOpts),t){t=Ke(t);let{class:a,style:l}=t;a&&!kt(a)&&(t.class=qe(a)),pt(l)&&(dc(l)&&!Ve(l)&&(l=jt({},l)),t.style=vt(l))}const i=kt(e)?1:sg(e)?128:Qv(e)?64:pt(e)?4:je(e)?2:0;return b(e,t,n,o,r,i,s,!0)}function Ke(e){return e?dc(e)||Zp(e)?jt({},e):e:null}function br(e,t,n=!1,o=!1){const{props:r,ref:s,patchFlag:i,children:a,transition:l}=e,u=t?Cs(r||{},t):r,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&ag(u),ref:t&&t.ref?n&&s?Ve(s)?s.concat(Ni(t)):[s,Ni(t)]:Ni(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Pe?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&br(e.ssContent),ssFallback:e.ssFallback&&br(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&o&&hc(c,l.clone(c)),c}function st(e=" ",t=0){return ue(ja,null,e,t)}function Qn(e,t){const n=ue(Ci,null,e);return n.staticCount=t,n}function we(e="",t=!1){return t?(O(),ut(Jn,null,e)):ue(Jn,null,e)}function wn(e){return e==null||typeof e=="boolean"?ue(Jn):Ve(e)?ue(Pe,null,e.slice()):$s(e)?fo(e):ue(ja,null,String(e))}function fo(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:br(e)}function vc(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(Ve(t))n=16;else if(typeof t=="object")if(o&65){const r=t.default;r&&(r._c&&(r._d=!1),vc(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!Zp(t)?t._ctx=Vt:r===3&&Vt&&(Vt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else je(t)?(t={default:t,_ctx:Vt},n=32):(t=String(t),o&64?(n=16,t=[st(t)]):n=8);e.children=t,e.shapeFlag|=n}function Cs(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(r==="class")t.class!==o.class&&(t.class=qe([t.class,o.class]));else if(r==="style")t.style=vt([t.style,o.style]);else if(Aa(r)){const s=t[r],i=o[r];i&&s!==i&&!(Ve(s)&&s.includes(i))&&(t[r]=s?[].concat(s,i):i)}else r!==""&&(t[r]=o[r])}return t}function yn(e,t,n,o=null){In(e,t,7,[n,o])}const U0=Wp();let q0=0;function W0(e,t,n){const o=e.type,r=(t?t.appContext:e.appContext)||U0,s={uid:q0++,vnode:e,type:o,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new up(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Xp(o,r),emitsOptions:rg(o,r),emit:null,emitted:null,propsDefaults:yt,inheritAttrs:o.inheritAttrs,ctx:yt,data:yt,props:yt,attrs:yt,slots:yt,refs:yt,setupState:yt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=D0.bind(null,s),e.ce&&e.ce(s),s}let Ft=null;const ro=()=>Ft||Vt;let na,nu;{const e=Ra(),t=(n,o)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(o),s=>{r.length>1?r.forEach(i=>i(s)):r[0](s)}};na=t("__VUE_INSTANCE_SETTERS__",n=>Ft=n),nu=t("__VUE_SSR_SETTERS__",n=>Ns=n)}const Xs=e=>{const t=Ft;return na(e),e.scope.on(),()=>{e.scope.off(),na(t)}},dd=()=>{Ft&&Ft.scope.off(),na(null)};function lg(e){return e.vnode.shapeFlag&4}let Ns=!1;function Y0(e,t=!1,n=!1){t&&nu(t);const{props:o,children:r}=e.vnode,s=lg(e);x0(e,o,s,t),E0(e,r,n||t);const i=s?G0(e,t):void 0;return t&&nu(!1),i}function G0(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,c0);const{setup:o}=n;if(o){Kn();const r=e.setupContext=o.length>1?cg(e):null,s=Xs(e),i=Ks(o,e,0,[e.props,r]),a=np(i);if(Xn(),s(),(a||e.sp)&&!fr(e)&&Mp(e),a){if(i.then(dd,dd),t)return i.then(l=>{fd(e,l)}).catch(l=>{za(l,e,0)});e.asyncDep=i}else fd(e,i)}else ug(e)}function fd(e,t,n){je(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:pt(t)&&(e.setupState=$p(t)),ug(e)}function ug(e,t,n){const o=e.type;e.render||(e.render=o.render||Cn);{const r=Xs(e);Kn();try{f0(e)}finally{Xn(),r()}}}const Z0={get(e,t){return Ht(e,"get",""),e[t]}};function cg(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Z0),slots:e.slots,emit:e.emit,expose:t}}function Ua(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy($p(Ho(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ps)return ps[n](e)},has(t,n){return n in t||n in ps}})):e.proxy}function K0(e,t=!0){return je(e)?e.displayName||e.name:e.name||t&&e.__name}function X0(e){return je(e)&&"__vccOpts"in e}const ne=(e,t)=>Wv(e,t,Ns);function rt(e,t,n){try{ta(-1);const o=arguments.length;return o===2?pt(t)&&!Ve(t)?$s(t)?ue(e,null,[t]):ue(e,t):ue(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&$s(n)&&(n=[n]),ue(e,t,n))}finally{ta(1)}}function J0(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let o=0;o<n.length;o++)if(Gn(n[o],t[o]))return!1;return vr>0&&Wt&&Wt.push(e),!0}const Q0="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ou;const hd=typeof window<"u"&&window.trustedTypes;if(hd)try{ou=hd.createPolicy("vue",{createHTML:e=>e})}catch{}const dg=ou?e=>ou.createHTML(e):e=>e,eb="http://www.w3.org/2000/svg",tb="http://www.w3.org/1998/Math/MathML",Fn=typeof document<"u"?document:null,pd=Fn&&Fn.createElement("template"),nb={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const r=t==="svg"?Fn.createElementNS(eb,e):t==="mathml"?Fn.createElementNS(tb,e):n?Fn.createElement(e,{is:n}):Fn.createElement(e);return e==="select"&&o&&o.multiple!=null&&r.setAttribute("multiple",o.multiple),r},createText:e=>Fn.createTextNode(e),createComment:e=>Fn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Fn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,r,s){const i=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{pd.innerHTML=dg(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const a=pd.content;if(o==="svg"||o==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},ob=Symbol("_vtc");function rb(e,t,n){const o=e[ob];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const oa=Symbol("_vod"),fg=Symbol("_vsh"),sb={name:"show",beforeMount(e,{value:t},{transition:n}){e[oa]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Ur(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),Ur(e,!0),o.enter(e)):o.leave(e,()=>{Ur(e,!1)}):Ur(e,t))},beforeUnmount(e,{value:t}){Ur(e,t)}};function Ur(e,t){e.style.display=t?e[oa]:"none",e[fg]=!t}const ib=Symbol(""),ab=/(?:^|;)\s*display\s*:/;function lb(e,t,n){const o=e.style,r=kt(n);let s=!1;if(n&&!r){if(t)if(kt(t))for(const i of t.split(";")){const a=i.slice(0,i.indexOf(":")).trim();n[a]==null&&Ti(o,a,"")}else for(const i in t)n[i]==null&&Ti(o,i,"");for(const i in n)i==="display"&&(s=!0),Ti(o,i,n[i])}else if(r){if(t!==n){const i=o[ib];i&&(n+=";"+i),o.cssText=n,s=ab.test(n)}}else t&&e.removeAttribute("style");oa in e&&(e[oa]=s?o.display:"",e[fg]&&(o.display="none"))}const gd=/\s*!important$/;function Ti(e,t,n){if(Ve(n))n.forEach(o=>Ti(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=ub(e,t);gd.test(n)?e.setProperty(No(o),n.replace(gd,""),"important"):e[o]=n}}const md=["Webkit","Moz","ms"],wl={};function ub(e,t){const n=wl[t];if(n)return n;let o=nn(t);if(o!=="filter"&&o in e)return wl[t]=o;o=Oa(o);for(let r=0;r<md.length;r++){const s=md[r]+o;if(s in e)return wl[t]=s}return t}const yd="http://www.w3.org/1999/xlink";function vd(e,t,n,o,r,s=vv(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(yd,t.slice(6,t.length)):e.setAttributeNS(yd,t,n):n==null||s&&!ip(n)?e.removeAttribute(t):e.setAttribute(t,s?"":fn(n)?String(n):n)}function bd(e,t,n,o,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?dg(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let i=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=ip(n):n==null&&a==="string"?(n="",i=!0):a==="number"&&(n=0,i=!0)}try{e[t]=n}catch{}i&&e.removeAttribute(r||t)}function vo(e,t,n,o){e.addEventListener(t,n,o)}function cb(e,t,n,o){e.removeEventListener(t,n,o)}const xd=Symbol("_vei");function db(e,t,n,o,r=null){const s=e[xd]||(e[xd]={}),i=s[t];if(o&&i)i.value=o;else{const[a,l]=fb(t);if(o){const u=s[t]=gb(o,r);vo(e,a,u,l)}else i&&(cb(e,a,i,l),s[t]=void 0)}}const _d=/(?:Once|Passive|Capture)$/;function fb(e){let t;if(_d.test(e)){t={};let o;for(;o=e.match(_d);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):No(e.slice(2)),t]}let kl=0;const hb=Promise.resolve(),pb=()=>kl||(hb.then(()=>kl=0),kl=Date.now());function gb(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;In(mb(o,n.value),t,5,[o])};return n.value=e,n.attached=pb(),n}function mb(e,t){if(Ve(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>r=>!r._stopped&&o&&o(r))}else return t}const wd=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,yb=(e,t,n,o,r,s)=>{const i=r==="svg";t==="class"?rb(e,o,i):t==="style"?lb(e,n,o):Aa(t)?nc(t)||db(e,t,n,o,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):vb(e,t,o,i))?(bd(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&vd(e,t,o,i,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!kt(o))?bd(e,nn(t),o,s,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),vd(e,t,o,i))};function vb(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&wd(t)&&je(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return wd(t)&&kt(n)?!1:t in e}const xr=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ve(t)?n=>$i(t,n):t};function bb(e){e.target.composing=!0}function kd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Zn=Symbol("_assign"),mt={created(e,{modifiers:{lazy:t,trim:n,number:o}},r){e[Zn]=xr(r);const s=o||r.props&&r.props.type==="number";vo(e,t?"change":"input",i=>{if(i.target.composing)return;let a=e.value;n&&(a=a.trim()),s&&(a=Wi(a)),e[Zn](a)}),n&&vo(e,"change",()=>{e.value=e.value.trim()}),t||(vo(e,"compositionstart",bb),vo(e,"compositionend",kd),vo(e,"change",kd))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:r,number:s}},i){if(e[Zn]=xr(i),e.composing)return;const a=(s||e.type==="number")&&!/^0\d/.test(e.value)?Wi(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||r&&e.value.trim()===l)||(e.value=l))}},ms={deep:!0,created(e,t,n){e[Zn]=xr(n),vo(e,"change",()=>{const o=e._modelValue,r=Ts(e),s=e.checked,i=e[Zn];if(Ve(o)){const a=sc(o,r),l=a!==-1;if(s&&!l)i(o.concat(r));else if(!s&&l){const u=[...o];u.splice(a,1),i(u)}}else if(Vr(o)){const a=new Set(o);s?a.add(r):a.delete(r),i(a)}else i(hg(e,s))})},mounted:Ed,beforeUpdate(e,t,n){e[Zn]=xr(n),Ed(e,t,n)}};function Ed(e,{value:t,oldValue:n},o){e._modelValue=t;let r;if(Ve(t))r=sc(t,o.props.value)>-1;else if(Vr(t))r=t.has(o.props.value);else{if(t===n)return;r=Zs(t,hg(e,!0))}e.checked!==r&&(e.checked=r)}const rn={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const r=Vr(t);vo(e,"change",()=>{const s=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>n?Wi(Ts(i)):Ts(i));e[Zn](e.multiple?r?new Set(s):s:s[0]),e._assigning=!0,Bt(()=>{e._assigning=!1})}),e[Zn]=xr(o)},mounted(e,{value:t}){Sd(e,t)},beforeUpdate(e,t,n){e[Zn]=xr(n)},updated(e,{value:t}){e._assigning||Sd(e,t)}};function Sd(e,t){const n=e.multiple,o=Ve(t);if(!(n&&!o&&!Vr(t))){for(let r=0,s=e.options.length;r<s;r++){const i=e.options[r],a=Ts(i);if(n)if(o){const l=typeof a;l==="string"||l==="number"?i.selected=t.some(u=>String(u)===String(a)):i.selected=sc(t,a)>-1}else i.selected=t.has(a);else if(Zs(Ts(i),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ts(e){return"_value"in e?e._value:e.value}function hg(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const xb=["ctrl","shift","alt","meta"],_b={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>xb.some(n=>e[`${n}Key`]&&!t.includes(n))},Un=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=((r,...s)=>{for(let i=0;i<t.length;i++){const a=_b[t[i]];if(a&&a(r,t))return}return e(r,...s)}))},wb={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},lr=(e,t)=>{const n=e._withKeys||(e._withKeys={}),o=t.join(".");return n[o]||(n[o]=(r=>{if(!("key"in r))return;const s=No(r.key);if(t.some(i=>i===s||wb[i]===s))return e(r)}))},kb=jt({patchProp:yb},nb);let $d;function Eb(){return $d||($d=$0(kb))}const Sb=((...e)=>{const t=Eb().createApp(...e),{mount:n}=t;return t.mount=o=>{const r=Cb(o);if(!r)return;const s=t._component;!je(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const i=n(r,!1,$b(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),i},t});function $b(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Cb(e){return kt(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let pg;const qa=e=>pg=e,gg=Symbol();function ru(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ys;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ys||(ys={}));function Nb(){const e=Ma(!0),t=e.run(()=>de({}));let n=[],o=[];const r=Ho({install(s){qa(r),r._a=s,s.provide(gg,r),s.config.globalProperties.$pinia=r,o.forEach(i=>n.push(i)),o=[]},use(s){return this._a?n.push(s):o.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}const mg=()=>{};function Cd(e,t,n,o=mg){e.push(t);const r=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),o())};return!n&&Da()&&cs(r),r}function nr(e,...t){e.slice().forEach(n=>{n(...t)})}const Tb=e=>e(),Nd=Symbol(),El=Symbol();function su(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,o)=>e.set(o,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const o=t[n],r=e[n];ru(r)&&ru(o)&&e.hasOwnProperty(n)&&!xt(o)&&!_o(o)?e[n]=su(r,o):e[n]=o}return e}const Ab=Symbol();function Ib(e){return!ru(e)||!e.hasOwnProperty(Ab)}const{assign:ao}=Object;function Ob(e){return!!(xt(e)&&e.effect)}function Rb(e,t,n,o){const{state:r,actions:s,getters:i}=t,a=n.state.value[e];let l;function u(){a||(n.state.value[e]=r?r():{});const c=Cp(n.state.value[e]);return ao(c,s,Object.keys(i||{}).reduce((d,f)=>(d[f]=Ho(ne(()=>{qa(n);const h=n._s.get(e);return i[f].call(h,h)})),d),{}))}return l=yg(e,u,t,n,o,!0),l}function yg(e,t,n={},o,r,s){let i;const a=ao({actions:{}},n),l={deep:!0};let u,c,d=[],f=[],h;const p=o.state.value[e];!s&&!p&&(o.state.value[e]={}),de({});let y;function m(I){let L;u=c=!1,typeof I=="function"?(I(o.state.value[e]),L={type:ys.patchFunction,storeId:e,events:h}):(su(o.state.value[e],I),L={type:ys.patchObject,payload:I,storeId:e,events:h});const B=y=Symbol();Bt().then(()=>{y===B&&(u=!0)}),c=!0,nr(d,L,o.state.value[e])}const v=s?function(){const{state:L}=n,B=L?L():{};this.$patch(V=>{ao(V,B)})}:mg;function E(){i.stop(),d=[],f=[],o._s.delete(e)}const _=(I,L="")=>{if(Nd in I)return I[El]=L,I;const B=function(){qa(o);const V=Array.from(arguments),S=[],z=[];function g(F){S.push(F)}function C(F){z.push(F)}nr(f,{args:V,name:B[El],store:Y,after:g,onError:C});let w;try{w=I.apply(this&&this.$id===e?this:Y,V)}catch(F){throw nr(z,F),F}return w instanceof Promise?w.then(F=>(nr(S,F),F)).catch(F=>(nr(z,F),Promise.reject(F))):(nr(S,w),w)};return B[Nd]=!0,B[El]=L,B},A={_p:o,$id:e,$onAction:Cd.bind(null,f),$patch:m,$reset:v,$subscribe(I,L={}){const B=Cd(d,I,L.detached,()=>V()),V=i.run(()=>Fe(()=>o.state.value[e],S=>{(L.flush==="sync"?c:u)&&I({storeId:e,type:ys.direct,events:h},S)},ao({},l,L)));return B},$dispose:E},Y=zr(A);o._s.set(e,Y);const H=(o._a&&o._a.runWithContext||Tb)(()=>o._e.run(()=>(i=Ma()).run(()=>t({action:_}))));for(const I in H){const L=H[I];if(xt(L)&&!Ob(L)||_o(L))s||(p&&Ib(L)&&(xt(L)?L.value=p[I]:su(L,p[I])),o.state.value[e][I]=L);else if(typeof L=="function"){const B=_(L,I);H[I]=B,a.actions[I]=L}}return ao(Y,H),ao(it(Y),H),Object.defineProperty(Y,"$state",{get:()=>o.state.value[e],set:I=>{m(L=>{ao(L,I)})}}),o._p.forEach(I=>{ao(Y,i.run(()=>I({store:Y,app:o._a,pinia:o,options:a})))}),p&&s&&n.hydrate&&n.hydrate(Y.$state,p),u=!0,c=!0,Y}/*! #__NO_SIDE_EFFECTS__ */function vg(e,t,n){let o,r;const s=typeof t=="function";typeof e=="string"?(o=e,r=s?n:t):(r=e,o=e.id);function i(a,l){const u=b0();return a=a||(u?Ot(gg,null):null),a&&qa(a),a=pg,a._s.has(o)||(s?yg(o,t,r,a):Rb(o,r,a)),a._s.get(o)}return i.$id=o,i}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ir=typeof document<"u";function bg(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Mb(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&bg(e.default)}const ct=Object.assign;function Sl(e,t){const n={};for(const o in t){const r=t[o];n[o]=hn(r)?r.map(e):e(r)}return n}const vs=()=>{},hn=Array.isArray,xg=/#/g,Db=/&/g,Pb=/\//g,Vb=/=/g,zb=/\?/g,_g=/\+/g,Hb=/%5B/g,Fb=/%5D/g,wg=/%5E/g,Lb=/%60/g,kg=/%7B/g,Bb=/%7C/g,Eg=/%7D/g,jb=/%20/g;function bc(e){return encodeURI(""+e).replace(Bb,"|").replace(Hb,"[").replace(Fb,"]")}function Ub(e){return bc(e).replace(kg,"{").replace(Eg,"}").replace(wg,"^")}function iu(e){return bc(e).replace(_g,"%2B").replace(jb,"+").replace(xg,"%23").replace(Db,"%26").replace(Lb,"`").replace(kg,"{").replace(Eg,"}").replace(wg,"^")}function qb(e){return iu(e).replace(Vb,"%3D")}function Wb(e){return bc(e).replace(xg,"%23").replace(zb,"%3F")}function Yb(e){return e==null?"":Wb(e).replace(Pb,"%2F")}function As(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Gb=/\/$/,Zb=e=>e.replace(Gb,"");function $l(e,t,n="/"){let o,r={},s="",i="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(o=t.slice(0,l),s=t.slice(l+1,a>-1?a:t.length),r=e(s)),a>-1&&(o=o||t.slice(0,a),i=t.slice(a,t.length)),o=Qb(o??t,n),{fullPath:o+(s&&"?")+s+i,path:o,query:r,hash:As(i)}}function Kb(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Td(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Xb(e,t,n){const o=t.matched.length-1,r=n.matched.length-1;return o>-1&&o===r&&_r(t.matched[o],n.matched[r])&&Sg(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function _r(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Sg(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Jb(e[n],t[n]))return!1;return!0}function Jb(e,t){return hn(e)?Ad(e,t):hn(t)?Ad(t,e):e===t}function Ad(e,t){return hn(t)?e.length===t.length&&e.every((n,o)=>n===t[o]):e.length===1&&e[0]===t}function Qb(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),o=e.split("/"),r=o[o.length-1];(r===".."||r===".")&&o.push("");let s=n.length-1,i,a;for(i=0;i<o.length;i++)if(a=o[i],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+o.slice(i).join("/")}const so={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Is;(function(e){e.pop="pop",e.push="push"})(Is||(Is={}));var bs;(function(e){e.back="back",e.forward="forward",e.unknown=""})(bs||(bs={}));function ex(e){if(!e)if(ir){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Zb(e)}const tx=/^[^#]+#/;function nx(e,t){return e.replace(tx,"#")+t}function ox(e,t){const n=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:t.behavior,left:o.left-n.left-(t.left||0),top:o.top-n.top-(t.top||0)}}const Wa=()=>({left:window.scrollX,top:window.scrollY});function rx(e){let t;if("el"in e){const n=e.el,o=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=ox(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Id(e,t){return(history.state?history.state.position-t:-1)+e}const au=new Map;function sx(e,t){au.set(e,t)}function ix(e){const t=au.get(e);return au.delete(e),t}let ax=()=>location.protocol+"//"+location.host;function $g(e,t){const{pathname:n,search:o,hash:r}=t,s=e.indexOf("#");if(s>-1){let a=r.includes(e.slice(s))?e.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),Td(l,"")}return Td(n,e)+o+r}function lx(e,t,n,o){let r=[],s=[],i=null;const a=({state:f})=>{const h=$g(e,location),p=n.value,y=t.value;let m=0;if(f){if(n.value=h,t.value=f,i&&i===p){i=null;return}m=y?f.position-y.position:0}else o(h);r.forEach(v=>{v(n.value,p,{delta:m,type:Is.pop,direction:m?m>0?bs.forward:bs.back:bs.unknown})})};function l(){i=n.value}function u(f){r.push(f);const h=()=>{const p=r.indexOf(f);p>-1&&r.splice(p,1)};return s.push(h),h}function c(){const{history:f}=window;f.state&&f.replaceState(ct({},f.state,{scroll:Wa()}),"")}function d(){for(const f of s)f();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function Od(e,t,n,o=!1,r=!1){return{back:e,current:t,forward:n,replaced:o,position:window.history.length,scroll:r?Wa():null}}function ux(e){const{history:t,location:n}=window,o={value:$g(e,n)},r={value:t.state};r.value||s(o.value,{back:null,current:o.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,u,c){const d=e.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+l:ax()+e+l;try{t[c?"replaceState":"pushState"](u,"",f),r.value=u}catch(h){console.error(h),n[c?"replace":"assign"](f)}}function i(l,u){const c=ct({},t.state,Od(r.value.back,l,r.value.forward,!0),u,{position:r.value.position});s(l,c,!0),o.value=l}function a(l,u){const c=ct({},r.value,t.state,{forward:l,scroll:Wa()});s(c.current,c,!0);const d=ct({},Od(o.value,l,null),{position:c.position+1},u);s(l,d,!1),o.value=l}return{location:o,state:r,push:a,replace:i}}function cx(e){e=ex(e);const t=ux(e),n=lx(e,t.state,t.location,t.replace);function o(s,i=!0){i||n.pauseListeners(),history.go(s)}const r=ct({location:"",base:e,go:o,createHref:nx.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function dx(e){return typeof e=="string"||e&&typeof e=="object"}function Cg(e){return typeof e=="string"||typeof e=="symbol"}const Ng=Symbol("");var Rd;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Rd||(Rd={}));function wr(e,t){return ct(new Error,{type:e,[Ng]:!0},t)}function Vn(e,t){return e instanceof Error&&Ng in e&&(t==null||!!(e.type&t))}const Md="[^/]+?",fx={sensitive:!1,strict:!1,start:!0,end:!0},hx=/[.+*?^${}()[\]/\\]/g;function px(e,t){const n=ct({},fx,t),o=[];let r=n.start?"^":"";const s=[];for(const u of e){const c=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const f=u[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(r+="/"),r+=f.value.replace(hx,"\\$&"),h+=40;else if(f.type===1){const{value:p,repeatable:y,optional:m,regexp:v}=f;s.push({name:p,repeatable:y,optional:m});const E=v||Md;if(E!==Md){h+=10;try{new RegExp(`(${E})`)}catch(A){throw new Error(`Invalid custom RegExp for param "${p}" (${E}): `+A.message)}}let _=y?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;d||(_=m&&u.length<2?`(?:/${_})`:"/"+_),m&&(_+="?"),r+=_,h+=20,m&&(h+=-8),y&&(h+=-20),E===".*"&&(h+=-50)}c.push(h)}o.push(c)}if(n.strict&&n.end){const u=o.length-1;o[u][o[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const i=new RegExp(r,n.sensitive?"":"i");function a(u){const c=u.match(i),d={};if(!c)return null;for(let f=1;f<c.length;f++){const h=c[f]||"",p=s[f-1];d[p.name]=h&&p.repeatable?h.split("/"):h}return d}function l(u){let c="",d=!1;for(const f of e){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const h of f)if(h.type===0)c+=h.value;else if(h.type===1){const{value:p,repeatable:y,optional:m}=h,v=p in u?u[p]:"";if(hn(v)&&!y)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const E=hn(v)?v.join("/"):v;if(!E)if(m)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);c+=E}}return c||"/"}return{re:i,score:o,keys:s,parse:a,stringify:l}}function gx(e,t){let n=0;for(;n<e.length&&n<t.length;){const o=t[n]-e[n];if(o)return o;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Tg(e,t){let n=0;const o=e.score,r=t.score;for(;n<o.length&&n<r.length;){const s=gx(o[n],r[n]);if(s)return s;n++}if(Math.abs(r.length-o.length)===1){if(Dd(o))return 1;if(Dd(r))return-1}return r.length-o.length}function Dd(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const mx={type:0,value:""},yx=/[a-zA-Z0-9_]/;function vx(e){if(!e)return[[]];if(e==="/")return[[mx]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${u}": ${h}`)}let n=0,o=n;const r=[];let s;function i(){s&&r.push(s),s=[]}let a=0,l,u="",c="";function d(){u&&(n===0?s.push({type:0,value:u}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){o=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),i()):l===":"?(d(),n=1):f();break;case 4:f(),n=o;break;case 1:l==="("?n=2:yx.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),i(),r}function bx(e,t,n){const o=px(vx(e.path),n),r=ct(o,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function xx(e,t){const n=[],o=new Map;t=Hd({strict:!1,end:!0,sensitive:!1},t);function r(d){return o.get(d)}function s(d,f,h){const p=!h,y=Vd(d);y.aliasOf=h&&h.record;const m=Hd(t,d),v=[y];if("alias"in d){const A=typeof d.alias=="string"?[d.alias]:d.alias;for(const Y of A)v.push(Vd(ct({},y,{components:h?h.record.components:y.components,path:Y,aliasOf:h?h.record:y})))}let E,_;for(const A of v){const{path:Y}=A;if(f&&Y[0]!=="/"){const j=f.record.path,H=j[j.length-1]==="/"?"":"/";A.path=f.record.path+(Y&&H+Y)}if(E=bx(A,f,m),h?h.alias.push(E):(_=_||E,_!==E&&_.alias.push(E),p&&d.name&&!zd(E)&&i(d.name)),Ag(E)&&l(E),y.children){const j=y.children;for(let H=0;H<j.length;H++)s(j[H],E,h&&h.children[H])}h=h||E}return _?()=>{i(_)}:vs}function i(d){if(Cg(d)){const f=o.get(d);f&&(o.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(i),f.alias.forEach(i))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&o.delete(d.record.name),d.children.forEach(i),d.alias.forEach(i))}}function a(){return n}function l(d){const f=kx(d,n);n.splice(f,0,d),d.record.name&&!zd(d)&&o.set(d.record.name,d)}function u(d,f){let h,p={},y,m;if("name"in d&&d.name){if(h=o.get(d.name),!h)throw wr(1,{location:d});m=h.record.name,p=ct(Pd(f.params,h.keys.filter(_=>!_.optional).concat(h.parent?h.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),d.params&&Pd(d.params,h.keys.map(_=>_.name))),y=h.stringify(p)}else if(d.path!=null)y=d.path,h=n.find(_=>_.re.test(y)),h&&(p=h.parse(y),m=h.record.name);else{if(h=f.name?o.get(f.name):n.find(_=>_.re.test(f.path)),!h)throw wr(1,{location:d,currentLocation:f});m=h.record.name,p=ct({},f.params,d.params),y=h.stringify(p)}const v=[];let E=h;for(;E;)v.unshift(E.record),E=E.parent;return{name:m,path:y,params:p,matched:v,meta:wx(v)}}e.forEach(d=>s(d));function c(){n.length=0,o.clear()}return{addRoute:s,resolve:u,removeRoute:i,clearRoutes:c,getRoutes:a,getRecordMatcher:r}}function Pd(e,t){const n={};for(const o of t)o in e&&(n[o]=e[o]);return n}function Vd(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:_x(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function _x(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const o in e.components)t[o]=typeof n=="object"?n[o]:n;return t}function zd(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function wx(e){return e.reduce((t,n)=>ct(t,n.meta),{})}function Hd(e,t){const n={};for(const o in e)n[o]=o in t?t[o]:e[o];return n}function kx(e,t){let n=0,o=t.length;for(;n!==o;){const s=n+o>>1;Tg(e,t[s])<0?o=s:n=s+1}const r=Ex(e);return r&&(o=t.lastIndexOf(r,o-1)),o}function Ex(e){let t=e;for(;t=t.parent;)if(Ag(t)&&Tg(e,t)===0)return t}function Ag({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Sx(e){const t={};if(e===""||e==="?")return t;const o=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<o.length;++r){const s=o[r].replace(_g," "),i=s.indexOf("="),a=As(i<0?s:s.slice(0,i)),l=i<0?null:As(s.slice(i+1));if(a in t){let u=t[a];hn(u)||(u=t[a]=[u]),u.push(l)}else t[a]=l}return t}function Fd(e){let t="";for(let n in e){const o=e[n];if(n=qb(n),o==null){o!==void 0&&(t+=(t.length?"&":"")+n);continue}(hn(o)?o.map(s=>s&&iu(s)):[o&&iu(o)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function $x(e){const t={};for(const n in e){const o=e[n];o!==void 0&&(t[n]=hn(o)?o.map(r=>r==null?null:""+r):o==null?o:""+o)}return t}const Cx=Symbol(""),Ld=Symbol(""),Ya=Symbol(""),xc=Symbol(""),lu=Symbol("");function qr(){let e=[];function t(o){return e.push(o),()=>{const r=e.indexOf(o);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function ho(e,t,n,o,r,s=i=>i()){const i=o&&(o.enterCallbacks[r]=o.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const u=f=>{f===!1?l(wr(4,{from:n,to:t})):f instanceof Error?l(f):dx(f)?l(wr(2,{from:t,to:f})):(i&&o.enterCallbacks[r]===i&&typeof f=="function"&&i.push(f),a())},c=s(()=>e.call(o&&o.instances[r],t,n,u));let d=Promise.resolve(c);e.length<3&&(d=d.then(u)),d.catch(f=>l(f))})}function Cl(e,t,n,o,r=s=>s()){const s=[];for(const i of e)for(const a in i.components){let l=i.components[a];if(!(t!=="beforeRouteEnter"&&!i.instances[a]))if(bg(l)){const c=(l.__vccOpts||l)[t];c&&s.push(ho(c,n,o,i,a,r))}else{let u=l();s.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${a}" at "${i.path}"`);const d=Mb(c)?c.default:c;i.mods[a]=c,i.components[a]=d;const h=(d.__vccOpts||d)[t];return h&&ho(h,n,o,i,a,r)()}))}}return s}function Bd(e){const t=Ot(Ya),n=Ot(xc),o=ne(()=>{const l=ye(e.to);return t.resolve(l)}),r=ne(()=>{const{matched:l}=o.value,{length:u}=l,c=l[u-1],d=n.matched;if(!c||!d.length)return-1;const f=d.findIndex(_r.bind(null,c));if(f>-1)return f;const h=jd(l[u-2]);return u>1&&jd(c)===h&&d[d.length-1].path!==h?d.findIndex(_r.bind(null,l[u-2])):f}),s=ne(()=>r.value>-1&&Ox(n.params,o.value.params)),i=ne(()=>r.value>-1&&r.value===n.matched.length-1&&Sg(n.params,o.value.params));function a(l={}){if(Ix(l)){const u=t[ye(e.replace)?"replace":"push"](ye(e.to)).catch(vs);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:o,href:ne(()=>o.value.href),isActive:s,isExactActive:i,navigate:a}}function Nx(e){return e.length===1?e[0]:e}const Tx=ht({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Bd,setup(e,{slots:t}){const n=zr(Bd(e)),{options:o}=Ot(Ya),r=ne(()=>({[Ud(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[Ud(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&Nx(t.default(n));return e.custom?s:rt("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),Ax=Tx;function Ix(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ox(e,t){for(const n in t){const o=t[n],r=e[n];if(typeof o=="string"){if(o!==r)return!1}else if(!hn(r)||r.length!==o.length||o.some((s,i)=>s!==r[i]))return!1}return!0}function jd(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ud=(e,t,n)=>e??t??n,Rx=ht({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const o=Ot(lu),r=ne(()=>e.route||o.value),s=Ot(Ld,0),i=ne(()=>{let u=ye(s);const{matched:c}=r.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),a=ne(()=>r.value.matched[i.value]);dn(Ld,ne(()=>i.value+1)),dn(Cx,a),dn(lu,r);const l=de();return Fe(()=>[l.value,a.value,e.name],([u,c,d],[f,h,p])=>{c&&(c.instances[d]=u,h&&h!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),u&&c&&(!h||!_r(c,h)||!f)&&(c.enterCallbacks[d]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=r.value,c=e.name,d=a.value,f=d&&d.components[c];if(!f)return qd(n.default,{Component:f,route:u});const h=d.props[c],p=h?h===!0?u.params:typeof h=="function"?h(u):h:null,m=rt(f,ct({},p,t,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(d.instances[c]=null)},ref:l}));return qd(n.default,{Component:m,route:u})||m}}});function qd(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Mx=Rx;function Dx(e){const t=xx(e.routes,e),n=e.parseQuery||Sx,o=e.stringifyQuery||Fd,r=e.history,s=qr(),i=qr(),a=qr(),l=yr(so);let u=so;ir&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Sl.bind(null,K=>""+K),d=Sl.bind(null,Yb),f=Sl.bind(null,As);function h(K,le){let ie,_e;return Cg(K)?(ie=t.getRecordMatcher(K),_e=le):_e=K,t.addRoute(_e,ie)}function p(K){const le=t.getRecordMatcher(K);le&&t.removeRoute(le)}function y(){return t.getRoutes().map(K=>K.record)}function m(K){return!!t.getRecordMatcher(K)}function v(K,le){if(le=ct({},le||l.value),typeof K=="string"){const x=$l(n,K,le.path),k=t.resolve({path:x.path},le),N=r.createHref(x.fullPath);return ct(x,k,{params:f(k.params),hash:As(x.hash),redirectedFrom:void 0,href:N})}let ie;if(K.path!=null)ie=ct({},K,{path:$l(n,K.path,le.path).path});else{const x=ct({},K.params);for(const k in x)x[k]==null&&delete x[k];ie=ct({},K,{params:d(x)}),le.params=d(le.params)}const _e=t.resolve(ie,le),Re=K.hash||"";_e.params=c(f(_e.params));const T=Kb(o,ct({},K,{hash:Ub(Re),path:_e.path})),R=r.createHref(T);return ct({fullPath:T,hash:Re,query:o===Fd?$x(K.query):K.query||{}},_e,{redirectedFrom:void 0,href:R})}function E(K){return typeof K=="string"?$l(n,K,l.value.path):ct({},K)}function _(K,le){if(u!==K)return wr(8,{from:le,to:K})}function A(K){return H(K)}function Y(K){return A(ct(E(K),{replace:!0}))}function j(K){const le=K.matched[K.matched.length-1];if(le&&le.redirect){const{redirect:ie}=le;let _e=typeof ie=="function"?ie(K):ie;return typeof _e=="string"&&(_e=_e.includes("?")||_e.includes("#")?_e=E(_e):{path:_e},_e.params={}),ct({query:K.query,hash:K.hash,params:_e.path!=null?{}:K.params},_e)}}function H(K,le){const ie=u=v(K),_e=l.value,Re=K.state,T=K.force,R=K.replace===!0,x=j(ie);if(x)return H(ct(E(x),{state:typeof x=="object"?ct({},Re,x.state):Re,force:T,replace:R}),le||ie);const k=ie;k.redirectedFrom=le;let N;return!T&&Xb(o,_e,ie)&&(N=wr(16,{to:k,from:_e}),oe(_e,_e,!0,!1)),(N?Promise.resolve(N):B(k,_e)).catch($=>Vn($)?Vn($,2)?$:G($):P($,k,_e)).then($=>{if($){if(Vn($,2))return H(ct({replace:R},E($.to),{state:typeof $.to=="object"?ct({},Re,$.to.state):Re,force:T}),le||k)}else $=S(k,_e,!0,R,Re);return V(k,_e,$),$})}function I(K,le){const ie=_(K,le);return ie?Promise.reject(ie):Promise.resolve()}function L(K){const le=ce.values().next().value;return le&&typeof le.runWithContext=="function"?le.runWithContext(K):K()}function B(K,le){let ie;const[_e,Re,T]=Px(K,le);ie=Cl(_e.reverse(),"beforeRouteLeave",K,le);for(const x of _e)x.leaveGuards.forEach(k=>{ie.push(ho(k,K,le))});const R=I.bind(null,K,le);return ie.push(R),xe(ie).then(()=>{ie=[];for(const x of s.list())ie.push(ho(x,K,le));return ie.push(R),xe(ie)}).then(()=>{ie=Cl(Re,"beforeRouteUpdate",K,le);for(const x of Re)x.updateGuards.forEach(k=>{ie.push(ho(k,K,le))});return ie.push(R),xe(ie)}).then(()=>{ie=[];for(const x of T)if(x.beforeEnter)if(hn(x.beforeEnter))for(const k of x.beforeEnter)ie.push(ho(k,K,le));else ie.push(ho(x.beforeEnter,K,le));return ie.push(R),xe(ie)}).then(()=>(K.matched.forEach(x=>x.enterCallbacks={}),ie=Cl(T,"beforeRouteEnter",K,le,L),ie.push(R),xe(ie))).then(()=>{ie=[];for(const x of i.list())ie.push(ho(x,K,le));return ie.push(R),xe(ie)}).catch(x=>Vn(x,8)?x:Promise.reject(x))}function V(K,le,ie){a.list().forEach(_e=>L(()=>_e(K,le,ie)))}function S(K,le,ie,_e,Re){const T=_(K,le);if(T)return T;const R=le===so,x=ir?history.state:{};ie&&(_e||R?r.replace(K.fullPath,ct({scroll:R&&x&&x.scroll},Re)):r.push(K.fullPath,Re)),l.value=K,oe(K,le,ie,R),G()}let z;function g(){z||(z=r.listen((K,le,ie)=>{if(!pe.listening)return;const _e=v(K),Re=j(_e);if(Re){H(ct(Re,{replace:!0,force:!0}),_e).catch(vs);return}u=_e;const T=l.value;ir&&sx(Id(T.fullPath,ie.delta),Wa()),B(_e,T).catch(R=>Vn(R,12)?R:Vn(R,2)?(H(ct(E(R.to),{force:!0}),_e).then(x=>{Vn(x,20)&&!ie.delta&&ie.type===Is.pop&&r.go(-1,!1)}).catch(vs),Promise.reject()):(ie.delta&&r.go(-ie.delta,!1),P(R,_e,T))).then(R=>{R=R||S(_e,T,!1),R&&(ie.delta&&!Vn(R,8)?r.go(-ie.delta,!1):ie.type===Is.pop&&Vn(R,20)&&r.go(-1,!1)),V(_e,T,R)}).catch(vs)}))}let C=qr(),w=qr(),F;function P(K,le,ie){G(K);const _e=w.list();return _e.length?_e.forEach(Re=>Re(K,le,ie)):console.error(K),Promise.reject(K)}function X(){return F&&l.value!==so?Promise.resolve():new Promise((K,le)=>{C.add([K,le])})}function G(K){return F||(F=!K,g(),C.list().forEach(([le,ie])=>K?ie(K):le()),C.reset()),K}function oe(K,le,ie,_e){const{scrollBehavior:Re}=e;if(!ir||!Re)return Promise.resolve();const T=!ie&&ix(Id(K.fullPath,0))||(_e||!ie)&&history.state&&history.state.scroll||null;return Bt().then(()=>Re(K,le,T)).then(R=>R&&rx(R)).catch(R=>P(R,K,le))}const ge=K=>r.go(K);let Z;const ce=new Set,pe={currentRoute:l,listening:!0,addRoute:h,removeRoute:p,clearRoutes:t.clearRoutes,hasRoute:m,getRoutes:y,resolve:v,options:e,push:A,replace:Y,go:ge,back:()=>ge(-1),forward:()=>ge(1),beforeEach:s.add,beforeResolve:i.add,afterEach:a.add,onError:w.add,isReady:X,install(K){const le=this;K.component("RouterLink",Ax),K.component("RouterView",Mx),K.config.globalProperties.$router=le,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>ye(l)}),ir&&!Z&&l.value===so&&(Z=!0,A(r.location).catch(Re=>{}));const ie={};for(const Re in so)Object.defineProperty(ie,Re,{get:()=>l.value[Re],enumerable:!0});K.provide(Ya,le),K.provide(xc,Ep(ie)),K.provide(lu,l);const _e=K.unmount;ce.add(K),K.unmount=function(){ce.delete(K),ce.size<1&&(u=so,z&&z(),z=null,l.value=so,Z=!1,F=!1),_e()}}};function xe(K){return K.reduce((le,ie)=>le.then(()=>L(ie)),Promise.resolve())}return pe}function Px(e,t){const n=[],o=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let i=0;i<s;i++){const a=t.matched[i];a&&(e.matched.find(u=>_r(u,a))?o.push(a):n.push(a));const l=e.matched[i];l&&(t.matched.find(u=>_r(u,l))||r.push(l))}return[n,o,r]}function Ig(){return Ot(Ya)}function _c(e){return Ot(xc)}const sn=de(!1),Vx=()=>window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,zx=()=>{const e=localStorage.getItem("flow-forge-theme");e?sn.value=e==="dark":sn.value=Vx(),Og()},Og=()=>{const e=document.documentElement;sn.value?e.classList.add("dark"):e.classList.remove("dark")};Fe(sn,()=>{localStorage.setItem("flow-forge-theme",sn.value?"dark":"light"),Og()});window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("flow-forge-theme")||(sn.value=e.matches)});const Rg=()=>{const e=()=>{sn.value=!sn.value},t=o=>{sn.value=o==="dark"},n=ne(()=>sn.value?"dark":"light");return{isDark:sn,theme:n,toggleTheme:e,setTheme:t,initTheme:zx}};class es extends Error{}es.prototype.name="InvalidTokenError";function Hx(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let o=n.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function Fx(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Hx(t)}catch{return atob(t)}}function Wd(e,t){if(typeof e!="string")throw new es("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,o=e.split(".")[n];if(typeof o!="string")throw new es(`Invalid token specified: missing part #${n+1}`);let r;try{r=Fx(o)}catch(s){throw new es(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(r)}catch(s){throw new es(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}function Mg(e,t){return function(){return e.apply(t,arguments)}}const{toString:Lx}=Object.prototype,{getPrototypeOf:wc}=Object,{iterator:Ga,toStringTag:Dg}=Symbol,Za=(e=>t=>{const n=Lx.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),pn=e=>(e=e.toLowerCase(),t=>Za(t)===e),Ka=e=>t=>typeof t===e,{isArray:Fr}=Array,kr=Ka("undefined");function Js(e){return e!==null&&!kr(e)&&e.constructor!==null&&!kr(e.constructor)&&Kt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Pg=pn("ArrayBuffer");function Bx(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Pg(e.buffer),t}const jx=Ka("string"),Kt=Ka("function"),Vg=Ka("number"),Qs=e=>e!==null&&typeof e=="object",Ux=e=>e===!0||e===!1,Ai=e=>{if(Za(e)!=="object")return!1;const t=wc(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Dg in e)&&!(Ga in e)},qx=e=>{if(!Qs(e)||Js(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Wx=pn("Date"),Yx=pn("File"),Gx=pn("Blob"),Zx=pn("FileList"),Kx=e=>Qs(e)&&Kt(e.pipe),Xx=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Kt(e.append)&&((t=Za(e))==="formdata"||t==="object"&&Kt(e.toString)&&e.toString()==="[object FormData]"))},Jx=pn("URLSearchParams"),[Qx,e_,t_,n_]=["ReadableStream","Request","Response","Headers"].map(pn),o_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ei(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,r;if(typeof e!="object"&&(e=[e]),Fr(e))for(o=0,r=e.length;o<r;o++)t.call(null,e[o],o,e);else{if(Js(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let a;for(o=0;o<i;o++)a=s[o],t.call(null,e[a],a,e)}}function zg(e,t){if(Js(e))return null;t=t.toLowerCase();const n=Object.keys(e);let o=n.length,r;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const Do=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Hg=e=>!kr(e)&&e!==Do;function uu(){const{caseless:e,skipUndefined:t}=Hg(this)&&this||{},n={},o=(r,s)=>{const i=e&&zg(n,s)||s;Ai(n[i])&&Ai(r)?n[i]=uu(n[i],r):Ai(r)?n[i]=uu({},r):Fr(r)?n[i]=r.slice():(!t||!kr(r))&&(n[i]=r)};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&ei(arguments[r],o);return n}const r_=(e,t,n,{allOwnKeys:o}={})=>(ei(t,(r,s)=>{n&&Kt(r)?e[s]=Mg(r,n):e[s]=r},{allOwnKeys:o}),e),s_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),i_=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},a_=(e,t,n,o)=>{let r,s,i;const a={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)i=r[s],(!o||o(i,e,t))&&!a[i]&&(t[i]=e[i],a[i]=!0);e=n!==!1&&wc(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},l_=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},u_=e=>{if(!e)return null;if(Fr(e))return e;let t=e.length;if(!Vg(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},c_=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&wc(Uint8Array)),d_=(e,t)=>{const o=(e&&e[Ga]).call(e);let r;for(;(r=o.next())&&!r.done;){const s=r.value;t.call(e,s[0],s[1])}},f_=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},h_=pn("HTMLFormElement"),p_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,r){return o.toUpperCase()+r}),Yd=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),g_=pn("RegExp"),Fg=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};ei(n,(r,s)=>{let i;(i=t(r,s,e))!==!1&&(o[s]=i||r)}),Object.defineProperties(e,o)},m_=e=>{Fg(e,(t,n)=>{if(Kt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(Kt(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},y_=(e,t)=>{const n={},o=r=>{r.forEach(s=>{n[s]=!0})};return Fr(e)?o(e):o(String(e).split(t)),n},v_=()=>{},b_=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function x_(e){return!!(e&&Kt(e.append)&&e[Dg]==="FormData"&&e[Ga])}const __=e=>{const t=new Array(10),n=(o,r)=>{if(Qs(o)){if(t.indexOf(o)>=0)return;if(Js(o))return o;if(!("toJSON"in o)){t[r]=o;const s=Fr(o)?[]:{};return ei(o,(i,a)=>{const l=n(i,r+1);!kr(l)&&(s[a]=l)}),t[r]=void 0,s}}return o};return n(e,0)},w_=pn("AsyncFunction"),k_=e=>e&&(Qs(e)||Kt(e))&&Kt(e.then)&&Kt(e.catch),Lg=((e,t)=>e?setImmediate:t?((n,o)=>(Do.addEventListener("message",({source:r,data:s})=>{r===Do&&s===n&&o.length&&o.shift()()},!1),r=>{o.push(r),Do.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Kt(Do.postMessage)),E_=typeof queueMicrotask<"u"?queueMicrotask.bind(Do):typeof process<"u"&&process.nextTick||Lg,S_=e=>e!=null&&Kt(e[Ga]),se={isArray:Fr,isArrayBuffer:Pg,isBuffer:Js,isFormData:Xx,isArrayBufferView:Bx,isString:jx,isNumber:Vg,isBoolean:Ux,isObject:Qs,isPlainObject:Ai,isEmptyObject:qx,isReadableStream:Qx,isRequest:e_,isResponse:t_,isHeaders:n_,isUndefined:kr,isDate:Wx,isFile:Yx,isBlob:Gx,isRegExp:g_,isFunction:Kt,isStream:Kx,isURLSearchParams:Jx,isTypedArray:c_,isFileList:Zx,forEach:ei,merge:uu,extend:r_,trim:o_,stripBOM:s_,inherits:i_,toFlatObject:a_,kindOf:Za,kindOfTest:pn,endsWith:l_,toArray:u_,forEachEntry:d_,matchAll:f_,isHTMLForm:h_,hasOwnProperty:Yd,hasOwnProp:Yd,reduceDescriptors:Fg,freezeMethods:m_,toObjectSet:y_,toCamelCase:p_,noop:v_,toFiniteNumber:b_,findKey:zg,global:Do,isContextDefined:Hg,isSpecCompliantForm:x_,toJSONObject:__,isAsyncFn:w_,isThenable:k_,setImmediate:Lg,asap:E_,isIterable:S_};function We(e,t,n,o,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),r&&(this.response=r,this.status=r.status?r.status:null)}se.inherits(We,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:se.toJSONObject(this.config),code:this.code,status:this.status}}});const Bg=We.prototype,jg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{jg[e]={value:e}});Object.defineProperties(We,jg);Object.defineProperty(Bg,"isAxiosError",{value:!0});We.from=(e,t,n,o,r,s)=>{const i=Object.create(Bg);se.toFlatObject(e,i,function(c){return c!==Error.prototype},u=>u!=="isAxiosError");const a=e&&e.message?e.message:"Error",l=t==null&&e?e.code:t;return We.call(i,a,l,n,o,r),e&&i.cause==null&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",s&&Object.assign(i,s),i};const $_=null;function cu(e){return se.isPlainObject(e)||se.isArray(e)}function Ug(e){return se.endsWith(e,"[]")?e.slice(0,-2):e}function Gd(e,t,n){return e?e.concat(t).map(function(r,s){return r=Ug(r),!n&&s?"["+r+"]":r}).join(n?".":""):t}function C_(e){return se.isArray(e)&&!e.some(cu)}const N_=se.toFlatObject(se,{},null,function(t){return/^is[A-Z]/.test(t)});function Xa(e,t,n){if(!se.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=se.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,m){return!se.isUndefined(m[y])});const o=n.metaTokens,r=n.visitor||c,s=n.dots,i=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&se.isSpecCompliantForm(t);if(!se.isFunction(r))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(se.isDate(p))return p.toISOString();if(se.isBoolean(p))return p.toString();if(!l&&se.isBlob(p))throw new We("Blob is not supported. Use a Buffer instead.");return se.isArrayBuffer(p)||se.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,y,m){let v=p;if(p&&!m&&typeof p=="object"){if(se.endsWith(y,"{}"))y=o?y:y.slice(0,-2),p=JSON.stringify(p);else if(se.isArray(p)&&C_(p)||(se.isFileList(p)||se.endsWith(y,"[]"))&&(v=se.toArray(p)))return y=Ug(y),v.forEach(function(_,A){!(se.isUndefined(_)||_===null)&&t.append(i===!0?Gd([y],A,s):i===null?y:y+"[]",u(_))}),!1}return cu(p)?!0:(t.append(Gd(m,y,s),u(p)),!1)}const d=[],f=Object.assign(N_,{defaultVisitor:c,convertValue:u,isVisitable:cu});function h(p,y){if(!se.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(p),se.forEach(p,function(v,E){(!(se.isUndefined(v)||v===null)&&r.call(t,v,se.isString(E)?E.trim():E,y,f))===!0&&h(v,y?y.concat(E):[E])}),d.pop()}}if(!se.isObject(e))throw new TypeError("data must be an object");return h(e),t}function Zd(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function kc(e,t){this._pairs=[],e&&Xa(e,this,t)}const qg=kc.prototype;qg.append=function(t,n){this._pairs.push([t,n])};qg.toString=function(t){const n=t?function(o){return t.call(this,o,Zd)}:Zd;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function T_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Wg(e,t,n){if(!t)return e;const o=n&&n.encode||T_;se.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(r?s=r(t,n):s=se.isURLSearchParams(t)?t.toString():new kc(t,n).toString(o),s){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Kd{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){se.forEach(this.handlers,function(o){o!==null&&t(o)})}}const Yg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},A_=typeof URLSearchParams<"u"?URLSearchParams:kc,I_=typeof FormData<"u"?FormData:null,O_=typeof Blob<"u"?Blob:null,R_={isBrowser:!0,classes:{URLSearchParams:A_,FormData:I_,Blob:O_},protocols:["http","https","file","blob","url","data"]},Ec=typeof window<"u"&&typeof document<"u",du=typeof navigator=="object"&&navigator||void 0,M_=Ec&&(!du||["ReactNative","NativeScript","NS"].indexOf(du.product)<0),D_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",P_=Ec&&window.location.href||"http://localhost",V_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ec,hasStandardBrowserEnv:M_,hasStandardBrowserWebWorkerEnv:D_,navigator:du,origin:P_},Symbol.toStringTag,{value:"Module"})),Lt={...V_,...R_};function z_(e,t){return Xa(e,new Lt.classes.URLSearchParams,{visitor:function(n,o,r,s){return Lt.isNode&&se.isBuffer(n)?(this.append(o,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function H_(e){return se.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function F_(e){const t={},n=Object.keys(e);let o;const r=n.length;let s;for(o=0;o<r;o++)s=n[o],t[s]=e[s];return t}function Gg(e){function t(n,o,r,s){let i=n[s++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),l=s>=n.length;return i=!i&&se.isArray(r)?r.length:i,l?(se.hasOwnProp(r,i)?r[i]=[r[i],o]:r[i]=o,!a):((!r[i]||!se.isObject(r[i]))&&(r[i]=[]),t(n,o,r[i],s)&&se.isArray(r[i])&&(r[i]=F_(r[i])),!a)}if(se.isFormData(e)&&se.isFunction(e.entries)){const n={};return se.forEachEntry(e,(o,r)=>{t(H_(o),r,n,0)}),n}return null}function L_(e,t,n){if(se.isString(e))try{return(t||JSON.parse)(e),se.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const ti={transitional:Yg,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const o=n.getContentType()||"",r=o.indexOf("application/json")>-1,s=se.isObject(t);if(s&&se.isHTMLForm(t)&&(t=new FormData(t)),se.isFormData(t))return r?JSON.stringify(Gg(t)):t;if(se.isArrayBuffer(t)||se.isBuffer(t)||se.isStream(t)||se.isFile(t)||se.isBlob(t)||se.isReadableStream(t))return t;if(se.isArrayBufferView(t))return t.buffer;if(se.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(o.indexOf("application/x-www-form-urlencoded")>-1)return z_(t,this.formSerializer).toString();if((a=se.isFileList(t))||o.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Xa(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),L_(t)):t}],transformResponse:[function(t){const n=this.transitional||ti.transitional,o=n&&n.forcedJSONParsing,r=this.responseType==="json";if(se.isResponse(t)||se.isReadableStream(t))return t;if(t&&se.isString(t)&&(o&&!this.responseType||r)){const i=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(a){if(i)throw a.name==="SyntaxError"?We.from(a,We.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Lt.classes.FormData,Blob:Lt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};se.forEach(["delete","get","head","post","put","patch"],e=>{ti.headers[e]={}});const B_=se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),j_=e=>{const t={};let n,o,r;return e&&e.split(`
`).forEach(function(i){r=i.indexOf(":"),n=i.substring(0,r).trim().toLowerCase(),o=i.substring(r+1).trim(),!(!n||t[n]&&B_[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},Xd=Symbol("internals");function Wr(e){return e&&String(e).trim().toLowerCase()}function Ii(e){return e===!1||e==null?e:se.isArray(e)?e.map(Ii):String(e)}function U_(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const q_=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Nl(e,t,n,o,r){if(se.isFunction(o))return o.call(this,t,n);if(r&&(t=n),!!se.isString(t)){if(se.isString(o))return t.indexOf(o)!==-1;if(se.isRegExp(o))return o.test(t)}}function W_(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function Y_(e,t){const n=se.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(r,s,i){return this[o].call(this,t,r,s,i)},configurable:!0})})}let Xt=class{constructor(t){t&&this.set(t)}set(t,n,o){const r=this;function s(a,l,u){const c=Wr(l);if(!c)throw new Error("header name must be a non-empty string");const d=se.findKey(r,c);(!d||r[d]===void 0||u===!0||u===void 0&&r[d]!==!1)&&(r[d||l]=Ii(a))}const i=(a,l)=>se.forEach(a,(u,c)=>s(u,c,l));if(se.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(se.isString(t)&&(t=t.trim())&&!q_(t))i(j_(t),n);else if(se.isObject(t)&&se.isIterable(t)){let a={},l,u;for(const c of t){if(!se.isArray(c))throw TypeError("Object iterator must return a key-value pair");a[u=c[0]]=(l=a[u])?se.isArray(l)?[...l,c[1]]:[l,c[1]]:c[1]}i(a,n)}else t!=null&&s(n,t,o);return this}get(t,n){if(t=Wr(t),t){const o=se.findKey(this,t);if(o){const r=this[o];if(!n)return r;if(n===!0)return U_(r);if(se.isFunction(n))return n.call(this,r,o);if(se.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Wr(t),t){const o=se.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||Nl(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let r=!1;function s(i){if(i=Wr(i),i){const a=se.findKey(o,i);a&&(!n||Nl(o,o[a],a,n))&&(delete o[a],r=!0)}}return se.isArray(t)?t.forEach(s):s(t),r}clear(t){const n=Object.keys(this);let o=n.length,r=!1;for(;o--;){const s=n[o];(!t||Nl(this,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){const n=this,o={};return se.forEach(this,(r,s)=>{const i=se.findKey(o,s);if(i){n[i]=Ii(r),delete n[s];return}const a=t?W_(s):String(s).trim();a!==s&&delete n[s],n[a]=Ii(r),o[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return se.forEach(this,(o,r)=>{o!=null&&o!==!1&&(n[r]=t&&se.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(r=>o.set(r)),o}static accessor(t){const o=(this[Xd]=this[Xd]={accessors:{}}).accessors,r=this.prototype;function s(i){const a=Wr(i);o[a]||(Y_(r,i),o[a]=!0)}return se.isArray(t)?t.forEach(s):s(t),this}};Xt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);se.reduceDescriptors(Xt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}});se.freezeMethods(Xt);function Tl(e,t){const n=this||ti,o=t||n,r=Xt.from(o.headers);let s=o.data;return se.forEach(e,function(a){s=a.call(n,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function Zg(e){return!!(e&&e.__CANCEL__)}function Lr(e,t,n){We.call(this,e??"canceled",We.ERR_CANCELED,t,n),this.name="CanceledError"}se.inherits(Lr,We,{__CANCEL__:!0});function Kg(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new We("Request failed with status code "+n.status,[We.ERR_BAD_REQUEST,We.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function G_(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Z_(e,t){e=e||10;const n=new Array(e),o=new Array(e);let r=0,s=0,i;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),c=o[s];i||(i=u),n[r]=l,o[r]=u;let d=s,f=0;for(;d!==r;)f+=n[d++],d=d%e;if(r=(r+1)%e,r===s&&(s=(s+1)%e),u-i<t)return;const h=c&&u-c;return h?Math.round(f*1e3/h):void 0}}function K_(e,t){let n=0,o=1e3/t,r,s;const i=(u,c=Date.now())=>{n=c,r=null,s&&(clearTimeout(s),s=null),e(...u)};return[(...u)=>{const c=Date.now(),d=c-n;d>=o?i(u,c):(r=u,s||(s=setTimeout(()=>{s=null,i(r)},o-d)))},()=>r&&i(r)]}const ra=(e,t,n=3)=>{let o=0;const r=Z_(50,250);return K_(s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,l=i-o,u=r(l),c=i<=a;o=i;const d={loaded:i,total:a,progress:a?i/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&c?(a-i)/u:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(d)},n)},Jd=(e,t)=>{const n=e!=null;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},Qd=e=>(...t)=>se.asap(()=>e(...t)),X_=Lt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Lt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Lt.origin),Lt.navigator&&/(msie|trident)/i.test(Lt.navigator.userAgent)):()=>!0,J_=Lt.hasStandardBrowserEnv?{write(e,t,n,o,r,s){const i=[e+"="+encodeURIComponent(t)];se.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),se.isString(o)&&i.push("path="+o),se.isString(r)&&i.push("domain="+r),s===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Q_(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function e1(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Xg(e,t,n){let o=!Q_(t);return e&&(o||n==!1)?e1(e,t):t}const ef=e=>e instanceof Xt?{...e}:e;function Wo(e,t){t=t||{};const n={};function o(u,c,d,f){return se.isPlainObject(u)&&se.isPlainObject(c)?se.merge.call({caseless:f},u,c):se.isPlainObject(c)?se.merge({},c):se.isArray(c)?c.slice():c}function r(u,c,d,f){if(se.isUndefined(c)){if(!se.isUndefined(u))return o(void 0,u,d,f)}else return o(u,c,d,f)}function s(u,c){if(!se.isUndefined(c))return o(void 0,c)}function i(u,c){if(se.isUndefined(c)){if(!se.isUndefined(u))return o(void 0,u)}else return o(void 0,c)}function a(u,c,d){if(d in t)return o(u,c);if(d in e)return o(void 0,u)}const l={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(u,c,d)=>r(ef(u),ef(c),d,!0)};return se.forEach(Object.keys({...e,...t}),function(c){const d=l[c]||r,f=d(e[c],t[c],c);se.isUndefined(f)&&d!==a||(n[c]=f)}),n}const Jg=e=>{const t=Wo({},e);let{data:n,withXSRFToken:o,xsrfHeaderName:r,xsrfCookieName:s,headers:i,auth:a}=t;if(t.headers=i=Xt.from(i),t.url=Wg(Xg(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),se.isFormData(n)){if(Lt.hasStandardBrowserEnv||Lt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(se.isFunction(n.getHeaders)){const l=n.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([c,d])=>{u.includes(c.toLowerCase())&&i.set(c,d)})}}if(Lt.hasStandardBrowserEnv&&(o&&se.isFunction(o)&&(o=o(t)),o||o!==!1&&X_(t.url))){const l=r&&s&&J_.read(s);l&&i.set(r,l)}return t},t1=typeof XMLHttpRequest<"u",n1=t1&&function(e){return new Promise(function(n,o){const r=Jg(e);let s=r.data;const i=Xt.from(r.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=r,c,d,f,h,p;function y(){h&&h(),p&&p(),r.cancelToken&&r.cancelToken.unsubscribe(c),r.signal&&r.signal.removeEventListener("abort",c)}let m=new XMLHttpRequest;m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout;function v(){if(!m)return;const _=Xt.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),Y={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:_,config:e,request:m};Kg(function(H){n(H),y()},function(H){o(H),y()},Y),m=null}"onloadend"in m?m.onloadend=v:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(v)},m.onabort=function(){m&&(o(new We("Request aborted",We.ECONNABORTED,e,m)),m=null)},m.onerror=function(A){const Y=A&&A.message?A.message:"Network Error",j=new We(Y,We.ERR_NETWORK,e,m);j.event=A||null,o(j),m=null},m.ontimeout=function(){let A=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const Y=r.transitional||Yg;r.timeoutErrorMessage&&(A=r.timeoutErrorMessage),o(new We(A,Y.clarifyTimeoutError?We.ETIMEDOUT:We.ECONNABORTED,e,m)),m=null},s===void 0&&i.setContentType(null),"setRequestHeader"in m&&se.forEach(i.toJSON(),function(A,Y){m.setRequestHeader(Y,A)}),se.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),a&&a!=="json"&&(m.responseType=r.responseType),u&&([f,p]=ra(u,!0),m.addEventListener("progress",f)),l&&m.upload&&([d,h]=ra(l),m.upload.addEventListener("progress",d),m.upload.addEventListener("loadend",h)),(r.cancelToken||r.signal)&&(c=_=>{m&&(o(!_||_.type?new Lr(null,e,m):_),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(c),r.signal&&(r.signal.aborted?c():r.signal.addEventListener("abort",c)));const E=G_(r.url);if(E&&Lt.protocols.indexOf(E)===-1){o(new We("Unsupported protocol "+E+":",We.ERR_BAD_REQUEST,e));return}m.send(s||null)})},o1=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let o=new AbortController,r;const s=function(u){if(!r){r=!0,a();const c=u instanceof Error?u:this.reason;o.abort(c instanceof We?c:new Lr(c instanceof Error?c.message:c))}};let i=t&&setTimeout(()=>{i=null,s(new We(`timeout ${t} of ms exceeded`,We.ETIMEDOUT))},t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),e=null)};e.forEach(u=>u.addEventListener("abort",s));const{signal:l}=o;return l.unsubscribe=()=>se.asap(a),l}},r1=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let o=0,r;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},s1=async function*(e,t){for await(const n of i1(e))yield*r1(n,t)},i1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)break;yield o}}finally{await t.cancel()}},tf=(e,t,n,o)=>{const r=s1(e,t);let s=0,i,a=l=>{i||(i=!0,o&&o(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await r.next();if(u){a(),l.close();return}let d=c.byteLength;if(n){let f=s+=d;n(f)}l.enqueue(new Uint8Array(c))}catch(u){throw a(u),u}},cancel(l){return a(l),r.return()}},{highWaterMark:2})},nf=64*1024,{isFunction:ci}=se,a1=(({Request:e,Response:t})=>({Request:e,Response:t}))(se.global),{ReadableStream:of,TextEncoder:rf}=se.global,sf=(e,...t)=>{try{return!!e(...t)}catch{return!1}},l1=e=>{e=se.merge.call({skipUndefined:!0},a1,e);const{fetch:t,Request:n,Response:o}=e,r=t?ci(t):typeof fetch=="function",s=ci(n),i=ci(o);if(!r)return!1;const a=r&&ci(of),l=r&&(typeof rf=="function"?(p=>y=>p.encode(y))(new rf):async p=>new Uint8Array(await new n(p).arrayBuffer())),u=s&&a&&sf(()=>{let p=!1;const y=new n(Lt.origin,{body:new of,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!y}),c=i&&a&&sf(()=>se.isReadableStream(new o("").body)),d={stream:c&&(p=>p.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!d[p]&&(d[p]=(y,m)=>{let v=y&&y[p];if(v)return v.call(y);throw new We(`Response type '${p}' is not supported`,We.ERR_NOT_SUPPORT,m)})});const f=async p=>{if(p==null)return 0;if(se.isBlob(p))return p.size;if(se.isSpecCompliantForm(p))return(await new n(Lt.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(se.isArrayBufferView(p)||se.isArrayBuffer(p))return p.byteLength;if(se.isURLSearchParams(p)&&(p=p+""),se.isString(p))return(await l(p)).byteLength},h=async(p,y)=>{const m=se.toFiniteNumber(p.getContentLength());return m??f(y)};return async p=>{let{url:y,method:m,data:v,signal:E,cancelToken:_,timeout:A,onDownloadProgress:Y,onUploadProgress:j,responseType:H,headers:I,withCredentials:L="same-origin",fetchOptions:B}=Jg(p),V=t||fetch;H=H?(H+"").toLowerCase():"text";let S=o1([E,_&&_.toAbortSignal()],A),z=null;const g=S&&S.unsubscribe&&(()=>{S.unsubscribe()});let C;try{if(j&&u&&m!=="get"&&m!=="head"&&(C=await h(I,v))!==0){let oe=new n(y,{method:"POST",body:v,duplex:"half"}),ge;if(se.isFormData(v)&&(ge=oe.headers.get("content-type"))&&I.setContentType(ge),oe.body){const[Z,ce]=Jd(C,ra(Qd(j)));v=tf(oe.body,nf,Z,ce)}}se.isString(L)||(L=L?"include":"omit");const w=s&&"credentials"in n.prototype,F={...B,signal:S,method:m.toUpperCase(),headers:I.normalize().toJSON(),body:v,duplex:"half",credentials:w?L:void 0};z=s&&new n(y,F);let P=await(s?V(z,B):V(y,F));const X=c&&(H==="stream"||H==="response");if(c&&(Y||X&&g)){const oe={};["status","statusText","headers"].forEach(pe=>{oe[pe]=P[pe]});const ge=se.toFiniteNumber(P.headers.get("content-length")),[Z,ce]=Y&&Jd(ge,ra(Qd(Y),!0))||[];P=new o(tf(P.body,nf,Z,()=>{ce&&ce(),g&&g()}),oe)}H=H||"text";let G=await d[se.findKey(d,H)||"text"](P,p);return!X&&g&&g(),await new Promise((oe,ge)=>{Kg(oe,ge,{data:G,headers:Xt.from(P.headers),status:P.status,statusText:P.statusText,config:p,request:z})})}catch(w){throw g&&g(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new We("Network Error",We.ERR_NETWORK,p,z),{cause:w.cause||w}):We.from(w,w&&w.code,p,z)}}},u1=new Map,Qg=e=>{let t=e?e.env:{};const{fetch:n,Request:o,Response:r}=t,s=[o,r,n];let i=s.length,a=i,l,u,c=u1;for(;a--;)l=s[a],u=c.get(l),u===void 0&&c.set(l,u=a?new Map:l1(t)),c=u;return u};Qg();const fu={http:$_,xhr:n1,fetch:{get:Qg}};se.forEach(fu,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const af=e=>`- ${e}`,c1=e=>se.isFunction(e)||e===null||e===!1,em={getAdapter:(e,t)=>{e=se.isArray(e)?e:[e];const{length:n}=e;let o,r;const s={};for(let i=0;i<n;i++){o=e[i];let a;if(r=o,!c1(o)&&(r=fu[(a=String(o)).toLowerCase()],r===void 0))throw new We(`Unknown adapter '${a}'`);if(r&&(se.isFunction(r)||(r=r.get(t))))break;s[a||"#"+i]=r}if(!r){const i=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=n?i.length>1?`since :
`+i.map(af).join(`
`):" "+af(i[0]):"as no adapter specified";throw new We("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:fu};function Al(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Lr(null,e)}function lf(e){return Al(e),e.headers=Xt.from(e.headers),e.data=Tl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),em.getAdapter(e.adapter||ti.adapter,e)(e).then(function(o){return Al(e),o.data=Tl.call(e,e.transformResponse,o),o.headers=Xt.from(o.headers),o},function(o){return Zg(o)||(Al(e),o&&o.response&&(o.response.data=Tl.call(e,e.transformResponse,o.response),o.response.headers=Xt.from(o.response.headers))),Promise.reject(o)})}const tm="1.12.2",Ja={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ja[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const uf={};Ja.transitional=function(t,n,o){function r(s,i){return"[Axios v"+tm+"] Transitional option '"+s+"'"+i+(o?". "+o:"")}return(s,i,a)=>{if(t===!1)throw new We(r(i," has been removed"+(n?" in "+n:"")),We.ERR_DEPRECATED);return n&&!uf[i]&&(uf[i]=!0,console.warn(r(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,i,a):!0}};Ja.spelling=function(t){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${t}`),!0)};function d1(e,t,n){if(typeof e!="object")throw new We("options must be an object",We.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let r=o.length;for(;r-- >0;){const s=o[r],i=t[s];if(i){const a=e[s],l=a===void 0||i(a,s,e);if(l!==!0)throw new We("option "+s+" must be "+l,We.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new We("Unknown option "+s,We.ERR_BAD_OPTION)}}const Oi={assertOptions:d1,validators:Ja},vn=Oi.validators;let Lo=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Kd,response:new Kd}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{o.stack?s&&!String(o.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+s):o.stack=s}catch{}}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Wo(this.defaults,n);const{transitional:o,paramsSerializer:r,headers:s}=n;o!==void 0&&Oi.assertOptions(o,{silentJSONParsing:vn.transitional(vn.boolean),forcedJSONParsing:vn.transitional(vn.boolean),clarifyTimeoutError:vn.transitional(vn.boolean)},!1),r!=null&&(se.isFunction(r)?n.paramsSerializer={serialize:r}:Oi.assertOptions(r,{encode:vn.function,serialize:vn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Oi.assertOptions(n,{baseUrl:vn.spelling("baseURL"),withXsrfToken:vn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=s&&se.merge(s.common,s[n.method]);s&&se.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=Xt.concat(i,s);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let c,d=0,f;if(!l){const p=[lf.bind(this),void 0];for(p.unshift(...a),p.push(...u),f=p.length,c=Promise.resolve(n);d<f;)c=c.then(p[d++],p[d++]);return c}f=a.length;let h=n;for(;d<f;){const p=a[d++],y=a[d++];try{h=p(h)}catch(m){y.call(this,m);break}}try{c=lf.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,f=u.length;d<f;)c=c.then(u[d++],u[d++]);return c}getUri(t){t=Wo(this.defaults,t);const n=Xg(t.baseURL,t.url,t.allowAbsoluteUrls);return Wg(n,t.params,t.paramsSerializer)}};se.forEach(["delete","get","head","options"],function(t){Lo.prototype[t]=function(n,o){return this.request(Wo(o||{},{method:t,url:n,data:(o||{}).data}))}});se.forEach(["post","put","patch"],function(t){function n(o){return function(s,i,a){return this.request(Wo(a||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}Lo.prototype[t]=n(),Lo.prototype[t+"Form"]=n(!0)});let f1=class nm{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const o=this;this.promise.then(r=>{if(!o._listeners)return;let s=o._listeners.length;for(;s-- >0;)o._listeners[s](r);o._listeners=null}),this.promise.then=r=>{let s;const i=new Promise(a=>{o.subscribe(a),s=a}).then(r);return i.cancel=function(){o.unsubscribe(s)},i},t(function(s,i,a){o.reason||(o.reason=new Lr(s,i,a),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=o=>{t.abort(o)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new nm(function(r){t=r}),cancel:t}}};function h1(e){return function(n){return e.apply(null,n)}}function p1(e){return se.isObject(e)&&e.isAxiosError===!0}const hu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hu).forEach(([e,t])=>{hu[t]=e});function om(e){const t=new Lo(e),n=Mg(Lo.prototype.request,t);return se.extend(n,Lo.prototype,t,{allOwnKeys:!0}),se.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return om(Wo(e,r))},n}const Et=om(ti);Et.Axios=Lo;Et.CanceledError=Lr;Et.CancelToken=f1;Et.isCancel=Zg;Et.VERSION=tm;Et.toFormData=Xa;Et.AxiosError=We;Et.Cancel=Et.CanceledError;Et.all=function(t){return Promise.all(t)};Et.spread=h1;Et.isAxiosError=p1;Et.mergeConfig=Wo;Et.AxiosHeaders=Xt;Et.formToJSON=e=>Gg(se.isHTMLForm(e)?new FormData(e):e);Et.getAdapter=em.getAdapter;Et.HttpStatusCode=hu;Et.default=Et;const{Axios:f6,AxiosError:h6,CanceledError:p6,isCancel:g6,CancelToken:m6,VERSION:y6,all:v6,Cancel:b6,isAxiosError:x6,spread:_6,toFormData:w6,AxiosHeaders:k6,HttpStatusCode:E6,formToJSON:S6,getAdapter:$6,mergeConfig:C6}=Et,rm="/api",pu="/",bo=Et.create({baseURL:rm,timeout:3e4});bo.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));bo.interceptors.response.use(e=>e,async e=>{var r;const t=e.config;if(["/auth/login","/auth/register","/auth/2fa/login","/auth/refresh"].some(s=>{var i;return(i=t.url)==null?void 0:i.includes(s)}))return Promise.reject(e);if(((r=e.response)==null?void 0:r.status)===401&&!t._retry){t._retry=!0;const s=localStorage.getItem("refreshToken");if(s)try{const i=await Et.post(`${rm}/auth/refresh`,{refreshToken:s}),{data:a}=i.data,{tokens:l}=a,{accessToken:u,refreshToken:c}=l;return localStorage.setItem("accessToken",u),localStorage.setItem("refreshToken",c),t.headers.Authorization=`Bearer ${u}`,bo(t)}catch(i){return console.error("Token refresh failed, redirecting to login"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href=`${pu}/login`,Promise.reject(i)}else console.warn("No refresh token available, redirecting to login"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href=`${pu}/login`}return Promise.reject(e)});const bn=de(null),ts=de(null),Il=de(null);let cf=!1;function g1(){!cf&&typeof window<"u"&&window.localStorage&&(bn.value=localStorage.getItem("accessToken"),ts.value=localStorage.getItem("refreshToken"),cf=!0)}function sm(){g1();const e=ne(()=>!!bn.value&&!!ts.value);function t(i,a){bn.value=i,ts.value=a,typeof window<"u"&&window.localStorage&&(localStorage.setItem("accessToken",i),localStorage.setItem("refreshToken",a))}function n(){Il.value=null,bn.value=null,ts.value=null,typeof window<"u"&&window.localStorage&&(localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"))}function o(){if(!bn.value)return null;try{const i=Wd(bn.value);return{id:i.userId||i.sub,email:i.email,name:i.name,role:i.role}}catch(i){return console.error("Failed to decode token:",i),null}}function r(){if(!bn.value)return!1;try{const i=Wd(bn.value),a=Date.now()/1e3;return i.exp&&i.exp<a?(console.warn("Access token is expired"),!1):!0}catch(i){return console.error("Failed to validate token:",i),!1}}function s(){n(),typeof window<"u"&&(window.location.href=`${pu}/login`)}return e.value&&r()?Il.value=o():bn.value&&!r()&&n(),{user:Il,accessToken:bn,refreshToken:ts,isAuthenticated:e,setTokens:t,clearAuth:n,getUserFromToken:o,checkTokenValidity:r,redirectToLogin:s}}const m1={id:"app",class:"h-screen overflow-hidden bg-flow-bg dark:bg-flow-bg-dark text-flow-text dark:text-flow-text-dark font-sans antialiased transition-colors duration-200"},y1={__name:"App",setup(e){const t=_c(),{initTheme:n}=Rg(),{isAuthenticated:o,checkTokenValidity:r,redirectToLogin:s}=sm(),i=ne(()=>t.path.includes("playground")||t.query.tutorialId);function a(){const l=new URLSearchParams(window.location.search),u=l.get("authToken");if(u){localStorage.setItem("accessToken",u),l.delete("authToken");const c=window.location.pathname+(l.toString()?"?"+l.toString():"");window.history.replaceState({},"",c)}}return wt(()=>{n(),a(),!i.value&&(!o.value||!r())&&(console.warn("User is not authenticated or token is invalid, redirecting to login"),s())}),(l,u)=>{const c=La("router-view");return O(),D("div",m1,[ue(c)])}}},v1="modulepreload",b1=function(e){return"/editor/"+e},df={},Xe=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){let i=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=i(n.map(u=>{if(u=b1(u),u in df)return;df[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":v1,c||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return r.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};function Os(e){return Da()?(cs(e),!0):!1}function jn(e){return typeof e=="function"?e():ye(e)}const x1=typeof window<"u"&&typeof document<"u",_1=e=>typeof e<"u",w1=Object.prototype.toString,k1=e=>w1.call(e)==="[object Object]",E1=()=>{};function S1(e,t){function n(...o){return new Promise((r,s)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(s)})}return n}const im=e=>e();function $1(e=im){const t=de(!0);function n(){t.value=!1}function o(){t.value=!0}const r=(...s)=>{t.value&&e(...s)};return{isActive:Gi(t),pause:n,resume:o,eventFilter:r}}function ff(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function C1(e,t,n={}){const{eventFilter:o=im,...r}=n;return Fe(e,S1(o,t),r)}function or(e,t,n={}){const{eventFilter:o,...r}=n,{eventFilter:s,pause:i,resume:a,isActive:l}=$1(o);return{stop:C1(e,t,{...r,eventFilter:s}),pause:i,resume:a,isActive:l}}function N1(e,t={}){if(!xt(e))return Cp(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=Bv(()=>({get(){return e.value[o]},set(r){var s;if((s=jn(t.replaceRef))!=null?s:!0)if(Array.isArray(e.value)){const a=[...e.value];a[o]=r,e.value=a}else{const a={...e.value,[o]:r};Object.setPrototypeOf(a,Object.getPrototypeOf(e.value)),e.value=a}else e.value[o]=r}}));return n}function gu(e,t=!1){function n(d,{flush:f="sync",deep:h=!1,timeout:p,throwOnTimeout:y}={}){let m=null;const E=[new Promise(_=>{m=Fe(e,A=>{d(A)!==t&&(m==null||m(),_(A))},{flush:f,deep:h,immediate:!0})})];return p!=null&&E.push(ff(p,y).then(()=>jn(e)).finally(()=>m==null?void 0:m())),Promise.race(E)}function o(d,f){if(!xt(d))return n(A=>A===d,f);const{flush:h="sync",deep:p=!1,timeout:y,throwOnTimeout:m}=f??{};let v=null;const _=[new Promise(A=>{v=Fe([e,d],([Y,j])=>{t!==(Y===j)&&(v==null||v(),A(Y))},{flush:h,deep:p,immediate:!0})})];return y!=null&&_.push(ff(y,m).then(()=>jn(e)).finally(()=>(v==null||v(),jn(e)))),Promise.race(_)}function r(d){return n(f=>!!f,d)}function s(d){return o(null,d)}function i(d){return o(void 0,d)}function a(d){return n(Number.isNaN,d)}function l(d,f){return n(h=>{const p=Array.from(h);return p.includes(d)||p.includes(jn(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let h=-1;return n(()=>(h+=1,h>=d),f)}return Array.isArray(jn(e))?{toMatch:n,toContains:l,changed:u,changedTimes:c,get not(){return gu(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:s,toBeNaN:a,toBeUndefined:i,changed:u,changedTimes:c,get not(){return gu(e,!t)}}}function mu(e){return gu(e)}function T1(e){var t;const n=jn(e);return(t=n==null?void 0:n.$el)!=null?t:n}const am=x1?window:void 0;function lm(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=am):[t,n,o,r]=e,!t)return E1;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const s=[],i=()=>{s.forEach(c=>c()),s.length=0},a=(c,d,f,h)=>(c.addEventListener(d,f,h),()=>c.removeEventListener(d,f,h)),l=Fe(()=>[T1(t),jn(r)],([c,d])=>{if(i(),!c)return;const f=k1(d)?{...d}:d;s.push(...n.flatMap(h=>o.map(p=>a(c,h,p,f))))},{immediate:!0,flush:"post"}),u=()=>{l(),i()};return Os(u),u}function A1(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function hf(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=am,eventName:s="keydown",passive:i=!1,dedupe:a=!1}=o,l=A1(t);return lm(r,s,c=>{c.repeat&&jn(a)||l(c)&&n(c)},i)}function I1(e){return JSON.parse(JSON.stringify(e))}function Ol(e,t,n,o={}){var r,s,i;const{clone:a=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=o,h=ro(),p=n||(h==null?void 0:h.emit)||((r=h==null?void 0:h.$emit)==null?void 0:r.bind(h))||((i=(s=h==null?void 0:h.proxy)==null?void 0:s.$emit)==null?void 0:i.bind(h==null?void 0:h.proxy));let y=u;t||(t="modelValue"),y=y||`update:${t.toString()}`;const m=_=>a?typeof a=="function"?a(_):I1(_):_,v=()=>_1(e[t])?m(e[t]):d,E=_=>{f?f(_)&&p(y,_):p(y,_)};if(l){const _=v(),A=de(_);let Y=!1;return Fe(()=>e[t],j=>{Y||(Y=!0,A.value=m(j),Bt(()=>Y=!1))}),Fe(A,j=>{!Y&&(j!==e[t]||c)&&E(j)},{deep:c}),A}else return ne({get(){return v()},set(_){E(_)}})}var O1={value:()=>{}};function Qa(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Ri(n)}function Ri(e){this._=e}function R1(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Ri.prototype=Qa.prototype={constructor:Ri,on:function(e,t){var n=this._,o=R1(e+"",n),r,s=-1,i=o.length;if(arguments.length<2){for(;++s<i;)if((r=(e=o[s]).type)&&(r=M1(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(r=(e=o[s]).type)n[r]=pf(n[r],e.name,t);else if(t==null)for(r in n)n[r]=pf(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ri(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,s;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],o=0,r=s.length;o<r;++o)s[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)}};function M1(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function pf(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=O1,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var yu="http://www.w3.org/1999/xhtml";const gf={svg:"http://www.w3.org/2000/svg",xhtml:yu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function el(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),gf.hasOwnProperty(t)?{space:gf[t],local:e}:e}function D1(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===yu&&t.documentElement.namespaceURI===yu?t.createElement(e):t.createElementNS(n,e)}}function P1(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function um(e){var t=el(e);return(t.local?P1:D1)(t)}function V1(){}function Sc(e){return e==null?V1:function(){return this.querySelector(e)}}function z1(e){typeof e!="function"&&(e=Sc(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=new Array(i),l,u,c=0;c<i;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Qt(o,this._parents)}function H1(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function F1(){return[]}function cm(e){return e==null?F1:function(){return this.querySelectorAll(e)}}function L1(e){return function(){return H1(e.apply(this,arguments))}}function B1(e){typeof e=="function"?e=L1(e):e=cm(e);for(var t=this._groups,n=t.length,o=[],r=[],s=0;s<n;++s)for(var i=t[s],a=i.length,l,u=0;u<a;++u)(l=i[u])&&(o.push(e.call(l,l.__data__,u,i)),r.push(l));return new Qt(o,r)}function dm(e){return function(){return this.matches(e)}}function fm(e){return function(t){return t.matches(e)}}var j1=Array.prototype.find;function U1(e){return function(){return j1.call(this.children,e)}}function q1(){return this.firstElementChild}function W1(e){return this.select(e==null?q1:U1(typeof e=="function"?e:fm(e)))}var Y1=Array.prototype.filter;function G1(){return Array.from(this.children)}function Z1(e){return function(){return Y1.call(this.children,e)}}function K1(e){return this.selectAll(e==null?G1:Z1(typeof e=="function"?e:fm(e)))}function X1(e){typeof e!="function"&&(e=dm(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new Qt(o,this._parents)}function hm(e){return new Array(e.length)}function J1(){return new Qt(this._enter||this._groups.map(hm),this._parents)}function sa(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}sa.prototype={constructor:sa,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Q1(e){return function(){return e}}function ew(e,t,n,o,r,s){for(var i=0,a,l=t.length,u=s.length;i<u;++i)(a=t[i])?(a.__data__=s[i],o[i]=a):n[i]=new sa(e,s[i]);for(;i<l;++i)(a=t[i])&&(r[i]=a)}function tw(e,t,n,o,r,s,i){var a,l,u=new Map,c=t.length,d=s.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=i.call(l,l.__data__,a,t)+"",u.has(h)?r[a]=l:u.set(h,l));for(a=0;a<d;++a)h=i.call(e,s[a],a,s)+"",(l=u.get(h))?(o[a]=l,l.__data__=s[a],u.delete(h)):n[a]=new sa(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(r[a]=l)}function nw(e){return e.__data__}function ow(e,t){if(!arguments.length)return Array.from(this,nw);var n=t?tw:ew,o=this._parents,r=this._groups;typeof e!="function"&&(e=Q1(e));for(var s=r.length,i=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=o[u],d=r[u],f=d.length,h=rw(e.call(c,c&&c.__data__,u,o)),p=h.length,y=a[u]=new Array(p),m=i[u]=new Array(p),v=l[u]=new Array(f);n(c,d,y,m,v,h,t);for(var E=0,_=0,A,Y;E<p;++E)if(A=y[E]){for(E>=_&&(_=E+1);!(Y=m[_])&&++_<p;);A._next=Y||null}}return i=new Qt(i,o),i._enter=a,i._exit=l,i}function rw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sw(){return new Qt(this._exit||this._groups.map(hm),this._parents)}function iw(e,t,n){var o=this.enter(),r=this,s=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),o&&r?o.merge(r).order():r}function aw(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,s=o.length,i=Math.min(r,s),a=new Array(r),l=0;l<i;++l)for(var u=n[l],c=o[l],d=u.length,f=a[l]=new Array(d),h,p=0;p<d;++p)(h=u[p]||c[p])&&(f[p]=h);for(;l<r;++l)a[l]=n[l];return new Qt(a,this._parents)}function lw(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,s=o[r],i;--r>=0;)(i=o[r])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function uw(e){e||(e=cw);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,r=new Array(o),s=0;s<o;++s){for(var i=n[s],a=i.length,l=r[s]=new Array(a),u,c=0;c<a;++c)(u=i[c])&&(l[c]=u);l.sort(t)}return new Qt(r,this._parents).order()}function cw(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function dw(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function fw(){return Array.from(this)}function hw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length;r<s;++r){var i=o[r];if(i)return i}return null}function pw(){let e=0;for(const t of this)++e;return e}function gw(){return!this.node()}function mw(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],s=0,i=r.length,a;s<i;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function yw(e){return function(){this.removeAttribute(e)}}function vw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bw(e,t){return function(){this.setAttribute(e,t)}}function xw(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function _w(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ww(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function kw(e,t){var n=el(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?vw:yw:typeof t=="function"?n.local?ww:_w:n.local?xw:bw)(n,t))}function pm(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ew(e){return function(){this.style.removeProperty(e)}}function Sw(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $w(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Cw(e,t,n){return arguments.length>1?this.each((t==null?Ew:typeof t=="function"?$w:Sw)(e,t,n??"")):Er(this.node(),e)}function Er(e,t){return e.style.getPropertyValue(t)||pm(e).getComputedStyle(e,null).getPropertyValue(t)}function Nw(e){return function(){delete this[e]}}function Tw(e,t){return function(){this[e]=t}}function Aw(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Iw(e,t){return arguments.length>1?this.each((t==null?Nw:typeof t=="function"?Aw:Tw)(e,t)):this.node()[e]}function gm(e){return e.trim().split(/^|\s+/)}function $c(e){return e.classList||new mm(e)}function mm(e){this._node=e,this._names=gm(e.getAttribute("class")||"")}mm.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ym(e,t){for(var n=$c(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function vm(e,t){for(var n=$c(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Ow(e){return function(){ym(this,e)}}function Rw(e){return function(){vm(this,e)}}function Mw(e,t){return function(){(t.apply(this,arguments)?ym:vm)(this,e)}}function Dw(e,t){var n=gm(e+"");if(arguments.length<2){for(var o=$c(this.node()),r=-1,s=n.length;++r<s;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Mw:t?Ow:Rw)(n,t))}function Pw(){this.textContent=""}function Vw(e){return function(){this.textContent=e}}function zw(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Hw(e){return arguments.length?this.each(e==null?Pw:(typeof e=="function"?zw:Vw)(e)):this.node().textContent}function Fw(){this.innerHTML=""}function Lw(e){return function(){this.innerHTML=e}}function Bw(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function jw(e){return arguments.length?this.each(e==null?Fw:(typeof e=="function"?Bw:Lw)(e)):this.node().innerHTML}function Uw(){this.nextSibling&&this.parentNode.appendChild(this)}function qw(){return this.each(Uw)}function Ww(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Yw(){return this.each(Ww)}function Gw(e){var t=typeof e=="function"?e:um(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Zw(){return null}function Kw(e,t){var n=typeof e=="function"?e:um(e),o=t==null?Zw:typeof t=="function"?t:Sc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Xw(){var e=this.parentNode;e&&e.removeChild(this)}function Jw(){return this.each(Xw)}function Qw(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ek(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function tk(e){return this.select(e?ek:Qw)}function nk(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ok(e){return function(t){e.call(this,t,this.__data__)}}function rk(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function sk(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++o]=s;++o?t.length=o:delete this.__on}}}function ik(e,t,n){return function(){var o=this.__on,r,s=ok(t);if(o){for(var i=0,a=o.length;i<a;++i)if((r=o[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},o?o.push(r):this.__on=[r]}}function ak(e,t,n){var o=rk(e+""),r,s=o.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(r=0,c=a[l];r<s;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value}return}for(a=t?ik:sk,r=0;r<s;++r)this.each(a(o[r],t,n));return this}function bm(e,t,n){var o=pm(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function lk(e,t){return function(){return bm(this,e,t)}}function uk(e,t){return function(){return bm(this,e,t.apply(this,arguments))}}function ck(e,t){return this.each((typeof t=="function"?uk:lk)(e,t))}function*dk(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length,i;r<s;++r)(i=o[r])&&(yield i)}var xm=[null];function Qt(e,t){this._groups=e,this._parents=t}function ni(){return new Qt([[document.documentElement]],xm)}function fk(){return this}Qt.prototype=ni.prototype={constructor:Qt,select:z1,selectAll:B1,selectChild:W1,selectChildren:K1,filter:X1,data:ow,enter:J1,exit:sw,join:iw,merge:aw,selection:fk,order:lw,sort:uw,call:dw,nodes:fw,node:hw,size:pw,empty:gw,each:mw,attr:kw,style:Cw,property:Iw,classed:Dw,text:Hw,html:jw,raise:qw,lower:Yw,append:Gw,insert:Kw,remove:Jw,clone:tk,datum:nk,on:ak,dispatch:ck,[Symbol.iterator]:dk};function an(e){return typeof e=="string"?new Qt([[document.querySelector(e)]],[document.documentElement]):new Qt([[e]],xm)}function hk(e){let t;for(;t=e.sourceEvent;)e=t;return e}function _n(e,t){if(e=hk(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const pk={passive:!1},Rs={capture:!0,passive:!1};function Rl(e){e.stopImmediatePropagation()}function hr(e){e.preventDefault(),e.stopImmediatePropagation()}function _m(e){var t=e.document.documentElement,n=an(e).on("dragstart.drag",hr,Rs);"onselectstart"in t?n.on("selectstart.drag",hr,Rs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function wm(e,t){var n=e.document.documentElement,o=an(e).on("dragstart.drag",null);t&&(o.on("click.drag",hr,Rs),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const di=e=>()=>e;function vu(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:s,x:i,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}vu.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function gk(e){return!e.ctrlKey&&!e.button}function mk(){return this.parentNode}function yk(e,t){return t??{x:e.x,y:e.y}}function vk(){return navigator.maxTouchPoints||"ontouchstart"in this}function bk(){var e=gk,t=mk,n=yk,o=vk,r={},s=Qa("start","drag","end"),i=0,a,l,u,c,d=0;function f(A){A.on("mousedown.drag",h).filter(o).on("touchstart.drag",m).on("touchmove.drag",v,pk).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(A,Y){if(!(c||!e.call(this,A,Y))){var j=_(this,t.call(this,A,Y),A,Y,"mouse");j&&(an(A.view).on("mousemove.drag",p,Rs).on("mouseup.drag",y,Rs),_m(A.view),Rl(A),u=!1,a=A.clientX,l=A.clientY,j("start",A))}}function p(A){if(hr(A),!u){var Y=A.clientX-a,j=A.clientY-l;u=Y*Y+j*j>d}r.mouse("drag",A)}function y(A){an(A.view).on("mousemove.drag mouseup.drag",null),wm(A.view,u),hr(A),r.mouse("end",A)}function m(A,Y){if(e.call(this,A,Y)){var j=A.changedTouches,H=t.call(this,A,Y),I=j.length,L,B;for(L=0;L<I;++L)(B=_(this,H,A,Y,j[L].identifier,j[L]))&&(Rl(A),B("start",A,j[L]))}}function v(A){var Y=A.changedTouches,j=Y.length,H,I;for(H=0;H<j;++H)(I=r[Y[H].identifier])&&(hr(A),I("drag",A,Y[H]))}function E(A){var Y=A.changedTouches,j=Y.length,H,I;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),H=0;H<j;++H)(I=r[Y[H].identifier])&&(Rl(A),I("end",A,Y[H]))}function _(A,Y,j,H,I,L){var B=s.copy(),V=_n(L||j,Y),S,z,g;if((g=n.call(A,new vu("beforestart",{sourceEvent:j,target:f,identifier:I,active:i,x:V[0],y:V[1],dx:0,dy:0,dispatch:B}),H))!=null)return S=g.x-V[0]||0,z=g.y-V[1]||0,function C(w,F,P){var X=V,G;switch(w){case"start":r[I]=C,G=i++;break;case"end":delete r[I],--i;case"drag":V=_n(P||F,Y),G=i;break}B.call(w,A,new vu(w,{sourceEvent:F,subject:g,target:f,identifier:I,active:G,x:V[0]+S,y:V[1]+z,dx:V[0]-X[0],dy:V[1]-X[1],dispatch:B}),H)}}return f.filter=function(A){return arguments.length?(e=typeof A=="function"?A:di(!!A),f):e},f.container=function(A){return arguments.length?(t=typeof A=="function"?A:di(A),f):t},f.subject=function(A){return arguments.length?(n=typeof A=="function"?A:di(A),f):n},f.touchable=function(A){return arguments.length?(o=typeof A=="function"?A:di(!!A),f):o},f.on=function(){var A=s.on.apply(s,arguments);return A===s?f:A},f.clickDistance=function(A){return arguments.length?(d=(A=+A)*A,f):Math.sqrt(d)},f}function Cc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function km(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function oi(){}var Ms=.7,ia=1/Ms,pr="\\s*([+-]?\\d+)\\s*",Ds="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xk=/^#([0-9a-f]{3,8})$/,_k=new RegExp(`^rgb\\(${pr},${pr},${pr}\\)$`),wk=new RegExp(`^rgb\\(${Nn},${Nn},${Nn}\\)$`),kk=new RegExp(`^rgba\\(${pr},${pr},${pr},${Ds}\\)$`),Ek=new RegExp(`^rgba\\(${Nn},${Nn},${Nn},${Ds}\\)$`),Sk=new RegExp(`^hsl\\(${Ds},${Nn},${Nn}\\)$`),$k=new RegExp(`^hsla\\(${Ds},${Nn},${Nn},${Ds}\\)$`),mf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cc(oi,Yo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:yf,formatHex:yf,formatHex8:Ck,formatHsl:Nk,formatRgb:vf,toString:vf});function yf(){return this.rgb().formatHex()}function Ck(){return this.rgb().formatHex8()}function Nk(){return Em(this).formatHsl()}function vf(){return this.rgb().formatRgb()}function Yo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=xk.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?bf(t):n===3?new Gt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?fi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?fi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_k.exec(e))?new Gt(t[1],t[2],t[3],1):(t=wk.exec(e))?new Gt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=kk.exec(e))?fi(t[1],t[2],t[3],t[4]):(t=Ek.exec(e))?fi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Sk.exec(e))?wf(t[1],t[2]/100,t[3]/100,1):(t=$k.exec(e))?wf(t[1],t[2]/100,t[3]/100,t[4]):mf.hasOwnProperty(e)?bf(mf[e]):e==="transparent"?new Gt(NaN,NaN,NaN,0):null}function bf(e){return new Gt(e>>16&255,e>>8&255,e&255,1)}function fi(e,t,n,o){return o<=0&&(e=t=n=NaN),new Gt(e,t,n,o)}function Tk(e){return e instanceof oi||(e=Yo(e)),e?(e=e.rgb(),new Gt(e.r,e.g,e.b,e.opacity)):new Gt}function bu(e,t,n,o){return arguments.length===1?Tk(e):new Gt(e,t,n,o??1)}function Gt(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Cc(Gt,bu,km(oi,{brighter(e){return e=e==null?ia:Math.pow(ia,e),new Gt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ms:Math.pow(Ms,e),new Gt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Gt(Bo(this.r),Bo(this.g),Bo(this.b),aa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xf,formatHex:xf,formatHex8:Ak,formatRgb:_f,toString:_f}));function xf(){return`#${Po(this.r)}${Po(this.g)}${Po(this.b)}`}function Ak(){return`#${Po(this.r)}${Po(this.g)}${Po(this.b)}${Po((isNaN(this.opacity)?1:this.opacity)*255)}`}function _f(){const e=aa(this.opacity);return`${e===1?"rgb(":"rgba("}${Bo(this.r)}, ${Bo(this.g)}, ${Bo(this.b)}${e===1?")":`, ${e})`}`}function aa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Bo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Po(e){return e=Bo(e),(e<16?"0":"")+e.toString(16)}function wf(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ln(e,t,n,o)}function Em(e){if(e instanceof ln)return new ln(e.h,e.s,e.l,e.opacity);if(e instanceof oi||(e=Yo(e)),!e)return new ln;if(e instanceof ln)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),s=Math.max(t,n,o),i=NaN,a=s-r,l=(s+r)/2;return a?(t===s?i=(n-o)/a+(n<o)*6:n===s?i=(o-t)/a+2:i=(t-n)/a+4,a/=l<.5?s+r:2-s-r,i*=60):a=l>0&&l<1?0:i,new ln(i,a,l,e.opacity)}function Ik(e,t,n,o){return arguments.length===1?Em(e):new ln(e,t,n,o??1)}function ln(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Cc(ln,Ik,km(oi,{brighter(e){return e=e==null?ia:Math.pow(ia,e),new ln(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ms:Math.pow(Ms,e),new ln(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new Gt(Ml(e>=240?e-240:e+120,r,o),Ml(e,r,o),Ml(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new ln(kf(this.h),hi(this.s),hi(this.l),aa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=aa(this.opacity);return`${e===1?"hsl(":"hsla("}${kf(this.h)}, ${hi(this.s)*100}%, ${hi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function kf(e){return e=(e||0)%360,e<0?e+360:e}function hi(e){return Math.max(0,Math.min(1,e||0))}function Ml(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Nc=e=>()=>e;function Ok(e,t){return function(n){return e+n*t}}function Rk(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Mk(e){return(e=+e)==1?Sm:function(t,n){return n-t?Rk(t,n,e):Nc(isNaN(t)?n:t)}}function Sm(e,t){var n=t-e;return n?Ok(e,n):Nc(isNaN(e)?t:e)}const la=(function e(t){var n=Mk(t);function o(r,s){var i=n((r=bu(r)).r,(s=bu(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),u=Sm(r.opacity,s.opacity);return function(c){return r.r=i(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return o.gamma=e,o})(1);function Dk(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),r;return function(s){for(r=0;r<n;++r)o[r]=e[r]*(1-s)+t[r]*s;return o}}function Pk(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Vk(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,r=new Array(o),s=new Array(n),i;for(i=0;i<o;++i)r[i]=xs(e[i],t[i]);for(;i<n;++i)s[i]=t[i];return function(a){for(i=0;i<o;++i)s[i]=r[i](a);return s}}function zk(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function kn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Hk(e,t){var n={},o={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=xs(e[r],t[r]):o[r]=t[r];return function(s){for(r in n)o[r]=n[r](s);return o}}var xu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dl=new RegExp(xu.source,"g");function Fk(e){return function(){return e}}function Lk(e){return function(t){return e(t)+""}}function $m(e,t){var n=xu.lastIndex=Dl.lastIndex=0,o,r,s,i=-1,a=[],l=[];for(e=e+"",t=t+"";(o=xu.exec(e))&&(r=Dl.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(o=o[0])===(r=r[0])?a[i]?a[i]+=r:a[++i]=r:(a[++i]=null,l.push({i,x:kn(o,r)})),n=Dl.lastIndex;return n<t.length&&(s=t.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?l[0]?Lk(l[0].x):Fk(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function xs(e,t){var n=typeof t,o;return t==null||n==="boolean"?Nc(t):(n==="number"?kn:n==="string"?(o=Yo(t))?(t=o,la):$m:t instanceof Yo?la:t instanceof Date?zk:Pk(t)?Dk:Array.isArray(t)?Vk:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Hk:kn)(e,t)}var Ef=180/Math.PI,_u={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cm(e,t,n,o,r,s){var i,a,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*Ef,skewX:Math.atan(l)*Ef,scaleX:i,scaleY:a}}var pi;function Bk(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_u:Cm(t.a,t.b,t.c,t.d,t.e,t.f)}function jk(e){return e==null||(pi||(pi=document.createElementNS("http://www.w3.org/2000/svg","g")),pi.setAttribute("transform",e),!(e=pi.transform.baseVal.consolidate()))?_u:(e=e.matrix,Cm(e.a,e.b,e.c,e.d,e.e,e.f))}function Nm(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function s(u,c,d,f,h,p){if(u!==d||c!==f){var y=h.push("translate(",null,t,null,n);p.push({i:y-4,x:kn(u,d)},{i:y-2,x:kn(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function i(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,o)-2,x:kn(u,c)})):c&&d.push(r(d)+"rotate("+c+o)}function a(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,o)-2,x:kn(u,c)}):c&&d.push(r(d)+"skewX("+c+o)}function l(u,c,d,f,h,p){if(u!==d||c!==f){var y=h.push(r(h)+"scale(",null,",",null,")");p.push({i:y-4,x:kn(u,d)},{i:y-2,x:kn(c,f)})}else(d!==1||f!==1)&&h.push(r(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,d,f),i(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var p=-1,y=f.length,m;++p<y;)d[(m=f[p]).i]=m.x(h);return d.join("")}}}var Uk=Nm(Bk,"px, ","px)","deg)"),qk=Nm(jk,", ",")",")"),Wk=1e-12;function Sf(e){return((e=Math.exp(e))+1/e)/2}function Yk(e){return((e=Math.exp(e))-1/e)/2}function Gk(e){return((e=Math.exp(2*e))-1)/(e+1)}const Mi=(function e(t,n,o){function r(s,i){var a=s[0],l=s[1],u=s[2],c=i[0],d=i[1],f=i[2],h=c-a,p=d-l,y=h*h+p*p,m,v;if(y<Wk)v=Math.log(f/u)/t,m=function(H){return[a+H*h,l+H*p,u*Math.exp(t*H*v)]};else{var E=Math.sqrt(y),_=(f*f-u*u+o*y)/(2*u*n*E),A=(f*f-u*u-o*y)/(2*f*n*E),Y=Math.log(Math.sqrt(_*_+1)-_),j=Math.log(Math.sqrt(A*A+1)-A);v=(j-Y)/t,m=function(H){var I=H*v,L=Sf(Y),B=u/(n*E)*(L*Gk(t*I+Y)-Yk(Y));return[a+B*h,l+B*p,u*L/Sf(t*I+Y)]}}return m.duration=v*1e3*t/Math.SQRT2,m}return r.rho=function(s){var i=Math.max(.001,+s),a=i*i,l=a*a;return e(i,a,l)},r})(Math.SQRT2,2,4);var Sr=0,ns=0,Yr=0,Tm=1e3,ua,os,ca=0,Go=0,tl=0,Ps=typeof performance=="object"&&performance.now?performance:Date,Am=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Tc(){return Go||(Am(Zk),Go=Ps.now()+tl)}function Zk(){Go=0}function da(){this._call=this._time=this._next=null}da.prototype=Im.prototype={constructor:da,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Tc():+n)+(t==null?0:+t),!this._next&&os!==this&&(os?os._next=this:ua=this,os=this),this._call=e,this._time=n,wu()},stop:function(){this._call&&(this._call=null,this._time=1/0,wu())}};function Im(e,t,n){var o=new da;return o.restart(e,t,n),o}function Kk(){Tc(),++Sr;for(var e=ua,t;e;)(t=Go-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Sr}function $f(){Go=(ca=Ps.now())+tl,Sr=ns=0;try{Kk()}finally{Sr=0,Jk(),Go=0}}function Xk(){var e=Ps.now(),t=e-ca;t>Tm&&(tl-=t,ca=e)}function Jk(){for(var e,t=ua,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ua=n);os=e,wu(o)}function wu(e){if(!Sr){ns&&(ns=clearTimeout(ns));var t=e-Go;t>24?(e<1/0&&(ns=setTimeout($f,e-Ps.now()-tl)),Yr&&(Yr=clearInterval(Yr))):(Yr||(ca=Ps.now(),Yr=setInterval(Xk,Tm)),Sr=1,Am($f))}}function Cf(e,t,n){var o=new da;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Qk=Qa("start","end","cancel","interrupt"),eE=[],Om=0,Nf=1,ku=2,Di=3,Tf=4,Eu=5,Pi=6;function nl(e,t,n,o,r,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;tE(e,n,{name:t,index:o,group:r,on:Qk,tween:eE,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Om})}function Ac(e,t){var n=gn(e,t);if(n.state>Om)throw new Error("too late; already scheduled");return n}function Mn(e,t){var n=gn(e,t);if(n.state>Di)throw new Error("too late; already running");return n}function gn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function tE(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Im(s,0,n.time);function s(u){n.state=Nf,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var c,d,f,h;if(n.state!==Nf)return l();for(c in o)if(h=o[c],h.name===n.name){if(h.state===Di)return Cf(i);h.state===Tf?(h.state=Pi,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=Pi,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(Cf(function(){n.state===Di&&(n.state=Tf,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=ku,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ku){for(n.state=Di,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Eu,1),d=-1,f=r.length;++d<f;)r[d].call(e,c);n.state===Eu&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Pi,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Vi(e,t){var n=e.__transition,o,r,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((o=n[i]).name!==t){s=!1;continue}r=o.state>ku&&o.state<Eu,o.state=Pi,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[i]}s&&delete e.__transition}}function nE(e){return this.each(function(){Vi(this,e)})}function oE(e,t){var n,o;return function(){var r=Mn(this,e),s=r.tween;if(s!==n){o=n=s;for(var i=0,a=o.length;i<a;++i)if(o[i].name===t){o=o.slice(),o.splice(i,1);break}}r.tween=o}}function rE(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var s=Mn(this,e),i=s.tween;if(i!==o){r=(o=i).slice();for(var a={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=a;break}l===u&&r.push(a)}s.tween=r}}function sE(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=gn(this.node(),n).tween,r=0,s=o.length,i;r<s;++r)if((i=o[r]).name===e)return i.value;return null}return this.each((t==null?oE:rE)(n,e,t))}function Ic(e,t,n){var o=e._id;return e.each(function(){var r=Mn(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return gn(r,o).value[t]}}function Rm(e,t){var n;return(typeof t=="number"?kn:t instanceof Yo?la:(n=Yo(t))?(t=n,la):$m)(e,t)}function iE(e){return function(){this.removeAttribute(e)}}function aE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lE(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttribute(e);return i===r?null:i===o?s:s=t(o=i,n)}}function uE(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===o?s:s=t(o=i,n)}}function cE(e,t,n){var o,r,s;return function(){var i,a=n(this),l;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=a+"",i===l?null:i===o&&l===r?s:(r=l,s=t(o=i,a)))}}function dE(e,t,n){var o,r,s;return function(){var i,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=a+"",i===l?null:i===o&&l===r?s:(r=l,s=t(o=i,a)))}}function fE(e,t){var n=el(e),o=n==="transform"?qk:Rm;return this.attrTween(e,typeof t=="function"?(n.local?dE:cE)(n,o,Ic(this,"attr."+e,t)):t==null?(n.local?aE:iE)(n):(n.local?uE:lE)(n,o,t))}function hE(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function pE(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function gE(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&pE(e,s)),n}return r._value=t,r}function mE(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&hE(e,s)),n}return r._value=t,r}function yE(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=el(e);return this.tween(n,(o.local?gE:mE)(o,t))}function vE(e,t){return function(){Ac(this,e).delay=+t.apply(this,arguments)}}function bE(e,t){return t=+t,function(){Ac(this,e).delay=t}}function xE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vE:bE)(t,e)):gn(this.node(),t).delay}function _E(e,t){return function(){Mn(this,e).duration=+t.apply(this,arguments)}}function wE(e,t){return t=+t,function(){Mn(this,e).duration=t}}function kE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_E:wE)(t,e)):gn(this.node(),t).duration}function EE(e,t){if(typeof t!="function")throw new Error;return function(){Mn(this,e).ease=t}}function SE(e){var t=this._id;return arguments.length?this.each(EE(t,e)):gn(this.node(),t).ease}function $E(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Mn(this,e).ease=n}}function CE(e){if(typeof e!="function")throw new Error;return this.each($E(this._id,e))}function NE(e){typeof e!="function"&&(e=dm(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new eo(o,this._parents,this._name,this._id)}function TE(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,s=Math.min(o,r),i=new Array(o),a=0;a<s;++a)for(var l=t[a],u=n[a],c=l.length,d=i[a]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;a<o;++a)i[a]=t[a];return new eo(i,this._parents,this._name,this._id)}function AE(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function IE(e,t,n){var o,r,s=AE(t)?Ac:Mn;return function(){var i=s(this,e),a=i.on;a!==o&&(r=(o=a).copy()).on(t,n),i.on=r}}function OE(e,t){var n=this._id;return arguments.length<2?gn(this.node(),n).on.on(e):this.each(IE(n,e,t))}function RE(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function ME(){return this.on("end.remove",RE(this._id))}function DE(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Sc(e));for(var o=this._groups,r=o.length,s=new Array(r),i=0;i<r;++i)for(var a=o[i],l=a.length,u=s[i]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,nl(u[f],t,n,f,u,gn(c,n)));return new eo(s,this._parents,t,n)}function PE(e){var t=this._name,n=this._id;typeof e!="function"&&(e=cm(e));for(var o=this._groups,r=o.length,s=[],i=[],a=0;a<r;++a)for(var l=o[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,p=gn(c,n),y=0,m=f.length;y<m;++y)(h=f[y])&&nl(h,t,n,y,f,p);s.push(f),i.push(c)}return new eo(s,i,t,n)}var VE=ni.prototype.constructor;function zE(){return new VE(this._groups,this._parents)}function HE(e,t){var n,o,r;return function(){var s=Er(this,e),i=(this.style.removeProperty(e),Er(this,e));return s===i?null:s===n&&i===o?r:r=t(n=s,o=i)}}function Mm(e){return function(){this.style.removeProperty(e)}}function FE(e,t,n){var o,r=n+"",s;return function(){var i=Er(this,e);return i===r?null:i===o?s:s=t(o=i,n)}}function LE(e,t,n){var o,r,s;return function(){var i=Er(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Er(this,e))),i===l?null:i===o&&l===r?s:(r=l,s=t(o=i,a))}}function BE(e,t){var n,o,r,s="style."+t,i="end."+s,a;return function(){var l=Mn(this,e),u=l.on,c=l.value[s]==null?a||(a=Mm(t)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(i,r=c),l.on=o}}function jE(e,t,n){var o=(e+="")=="transform"?Uk:Rm;return t==null?this.styleTween(e,HE(e,o)).on("end.style."+e,Mm(e)):typeof t=="function"?this.styleTween(e,LE(e,o,Ic(this,"style."+e,t))).each(BE(this._id,e)):this.styleTween(e,FE(e,o,t),n).on("end.style."+e,null)}function UE(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function qE(e,t,n){var o,r;function s(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&UE(e,i,n)),o}return s._value=t,s}function WE(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,qE(e,t,n??""))}function YE(e){return function(){this.textContent=e}}function GE(e){return function(){var t=e(this);this.textContent=t??""}}function ZE(e){return this.tween("text",typeof e=="function"?GE(Ic(this,"text",e)):YE(e==null?"":e+""))}function KE(e){return function(t){this.textContent=e.call(this,t)}}function XE(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&KE(r)),t}return o._value=e,o}function JE(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,XE(e))}function QE(){for(var e=this._name,t=this._id,n=Dm(),o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,l,u=0;u<a;++u)if(l=i[u]){var c=gn(l,t);nl(l,e,n,u,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new eo(o,this._parents,e,n)}function eS(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(s,i){var a={value:i},l={value:function(){--r===0&&s()}};n.each(function(){var u=Mn(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),r===0&&s()})}var tS=0;function eo(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Dm(){return++tS}var zn=ni.prototype;eo.prototype={constructor:eo,select:DE,selectAll:PE,selectChild:zn.selectChild,selectChildren:zn.selectChildren,filter:NE,merge:TE,selection:zE,transition:QE,call:zn.call,nodes:zn.nodes,node:zn.node,size:zn.size,empty:zn.empty,each:zn.each,on:OE,attr:fE,attrTween:yE,style:jE,styleTween:WE,text:ZE,textTween:JE,remove:ME,tween:sE,delay:xE,duration:kE,ease:SE,easeVarying:CE,end:eS,[Symbol.iterator]:zn[Symbol.iterator]};function nS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var oS={time:null,delay:0,duration:250,ease:nS};function rS(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function sS(e){var t,n;e instanceof eo?(t=e._id,e=e._name):(t=Dm(),(n=oS).time=Tc(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,l,u=0;u<a;++u)(l=i[u])&&nl(l,e,t,u,i,n||rS(l,t));return new eo(o,this._parents,e,t)}ni.prototype.interrupt=nE;ni.prototype.transition=sS;const gi=e=>()=>e;function iS(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function qn(e,t,n){this.k=e,this.x=t,this.y=n}qn.prototype={constructor:qn,scale:function(e){return e===1?this:new qn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new qn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $r=new qn(1,0,0);qn.prototype;function Pl(e){e.stopImmediatePropagation()}function Gr(e){e.preventDefault(),e.stopImmediatePropagation()}function aS(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function lS(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Af(){return this.__zoom||$r}function uS(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function cS(){return navigator.maxTouchPoints||"ontouchstart"in this}function dS(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function fS(){var e=aS,t=lS,n=dS,o=uS,r=cS,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Mi,u=Qa("start","zoom","end"),c,d,f,h=500,p=150,y=0,m=10;function v(g){g.property("__zoom",Af).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",B).filter(r).on("touchstart.zoom",V).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(g,C,w,F){var P=g.selection?g.selection():g;P.property("__zoom",Af),g!==P?Y(g,C,w,F):P.interrupt().each(function(){j(this,arguments).event(F).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},v.scaleBy=function(g,C,w,F){v.scaleTo(g,function(){var P=this.__zoom.k,X=typeof C=="function"?C.apply(this,arguments):C;return P*X},w,F)},v.scaleTo=function(g,C,w,F){v.transform(g,function(){var P=t.apply(this,arguments),X=this.__zoom,G=w==null?A(P):typeof w=="function"?w.apply(this,arguments):w,oe=X.invert(G),ge=typeof C=="function"?C.apply(this,arguments):C;return n(_(E(X,ge),G,oe),P,i)},w,F)},v.translateBy=function(g,C,w,F){v.transform(g,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof w=="function"?w.apply(this,arguments):w),t.apply(this,arguments),i)},null,F)},v.translateTo=function(g,C,w,F,P){v.transform(g,function(){var X=t.apply(this,arguments),G=this.__zoom,oe=F==null?A(X):typeof F=="function"?F.apply(this,arguments):F;return n($r.translate(oe[0],oe[1]).scale(G.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof w=="function"?-w.apply(this,arguments):-w),X,i)},F,P)};function E(g,C){return C=Math.max(s[0],Math.min(s[1],C)),C===g.k?g:new qn(C,g.x,g.y)}function _(g,C,w){var F=C[0]-w[0]*g.k,P=C[1]-w[1]*g.k;return F===g.x&&P===g.y?g:new qn(g.k,F,P)}function A(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function Y(g,C,w,F){g.on("start.zoom",function(){j(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(F).end()}).tween("zoom",function(){var P=this,X=arguments,G=j(P,X).event(F),oe=t.apply(P,X),ge=w==null?A(oe):typeof w=="function"?w.apply(P,X):w,Z=Math.max(oe[1][0]-oe[0][0],oe[1][1]-oe[0][1]),ce=P.__zoom,pe=typeof C=="function"?C.apply(P,X):C,xe=l(ce.invert(ge).concat(Z/ce.k),pe.invert(ge).concat(Z/pe.k));return function(K){if(K===1)K=pe;else{var le=xe(K),ie=Z/le[2];K=new qn(ie,ge[0]-le[0]*ie,ge[1]-le[1]*ie)}G.zoom(null,K)}})}function j(g,C,w){return!w&&g.__zooming||new H(g,C)}function H(g,C){this.that=g,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(g,C),this.taps=0}H.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,C){return this.mouse&&g!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var C=an(this.that).datum();u.call(g,this.that,new iS(g,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:u}),C)}};function I(g,...C){if(!e.apply(this,arguments))return;var w=j(this,C).event(g),F=this.__zoom,P=Math.max(s[0],Math.min(s[1],F.k*Math.pow(2,o.apply(this,arguments)))),X=_n(g);if(w.wheel)(w.mouse[0][0]!==X[0]||w.mouse[0][1]!==X[1])&&(w.mouse[1]=F.invert(w.mouse[0]=X)),clearTimeout(w.wheel);else{if(F.k===P)return;w.mouse=[X,F.invert(X)],Vi(this),w.start()}Gr(g),w.wheel=setTimeout(G,p),w.zoom("mouse",n(_(E(F,P),w.mouse[0],w.mouse[1]),w.extent,i));function G(){w.wheel=null,w.end()}}function L(g,...C){if(f||!e.apply(this,arguments))return;var w=g.currentTarget,F=j(this,C,!0).event(g),P=an(g.view).on("mousemove.zoom",ge,!0).on("mouseup.zoom",Z,!0),X=_n(g,w),G=g.clientX,oe=g.clientY;_m(g.view),Pl(g),F.mouse=[X,this.__zoom.invert(X)],Vi(this),F.start();function ge(ce){if(Gr(ce),!F.moved){var pe=ce.clientX-G,xe=ce.clientY-oe;F.moved=pe*pe+xe*xe>y}F.event(ce).zoom("mouse",n(_(F.that.__zoom,F.mouse[0]=_n(ce,w),F.mouse[1]),F.extent,i))}function Z(ce){P.on("mousemove.zoom mouseup.zoom",null),wm(ce.view,F.moved),Gr(ce),F.event(ce).end()}}function B(g,...C){if(e.apply(this,arguments)){var w=this.__zoom,F=_n(g.changedTouches?g.changedTouches[0]:g,this),P=w.invert(F),X=w.k*(g.shiftKey?.5:2),G=n(_(E(w,X),F,P),t.apply(this,C),i);Gr(g),a>0?an(this).transition().duration(a).call(Y,G,F,g):an(this).call(v.transform,G,F,g)}}function V(g,...C){if(e.apply(this,arguments)){var w=g.touches,F=w.length,P=j(this,C,g.changedTouches.length===F).event(g),X,G,oe,ge;for(Pl(g),G=0;G<F;++G)oe=w[G],ge=_n(oe,this),ge=[ge,this.__zoom.invert(ge),oe.identifier],P.touch0?!P.touch1&&P.touch0[2]!==ge[2]&&(P.touch1=ge,P.taps=0):(P.touch0=ge,X=!0,P.taps=1+!!c);c&&(c=clearTimeout(c)),X&&(P.taps<2&&(d=ge[0],c=setTimeout(function(){c=null},h)),Vi(this),P.start())}}function S(g,...C){if(this.__zooming){var w=j(this,C).event(g),F=g.changedTouches,P=F.length,X,G,oe,ge;for(Gr(g),X=0;X<P;++X)G=F[X],oe=_n(G,this),w.touch0&&w.touch0[2]===G.identifier?w.touch0[0]=oe:w.touch1&&w.touch1[2]===G.identifier&&(w.touch1[0]=oe);if(G=w.that.__zoom,w.touch1){var Z=w.touch0[0],ce=w.touch0[1],pe=w.touch1[0],xe=w.touch1[1],K=(K=pe[0]-Z[0])*K+(K=pe[1]-Z[1])*K,le=(le=xe[0]-ce[0])*le+(le=xe[1]-ce[1])*le;G=E(G,Math.sqrt(K/le)),oe=[(Z[0]+pe[0])/2,(Z[1]+pe[1])/2],ge=[(ce[0]+xe[0])/2,(ce[1]+xe[1])/2]}else if(w.touch0)oe=w.touch0[0],ge=w.touch0[1];else return;w.zoom("touch",n(_(G,oe,ge),w.extent,i))}}function z(g,...C){if(this.__zooming){var w=j(this,C).event(g),F=g.changedTouches,P=F.length,X,G;for(Pl(g),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),X=0;X<P;++X)G=F[X],w.touch0&&w.touch0[2]===G.identifier?delete w.touch0:w.touch1&&w.touch1[2]===G.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(G=_n(G,this),Math.hypot(d[0]-G[0],d[1]-G[1])<m)){var oe=an(this).on("dblclick.zoom");oe&&oe.apply(this,arguments)}}}return v.wheelDelta=function(g){return arguments.length?(o=typeof g=="function"?g:gi(+g),v):o},v.filter=function(g){return arguments.length?(e=typeof g=="function"?g:gi(!!g),v):e},v.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:gi(!!g),v):r},v.extent=function(g){return arguments.length?(t=typeof g=="function"?g:gi([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),v):t},v.scaleExtent=function(g){return arguments.length?(s[0]=+g[0],s[1]=+g[1],v):[s[0],s[1]]},v.translateExtent=function(g){return arguments.length?(i[0][0]=+g[0][0],i[1][0]=+g[1][0],i[0][1]=+g[0][1],i[1][1]=+g[1][1],v):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},v.constrain=function(g){return arguments.length?(n=g,v):n},v.duration=function(g){return arguments.length?(a=+g,v):a},v.interpolate=function(g){return arguments.length?(l=g,v):l},v.on=function(){var g=u.on.apply(u,arguments);return g===u?v:g},v.clickDistance=function(g){return arguments.length?(y=(g=+g)*g,v):Math.sqrt(y)},v.tapDistance=function(g){return arguments.length?(m=+g,v):m},v}var Oe=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(Oe||{}),Oc=(e=>(e.Partial="partial",e.Full="full",e))(Oc||{}),Oo=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Oo||{}),to=(e=>(e.Strict="strict",e.Loose="loose",e))(to||{}),Su=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Su||{}),_s=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(_s||{}),Pm=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(Pm||{});const hS=["INPUT","SELECT","TEXTAREA"],pS=typeof document<"u"?document:null;function $u(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,r=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,s=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return hS.includes(o==null?void 0:o.nodeName)||r||!!s}function gS(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function If(e,t,n,o){const r=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(i=>i.trim().toLowerCase());if(r.length===1)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const s=r.every((i,a)=>n.has(i)&&Array.from(n.values())[a]===r[a]);return o&&n.delete(e.toLowerCase()),s}function mS(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=yS(n.code,e);return Array.isArray(e)?e.some(r=>If(n[o],r,t,n.type==="keyup")):If(n[o],e,t,n.type==="keyup")}}function yS(e,t){return t.includes(e)?"code":"key"}function ws(e,t){const n=ne(()=>et(t==null?void 0:t.target)??pS),o=yr(et(e)===!0);let r=!1;const s=new Set;let i=l(et(e));Fe(()=>et(e),(u,c)=>{typeof c=="boolean"&&typeof u!="boolean"&&a(),i=l(u)},{immediate:!0}),lm(["blur","contextmenu"],a),hf((...u)=>i(...u),u=>{var c,d;const f=et(t==null?void 0:t.actInsideInputWithModifier)??!0,h=et(t==null?void 0:t.preventDefault)??!1;if(r=gS(u),(!r||r&&!f)&&$u(u))return;const y=((d=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:d[0])||u.target,m=(y==null?void 0:y.nodeName)==="BUTTON"||(y==null?void 0:y.nodeName)==="A";!h&&(r||!m)&&u.preventDefault(),o.value=!0},{eventName:"keydown",target:n}),hf((...u)=>i(...u),u=>{const c=et(t==null?void 0:t.actInsideInputWithModifier)??!0;if(o.value){if((!r||r&&!c)&&$u(u))return;r=!1,o.value=!1}},{eventName:"keyup",target:n});function a(){r=!1,s.clear(),o.value=et(e)===!0}function l(u){return u===null?(a(),()=>!1):typeof u=="boolean"?(a(),o.value=u,()=>!1):Array.isArray(u)||typeof u=="string"?mS(u,s):u}return o}const Vm="vue-flow__node-desc",zm="vue-flow__edge-desc",vS="vue-flow__aria-live",Hm=["Enter"," ","Escape"],gr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function fa(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function ha(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function ol(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Zo(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Fm(e,t){return{x:Zo(e.x,t[0][0],t[1][0]),y:Zo(e.y,t[0][1],t[1][1])}}function Of(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function So(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function jo(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!So(e)}function rs(e){return jo(e)&&"computedPosition"in e}function mi(e){return!Number.isNaN(e)&&Number.isFinite(e)}function bS(e){return mi(e.width)&&mi(e.height)&&mi(e.x)&&mi(e.y)}function xS(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:Ho({width:0,height:0}),computedPosition:Ho({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Ct(e.data)?e.data:{},events:Ho(Ct(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function Lm(e,t,n){var o,r;const s={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(r=e.targetHandle)==null?void 0:r.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:Ct(e.data)?e.data:{},events:Ho(Ct(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??s,e,{id:e.id.toString()})}function Bm(e,t,n,o){const r=typeof e=="string"?e:e.id,s=new Set,i=o==="source"?"target":"source";for(const a of n)a[i]===r&&s.add(a[o]);return t.filter(a=>s.has(a.id))}function _S(...e){if(e.length===3){const[s,i,a]=e;return Bm(s,i,a,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(s=>So(s)&&s.source===o).map(s=>n.find(i=>jo(i)&&i.id===s.target))}function wS(...e){if(e.length===3){const[s,i,a]=e;return Bm(s,i,a,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(s=>So(s)&&s.target===o).map(s=>n.find(i=>jo(i)&&i.id===s.source))}function jm({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function kS(e,t){return t.some(n=>So(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Vs({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function zs({x:e,y:t},{x:n,y:o,zoom:r},s=!1,i=[1,1]){const a={x:(e-n)/r,y:(t-o)/r};return s?rl(a,i):a}function Um(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function pa({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function qm({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function ES(e,t){return qm(Um(pa(e),pa(t)))}function Rc(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=Um(t,pa({...o.computedPosition,...o.dimensions}))}return qm(t)}function Wm(e,t,n={x:0,y:0,zoom:1},o=!1,r=!1){const s={...zs(t,n),width:t.width/n.zoom,height:t.height/n.zoom},i=[];for(const a of e){const{dimensions:l,selectable:u=!0,hidden:c=!1}=a,d=l.width??a.width??null,f=l.height??a.height??null;if(r&&!u||c)continue;const h=ha(s,fa(a)),p=d===null||f===null,y=o&&h>0,m=(d??0)*(f??0);(p||y||h>=m||a.dragging)&&i.push(a)}return i}function Ro(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function rr(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return ri(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function SS(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=rr(e,n),r=rr(e,t);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof e=="object"){const o=rr(e.top??e.y??0,n),r=rr(e.bottom??e.y??0,n),s=rr(e.left??e.x??0,t),i=rr(e.right??e.x??0,t);return{top:o,right:i,bottom:r,left:s,x:s+i,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function $S(e,t,n,o,r,s){const{x:i,y:a}=Vs(e,{x:t,y:n,zoom:o}),{x:l,y:u}=Vs({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),c=r-l,d=s-u;return{left:Math.floor(i),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(d)}}function Rf(e,t,n,o,r,s=.1){const i=SS(s,t,n),a=(t-i.x)/e.width,l=(n-i.y)/e.height,u=Math.min(a,l),c=Zo(u,o,r),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c,p=n/2-f*c,y=$S(e,h,p,c,t,n),m={left:Math.min(y.left-i.left,0),top:Math.min(y.top-i.top,0),right:Math.min(y.right-i.right,0),bottom:Math.min(y.bottom-i.bottom,0)};return{x:h-m.left+m.right,y:p-m.top+m.bottom,zoom:c}}function CS(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Ym(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:Ym(n,t):!1}function Hs(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function Cu(e){const t=e.ctrlKey&&Fs()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function Mf(e,t,n){return e<t?Zo(Math.abs(e-t),1,t)/t:e>n?-Zo(Math.abs(e-n),1,t)/t:0}function Gm(e,t,n=15,o=40){const r=Mf(e.x,o,t.width-o)*n,s=Mf(e.y,o,t.height-o)*n;return[r,s]}function Vl(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let r={};if(typeof t.style=="function"?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if(typeof r.width=="string"){const s=Number(r.width.replace("px",""));r.width=`${s+n}px`}else r.width+=n;if(o>0)if(typeof r.height=="string"){const s=Number(r.height.replace("px",""));r.height=`${s+o}px`}else r.height+=o;if(e.position.x<0){const s=Math.abs(e.position.x);if(t.position.x=t.position.x-s,typeof r.width=="string"){const i=Number(r.width.replace("px",""));r.width=`${i+s}px`}else r.width+=s;e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);if(t.position.y=t.position.y-s,typeof r.height=="string"){const i=Number(r.height.replace("px",""));r.height=`${i+s}px`}else r.height+=s;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),typeof t.style=="function"?t.style=s=>{const i=t.style;return{...i(s),...r}}:t.style={...t.style,...r}}}}function Df(e,t){var n,o;const r=e.filter(i=>i.type==="add"||i.type==="remove");for(const i of r)if(i.type==="add")t.findIndex(l=>l.id===i.item.id)===-1&&t.push(i.item);else if(i.type==="remove"){const a=t.findIndex(l=>l.id===i.id);a!==-1&&t.splice(a,1)}const s=t.map(i=>i.id);for(const i of t)for(const a of e)if(a.id===i.id)switch(a.type){case"select":i.selected=a.selected;break;case"position":if(rs(i)&&(typeof a.position<"u"&&(i.position=a.position),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&i.parentNode)){const l=t[s.indexOf(i.parentNode)];l&&rs(l)&&Vl(i,l)}break;case"dimensions":if(rs(i)&&(typeof a.dimensions<"u"&&(i.dimensions=a.dimensions),typeof a.updateStyle<"u"&&a.updateStyle&&(i.style={...i.style||{},width:`${(n=a.dimensions)==null?void 0:n.width}px`,height:`${(o=a.dimensions)==null?void 0:o.height}px`}),typeof a.resizing<"u"&&(i.resizing=a.resizing),i.expandParent&&i.parentNode)){const l=t[s.indexOf(i.parentNode)];l&&rs(l)&&(!!l.dimensions.width&&!!l.dimensions.height?Vl(i,l):Bt(()=>{Vl(i,l)}))}break}return t}function lo(e,t){return{id:e,type:"select",selected:t}}function Pf(e){return{item:e,type:"add"}}function Vf(e){return{id:e,type:"remove"}}function zf(e,t,n,o,r){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:r||null,type:"remove"}}function po(e,t=new Set,n=!1){const o=[];for(const[r,s]of e){const i=t.has(r);!(s.selected===void 0&&!i)&&s.selected!==i&&(n&&(s.selected=i),o.push(lo(s.id,i)))}return o}const Hf=()=>{};function Ce(e){const t=new Set;let n=Hf,o=()=>!1;const r=()=>t.size>0||o(),s=f=>{n=f},i=()=>{n=Hf},a=f=>{o=f},l=()=>{o=()=>!1},u=f=>{t.delete(f)};return{on:f=>{t.add(f);const h=()=>u(f);return Os(h),{off:h}},off:u,trigger:f=>{const h=[n];return r()?h.push(...t):e&&h.push(e),Promise.allSettled(h.map(p=>p(f)))},hasListeners:r,listeners:t,setEmitter:s,removeEmitter:i,setHasEmitListeners:a,removeHasEmitListeners:l}}function Ff(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function NS(e,t,n,o){var r,s;const i=new Map;for(const[a,l]of e)(l.selected||l.id===o)&&(!l.parentNode||!Ym(l,e))&&(l.draggable||t&&typeof l.draggable>"u")&&e.get(a)&&i.set(a,{id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-((r=l.computedPosition)==null?void 0:r.x)||0,y:n.y-((s=l.computedPosition)==null?void 0:s.y)||0},from:{x:l.computedPosition.x,y:l.computedPosition.y},extent:l.extent,parentNode:l.parentNode,dimensions:{...l.dimensions},expandParent:l.expandParent});return Array.from(i.values())}function zl({id:e,dragItems:t,findNode:n}){const o=[];for(const r of t){const s=n(r.id);s&&o.push(s)}return[e?o.find(r=>r.id===e):o[0],o]}function Zm(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function TS(e,t,n){const[o,r,s,i]=typeof e!="string"?Zm(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+i,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-r,n.computedPosition.y+n.dimensions.height-s]]:!1}function AS(e,t,n,o){let r=e.extent||n;if((r==="parent"||!Array.isArray(r)&&(r==null?void 0:r.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const s=TS(r,e,o);s&&(r=s)}else t(new It(Nt.NODE_EXTENT_INVALID,e.id)),r=n;else if(Array.isArray(r)){const s=(o==null?void 0:o.computedPosition.x)||0,i=(o==null?void 0:o.computedPosition.y)||0;r=[[r[0][0]+s,r[0][1]+i],[r[1][0]+s,r[1][1]+i]]}else if(r!=="parent"&&(r!=null&&r.range)&&Array.isArray(r.range)){const[s,i,a,l]=Zm(r.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;r=[[r.range[0][0]+u+l,r.range[0][1]+c+s],[r.range[1][0]+u-i,r.range[1][1]+c-a]]}return r==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:r}function IS({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Mc(e,t,n,o,r){const s=IS(e.dimensions,AS(e,n,o,r)),i=Fm(t,s);return{position:{x:i.x-((r==null?void 0:r.computedPosition.x)||0),y:i.y-((r==null?void 0:r.computedPosition.y)||0)},computedPosition:i}}function Cr(e,t,n=Oe.Left,o=!1){const r=((t==null?void 0:t.x)??0)+e.computedPosition.x,s=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:i,height:a}=t??DS(e);if(o)return{x:r+i/2,y:s+a/2};switch((t==null?void 0:t.position)??n){case Oe.Top:return{x:r+i/2,y:s};case Oe.Right:return{x:r+i,y:s+a/2};case Oe.Bottom:return{x:r+i/2,y:s+a};case Oe.Left:return{x:r,y:s+a/2}}}function Lf(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function OS({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:s,width:i,height:a,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=pa({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:i/l.zoom,height:a/l.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function RS(e,t,n=!1){const o=typeof e.zIndex=="number";let r=o?e.zIndex:0;const s=t(e.source),i=t(e.target);return!s||!i?0:(n&&(r=o?e.zIndex:Math.max(s.computedPosition.z||0,i.computedPosition.z||0)),r)}var Nt=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Nt||{});const Bf={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class It extends Error{constructor(t,...n){var o;super((o=Bf[t])==null?void 0:o.call(Bf,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Dc(e){return"clientX"in e}function MS(e){return"sourceEvent"in e}function Sn(e,t){const n=Dc(e);let o,r;return n?(o=e.clientX,r=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,r=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):(o=0,r=0),{x:o-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}}const Fs=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function DS(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function rl(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const PS=()=>!0;function Hl(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function VS(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())ha(r,fa(s))>0&&o.push(s);return o}const zS=250;function HS(e,t,n,o){var r,s;let i=[],a=Number.POSITIVE_INFINITY;const l=VS(e,n,t+zS);for(const u of l){const c=[...((r=u.handleBounds)==null?void 0:r.source)??[],...((s=u.handleBounds)==null?void 0:s.target)??[]];for(const d of c){if(o.nodeId===d.nodeId&&o.type===d.type&&o.id===d.id)continue;const{x:f,y:h}=Cr(u,d,d.position,!0),p=Math.sqrt((f-e.x)**2+(h-e.y)**2);p>t||(p<a?(i=[{...d,x:f,y:h}],a=p):p===a&&i.push({...d,x:f,y:h}))}}if(!i.length)return null;if(i.length>1){const u=o.type==="source"?"target":"source";return i.find(c=>c.type===u)??i[0]}return i[0]}function jf(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:s,doc:i,lib:a,flowId:l,isValidConnection:u=PS},c,d,f,h){const p=s==="target",y=t?i.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:m,y:v}=Sn(e),E=i.elementFromPoint(m,v),_=E!=null&&E.classList.contains(`${a}-flow__handle`)?E:y,A={handleDomNode:_,isValid:!1,connection:null,toHandle:null};if(_){const Y=Km(void 0,_),j=_.getAttribute("data-nodeid"),H=_.getAttribute("data-handleid"),I=_.classList.contains("connectable"),L=_.classList.contains("connectableend");if(!j||!Y)return A;const B={source:p?j:o,sourceHandle:p?H:r,target:p?o:j,targetHandle:p?r:H};A.connection=B;const S=I&&L&&(n===to.Strict?p&&Y==="source"||!p&&Y==="target":j!==o||H!==r);A.isValid=S&&u(B,{nodes:d,edges:c,sourceNode:f(B.source),targetNode:f(B.target)}),A.toHandle=Xm(j,Y,H,h,n,!0)}return A}function Km(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function FS(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function LS(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function Xm(e,t,n,o,r,s=!1){var i,a,l;const u=o.get(e);if(!u)return null;const c=r===to.Strict?(i=u.handleBounds)==null?void 0:i[t]:[...((a=u.handleBounds)==null?void 0:a.source)??[],...((l=u.handleBounds)==null?void 0:l.target)??[]],d=(n?c==null?void 0:c.find(f=>f.id===n):c==null?void 0:c[0])??null;return d&&s?{...d,...Cr(u,d,d.position,!0)}:d}const Nu={[Oe.Left]:Oe.Right,[Oe.Right]:Oe.Left,[Oe.Top]:Oe.Bottom,[Oe.Bottom]:Oe.Top},BS=["production","prod"];function ri(e,...t){Jm()&&console.warn(`[Vue Flow]: ${e}`,...t)}function Jm(){return!BS.includes("production")}function Uf(e,t,n,o,r){const s=t.querySelectorAll(`.vue-flow__handle.${e}`);return s!=null&&s.length?Array.from(s).map(i=>{const a=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:r,position:i.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...ol(i)}}):null}function Tu(e,t,n,o,r,s=!1,i){r.value=!1,e.selected?(s||e.selected&&t)&&(o([e]),Bt(()=>{i.blur()})):n([e])}function Ct(e){return typeof ye(e)<"u"}function jS(e,t,n,o){if(!e||!e.source||!e.target)return n(new It(Nt.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let r;return So(e)?r=e:r={...e,id:jm(e)},r=Lm(r,void 0,o),kS(r,t)?!1:r}function US(e,t,n,o,r){if(!t.source||!t.target)return r(new It(Nt.EDGE_INVALID,e.id)),!1;if(!n)return r(new It(Nt.EDGE_NOT_FOUND,e.id)),!1;const{id:s,...i}=e;return{...i,id:o?jm(t):s,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function qf(e,t,n){const o={},r=[];for(let s=0;s<e.length;++s){const i=e[s];if(!jo(i)){n(new It(Nt.NODE_INVALID,i==null?void 0:i.id)||`[ID UNKNOWN|INDEX ${s}]`);continue}const a=xS(i,t(i.id),i.parentNode);i.parentNode&&(o[i.parentNode]=!0),r[s]=a}for(const s of r){const i=t(s.parentNode)||r.find(a=>a.id===s.parentNode);s.parentNode&&!i&&n(new It(Nt.NODE_MISSING_PARENT,s.id,s.parentNode)),(s.parentNode||o[s.id])&&(o[s.id]&&(s.isParent=!0),i&&(i.isParent=!0))}return r}function Wf(e,t,n,o,r,s){let i=r;const a=o.get(i)||new Map;o.set(i,a.set(n,t)),i=`${r}-${e}`;const l=o.get(i)||new Map;if(o.set(i,l.set(n,t)),s){i=`${r}-${e}-${s}`;const u=o.get(i)||new Map;o.set(i,u.set(n,t))}}function Fl(e,t,n){e.clear();for(const o of n){const{source:r,target:s,sourceHandle:i=null,targetHandle:a=null}=o,l={edgeId:o.id,source:r,target:s,sourceHandle:i,targetHandle:a},u=`${r}-${i}--${s}-${a}`,c=`${s}-${a}--${r}-${i}`;Wf("source",l,c,e,r,i),Wf("target",l,u,e,s,a)}}function Yf(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Ll(e,t,n,o,r,s,i,a){const l=[];for(const u of e){const c=So(u)?u:jS(u,a,r,s);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){r(new It(Nt.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){r(new It(Nt.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){r(new It(Nt.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:a,nodes:i,sourceNode:d,targetNode:f})){r(new It(Nt.EDGE_INVALID,c.id));continue}const h=o(c.id);l.push({...Lm(c,h,s),sourceNode:d,targetNode:f})}return l}const Gf=Symbol("vueFlow"),Qm=Symbol("nodeId"),ey=Symbol("nodeRef"),qS=Symbol("edgeId"),WS=Symbol("edgeRef"),sl=Symbol("slots");function ty(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:r,nodeLookup:s,nodeExtent:i,nodeDragThreshold:a,viewport:l,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:f,findNode:h,multiSelectionActive:p,nodesSelectionActive:y,selectNodesOnDrag:m,removeSelectedElements:v,addSelectedNodes:E,updateNodePositions:_,emits:A}=gt(),{onStart:Y,onDrag:j,onStop:H,onClick:I,el:L,disabled:B,id:V,selectable:S,dragHandle:z}=e,g=yr(!1);let C=[],w,F=null,P={x:void 0,y:void 0},X={x:0,y:0},G=null,oe=!1,ge=!1,Z=0,ce=!1;const pe=ZS(),xe=({x:T,y:R})=>{P={x:T,y:R};let x=!1;if(C=C.map(k=>{const N={x:T-k.distance.x,y:R-k.distance.y},{computedPosition:$}=Mc(k,n.value?rl(N,o.value):N,A.error,i.value,k.parentNode?h(k.parentNode):void 0);return x=x||k.position.x!==$.x||k.position.y!==$.y,k.position=$,k}),ge=ge||x,!!x&&(_(C,!0,!0),g.value=!0,G)){const[k,N]=zl({id:V,dragItems:C,findNode:h});j({event:G,node:k,nodes:N})}},K=()=>{if(!F)return;const[T,R]=Gm(X,F,c.value);if(T!==0||R!==0){const x={x:(P.x??0)-T/l.value.zoom,y:(P.y??0)-R/l.value.zoom};f({x:T,y:R})&&xe(x)}Z=requestAnimationFrame(K)},le=(T,R)=>{oe=!0;const x=h(V);!m.value&&!p.value&&x&&(x.selected||v()),x&&et(S)&&m.value&&Tu(x,p.value,E,v,y,!1,R);const k=pe(T.sourceEvent);if(P=k,C=NS(s.value,d.value,k,V),C.length){const[N,$]=zl({id:V,dragItems:C,findNode:h});Y({event:T.sourceEvent,node:N,nodes:$})}},ie=(T,R)=>{var x;T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1||(ge=!1,a.value===0&&le(T,R),P=pe(T.sourceEvent),F=((x=t.value)==null?void 0:x.getBoundingClientRect())||null,X=Sn(T.sourceEvent,F))},_e=(T,R)=>{const x=pe(T.sourceEvent);if(!ce&&oe&&u.value&&(ce=!0,K()),!oe){const k=x.xSnapped-(P.x??0),N=x.ySnapped-(P.y??0);Math.sqrt(k*k+N*N)>a.value&&le(T,R)}(P.x!==x.xSnapped||P.y!==x.ySnapped)&&C.length&&oe&&(G=T.sourceEvent,X=Sn(T.sourceEvent,F),xe(x))},Re=T=>{let R=!1;if(!oe&&!g.value&&!p.value){const x=T.sourceEvent,k=pe(x),N=k.xSnapped-(P.x??0),$=k.ySnapped-(P.y??0),U=Math.sqrt(N*N+$*$);U!==0&&U<=a.value&&(I==null||I(x),R=!0)}if(C.length&&!R){ge&&(_(C,!1,!1),ge=!1);const[x,k]=zl({id:V,dragItems:C,findNode:h});H({event:T.sourceEvent,node:x,nodes:k})}C=[],g.value=!1,ce=!1,oe=!1,P={x:void 0,y:void 0},cancelAnimationFrame(Z)};return Fe([()=>et(B),L],([T,R],x,k)=>{if(R){const N=an(R);T||(w=bk().on("start",$=>ie($,R)).on("drag",$=>_e($,R)).on("end",$=>Re($)).filter($=>{const U=$.target,te=et(z);return!$.button&&(!r.value||!Ff(U,`.${r.value}`,R)&&(!te||Ff(U,te,R)))}),N.call(w)),k(()=>{N.on(".drag",null),w&&(w.on("start",null),w.on("drag",null),w.on("end",null))})}}),g}function YS(){return{doubleClick:Ce(),click:Ce(),mouseEnter:Ce(),mouseMove:Ce(),mouseLeave:Ce(),contextMenu:Ce(),updateStart:Ce(),update:Ce(),updateEnd:Ce()}}function GS(e,t){const n=YS();return n.doubleClick.on(o=>{var r,s;t.edgeDoubleClick(o),(s=(r=e.events)==null?void 0:r.doubleClick)==null||s.call(r,o)}),n.click.on(o=>{var r,s;t.edgeClick(o),(s=(r=e.events)==null?void 0:r.click)==null||s.call(r,o)}),n.mouseEnter.on(o=>{var r,s;t.edgeMouseEnter(o),(s=(r=e.events)==null?void 0:r.mouseEnter)==null||s.call(r,o)}),n.mouseMove.on(o=>{var r,s;t.edgeMouseMove(o),(s=(r=e.events)==null?void 0:r.mouseMove)==null||s.call(r,o)}),n.mouseLeave.on(o=>{var r,s;t.edgeMouseLeave(o),(s=(r=e.events)==null?void 0:r.mouseLeave)==null||s.call(r,o)}),n.contextMenu.on(o=>{var r,s;t.edgeContextMenu(o),(s=(r=e.events)==null?void 0:r.contextMenu)==null||s.call(r,o)}),n.updateStart.on(o=>{var r,s;t.edgeUpdateStart(o),(s=(r=e.events)==null?void 0:r.updateStart)==null||s.call(r,o)}),n.update.on(o=>{var r,s;t.edgeUpdate(o),(s=(r=e.events)==null?void 0:r.update)==null||s.call(r,o)}),n.updateEnd.on(o=>{var r,s;t.edgeUpdateEnd(o),(s=(r=e.events)==null?void 0:r.updateEnd)==null||s.call(r,o)}),Object.entries(n).reduce((o,[r,s])=>(o.emit[r]=s.trigger,o.on[r]=s.on,o),{emit:{},on:{}})}function ZS(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:o}=gt();return r=>{var s;const i=((s=o.value)==null?void 0:s.getBoundingClientRect())??{left:0,top:0},a=MS(r)?r.sourceEvent:r,{x:l,y:u}=Sn(a,i),c=zs({x:l,y:u},e.value),{x:d,y:f}=n.value?rl(c,t.value):c;return{xSnapped:d,ySnapped:f,...c}}}function yi(){return!0}function ny({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:s,onEdgeUpdateEnd:i}){const{id:a,vueFlowRef:l,connectionMode:u,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:f,nodesConnectable:h,autoPanOnConnect:p,autoPanSpeed:y,findNode:m,panBy:v,startConnection:E,updateConnection:_,endConnection:A,emits:Y,viewport:j,edges:H,nodes:I,isValidConnection:L,nodeLookup:B}=gt();let V=null,S=!1,z=null;function g(w){var F;const P=et(n)==="target",X=Dc(w),G=Of(w.target),oe=w.currentTarget;if(oe&&(X&&w.button===0||!X)){let ge=function(he){x=Sn(he,Re),xe=HS(zs(x,j.value,!1,[1,1]),c.value,B.value,$),k||(N(),k=!0);const fe=jf(he,{handle:xe,connectionMode:u.value,fromNodeId:et(t),fromHandleId:et(e),fromType:P?"target":"source",isValidConnection:pe,doc:G,lib:"vue",flowId:a,nodeLookup:B.value},H.value,I.value,m,B.value);z=fe.handleDomNode,V=fe.connection,S=LS(!!xe,fe.isValid);const ke={...J,isValid:S,to:fe.toHandle&&S?Vs({x:fe.toHandle.x,y:fe.toHandle.y},j.value):x,toHandle:fe.toHandle,toPosition:S&&fe.toHandle?fe.toHandle.position:Nu[$.position],toNode:fe.toHandle?B.value.get(fe.toHandle.nodeId):null};if(S&&xe&&(J!=null&&J.toHandle)&&ke.toHandle&&J.toHandle.type===ke.toHandle.type&&J.toHandle.nodeId===ke.toHandle.nodeId&&J.toHandle.id===ke.toHandle.id&&J.to.x===ke.to.x&&J.to.y===ke.to.y)return;const $e=xe??fe.toHandle;if(_($e&&S?Vs({x:$e.x,y:$e.y},j.value):x,fe.toHandle,FS(!!$e,S)),J=ke,!xe&&!S&&!z)return Hl(R);V&&V.source!==V.target&&z&&(Hl(R),R=z,z.classList.add("connecting","vue-flow__handle-connecting"),z.classList.toggle("valid",!!S),z.classList.toggle("vue-flow__handle-valid",!!S))},Z=function(he){"touches"in he&&he.touches.length>0||((xe||z)&&V&&S&&(s?s(he,V):Y.connect(V)),Y.connectEnd(he),r&&(i==null||i(he)),Hl(R),cancelAnimationFrame(K),A(he),k=!1,S=!1,V=null,z=null,G.removeEventListener("mousemove",ge),G.removeEventListener("mouseup",Z),G.removeEventListener("touchmove",ge),G.removeEventListener("touchend",Z))};const ce=m(et(t));let pe=et(o)||L.value||yi;!pe&&ce&&(pe=(P?ce.isValidSourcePos:ce.isValidTargetPos)||yi);let xe,K=0;const{x:le,y:ie}=Sn(w),_e=Km(et(r),oe),Re=(F=l.value)==null?void 0:F.getBoundingClientRect();if(!Re||!_e)return;const T=Xm(et(t),_e,et(e),B.value,u.value);if(!T)return;let R,x=Sn(w,Re),k=!1;const N=()=>{if(!p.value)return;const[he,fe]=Gm(x,Re,y.value);v({x:he,y:fe}),K=requestAnimationFrame(N)},$={...T,nodeId:et(t),type:_e,position:T.position},U=B.value.get(et(t)),ee={inProgress:!0,isValid:null,from:Cr(U,$,Oe.Left,!0),fromHandle:$,fromPosition:$.position,fromNode:U,to:x,toHandle:null,toPosition:Nu[$.position],toNode:null};E({nodeId:et(t),id:et(e),type:_e,position:(oe==null?void 0:oe.getAttribute("data-handlepos"))||Oe.Top,...x},{x:le-Re.left,y:ie-Re.top}),Y.connectStart({event:w,nodeId:et(t),handleId:et(e),handleType:_e});let J=ee;G.addEventListener("mousemove",ge),G.addEventListener("mouseup",Z),G.addEventListener("touchmove",ge),G.addEventListener("touchend",Z)}}function C(w){var F,P;if(!d.value)return;const X=et(n)==="target";if(!f.value){Y.clickConnectStart({event:w,nodeId:et(t),handleId:et(e)}),E({nodeId:et(t),type:et(n),id:et(e),position:Oe.Top,...Sn(w)},void 0,!0);return}let G=et(o)||L.value||yi;const oe=m(et(t));if(!G&&oe&&(G=(X?oe.isValidSourcePos:oe.isValidTargetPos)||yi),oe&&(typeof oe.connectable>"u"?h.value:oe.connectable)===!1)return;const ge=Of(w.target),Z=jf(w,{handle:{nodeId:et(t),id:et(e),type:et(n),position:Oe.Top,...Sn(w)},connectionMode:u.value,fromNodeId:f.value.nodeId,fromHandleId:f.value.id??null,fromType:f.value.type,isValidConnection:G,doc:ge,lib:"vue",flowId:a,nodeLookup:B.value},H.value,I.value,m,B.value),ce=((F=Z.connection)==null?void 0:F.source)===((P=Z.connection)==null?void 0:P.target);Z.isValid&&Z.connection&&!ce&&Y.connect(Z.connection),Y.clickConnectEnd(w),A(w,!0)}return{handlePointerDown:g,handleClick:C}}function KS(){return Ot(Qm,"")}function oy(e){const t=e??KS()??"",n=Ot(ey,de(null)),{findNode:o,edges:r,emits:s}=gt(),i=o(t);return i||s.error(new It(Nt.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:i,parentNode:ne(()=>o(i.parentNode)),connectedEdges:ne(()=>Ro([i],r.value))}}function XS(){return{doubleClick:Ce(),click:Ce(),mouseEnter:Ce(),mouseMove:Ce(),mouseLeave:Ce(),contextMenu:Ce(),dragStart:Ce(),drag:Ce(),dragStop:Ce()}}function JS(e,t){const n=XS();return n.doubleClick.on(o=>{var r,s;t.nodeDoubleClick(o),(s=(r=e.events)==null?void 0:r.doubleClick)==null||s.call(r,o)}),n.click.on(o=>{var r,s;t.nodeClick(o),(s=(r=e.events)==null?void 0:r.click)==null||s.call(r,o)}),n.mouseEnter.on(o=>{var r,s;t.nodeMouseEnter(o),(s=(r=e.events)==null?void 0:r.mouseEnter)==null||s.call(r,o)}),n.mouseMove.on(o=>{var r,s;t.nodeMouseMove(o),(s=(r=e.events)==null?void 0:r.mouseMove)==null||s.call(r,o)}),n.mouseLeave.on(o=>{var r,s;t.nodeMouseLeave(o),(s=(r=e.events)==null?void 0:r.mouseLeave)==null||s.call(r,o)}),n.contextMenu.on(o=>{var r,s;t.nodeContextMenu(o),(s=(r=e.events)==null?void 0:r.contextMenu)==null||s.call(r,o)}),n.dragStart.on(o=>{var r,s;t.nodeDragStart(o),(s=(r=e.events)==null?void 0:r.dragStart)==null||s.call(r,o)}),n.drag.on(o=>{var r,s;t.nodeDrag(o),(s=(r=e.events)==null?void 0:r.drag)==null||s.call(r,o)}),n.dragStop.on(o=>{var r,s;t.nodeDragStop(o),(s=(r=e.events)==null?void 0:r.dragStop)==null||s.call(r,o)}),Object.entries(n).reduce((o,[r,s])=>(o.emit[r]=s.trigger,o.on[r]=s.on,o),{emit:{},on:{}})}function ry(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:r,snapToGrid:s,nodesDraggable:i,emits:a}=gt();return(l,u=!1)=>{const c=s.value?r.value[0]:5,d=s.value?r.value[1]:5,f=u?4:1,h=l.x*c*f,p=l.y*d*f,y=[];for(const m of e.value)if(m.draggable||i&&typeof m.draggable>"u"){const v={x:m.computedPosition.x+h,y:m.computedPosition.y+p},{computedPosition:E}=Mc(m,v,a.error,t.value,m.parentNode?o(m.parentNode):void 0);y.push({id:m.id,position:E,from:m.position,distance:{x:l.x,y:l.y},dimensions:m.dimensions})}n(y,!0,!1)}}const vi=.1,QS=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function io(){return ri("Viewport not initialized yet."),Promise.resolve(!1)}const e$={zoomIn:io,zoomOut:io,zoomTo:io,fitView:io,setCenter:io,fitBounds:io,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:io,setTransform:io,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function t$(e){function t(o,r){return new Promise(s=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((r==null?void 0:r.interpolate)==="linear"?xs:Mi).scaleBy(Bl(e.d3Selection,r==null?void 0:r.duration,r==null?void 0:r.ease,()=>{s(!0)}),o):s(!1)})}function n(o,r,s,i){return new Promise(a=>{var l;const{x:u,y:c}=Fm({x:-o,y:-r},e.translateExtent),d=$r.translate(-u,-c).scale(s);e.d3Selection&&e.d3Zoom?(l=e.d3Zoom)==null||l.interpolate((i==null?void 0:i.interpolate)==="linear"?xs:Mi).transform(Bl(e.d3Selection,i==null?void 0:i.duration,i==null?void 0:i.ease,()=>{a(!0)}),d):a(!1)})}return ne(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:r=>t(1.2,r),zoomOut:r=>t(1/1.2,r),zoomTo:(r,s)=>new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((s==null?void 0:s.interpolate)==="linear"?xs:Mi).scaleTo(Bl(e.d3Selection,s==null?void 0:s.duration,s==null?void 0:s.ease,()=>{i(!0)}),r):i(!1)}),setViewport:(r,s)=>n(r.x,r.y,r.zoom,s),setTransform:(r,s)=>n(r.x,r.y,r.zoom,s),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(r={padding:vi,includeHiddenNodes:!1,duration:0})=>{var s,i;const a=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&((r==null?void 0:r.includeHiddenNodes)||!f.hidden)&&(!((s=r.nodes)!=null&&s.length)||(i=r.nodes)!=null&&i.length&&r.nodes.includes(f.id))&&a.push(f);if(!a.length)return Promise.resolve(!1);const l=Rc(a),{x:u,y:c,zoom:d}=Rf(l,e.dimensions.width,e.dimensions.height,r.minZoom??e.minZoom,r.maxZoom??e.maxZoom,r.padding??vi);return n(u,c,d,r)},setCenter:(r,s,i)=>{const a=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:e.maxZoom,l=e.dimensions.width/2-r*a,u=e.dimensions.height/2-s*a;return n(l,u,a,i)},fitBounds:(r,s={padding:vi})=>{const{x:i,y:a,zoom:l}=Rf(r,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,s.padding??vi);return n(i,a,l,s)},project:r=>zs(r,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:r=>{if(e.vueFlowRef){const{x:s,y:i}=e.vueFlowRef.getBoundingClientRect(),a={x:r.x-s,y:r.y-i};return zs(a,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:r=>{if(e.vueFlowRef){const{x:s,y:i}=e.vueFlowRef.getBoundingClientRect(),a={x:r.x+s,y:r.y+i};return Vs(a,e.viewport)}return{x:0,y:0}}}:e$)}function Bl(e,t=0,n=QS,o=()=>{}){const r=typeof t=="number"&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e}function n$(e,t,n){const o=Ma(!0);return o.run(()=>{const r=()=>{o.run(()=>{let y,m,v=!!(n.nodes.value.length||n.edges.value.length);y=or([e.modelValue,()=>{var E,_;return(_=(E=e.modelValue)==null?void 0:E.value)==null?void 0:_.length}],([E])=>{E&&Array.isArray(E)&&(m==null||m.pause(),n.setElements(E),!m&&!v&&E.length?v=!0:m==null||m.resume())}),m=or([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([E,_])=>{var A;(A=e.modelValue)!=null&&A.value&&Array.isArray(e.modelValue.value)&&(y==null||y.pause(),e.modelValue.value=[...E,..._],Bt(()=>{y==null||y.resume()}))},{immediate:v}),cs(()=>{y==null||y.stop(),m==null||m.stop()})})},s=()=>{o.run(()=>{let y,m,v=!!n.nodes.value.length;y=or([e.nodes,()=>{var E,_;return(_=(E=e.nodes)==null?void 0:E.value)==null?void 0:_.length}],([E])=>{E&&Array.isArray(E)&&(m==null||m.pause(),n.setNodes(E),!m&&!v&&E.length?v=!0:m==null||m.resume())}),m=or([n.nodes,()=>n.nodes.value.length],([E])=>{var _;(_=e.nodes)!=null&&_.value&&Array.isArray(e.nodes.value)&&(y==null||y.pause(),e.nodes.value=[...E],Bt(()=>{y==null||y.resume()}))},{immediate:v}),cs(()=>{y==null||y.stop(),m==null||m.stop()})})},i=()=>{o.run(()=>{let y,m,v=!!n.edges.value.length;y=or([e.edges,()=>{var E,_;return(_=(E=e.edges)==null?void 0:E.value)==null?void 0:_.length}],([E])=>{E&&Array.isArray(E)&&(m==null||m.pause(),n.setEdges(E),!m&&!v&&E.length?v=!0:m==null||m.resume())}),m=or([n.edges,()=>n.edges.value.length],([E])=>{var _;(_=e.edges)!=null&&_.value&&Array.isArray(e.edges.value)&&(y==null||y.pause(),e.edges.value=[...E],Bt(()=>{y==null||y.resume()}))},{immediate:v}),cs(()=>{y==null||y.stop(),m==null||m.stop()})})},a=()=>{o.run(()=>{Fe(()=>t.maxZoom,()=>{t.maxZoom&&Ct(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},l=()=>{o.run(()=>{Fe(()=>t.minZoom,()=>{t.minZoom&&Ct(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{Fe(()=>t.translateExtent,()=>{t.translateExtent&&Ct(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{Fe(()=>t.nodeExtent,()=>{t.nodeExtent&&Ct(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{Fe(()=>t.applyDefault,()=>{Ct(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},f=()=>{o.run(()=>{const y=async m=>{let v=m;typeof t.autoConnect=="function"&&(v=await t.autoConnect(m)),v!==!1&&n.addEdges([v])};Fe(()=>t.autoConnect,()=>{Ct(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),Fe(n.autoConnect,(m,v,E)=>{m?n.onConnect(y):n.hooks.value.connect.off(y),E(()=>{n.hooks.value.connect.off(y)})},{immediate:!0})})},h=()=>{const y=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const m of Object.keys(t)){const v=m;if(!y.includes(v)){const E=ft(()=>t[v]),_=n[v];xt(_)&&o.run(()=>{Fe(E,A=>{Ct(A)&&(_.value=A)},{immediate:!0})})}}};(()=>{r(),s(),i(),l(),a(),u(),c(),d(),f(),h()})()}),()=>o.stop()}function o$(){return{edgesChange:Ce(),nodesChange:Ce(),nodeDoubleClick:Ce(),nodeClick:Ce(),nodeMouseEnter:Ce(),nodeMouseMove:Ce(),nodeMouseLeave:Ce(),nodeContextMenu:Ce(),nodeDragStart:Ce(),nodeDrag:Ce(),nodeDragStop:Ce(),nodesInitialized:Ce(),miniMapNodeClick:Ce(),miniMapNodeDoubleClick:Ce(),miniMapNodeMouseEnter:Ce(),miniMapNodeMouseMove:Ce(),miniMapNodeMouseLeave:Ce(),connect:Ce(),connectStart:Ce(),connectEnd:Ce(),clickConnectStart:Ce(),clickConnectEnd:Ce(),paneReady:Ce(),init:Ce(),move:Ce(),moveStart:Ce(),moveEnd:Ce(),selectionDragStart:Ce(),selectionDrag:Ce(),selectionDragStop:Ce(),selectionContextMenu:Ce(),selectionStart:Ce(),selectionEnd:Ce(),viewportChangeStart:Ce(),viewportChange:Ce(),viewportChangeEnd:Ce(),paneScroll:Ce(),paneClick:Ce(),paneContextMenu:Ce(),paneMouseEnter:Ce(),paneMouseMove:Ce(),paneMouseLeave:Ce(),edgeContextMenu:Ce(),edgeMouseEnter:Ce(),edgeMouseMove:Ce(),edgeMouseLeave:Ce(),edgeDoubleClick:Ce(),edgeClick:Ce(),edgeUpdateStart:Ce(),edgeUpdate:Ce(),edgeUpdateEnd:Ce(),updateNodeInternals:Ce(),error:Ce(e=>ri(e.message))}}function r$(e,t){const n=ro();Vp(()=>{for(const[r,s]of Object.entries(t.value)){const i=a=>{e(r,a)};s.setEmitter(i),Os(s.removeEmitter),s.setHasEmitListeners(()=>o(r)),Os(s.removeHasEmitListeners)}});function o(r){var s;const i=s$(r);return!!((s=n==null?void 0:n.vnode.props)==null?void 0:s[i])}}function s$(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,(r,s)=>s.toUpperCase())}${n.length?`:${n.join(":")}`:""}`}function sy(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Oc.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:_s.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Oo.Bezier,style:{}},connectionMode:to.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Fs()?"Meta":"Control",zoomActivationKeyCode:Fs()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:o$(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const i$=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function a$(e,t,n){const o=t$(e),r=x=>{const k=x??[];e.hooks.updateNodeInternals.trigger(k)},s=x=>wS(x,e.nodes,e.edges),i=x=>_S(x,e.nodes,e.edges),a=x=>Ro(x,e.edges),l=({id:x,type:k,nodeId:N})=>{var $;const U=x?`-${k}-${x}`:`-${k}`;return Array.from((($=e.connectionLookup.get(`${N}${U}`))==null?void 0:$.values())??[])},u=x=>{if(x)return t.value.get(x)},c=x=>{if(x)return n.value.get(x)},d=(x,k,N)=>{var $,U;const te=[];for(const ee of x){const J={id:ee.id,type:"position",dragging:N,from:ee.from};if(k&&(J.position=ee.position,ee.parentNode)){const he=u(ee.parentNode);J.position={x:J.position.x-((($=he==null?void 0:he.computedPosition)==null?void 0:$.x)??0),y:J.position.y-(((U=he==null?void 0:he.computedPosition)==null?void 0:U.y)??0)}}te.push(J)}te!=null&&te.length&&e.hooks.nodesChange.trigger(te)},f=x=>{if(!e.vueFlowRef)return;const k=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!k)return;const N=window.getComputedStyle(k),{m22:$}=new window.DOMMatrixReadOnly(N.transform),U=[];for(const te of x){const ee=te,J=u(ee.id);if(J){const he=ol(ee.nodeElement);if(!!(he.width&&he.height&&(J.dimensions.width!==he.width||J.dimensions.height!==he.height||ee.forceUpdate))){const ke=ee.nodeElement.getBoundingClientRect();J.dimensions=he,J.handleBounds.source=Uf("source",ee.nodeElement,ke,$,J.id),J.handleBounds.target=Uf("target",ee.nodeElement,ke,$,J.id),U.push({id:J.id,type:"dimensions",dimensions:he})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),U.length&&e.hooks.nodesChange.trigger(U)},h=(x,k)=>{const N=new Set,$=new Set;for(const ee of x)jo(ee)?N.add(ee.id):So(ee)&&$.add(ee.id);const U=po(t.value,N,!0),te=po(n.value,$);if(e.multiSelectionActive){for(const ee of N)U.push(lo(ee,k));for(const ee of $)te.push(lo(ee,k))}U.length&&e.hooks.nodesChange.trigger(U),te.length&&e.hooks.edgesChange.trigger(te)},p=x=>{if(e.multiSelectionActive){const k=x.map(N=>lo(N.id,!0));e.hooks.nodesChange.trigger(k);return}e.hooks.nodesChange.trigger(po(t.value,new Set(x.map(k=>k.id)),!0)),e.hooks.edgesChange.trigger(po(n.value))},y=x=>{if(e.multiSelectionActive){const k=x.map(N=>lo(N.id,!0));e.hooks.edgesChange.trigger(k);return}e.hooks.edgesChange.trigger(po(n.value,new Set(x.map(k=>k.id)))),e.hooks.nodesChange.trigger(po(t.value,new Set,!0))},m=x=>{h(x,!0)},v=x=>{const N=(x||e.nodes).map($=>($.selected=!1,lo($.id,!1)));e.hooks.nodesChange.trigger(N)},E=x=>{const N=(x||e.edges).map($=>($.selected=!1,lo($.id,!1)));e.hooks.edgesChange.trigger(N)},_=x=>{if(!x||!x.length)return h([],!1);const k=x.reduce((N,$)=>{const U=lo($.id,!1);return jo($)?N.nodes.push(U):N.edges.push(U),N},{nodes:[],edges:[]});k.nodes.length&&e.hooks.nodesChange.trigger(k.nodes),k.edges.length&&e.hooks.edgesChange.trigger(k.edges)},A=x=>{var k;(k=e.d3Zoom)==null||k.scaleExtent([x,e.maxZoom]),e.minZoom=x},Y=x=>{var k;(k=e.d3Zoom)==null||k.scaleExtent([e.minZoom,x]),e.maxZoom=x},j=x=>{var k;(k=e.d3Zoom)==null||k.translateExtent(x),e.translateExtent=x},H=x=>{e.nodeExtent=x,r()},I=x=>{var k;(k=e.d3Zoom)==null||k.clickDistance(x)},L=x=>{e.nodesDraggable=x,e.nodesConnectable=x,e.elementsSelectable=x},B=x=>{const k=x instanceof Function?x(e.nodes):x;!e.initialized&&!k.length||(e.nodes=qf(k,u,e.hooks.error.trigger))},V=x=>{const k=x instanceof Function?x(e.edges):x;if(!e.initialized&&!k.length)return;const N=Ll(k,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);Fl(e.connectionLookup,n.value,N),e.edges=N},S=x=>{const k=x instanceof Function?x([...e.nodes,...e.edges]):x;!e.initialized&&!k.length||(B(k.filter(jo)),V(k.filter(So)))},z=x=>{let k=x instanceof Function?x(e.nodes):x;k=Array.isArray(k)?k:[k];const N=qf(k,u,e.hooks.error.trigger),$=[];for(const U of N)$.push(Pf(U));$.length&&e.hooks.nodesChange.trigger($)},g=x=>{let k=x instanceof Function?x(e.edges):x;k=Array.isArray(k)?k:[k];const N=Ll(k,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),$=[];for(const U of N)$.push(Pf(U));$.length&&e.hooks.edgesChange.trigger($)},C=(x,k=!0,N=!1)=>{const $=x instanceof Function?x(e.nodes):x,U=Array.isArray($)?$:[$],te=[],ee=[];function J(fe){const ke=a(fe);for(const $e of ke)(!Ct($e.deletable)||$e.deletable)&&ee.push(zf($e.id,$e.source,$e.target,$e.sourceHandle,$e.targetHandle))}function he(fe){const ke=[];for(const $e of e.nodes)$e.parentNode===fe&&ke.push($e);if(ke.length){for(const $e of ke)te.push(Vf($e.id));k&&J(ke);for(const $e of ke)he($e.id)}}for(const fe of U){const ke=typeof fe=="string"?u(fe):fe;ke&&(Ct(ke.deletable)&&!ke.deletable||(te.push(Vf(ke.id)),k&&J([ke]),N&&he(ke.id)))}ee.length&&e.hooks.edgesChange.trigger(ee),te.length&&e.hooks.nodesChange.trigger(te)},w=x=>{const k=x instanceof Function?x(e.edges):x,N=Array.isArray(k)?k:[k],$=[];for(const U of N){const te=typeof U=="string"?c(U):U;te&&(Ct(te.deletable)&&!te.deletable||$.push(zf(typeof U=="string"?U:U.id,te.source,te.target,te.sourceHandle,te.targetHandle)))}e.hooks.edgesChange.trigger($)},F=(x,k,N=!0)=>{const $=c(x.id);if(!$)return!1;const U=e.edges.indexOf($),te=US(x,k,$,N,e.hooks.error.trigger);if(te){const[ee]=Ll([te],e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((J,he)=>he===U?ee:J),Fl(e.connectionLookup,n.value,[ee]),ee}return!1},P=(x,k,N={replace:!1})=>{const $=c(x);if(!$)return;const U=typeof k=="function"?k($):k;$.data=N.replace?U:{...$.data,...U}},X=x=>Df(x,e.nodes),G=x=>{const k=Df(x,e.edges);return Fl(e.connectionLookup,n.value,k),k},oe=(x,k,N={replace:!1})=>{const $=u(x);if(!$)return;const U=typeof k=="function"?k($):k;N.replace?e.nodes.splice(e.nodes.indexOf($),1,U):Object.assign($,U)},ge=(x,k,N={replace:!1})=>{const $=u(x);if(!$)return;const U=typeof k=="function"?k($):k;$.data=N.replace?U:{...$.data,...U}},Z=(x,k,N=!1)=>{N?e.connectionClickStartHandle=x:e.connectionStartHandle=x,e.connectionEndHandle=null,e.connectionStatus=null,k&&(e.connectionPosition=k)},ce=(x,k=null,N=null)=>{e.connectionStartHandle&&(e.connectionPosition=x,e.connectionEndHandle=k,e.connectionStatus=N)},pe=(x,k)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,k?e.connectionClickStartHandle=null:e.connectionStartHandle=null},xe=x=>{const k=bS(x),N=k?null:rs(x)?x:u(x.id);return!k&&!N?[null,null,k]:[k?x:fa(N),N,k]},K=(x,k=!0,N=e.nodes)=>{const[$,U,te]=xe(x);if(!$)return[];const ee=[];for(const J of N||e.nodes){if(!te&&(J.id===U.id||!J.computedPosition))continue;const he=fa(J),fe=ha(he,$);(k&&fe>0||fe>=he.width*he.height||fe>=Number($.width)*Number($.height))&&ee.push(J)}return ee},le=(x,k,N=!0)=>{const[$]=xe(x);if(!$)return!1;const U=ha($,k);return N&&U>0||U>=Number($.width)*Number($.height)},ie=x=>{const{viewport:k,dimensions:N,d3Zoom:$,d3Selection:U,translateExtent:te}=e;if(!$||!U||!x.x&&!x.y)return!1;const ee=$r.translate(k.x+x.x,k.y+x.y).scale(k.zoom),J=[[0,0],[N.width,N.height]],he=$.constrain()(ee,J,te),fe=e.viewport.x!==he.x||e.viewport.y!==he.y||e.viewport.zoom!==he.k;return $.transform(U,he),fe},_e=x=>{const k=x instanceof Function?x(e):x,N=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Ct(k.defaultEdgeOptions)&&(e.defaultEdgeOptions=k.defaultEdgeOptions);const $=k.modelValue||k.nodes||k.edges?[]:void 0;$&&(k.modelValue&&$.push(...k.modelValue),k.nodes&&$.push(...k.nodes),k.edges&&$.push(...k.edges),S($));const U=()=>{Ct(k.maxZoom)&&Y(k.maxZoom),Ct(k.minZoom)&&A(k.minZoom),Ct(k.translateExtent)&&j(k.translateExtent)};for(const te of Object.keys(k)){const ee=te,J=k[ee];![...i$,...N].includes(ee)&&Ct(J)&&(e[ee]=J)}mu(()=>e.d3Zoom).not.toBeNull().then(U),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:f,setElements:S,setNodes:B,setEdges:V,addNodes:z,addEdges:g,removeNodes:C,removeEdges:w,findNode:u,findEdge:c,updateEdge:F,updateEdgeData:P,updateNode:oe,updateNodeData:ge,applyEdgeChanges:G,applyNodeChanges:X,addSelectedElements:m,addSelectedNodes:p,addSelectedEdges:y,setMinZoom:A,setMaxZoom:Y,setTranslateExtent:j,setNodeExtent:H,setPaneClickDistance:I,removeSelectedElements:_,removeSelectedNodes:v,removeSelectedEdges:E,startConnection:Z,updateConnection:ce,endConnection:pe,setInteractive:L,setState:_e,getIntersectingNodes:K,getIncomers:s,getOutgoers:i,getConnectedEdges:a,getHandleConnections:l,isNodeIntersecting:le,panBy:ie,fitView:x=>o.value.fitView(x),zoomIn:x=>o.value.zoomIn(x),zoomOut:x=>o.value.zoomOut(x),zoomTo:(x,k)=>o.value.zoomTo(x,k),setViewport:(x,k)=>o.value.setViewport(x,k),setTransform:(x,k)=>o.value.setTransform(x,k),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(x,k,N)=>o.value.setCenter(x,k,N),fitBounds:(x,k)=>o.value.fitBounds(x,k),project:x=>o.value.project(x),screenToFlowCoordinate:x=>o.value.screenToFlowCoordinate(x),flowToScreenCoordinate:x=>o.value.flowToScreenCoordinate(x),toObject:()=>{const x=[],k=[];for(const N of e.nodes){const{computedPosition:$,handleBounds:U,selected:te,dimensions:ee,isParent:J,resizing:he,dragging:fe,events:ke,...$e}=N;x.push($e)}for(const N of e.edges){const{selected:$,sourceNode:U,targetNode:te,events:ee,...J}=N;k.push(J)}return JSON.parse(JSON.stringify({nodes:x,edges:k,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:x=>new Promise(k=>{const{nodes:N,edges:$,position:U,zoom:te,viewport:ee}=x;if(N&&B(N),$&&V($),ee!=null&&ee.x&&(ee!=null&&ee.y)||U){const J=(ee==null?void 0:ee.x)||U[0],he=(ee==null?void 0:ee.y)||U[1],fe=(ee==null?void 0:ee.zoom)||te||e.viewport.zoom;return mu(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:J,y:he,zoom:fe}).then(()=>{k(!0)})})}else k(!0)}),updateNodeInternals:r,viewportHelper:o,$reset:()=>{const x=sy();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const k=$r.translate(x.defaultViewport.x??0,x.defaultViewport.y??0).scale(Zo(x.defaultViewport.zoom??1,x.minZoom,x.maxZoom)),N=e.viewportRef.getBoundingClientRect(),$=[[0,0],[N.width,N.height]],U=e.d3Zoom.constrain()(k,$,x.translateExtent);e.d3Zoom.transform(e.d3Selection,U)}_e(x)},$destroy:()=>{}}}const l$=["data-id","data-handleid","data-nodeid","data-handlepos"],u$={name:"Handle",compatConfig:{MODE:3}},$o=ht({...u$,props:{id:{default:null},type:{},position:{default:()=>Oe.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=d0(e,["position","connectable","connectableStart","connectableEnd","id"]),o=ft(()=>n.type??"source"),r=ft(()=>n.isValidConnection??null),{id:s,connectionStartHandle:i,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:u,nodesConnectable:c,noDragClassName:d,noPanClassName:f}=gt(),{id:h,node:p,nodeEl:y,connectedEdges:m}=oy(),v=de(),E=ft(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),_=ft(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),A=ft(()=>{var V,S,z,g,C,w;return((V=i.value)==null?void 0:V.nodeId)===h&&((S=i.value)==null?void 0:S.id)===e.id&&((z=i.value)==null?void 0:z.type)===o.value||((g=l.value)==null?void 0:g.nodeId)===h&&((C=l.value)==null?void 0:C.id)===e.id&&((w=l.value)==null?void 0:w.type)===o.value}),Y=ft(()=>{var V,S,z;return((V=a.value)==null?void 0:V.nodeId)===h&&((S=a.value)==null?void 0:S.id)===e.id&&((z=a.value)==null?void 0:z.type)===o.value}),{handlePointerDown:j,handleClick:H}=ny({nodeId:h,handleId:e.id,isValidConnection:r,type:o}),I=ne(()=>typeof e.connectable=="string"&&e.connectable==="single"?!m.value.some(V=>{const S=V[`${o.value}Handle`];return V[o.value]!==h?!1:S?S===e.id:!0}):typeof e.connectable=="number"?m.value.filter(V=>{const S=V[`${o.value}Handle`];return V[o.value]!==h?!1:S?S===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(p,m.value):Ct(e.connectable)?e.connectable:c.value);wt(()=>{var V;if(!p.dimensions.width||!p.dimensions.height)return;const S=(V=p.handleBounds[o.value])==null?void 0:V.find(X=>X.id===e.id);if(!u.value||S)return;const z=u.value.querySelector(".vue-flow__transformationpane");if(!y.value||!v.value||!z||!e.id)return;const g=y.value.getBoundingClientRect(),C=v.value.getBoundingClientRect(),w=window.getComputedStyle(z),{m22:F}=new window.DOMMatrixReadOnly(w.transform),P={id:e.id,position:e.position,x:(C.left-g.left)/F,y:(C.top-g.top)/F,type:o.value,nodeId:h,...ol(v.value)};p.handleBounds[o.value]=[...p.handleBounds[o.value]??[],P]});function L(V){const S=Dc(V);I.value&&E.value&&(S&&V.button===0||!S)&&j(V)}function B(V){!h||!a.value&&!E.value||I.value&&H(V)}return t({handleClick:H,handlePointerDown:j,onClick:B,onPointerDown:L}),(V,S)=>(O(),D("div",{ref_key:"handle",ref:v,"data-id":`${ye(s)}-${ye(h)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":ye(h),"data-handlepos":V.position,class:qe(["vue-flow__handle",[`vue-flow__handle-${V.position}`,`vue-flow__handle-${e.id}`,ye(d),ye(f),o.value,{connectable:I.value,connecting:Y.value,connectablestart:E.value,connectableend:_.value,connectionindicator:I.value&&(E.value&&!A.value||_.value&&A.value)}]]),onMousedown:L,onTouchstartPassive:L,onClick:B},[_t(V.$slots,"default",{id:V.id})],42,l$))}}),il=function({sourcePosition:e=Oe.Bottom,targetPosition:t=Oe.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:s,data:i}){const a=i.label??n;return[rt($o,{type:"target",position:t,connectable:o,isValidConnection:r}),typeof a!="string"&&a?rt(a):rt(Pe,[a]),rt($o,{type:"source",position:e,connectable:o,isValidConnection:s})]};il.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];il.inheritAttrs=!1;il.compatConfig={MODE:3};const c$=il,al=function({targetPosition:e=Oe.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:r}){const s=r.label??t;return[rt($o,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof s!="string"&&s?rt(s):rt(Pe,[s])]};al.props=["targetPosition","label","isValidTargetPos","connectable","data"];al.inheritAttrs=!1;al.compatConfig={MODE:3};const d$=al,ll=function({sourcePosition:e=Oe.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:r}){const s=r.label??t;return[typeof s!="string"&&s?rt(s):rt(Pe,[s]),rt($o,{type:"source",position:e,connectable:n,isValidConnection:o})]};ll.props=["sourcePosition","label","isValidSourcePos","connectable","data"];ll.inheritAttrs=!1;ll.compatConfig={MODE:3};const f$=ll,h$=["transform"],p$=["width","height","x","y","rx","ry"],g$=["y"],m$={name:"EdgeText",compatConfig:{MODE:3}},y$=ht({...m$,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=de({x:0,y:0,width:0,height:0}),n=de(null),o=ne(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);wt(r),Fe([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const s=n.value.getBBox();(s.width!==t.value.width||s.height!==t.value.height)&&(t.value=s)}return(s,i)=>(O(),D("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[s.labelShowBg?(O(),D("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*s.labelBgPadding[0]}px`,height:`${t.value.height+2*s.labelBgPadding[1]}px`,x:-s.labelBgPadding[0],y:-s.labelBgPadding[1],style:vt(s.labelBgStyle),rx:s.labelBgBorderRadius,ry:s.labelBgBorderRadius},null,12,p$)):we("",!0),b("text",Cs(s.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:s.labelStyle}),[_t(s.$slots,"default",{},()=>[typeof s.label!="string"?(O(),ut(yo(s.label),{key:0})):(O(),D(Pe,{key:1},[st(be(s.label),1)],64))])],16,g$)],8,h$))}}),v$=["id","d","marker-end","marker-start"],b$=["d","stroke-width"],x$={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},ul=ht({...x$,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=de(null),o=de(null),r=de(null),s=pc();return t({pathEl:n,interactionEl:o,labelEl:r}),(i,a)=>(O(),D(Pe,null,[b("path",Cs(ye(s),{id:i.id,ref_key:"pathEl",ref:n,d:i.path,class:"vue-flow__edge-path","marker-end":i.markerEnd,"marker-start":i.markerStart}),null,16,v$),i.interactionWidth?(O(),D("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:i.path,"stroke-width":i.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,b$)):we("",!0),i.label&&i.labelX&&i.labelY?(O(),ut(y$,{key:1,ref_key:"labelEl",ref:r,x:i.labelX,y:i.labelY,label:i.label,"label-show-bg":i.labelShowBg,"label-bg-style":i.labelBgStyle,"label-bg-padding":i.labelBgPadding,"label-bg-border-radius":i.labelBgBorderRadius,"label-style":i.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):we("",!0)],64))}});function iy({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,s=n<e?n+r:n-r,i=Math.abs(o-t)/2,a=o<t?o+i:o-i;return[s,a,r,i]}function ay({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:s,targetControlX:i,targetControlY:a}){const l=e*.125+r*.375+i*.375+n*.125,u=t*.125+s*.375+a*.375+o*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function bi(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Zf({pos:e,x1:t,y1:n,x2:o,y2:r,c:s}){let i,a;switch(e){case Oe.Left:i=t-bi(t-o,s),a=n;break;case Oe.Right:i=t+bi(o-t,s),a=n;break;case Oe.Top:i=t,a=n-bi(n-r,s);break;case Oe.Bottom:i=t,a=n+bi(r-n,s);break}return[i,a]}function ly(e){const{sourceX:t,sourceY:n,sourcePosition:o=Oe.Bottom,targetX:r,targetY:s,targetPosition:i=Oe.Top,curvature:a=.25}=e,[l,u]=Zf({pos:o,x1:t,y1:n,x2:r,y2:s,c:a}),[c,d]=Zf({pos:i,x1:r,y1:s,x2:t,y2:n,c:a}),[f,h,p,y]=ay({sourceX:t,sourceY:n,targetX:r,targetY:s,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${l},${u} ${c},${d} ${r},${s}`,f,h,p,y]}function Kf({pos:e,x1:t,y1:n,x2:o,y2:r}){let s,i;switch(e){case Oe.Left:case Oe.Right:s=.5*(t+o),i=n;break;case Oe.Top:case Oe.Bottom:s=t,i=.5*(n+r);break}return[s,i]}function uy(e){const{sourceX:t,sourceY:n,sourcePosition:o=Oe.Bottom,targetX:r,targetY:s,targetPosition:i=Oe.Top}=e,[a,l]=Kf({pos:o,x1:t,y1:n,x2:r,y2:s}),[u,c]=Kf({pos:i,x1:r,y1:s,x2:t,y2:n}),[d,f,h,p]=ay({sourceX:t,sourceY:n,targetX:r,targetY:s,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${n} C${a},${l} ${u},${c} ${r},${s}`,d,f,h,p]}const Xf={[Oe.Left]:{x:-1,y:0},[Oe.Right]:{x:1,y:0},[Oe.Top]:{x:0,y:-1},[Oe.Bottom]:{x:0,y:1}};function _$({source:e,sourcePosition:t=Oe.Bottom,target:n}){return t===Oe.Left||t===Oe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Jf(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function w$({source:e,sourcePosition:t=Oe.Bottom,target:n,targetPosition:o=Oe.Top,center:r,offset:s}){const i=Xf[t],a=Xf[o],l={x:e.x+i.x*s,y:e.y+i.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},c=_$({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let h,p,y;const m={x:0,y:0},v={x:0,y:0},[E,_,A,Y]=iy({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[d]*a[d]===-1){p=r.x??E,y=r.y??_;const H=[{x:p,y:l.y},{x:p,y:u.y}],I=[{x:l.x,y},{x:u.x,y}];i[d]===f?h=d==="x"?H:I:h=d==="x"?I:H}else{const H=[{x:l.x,y:u.y}],I=[{x:u.x,y:l.y}];if(d==="x"?h=i.x===f?I:H:h=i.y===f?H:I,t===o){const z=Math.abs(e[d]-n[d]);if(z<=s){const g=Math.min(s-1,s-z);i[d]===f?m[d]=(l[d]>e[d]?-1:1)*g:v[d]=(u[d]>n[d]?-1:1)*g}}if(t!==o){const z=d==="x"?"y":"x",g=i[d]===a[z],C=l[z]>u[z],w=l[z]<u[z];(i[d]===1&&(!g&&C||g&&w)||i[d]!==1&&(!g&&w||g&&C))&&(h=d==="x"?H:I)}const L={x:l.x+m.x,y:l.y+m.y},B={x:u.x+v.x,y:u.y+v.y},V=Math.max(Math.abs(L.x-h[0].x),Math.abs(B.x-h[0].x)),S=Math.max(Math.abs(L.y-h[0].y),Math.abs(B.y-h[0].y));V>=S?(p=(L.x+B.x)/2,y=h[0].y):(p=h[0].x,y=(L.y+B.y)/2)}return[[e,{x:l.x+m.x,y:l.y+m.y},...h,{x:u.x+v.x,y:u.y+v.y},n],p,y,A,Y]}function k$(e,t,n,o){const r=Math.min(Jf(e,t)/2,Jf(t,n)/2,o),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+r*u},${i}Q ${s},${i} ${s},${i+r*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${s},${i+r*l}Q ${s},${i} ${s+r*a},${i}`}function Au(e){const{sourceX:t,sourceY:n,sourcePosition:o=Oe.Bottom,targetX:r,targetY:s,targetPosition:i=Oe.Top,borderRadius:a=5,centerX:l,centerY:u,offset:c=20}=e,[d,f,h,p,y]=w$({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:s},targetPosition:i,center:{x:l,y:u},offset:c});return[d.reduce((v,E,_)=>{let A;return _>0&&_<d.length-1?A=k$(d[_-1],E,d[_+1],a):A=`${_===0?"M":"L"}${E.x} ${E.y}`,v+=A,v},""),f,h,p,y]}function E$(e){const{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[s,i,a,l]=iy({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,s,i,a,l]}const S$=ht({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=E$(e);return rt(ul,{path:n,labelX:o,labelY:r,...t,...e})}}}),$$=S$,C$=ht({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Au({...e,sourcePosition:e.sourcePosition??Oe.Bottom,targetPosition:e.targetPosition??Oe.Top});return rt(ul,{path:n,labelX:o,labelY:r,...t,...e})}}}),cy=C$,N$=ht({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>rt(cy,{...e,...t,borderRadius:0})}}),T$=N$,A$=ht({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=ly({...e,sourcePosition:e.sourcePosition??Oe.Bottom,targetPosition:e.targetPosition??Oe.Top});return rt(ul,{path:n,labelX:o,labelY:r,...t,...e})}}}),I$=A$,O$=ht({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=uy({...e,sourcePosition:e.sourcePosition??Oe.Bottom,targetPosition:e.targetPosition??Oe.Top});return rt(ul,{path:n,labelX:o,labelY:r,...t,...e})}}}),R$=O$,M$={input:f$,default:c$,output:d$},D$={default:I$,straight:$$,step:T$,smoothstep:cy,simplebezier:R$};function P$(e,t,n){const o=ne(()=>y=>t.value.get(y)),r=ne(()=>y=>n.value.get(y)),s=ne(()=>{const y={...D$,...e.edgeTypes},m=Object.keys(y);for(const v of e.edges)v.type&&!m.includes(v.type)&&(y[v.type]=v.type);return y}),i=ne(()=>{const y={...M$,...e.nodeTypes},m=Object.keys(y);for(const v of e.nodes)v.type&&!m.includes(v.type)&&(y[v.type]=v.type);return y}),a=ne(()=>e.onlyRenderVisibleElements?Wm(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=ne(()=>{if(e.onlyRenderVisibleElements){const y=[];for(const m of e.edges){const v=t.value.get(m.source),E=t.value.get(m.target);OS({sourcePos:v.computedPosition||{x:0,y:0},targetPos:E.computedPosition||{x:0,y:0},sourceWidth:v.dimensions.width,sourceHeight:v.dimensions.height,targetWidth:E.dimensions.width,targetHeight:E.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&y.push(m)}return y}return e.edges}),u=ne(()=>[...a.value,...l.value]),c=ne(()=>{const y=[];for(const m of e.nodes)m.selected&&y.push(m);return y}),d=ne(()=>{const y=[];for(const m of e.edges)m.selected&&y.push(m);return y}),f=ne(()=>[...c.value,...d.value]),h=ne(()=>{const y=[];for(const m of e.nodes)m.dimensions.width&&m.dimensions.height&&m.handleBounds!==void 0&&y.push(m);return y}),p=ne(()=>a.value.length>0&&h.value.length===a.value.length);return{getNode:o,getEdge:r,getElements:u,getEdgeTypes:s,getNodeTypes:i,getEdges:l,getNodes:a,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:h,areNodesInitialized:p}}class Mo{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=ro())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??Mo.instance;return Mo.instance=o??new Mo,n&&(n.config.globalProperties.$vueFlowStorage=Mo.instance),Mo.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=sy(),r=zr(o),s={};for(const[f,h]of Object.entries(r.hooks)){const p=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;s[p]=h.on}const i={};for(const[f,h]of Object.entries(r.hooks))i[f]=h.trigger;const a=ne(()=>{const f=new Map;for(const h of r.nodes)f.set(h.id,h);return f}),l=ne(()=>{const f=new Map;for(const h of r.edges)f.set(h.id,h);return f}),u=P$(r,a,l),c=a$(r,a,l);c.setState({...r,...n});const d={...s,...u,...c,...N1(r),nodeLookup:a,edgeLookup:l,emits:i,id:t,vueFlowVersion:"1.47.0",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function gt(e){const t=Mo.getInstance(),n=Da(),o=typeof e=="object",r=o?e:{id:e},s=r.id,i=s??(n==null?void 0:n.vueFlowId);let a;if(n){const l=Ot(Gf,null);typeof l<"u"&&l!==null&&(!i||l.id===i)&&(a=l)}if(a||i&&(a=t.get(i)),!a||i&&a.id!==i){const l=s??t.getId(),u=t.create(l,r);a=u,(n??Ma(!0)).run(()=>{Fe(u.applyDefault,(d,f,h)=>{const p=m=>{u.applyNodeChanges(m)},y=m=>{u.applyEdgeChanges(m)};d?(u.onNodesChange(p),u.onEdgesChange(y)):(u.hooks.value.nodesChange.off(p),u.hooks.value.edgesChange.off(y)),h(()=>{u.hooks.value.nodesChange.off(p),u.hooks.value.edgesChange.off(y)})},{immediate:!0}),Os(()=>{if(a){const d=t.get(a.id);d?d.$destroy():ri(`No store instance found for id ${a.id} in storage.`)}})})}else o&&a.setState(r);if(n&&(dn(Gf,a),n.vueFlowId=a.id),o){const l=ro();(l==null?void 0:l.type.name)!=="VueFlow"&&a.emits.error(new It(Nt.USEVUEFLOW_OPTIONS))}return a}function V$(e){const{emits:t,dimensions:n}=gt();let o;wt(()=>{const r=()=>{var s,i;if(!e.value||!(((i=(s=e.value).checkVisibility)==null?void 0:i.call(s))??!0))return;const a=ol(e.value);(a.width===0||a.height===0)&&t.error(new It(Nt.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:a.width||500,height:a.height||500}};r(),window.addEventListener("resize",r),e.value&&(o=new ResizeObserver(()=>r()),o.observe(e.value)),Fa(()=>{window.removeEventListener("resize",r),o&&e.value&&o.unobserve(e.value)})})}const z$={name:"UserSelection",compatConfig:{MODE:3}},H$=ht({...z$,props:{userSelectionRect:{}},setup(e){return(t,n)=>(O(),D("div",{class:"vue-flow__selection vue-flow__container",style:vt({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),F$=["tabIndex"],L$={name:"NodesSelection",compatConfig:{MODE:3}},B$=ht({...L$,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:r,disableKeyboardA11y:s,userSelectionActive:i}=gt(),a=ry(),l=de(null),u=ty({el:l,onStart(p){t.selectionDragStart(p),t.nodeDragStart(p)},onDrag(p){t.selectionDrag(p),t.nodeDrag(p)},onStop(p){t.selectionDragStop(p),t.nodeDragStop(p)}});wt(()=>{var p;s.value||(p=l.value)==null||p.focus({preventScroll:!0})});const c=ne(()=>Rc(o.value)),d=ne(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function f(p){t.selectionContextMenu({event:p,nodes:o.value})}function h(p){s||gr[p.key]&&(p.preventDefault(),a({x:gr[p.key].x,y:gr[p.key].y},p.shiftKey))}return(p,y)=>!ye(i)&&c.value.width&&c.value.height?(O(),D("div",{key:0,class:qe(["vue-flow__nodesselection vue-flow__container",ye(r)]),style:vt({transform:`translate(${ye(n).x}px,${ye(n).y}px) scale(${ye(n).zoom})`})},[b("div",{ref_key:"el",ref:l,class:qe([{dragging:ye(u)},"vue-flow__nodesselection-rect"]),style:vt(d.value),tabIndex:ye(s)?void 0:-1,onContextmenu:f,onKeydown:h},null,46,F$)],6)):we("",!0)}});function j$(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const U$={name:"Pane",compatConfig:{MODE:3}},q$=ht({...U$,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:r,userSelectionActive:s,removeSelectedElements:i,userSelectionRect:a,elementsSelectable:l,nodesSelectionActive:u,getSelectedEdges:c,getSelectedNodes:d,removeNodes:f,removeEdges:h,selectionMode:p,deleteKeyCode:y,multiSelectionKeyCode:m,multiSelectionActive:v,edgeLookup:E,nodeLookup:_,connectionLookup:A,defaultEdgeOptions:Y,connectionStartHandle:j}=gt(),H=de(null),I=de(new Set),L=de(new Set),B=de(),V=ft(()=>l.value&&(e.isSelecting||s.value)),S=ft(()=>j.value!==null);let z=!1,g=!1;const C=ws(y,{actInsideInputWithModifier:!1}),w=ws(m);Fe(C,ce=>{ce&&(f(d.value),h(c.value),u.value=!1)}),Fe(w,ce=>{v.value=ce});function F(ce,pe){return xe=>{xe.target===pe&&(ce==null||ce(xe))}}function P(ce){if(z||S.value){z=!1;return}r.paneClick(ce),i(),u.value=!1}function X(ce){ce.preventDefault(),ce.stopPropagation(),r.paneContextMenu(ce)}function G(ce){r.paneScroll(ce)}function oe(ce){var pe,xe,K;if(B.value=(pe=t.value)==null?void 0:pe.getBoundingClientRect(),!l.value||!e.isSelecting||ce.button!==0||ce.target!==H.value||!B.value)return;(K=(xe=ce.target)==null?void 0:xe.setPointerCapture)==null||K.call(xe,ce.pointerId);const{x:le,y:ie}=j$(ce,B.value);g=!0,z=!1,i(),a.value={width:0,height:0,startX:le,startY:ie,x:le,y:ie},r.selectionStart(ce)}function ge(ce){var pe;if(!B.value||!a.value)return;z=!0;const{x:xe,y:K}=Sn(ce,B.value),{startX:le=0,startY:ie=0}=a.value,_e={startX:le,startY:ie,x:xe<le?xe:le,y:K<ie?K:ie,width:Math.abs(xe-le),height:Math.abs(K-ie)},Re=I.value,T=L.value;I.value=new Set(Wm(n.value,_e,o.value,p.value===Oc.Partial,!0).map(x=>x.id)),L.value=new Set;const R=((pe=Y.value)==null?void 0:pe.selectable)??!0;for(const x of I.value){const k=A.value.get(x);if(k)for(const{edgeId:N}of k.values()){const $=E.value.get(N);$&&($.selectable??R)&&L.value.add(N)}}if(!Yf(Re,I.value)){const x=po(_.value,I.value,!0);r.nodesChange(x)}if(!Yf(T,L.value)){const x=po(E.value,L.value);r.edgesChange(x)}a.value=_e,s.value=!0,u.value=!1}function Z(ce){var pe;ce.button!==0||!g||((pe=ce.target)==null||pe.releasePointerCapture(ce.pointerId),!s.value&&a.value&&ce.target===H.value&&P(ce),s.value=!1,a.value=null,u.value=I.value.size>0,r.selectionEnd(ce),e.selectionKeyPressed&&(z=!1),g=!1)}return(ce,pe)=>(O(),D("div",{ref_key:"container",ref:H,class:qe(["vue-flow__pane vue-flow__container",{selection:ce.isSelecting}]),onClick:pe[0]||(pe[0]=xe=>V.value?void 0:F(P,H.value)(xe)),onContextmenu:pe[1]||(pe[1]=xe=>F(X,H.value)(xe)),onWheelPassive:pe[2]||(pe[2]=xe=>F(G,H.value)(xe)),onPointerenter:pe[3]||(pe[3]=xe=>V.value?void 0:ye(r).paneMouseEnter(xe)),onPointerdown:pe[4]||(pe[4]=xe=>V.value?oe(xe):ye(r).paneMouseMove(xe)),onPointermove:pe[5]||(pe[5]=xe=>V.value?ge(xe):ye(r).paneMouseMove(xe)),onPointerup:pe[6]||(pe[6]=xe=>V.value?Z(xe):void 0),onPointerleave:pe[7]||(pe[7]=xe=>ye(r).paneMouseLeave(xe))},[_t(ce.$slots,"default"),ye(s)&&ye(a)?(O(),ut(H$,{key:0,"user-selection-rect":ye(a)},null,8,["user-selection-rect"])):we("",!0),ye(u)&&ye(d).length?(O(),ut(B$,{key:1})):we("",!0)],34))}}),W$={name:"Transform",compatConfig:{MODE:3}},Y$=ht({...W$,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=gt(),r=ne(()=>n.value?!o.value:!1),s=ne(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(i,a)=>(O(),D("div",{class:"vue-flow__transformationpane vue-flow__container",style:vt({transform:s.value,opacity:r.value?0:void 0})},[_t(i.$slots,"default")],4))}}),G$={name:"Viewport",compatConfig:{MODE:3}},Z$=ht({...G$,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:r,zoomActivationKeyCode:s,selectionKeyCode:i,panActivationKeyCode:a,panOnScroll:l,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:f,zoomOnPinch:h,zoomOnScroll:p,preventScrolling:y,noWheelClassName:m,noPanClassName:v,emits:E,connectionStartHandle:_,userSelectionActive:A,paneDragging:Y,d3Zoom:j,d3Selection:H,d3ZoomHandler:I,viewport:L,viewportRef:B,paneClickDistance:V}=gt();V$(B);const S=yr(!1),z=yr(!1);let g=null,C=!1,w=0,F={x:0,y:0,zoom:0};const P=ws(a),X=ws(i),G=ws(s),oe=ft(()=>(!X.value||X.value&&i.value===!0)&&(P.value||d.value)),ge=ft(()=>P.value||l.value),Z=ft(()=>X.value||i.value===!0&&oe.value!==!0),ce=ft(()=>_.value!==null);wt(()=>{if(!B.value){ri("Viewport element is missing");return}const ie=B.value,_e=ie.getBoundingClientRect(),Re=fS().clickDistance(V.value).scaleExtent([t.value,n.value]).translateExtent(r.value),T=an(ie).call(Re),R=T.on("wheel.zoom"),x=$r.translate(o.value.x??0,o.value.y??0).scale(Zo(o.value.zoom??1,t.value,n.value)),k=[[0,0],[_e.width,_e.height]],N=Re.constrain()(x,k,r.value);Re.transform(T,N),Re.wheelDelta(Cu),j.value=Re,H.value=T,I.value=R,L.value={x:N.x,y:N.y,zoom:N.k},Re.on("start",$=>{var U;if(!$.sourceEvent)return null;w=$.sourceEvent.button,S.value=!0;const te=K($.transform);((U=$.sourceEvent)==null?void 0:U.type)==="mousedown"&&(Y.value=!0),F=te,E.viewportChangeStart(te),E.moveStart({event:$,flowTransform:te})}),Re.on("end",$=>{if(!$.sourceEvent)return null;if(S.value=!1,Y.value=!1,pe(oe.value,w??0)&&!C&&E.paneContextMenu($.sourceEvent),C=!1,xe(F,$.transform)){const U=K($.transform);F=U,E.viewportChangeEnd(U),E.moveEnd({event:$,flowTransform:U})}}),Re.filter($=>{var U;const te=G.value||p.value,ee=h.value&&$.ctrlKey,J=$.button,he=$.type==="wheel";if(J===1&&$.type==="mousedown"&&(le($,"vue-flow__node")||le($,"vue-flow__edge")))return!0;if(!oe.value&&!te&&!ge.value&&!f.value&&!h.value||A.value||ce.value&&!he||!f.value&&$.type==="dblclick"||le($,m.value)&&he||le($,v.value)&&(!he||ge.value&&he&&!G.value)||!h.value&&$.ctrlKey&&he||!te&&!ge.value&&!ee&&he)return!1;if(!h&&$.type==="touchstart"&&((U=$.touches)==null?void 0:U.length)>1)return $.preventDefault(),!1;if(!oe.value&&($.type==="mousedown"||$.type==="touchstart")||i.value===!0&&Array.isArray(d.value)&&d.value.includes(0)&&J===0||Array.isArray(d.value)&&!d.value.includes(J)&&($.type==="mousedown"||$.type==="touchstart"))return!1;const fe=Array.isArray(d.value)&&d.value.includes(J)||i.value===!0&&Array.isArray(d.value)&&!d.value.includes(0)||!J||J<=1;return(!$.ctrlKey||P.value||he)&&fe}),Fe([A,oe],()=>{A.value&&!S.value?Re.on("zoom",null):A.value||Re.on("zoom",$=>{L.value={x:$.transform.x,y:$.transform.y,zoom:$.transform.k};const U=K($.transform);C=pe(oe.value,w??0),E.viewportChange(U),E.move({event:$,flowTransform:U})})},{immediate:!0}),Fe([A,ge,u,G,h,y,m],()=>{ge.value&&!G.value&&!A.value?T.on("wheel.zoom",$=>{if(le($,m.value))return!1;const U=G.value||p.value,te=h.value&&$.ctrlKey;if(!(!y.value||ge.value||U||te))return!1;$.preventDefault(),$.stopImmediatePropagation();const J=T.property("__zoom").k||1,he=Fs();if(!P.value&&$.ctrlKey&&h.value&&he){const Q=_n($),W=Cu($),Te=J*2**W;Re.scaleTo(T,Te,Q,$);return}const fe=$.deltaMode===1?20:1;let ke=u.value===_s.Vertical?0:$.deltaX*fe,$e=u.value===_s.Horizontal?0:$.deltaY*fe;!he&&$.shiftKey&&u.value!==_s.Vertical&&!ke&&$e&&(ke=$e,$e=0),Re.translateBy(T,-(ke/J)*c.value,-($e/J)*c.value);const M=K(T.property("__zoom"));g&&clearTimeout(g),z.value?(E.move({event:$,flowTransform:M}),E.viewportChange(M),g=setTimeout(()=>{E.moveEnd({event:$,flowTransform:M}),E.viewportChangeEnd(M),z.value=!1},150)):(z.value=!0,E.moveStart({event:$,flowTransform:M}),E.viewportChangeStart(M))},{passive:!1}):typeof R<"u"&&T.on("wheel.zoom",function($,U){const te=!y.value&&$.type==="wheel"&&!$.ctrlKey,ee=G.value||p.value,J=h.value&&$.ctrlKey;if(!ee&&!l.value&&!J&&$.type==="wheel"||te||le($,m.value))return null;$.preventDefault(),R.call(this,$,U)},{passive:!1})},{immediate:!0})});function pe(ie,_e){return _e===2&&Array.isArray(ie)&&ie.includes(2)}function xe(ie,_e){return ie.x!==_e.x&&!Number.isNaN(_e.x)||ie.y!==_e.y&&!Number.isNaN(_e.y)||ie.zoom!==_e.k&&!Number.isNaN(_e.k)}function K(ie){return{x:ie.x,y:ie.y,zoom:ie.k}}function le(ie,_e){return ie.target.closest(`.${_e}`)}return(ie,_e)=>(O(),D("div",{ref_key:"viewportRef",ref:B,class:"vue-flow__viewport vue-flow__container"},[ue(q$,{"is-selecting":Z.value,"selection-key-pressed":ye(X),class:qe({connecting:ce.value,dragging:ye(Y),draggable:ye(d)===!0||Array.isArray(ye(d))&&ye(d).includes(0)})},{default:ze(()=>[ue(Y$,null,{default:ze(()=>[_t(ie.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),K$=["id"],X$=["id"],J$=["id"],Q$={name:"A11yDescriptions",compatConfig:{MODE:3}},eC=ht({...Q$,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=gt();return(r,s)=>(O(),D(Pe,null,[b("div",{id:`${ye(Vm)}-${ye(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+be(ye(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,K$),b("div",{id:`${ye(zm)}-${ye(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,X$),ye(n)?we("",!0):(O(),D("div",{key:0,id:`${ye(vS)}-${ye(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},be(ye(o)),9,J$))],64))}});function tC(){const e=gt();Fe(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function nC(e,t,n){return n===Oe.Left?e-t:n===Oe.Right?e+t:e}function oC(e,t,n){return n===Oe.Top?e-t:n===Oe.Bottom?e+t:e}const Pc=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=Oe.Top,type:r}){return rt("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:nC(t,e,o),cy:oC(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Pc.props=["radius","centerX","centerY","position","type"];Pc.compatConfig={MODE:3};const Qf=Pc,rC=ht({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:r,emits:s,nodesSelectionActive:i,noPanClassName:a,getEdgeTypes:l,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:h,disableKeyboardA11y:p,elementsSelectable:y,edgesUpdatable:m,edgesFocusable:v,hooks:E}=gt(),_=ne(()=>c(e.id)),{emit:A,on:Y}=GS(_.value,s),j=Ot(sl),H=ro(),I=de(!1),L=de(!1),B=de(""),V=de(null),S=de("source"),z=de(null),g=ft(()=>typeof _.value.selectable>"u"?y.value:_.value.selectable),C=ft(()=>typeof _.value.updatable>"u"?m.value:_.value.updatable),w=ft(()=>typeof _.value.focusable>"u"?v.value:_.value.focusable);dn(qS,e.id),dn(WS,z);const F=ne(()=>_.value.class instanceof Function?_.value.class(_.value):_.value.class),P=ne(()=>_.value.style instanceof Function?_.value.style(_.value):_.value.style),X=ne(()=>{const k=_.value.type||"default",N=j==null?void 0:j[`edge-${k}`];if(N)return N;let $=_.value.template??l.value[k];if(typeof $=="string"&&H){const U=Object.keys(H.appContext.components);U&&U.includes(k)&&($=La(k,!1))}return $&&typeof $!="string"?$:(s.error(new It(Nt.EDGE_TYPE_MISSING,$)),!1)}),{handlePointerDown:G}=ny({nodeId:B,handleId:V,type:S,isValidConnection:f,edgeUpdaterType:S,onEdgeUpdate:Z,onEdgeUpdateEnd:ce});return()=>{const k=d(_.value.source),N=d(_.value.target),$="pathOptions"in _.value?_.value.pathOptions:{};if(!k&&!N)return s.error(new It(Nt.EDGE_SOURCE_TARGET_MISSING,_.value.id,_.value.source,_.value.target)),null;if(!k)return s.error(new It(Nt.EDGE_SOURCE_MISSING,_.value.id,_.value.source)),null;if(!N)return s.error(new It(Nt.EDGE_TARGET_MISSING,_.value.id,_.value.target)),null;if(!_.value||_.value.hidden||k.hidden||N.hidden)return null;let U;o.value===to.Strict?U=k.handleBounds.source:U=[...k.handleBounds.source||[],...k.handleBounds.target||[]];const te=Lf(U,_.value.sourceHandle);let ee;o.value===to.Strict?ee=N.handleBounds.target:ee=[...N.handleBounds.target||[],...N.handleBounds.source||[]];const J=Lf(ee,_.value.targetHandle),he=(te==null?void 0:te.position)||Oe.Bottom,fe=(J==null?void 0:J.position)||Oe.Top,{x:ke,y:$e}=Cr(k,te,he),{x:M,y:Q}=Cr(N,J,fe);return _.value.sourceX=ke,_.value.sourceY=$e,_.value.targetX=M,_.value.targetY=Q,rt("g",{ref:z,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${X.value===!1?"default":_.value.type||"default"}`,a.value,F.value,{updating:I.value,selected:_.value.selected,animated:_.value.animated,inactive:!g.value&&!E.value.edgeClick.hasListeners()}],tabIndex:w.value?0:void 0,"aria-label":_.value.ariaLabel===null?void 0:_.value.ariaLabel??`Edge from ${_.value.source} to ${_.value.target}`,"aria-describedby":w.value?`${zm}-${t}`:void 0,"aria-roledescription":"edge",role:w.value?"group":"img",..._.value.domAttributes,onClick:xe,onContextmenu:K,onDblclick:le,onMouseenter:ie,onMousemove:_e,onMouseleave:Re,onKeyDown:w.value?x:void 0},[L.value?null:rt(X.value===!1?l.value.default:X.value,{id:e.id,sourceNode:k,targetNode:N,source:_.value.source,target:_.value.target,type:_.value.type,updatable:C.value,selected:_.value.selected,animated:_.value.animated,label:_.value.label,labelStyle:_.value.labelStyle,labelShowBg:_.value.labelShowBg,labelBgStyle:_.value.labelBgStyle,labelBgPadding:_.value.labelBgPadding,labelBgBorderRadius:_.value.labelBgBorderRadius,data:_.value.data,events:{..._.value.events,...Y},style:P.value,markerStart:`url('#${Hs(_.value.markerStart,t)}')`,markerEnd:`url('#${Hs(_.value.markerEnd,t)}')`,sourcePosition:he,targetPosition:fe,sourceX:ke,sourceY:$e,targetX:M,targetY:Q,sourceHandleId:_.value.sourceHandle,targetHandleId:_.value.targetHandle,interactionWidth:_.value.interactionWidth,...$}),[C.value==="source"||C.value===!0?[rt("g",{onMousedown:T,onMouseenter:oe,onMouseout:ge},rt(Qf,{position:he,centerX:ke,centerY:$e,radius:r.value,type:"source","data-type":"source"}))]:null,C.value==="target"||C.value===!0?[rt("g",{onMousedown:R,onMouseenter:oe,onMouseout:ge},rt(Qf,{position:fe,centerX:M,centerY:Q,radius:r.value,type:"target","data-type":"target"}))]:null]])};function oe(){I.value=!0}function ge(){I.value=!1}function Z(k,N){A.update({event:k,edge:_.value,connection:N})}function ce(k){A.updateEnd({event:k,edge:_.value}),L.value=!1}function pe(k,N){k.button===0&&(L.value=!0,B.value=N?_.value.target:_.value.source,V.value=(N?_.value.targetHandle:_.value.sourceHandle)??null,S.value=N?"target":"source",A.updateStart({event:k,edge:_.value}),G(k))}function xe(k){var N;const $={event:k,edge:_.value};g.value&&(i.value=!1,_.value.selected&&h.value?(u([_.value]),(N=z.value)==null||N.blur()):n([_.value])),A.click($)}function K(k){A.contextMenu({event:k,edge:_.value})}function le(k){A.doubleClick({event:k,edge:_.value})}function ie(k){A.mouseEnter({event:k,edge:_.value})}function _e(k){A.mouseMove({event:k,edge:_.value})}function Re(k){A.mouseLeave({event:k,edge:_.value})}function T(k){pe(k,!0)}function R(k){pe(k,!1)}function x(k){var N;!p.value&&Hm.includes(k.key)&&g.value&&(k.key==="Escape"?((N=z.value)==null||N.blur(),u([c(e.id)])):n([c(e.id)]))}}}),sC=rC,iC=ht({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:r,connectionPosition:s,connectionLineType:i,connectionLineStyle:a,connectionLineOptions:l,connectionStatus:u,viewport:c,findNode:d}=gt(),f=(e=Ot(sl))==null?void 0:e["connection-line"],h=ne(()=>{var E;return d((E=o.value)==null?void 0:E.nodeId)}),p=ne(()=>{var E;return d((E=r.value)==null?void 0:E.nodeId)??null}),y=ne(()=>({x:(s.value.x-c.value.x)/c.value.zoom,y:(s.value.y-c.value.y)/c.value.zoom})),m=ne(()=>l.value.markerStart?`url(#${Hs(l.value.markerStart,t)})`:""),v=ne(()=>l.value.markerEnd?`url(#${Hs(l.value.markerEnd,t)})`:"");return()=>{var E,_,A;if(!h.value||!o.value)return null;const Y=o.value.id,j=o.value.type,H=h.value.handleBounds;let I=(H==null?void 0:H[j])??[];if(n.value===to.Loose){const P=(H==null?void 0:H[j==="source"?"target":"source"])??[];I=[...I,...P]}if(!I)return null;const L=(Y?I.find(P=>P.id===Y):I[0])??null,B=(L==null?void 0:L.position)??Oe.Top,{x:V,y:S}=Cr(h.value,L,B);let z=null;p.value&&(n.value===to.Strict?z=((E=p.value.handleBounds[j==="source"?"target":"source"])==null?void 0:E.find(P=>{var X;return P.id===((X=r.value)==null?void 0:X.id)}))||null:z=((_=[...p.value.handleBounds.source??[],...p.value.handleBounds.target??[]])==null?void 0:_.find(P=>{var X;return P.id===((X=r.value)==null?void 0:X.id)}))||null);const g=((A=r.value)==null?void 0:A.position)??(B?Nu[B]:null);if(!B||!g)return null;const C=i.value??l.value.type??Oo.Bezier;let w="";const F={sourceX:V,sourceY:S,sourcePosition:B,targetX:y.value.x,targetY:y.value.y,targetPosition:g};return C===Oo.Bezier?[w]=ly(F):C===Oo.Step?[w]=Au({...F,borderRadius:0}):C===Oo.SmoothStep?[w]=Au(F):C===Oo.SimpleBezier?[w]=uy(F):w=`M${V},${S} ${y.value.x},${y.value.y}`,rt("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},rt("g",{class:"vue-flow__connection"},f?rt(f,{sourceX:V,sourceY:S,sourcePosition:B,targetX:y.value.x,targetY:y.value.y,targetPosition:g,sourceNode:h.value,sourceHandle:L,targetNode:p.value,targetHandle:z,markerEnd:v.value,markerStart:m.value,connectionStatus:u.value}):rt("path",{d:w,class:[l.value.class,u.value,"vue-flow__connection-path"],style:{...a.value,...l.value.style},"marker-end":v.value,"marker-start":m.value})))}}}),aC=iC,lC=["id","markerWidth","markerHeight","markerUnits","orient"],uC={name:"MarkerType",compatConfig:{MODE:3}},cC=ht({...uC,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(O(),D("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===ye(Su).ArrowClosed?(O(),D("polyline",{key:0,style:vt({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):we("",!0),t.type===ye(Su).Arrow?(O(),D("polyline",{key:1,style:vt({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):we("",!0)],8,lC))}}),dC={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},fC={name:"MarkerDefinitions",compatConfig:{MODE:3}},hC=ht({...fC,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:r}=gt(),s=ne(()=>{const i=new Set,a=[],l=u=>{if(u){const c=Hs(u,t);i.has(c)||(typeof u=="object"?a.push({...u,id:c,color:u.color||r.value}):a.push({id:c,color:r.value,type:u}),i.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])l(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])l(c);return a.sort((u,c)=>u.id.localeCompare(c.id))});return(i,a)=>(O(),D("svg",dC,[b("defs",null,[(O(!0),D(Pe,null,at(s.value,l=>(O(),ut(cC,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,"stroke-width":l.strokeWidth,orient:l.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),pC={name:"Edges",compatConfig:{MODE:3}},gC=ht({...pC,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=gt();return(r,s)=>(O(),D(Pe,null,[ue(hC),(O(!0),D(Pe,null,at(ye(n),i=>(O(),D("svg",{key:i.id,class:"vue-flow__edges vue-flow__container",style:vt({zIndex:ye(RS)(i,ye(t),ye(o))})},[ue(ye(sC),{id:i.id},null,8,["id"])],4))),128)),ue(ye(aC))],64))}}),mC=ht({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:r,multiSelectionActive:s,emits:i,removeSelectedNodes:a,addSelectedNodes:l,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:f,elevateNodesOnSelect:h,disableKeyboardA11y:p,ariaLiveMessage:y,snapToGrid:m,snapGrid:v,nodeDragThreshold:E,nodesDraggable:_,elementsSelectable:A,nodesConnectable:Y,nodesFocusable:j,hooks:H}=gt(),I=de(null);dn(ey,I),dn(Qm,e.id);const L=Ot(sl),B=ro(),V=ry(),{node:S,parentNode:z}=oy(e.id),{emit:g,on:C}=JS(S,i),w=ft(()=>typeof S.draggable>"u"?_.value:S.draggable),F=ft(()=>typeof S.selectable>"u"?A.value:S.selectable),P=ft(()=>typeof S.connectable>"u"?Y.value:S.connectable),X=ft(()=>typeof S.focusable>"u"?j.value:S.focusable),G=ne(()=>F.value||w.value||H.value.nodeClick.hasListeners()||H.value.nodeDoubleClick.hasListeners()||H.value.nodeMouseEnter.hasListeners()||H.value.nodeMouseMove.hasListeners()||H.value.nodeMouseLeave.hasListeners()),oe=ft(()=>!!S.dimensions.width&&!!S.dimensions.height),ge=ne(()=>{const N=S.type||"default",$=L==null?void 0:L[`node-${N}`];if($)return $;let U=S.template||d.value[N];if(typeof U=="string"&&B){const te=Object.keys(B.appContext.components);te&&te.includes(N)&&(U=La(N,!1))}return U&&typeof U!="string"?U:(i.error(new It(Nt.NODE_TYPE_MISSING,U)),!1)}),Z=ty({id:e.id,el:I,disabled:()=>!w.value,selectable:F,dragHandle:()=>S.dragHandle,onStart(N){g.dragStart(N)},onDrag(N){g.drag(N)},onStop(N){g.dragStop(N)},onClick(N){x(N)}}),ce=ne(()=>S.class instanceof Function?S.class(S):S.class),pe=ne(()=>{const N=(S.style instanceof Function?S.style(S):S.style)||{},$=S.width instanceof Function?S.width(S):S.width,U=S.height instanceof Function?S.height(S):S.height;return!N.width&&$&&(N.width=typeof $=="string"?$:`${$}px`),!N.height&&U&&(N.height=typeof U=="string"?U:`${U}px`),N}),xe=ft(()=>Number(S.zIndex??pe.value.zIndex??0));return c(N=>{(N.includes(e.id)||!N.length)&&le()}),wt(()=>{Fe(()=>S.hidden,(N=!1,$,U)=>{!N&&I.value&&(e.resizeObserver.observe(I.value),U(()=>{I.value&&e.resizeObserver.unobserve(I.value)}))},{immediate:!0,flush:"post"})}),Fe([()=>S.type,()=>S.sourcePosition,()=>S.targetPosition],()=>{Bt(()=>{u([{id:e.id,nodeElement:I.value,forceUpdate:!0}])})}),Fe([()=>S.position.x,()=>S.position.y,()=>{var N;return(N=z.value)==null?void 0:N.computedPosition.x},()=>{var N;return(N=z.value)==null?void 0:N.computedPosition.y},()=>{var N;return(N=z.value)==null?void 0:N.computedPosition.z},xe,()=>S.selected,()=>S.dimensions.height,()=>S.dimensions.width,()=>{var N;return(N=z.value)==null?void 0:N.dimensions.height},()=>{var N;return(N=z.value)==null?void 0:N.dimensions.width}],([N,$,U,te,ee,J])=>{const he={x:N,y:$,z:J+(h.value&&S.selected?1e3:0)};typeof U<"u"&&typeof te<"u"?S.computedPosition=CS({x:U,y:te,z:ee},he):S.computedPosition=he},{flush:"post",immediate:!0}),Fe([()=>S.extent,f],([N,$],[U,te])=>{(N!==U||$!==te)&&K()}),S.extent==="parent"||typeof S.extent=="object"&&"range"in S.extent&&S.extent.range==="parent"?mu(()=>oe).toBe(!0).then(K):K(),()=>S.hidden?null:rt("div",{ref:I,"data-id":S.id,class:["vue-flow__node",`vue-flow__node-${ge.value===!1?"default":S.type||"default"}`,{[n.value]:w.value,dragging:Z==null?void 0:Z.value,draggable:w.value,selected:S.selected,selectable:F.value,parent:S.isParent},ce.value],style:{visibility:oe.value?"visible":"hidden",zIndex:S.computedPosition.z??xe.value,transform:`translate(${S.computedPosition.x}px,${S.computedPosition.y}px)`,pointerEvents:G.value?"all":"none",...pe.value},tabIndex:X.value?0:void 0,role:X.value?"group":void 0,"aria-describedby":p.value?void 0:`${Vm}-${t}`,"aria-label":S.ariaLabel,"aria-roledescription":"node",...S.domAttributes,onMouseenter:ie,onMousemove:_e,onMouseleave:Re,onContextmenu:T,onClick:x,onDblclick:R,onKeydown:k},[rt(ge.value===!1?d.value.default:ge.value,{id:S.id,type:S.type,data:S.data,events:{...S.events,...C},selected:S.selected,resizing:S.resizing,dragging:Z.value,connectable:P.value,position:S.computedPosition,dimensions:S.dimensions,isValidTargetPos:S.isValidTargetPos,isValidSourcePos:S.isValidSourcePos,parent:S.parentNode,parentNodeId:S.parentNode,zIndex:S.computedPosition.z??xe.value,targetPosition:S.targetPosition,sourcePosition:S.sourcePosition,label:S.label,dragHandle:S.dragHandle,onUpdateNodeInternals:le})]);function K(){const N=S.computedPosition,{computedPosition:$,position:U}=Mc(S,m.value?rl(N,v.value):N,i.error,f.value,z.value);(S.computedPosition.x!==$.x||S.computedPosition.y!==$.y)&&(S.computedPosition={...S.computedPosition,...$}),(S.position.x!==U.x||S.position.y!==U.y)&&(S.position=U)}function le(){I.value&&u([{id:e.id,nodeElement:I.value,forceUpdate:!0}])}function ie(N){Z!=null&&Z.value||g.mouseEnter({event:N,node:S})}function _e(N){Z!=null&&Z.value||g.mouseMove({event:N,node:S})}function Re(N){Z!=null&&Z.value||g.mouseLeave({event:N,node:S})}function T(N){return g.contextMenu({event:N,node:S})}function R(N){return g.doubleClick({event:N,node:S})}function x(N){F.value&&(!o.value||!w.value||E.value>0)&&Tu(S,s.value,l,a,r,!1,I.value),g.click({event:N,node:S})}function k(N){if(!($u(N)||p.value))if(Hm.includes(N.key)&&F.value){const $=N.key==="Escape";Tu(S,s.value,l,a,r,$,I.value)}else w.value&&S.selected&&gr[N.key]&&(N.preventDefault(),y.value=`Moved selected node ${N.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~S.position.x}, y: ${~~S.position.y}`,V({x:gr[N.key].x,y:gr[N.key].y},N.shiftKey))}}}),yC=mC;function vC(e={includeHiddenNodes:!1}){const{nodes:t}=gt();return ne(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const bC={class:"vue-flow__nodes vue-flow__container"},xC={name:"Nodes",compatConfig:{MODE:3}},_C=ht({...xC,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=gt(),r=vC(),s=de();return Fe(r,i=>{i&&Bt(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),wt(()=>{s.value=new ResizeObserver(i=>{const a=i.map(l=>({id:l.target.getAttribute("data-id"),nodeElement:l.target,forceUpdate:!0}));Bt(()=>n(a))})}),Fa(()=>{var i;return(i=s.value)==null?void 0:i.disconnect()}),(i,a)=>(O(),D("div",bC,[s.value?(O(!0),D(Pe,{key:0},at(ye(t),(l,u,c,d)=>{const f=[l.id];if(d&&d.key===l.id&&J0(d,f))return d;const h=(O(),ut(ye(yC),{id:l.id,key:l.id,"resize-observer":s.value},null,8,["id","resize-observer"]));return h.memo=f,h},a,0),128)):we("",!0)]))}});function wC(){const{emits:e}=gt();wt(()=>{if(Jm()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new It(Nt.MISSING_STYLES))}})}const kC=b("div",{class:"vue-flow__edge-labels"},null,-1),EC={name:"VueFlow",compatConfig:{MODE:3}},SC=ht({...EC,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,r=Bp(),s=Ol(o,"modelValue",n),i=Ol(o,"nodes",n),a=Ol(o,"edges",n),l=gt(o),u=n$({modelValue:s,nodes:i,edges:a},o,l);return r$(n,l.hooks),tC(),wC(),dn(sl,r),Hr(u),t(l),(c,d)=>(O(),D("div",{ref:ye(l).vueFlowRef,class:"vue-flow"},[ue(Z$,null,{default:ze(()=>[ue(gC),kC,ue(_C),_t(c.$slots,"zoom-pane")]),_:3}),_t(c.$slots,"default"),ue(eC)],512))}}),$C={name:"Panel",compatConfig:{MODE:3}},dy=ht({...$C,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=gt(),o=ne(()=>`${t.position}`.split("-"));return(r,s)=>(O(),D("div",{class:qe(["vue-flow__panel",o.value]),style:vt({pointerEvents:ye(n)?"none":"all"})},[_t(r.$slots,"default")],6))}});var $n=(e=>(e.Lines="lines",e.Dots="dots",e))($n||{});const fy=function({dimensions:e,size:t,color:n}){return rt("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},hy=function({radius:e,color:t}){return rt("circle",{cx:e,cy:e,r:e,fill:t})};$n.Lines+"",$n.Dots+"";const CC={[$n.Dots]:"#81818a",[$n.Lines]:"#eee"},NC=["id","x","y","width","height","patternTransform"],TC={key:2,height:"100",width:"100"},AC=["fill"],IC=["x","y","fill"],OC={name:"Background",compatConfig:{MODE:3}},RC=ht({...OC,props:{id:{},variant:{default:()=>$n.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(e){const{id:t,viewport:n}=gt(),o=ne(()=>{const i=n.value.zoom,[a,l]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],u=[a*i||1,l*i||1],c=e.size*i,[d,f]=Array.isArray(e.offset)?e.offset:[e.offset,e.offset],h=[d*i||1+u[0]/2,f*i||1+u[1]/2];return{scaledGap:u,offset:h,size:c}}),r=ft(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),s=ft(()=>e.color||e.patternColor||CC[e.variant||$n.Dots]);return(i,a)=>(O(),D("svg",{class:"vue-flow__background vue-flow__container",style:vt({height:`${i.height>100?100:i.height}%`,width:`${i.width>100?100:i.width}%`})},[_t(i.$slots,"pattern-container",{id:r.value},()=>[b("pattern",{id:r.value,x:ye(n).x%o.value.scaledGap[0],y:ye(n).y%o.value.scaledGap[1],width:o.value.scaledGap[0],height:o.value.scaledGap[1],patternTransform:`translate(-${o.value.offset[0]},-${o.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[_t(i.$slots,"pattern",{},()=>[i.variant===ye($n).Lines?(O(),ut(ye(fy),{key:0,size:i.lineWidth,color:s.value,dimensions:o.value.scaledGap},null,8,["size","color","dimensions"])):i.variant===ye($n).Dots?(O(),ut(ye(hy),{key:1,color:s.value,radius:o.value.size/2},null,8,["color","radius"])):we("",!0),i.bgColor?(O(),D("svg",TC,[b("rect",{width:"100%",height:"100%",fill:i.bgColor},null,8,AC)])):we("",!0)])],8,NC)]),b("rect",{x:i.x,y:i.y,width:"100%",height:"100%",fill:`url(#${r.value})`},null,8,IC),_t(i.$slots,"default",{id:r.value})],4))}}),MC={name:"ControlButton",compatConfig:{MODE:3}},DC=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},PC={type:"button",class:"vue-flow__controls-button"};function VC(e,t,n,o,r,s){return O(),D("button",PC,[_t(e.$slots,"default")])}const xi=DC(MC,[["render",VC]]),zC={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},HC=b("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),FC=[HC];function LC(e,t){return O(),D("svg",zC,FC)}const BC={render:LC},jC={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},UC=b("path",{d:"M0 0h32v4.2H0z"},null,-1),qC=[UC];function WC(e,t){return O(),D("svg",jC,qC)}const YC={render:WC},GC={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ZC=b("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),KC=[ZC];function XC(e,t){return O(),D("svg",GC,KC)}const JC={render:XC},QC={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},e2=b("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),t2=[e2];function n2(e,t){return O(),D("svg",QC,t2)}const o2={render:n2},r2={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},s2=b("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),i2=[s2];function a2(e,t){return O(),D("svg",r2,i2)}const l2={render:a2},u2={name:"Controls",compatConfig:{MODE:3}},c2=ht({...u2,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>Pm.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:r,setInteractive:s,zoomIn:i,zoomOut:a,fitView:l,viewport:u,minZoom:c,maxZoom:d}=gt(),f=ft(()=>n.value||o.value||r.value),h=ft(()=>u.value.zoom<=c.value),p=ft(()=>u.value.zoom>=d.value);function y(){i(),t("zoomIn")}function m(){a(),t("zoomOut")}function v(){l(e.fitViewParams),t("fitView")}function E(){s(!f.value),t("interactionChange",!f.value)}return(_,A)=>(O(),ut(ye(dy),{class:"vue-flow__controls",position:_.position},{default:ze(()=>[_t(_.$slots,"top"),_.showZoom?(O(),D(Pe,{key:0},[_t(_.$slots,"control-zoom-in",{},()=>[ue(xi,{class:"vue-flow__controls-zoomin",disabled:p.value,onClick:y},{default:ze(()=>[_t(_.$slots,"icon-zoom-in",{},()=>[(O(),ut(yo(ye(BC))))])]),_:3},8,["disabled"])]),_t(_.$slots,"control-zoom-out",{},()=>[ue(xi,{class:"vue-flow__controls-zoomout",disabled:h.value,onClick:m},{default:ze(()=>[_t(_.$slots,"icon-zoom-out",{},()=>[(O(),ut(yo(ye(YC))))])]),_:3},8,["disabled"])])],64)):we("",!0),_.showFitView?_t(_.$slots,"control-fit-view",{key:1},()=>[ue(xi,{class:"vue-flow__controls-fitview",onClick:v},{default:ze(()=>[_t(_.$slots,"icon-fit-view",{},()=>[(O(),ut(yo(ye(JC))))])]),_:3})]):we("",!0),_.showInteractive?_t(_.$slots,"control-interactive",{key:2},()=>[_.showInteractive?(O(),ut(xi,{key:0,class:"vue-flow__controls-interactive",onClick:E},{default:ze(()=>[f.value?_t(_.$slots,"icon-unlock",{key:0},()=>[(O(),ut(yo(ye(l2))))]):we("",!0),f.value?we("",!0):_t(_.$slots,"icon-lock",{key:1},()=>[(O(),ut(yo(ye(o2))))])]),_:3})):we("",!0)]):we("",!0),_t(_.$slots,"default")]),_:3},8,["position"]))}});var d2={value:()=>{}};function Vc(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new zi(n)}function zi(e){this._=e}function f2(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}zi.prototype=Vc.prototype={constructor:zi,on:function(e,t){var n=this._,o=f2(e+"",n),r,s=-1,i=o.length;if(arguments.length<2){for(;++s<i;)if((r=(e=o[s]).type)&&(r=h2(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(r=(e=o[s]).type)n[r]=eh(n[r],e.name,t);else if(t==null)for(r in n)n[r]=eh(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new zi(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,s;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],o=0,r=s.length;o<r;++o)s[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)}};function h2(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function eh(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=d2,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Iu="http://www.w3.org/1999/xhtml";const th={svg:"http://www.w3.org/2000/svg",xhtml:Iu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function cl(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),th.hasOwnProperty(t)?{space:th[t],local:e}:e}function p2(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Iu&&t.documentElement.namespaceURI===Iu?t.createElement(e):t.createElementNS(n,e)}}function g2(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function py(e){var t=cl(e);return(t.local?g2:p2)(t)}function m2(){}function zc(e){return e==null?m2:function(){return this.querySelector(e)}}function y2(e){typeof e!="function"&&(e=zc(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=new Array(i),l,u,c=0;c<i;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new en(o,this._parents)}function v2(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function b2(){return[]}function gy(e){return e==null?b2:function(){return this.querySelectorAll(e)}}function x2(e){return function(){return v2(e.apply(this,arguments))}}function _2(e){typeof e=="function"?e=x2(e):e=gy(e);for(var t=this._groups,n=t.length,o=[],r=[],s=0;s<n;++s)for(var i=t[s],a=i.length,l,u=0;u<a;++u)(l=i[u])&&(o.push(e.call(l,l.__data__,u,i)),r.push(l));return new en(o,r)}function my(e){return function(){return this.matches(e)}}function yy(e){return function(t){return t.matches(e)}}var w2=Array.prototype.find;function k2(e){return function(){return w2.call(this.children,e)}}function E2(){return this.firstElementChild}function S2(e){return this.select(e==null?E2:k2(typeof e=="function"?e:yy(e)))}var $2=Array.prototype.filter;function C2(){return Array.from(this.children)}function N2(e){return function(){return $2.call(this.children,e)}}function T2(e){return this.selectAll(e==null?C2:N2(typeof e=="function"?e:yy(e)))}function A2(e){typeof e!="function"&&(e=my(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new en(o,this._parents)}function vy(e){return new Array(e.length)}function I2(){return new en(this._enter||this._groups.map(vy),this._parents)}function ga(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ga.prototype={constructor:ga,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function O2(e){return function(){return e}}function R2(e,t,n,o,r,s){for(var i=0,a,l=t.length,u=s.length;i<u;++i)(a=t[i])?(a.__data__=s[i],o[i]=a):n[i]=new ga(e,s[i]);for(;i<l;++i)(a=t[i])&&(r[i]=a)}function M2(e,t,n,o,r,s,i){var a,l,u=new Map,c=t.length,d=s.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=i.call(l,l.__data__,a,t)+"",u.has(h)?r[a]=l:u.set(h,l));for(a=0;a<d;++a)h=i.call(e,s[a],a,s)+"",(l=u.get(h))?(o[a]=l,l.__data__=s[a],u.delete(h)):n[a]=new ga(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(r[a]=l)}function D2(e){return e.__data__}function P2(e,t){if(!arguments.length)return Array.from(this,D2);var n=t?M2:R2,o=this._parents,r=this._groups;typeof e!="function"&&(e=O2(e));for(var s=r.length,i=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=o[u],d=r[u],f=d.length,h=V2(e.call(c,c&&c.__data__,u,o)),p=h.length,y=a[u]=new Array(p),m=i[u]=new Array(p),v=l[u]=new Array(f);n(c,d,y,m,v,h,t);for(var E=0,_=0,A,Y;E<p;++E)if(A=y[E]){for(E>=_&&(_=E+1);!(Y=m[_])&&++_<p;);A._next=Y||null}}return i=new en(i,o),i._enter=a,i._exit=l,i}function V2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function z2(){return new en(this._exit||this._groups.map(vy),this._parents)}function H2(e,t,n){var o=this.enter(),r=this,s=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),o&&r?o.merge(r).order():r}function F2(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,s=o.length,i=Math.min(r,s),a=new Array(r),l=0;l<i;++l)for(var u=n[l],c=o[l],d=u.length,f=a[l]=new Array(d),h,p=0;p<d;++p)(h=u[p]||c[p])&&(f[p]=h);for(;l<r;++l)a[l]=n[l];return new en(a,this._parents)}function L2(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,s=o[r],i;--r>=0;)(i=o[r])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function B2(e){e||(e=j2);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,r=new Array(o),s=0;s<o;++s){for(var i=n[s],a=i.length,l=r[s]=new Array(a),u,c=0;c<a;++c)(u=i[c])&&(l[c]=u);l.sort(t)}return new en(r,this._parents).order()}function j2(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function U2(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function q2(){return Array.from(this)}function W2(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length;r<s;++r){var i=o[r];if(i)return i}return null}function Y2(){let e=0;for(const t of this)++e;return e}function G2(){return!this.node()}function Z2(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],s=0,i=r.length,a;s<i;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function K2(e){return function(){this.removeAttribute(e)}}function X2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function J2(e,t){return function(){this.setAttribute(e,t)}}function Q2(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function eN(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function tN(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function nN(e,t){var n=cl(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?X2:K2:typeof t=="function"?n.local?tN:eN:n.local?Q2:J2)(n,t))}function by(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function oN(e){return function(){this.style.removeProperty(e)}}function rN(e,t,n){return function(){this.style.setProperty(e,t,n)}}function sN(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function iN(e,t,n){return arguments.length>1?this.each((t==null?oN:typeof t=="function"?sN:rN)(e,t,n??"")):Nr(this.node(),e)}function Nr(e,t){return e.style.getPropertyValue(t)||by(e).getComputedStyle(e,null).getPropertyValue(t)}function aN(e){return function(){delete this[e]}}function lN(e,t){return function(){this[e]=t}}function uN(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function cN(e,t){return arguments.length>1?this.each((t==null?aN:typeof t=="function"?uN:lN)(e,t)):this.node()[e]}function xy(e){return e.trim().split(/^|\s+/)}function Hc(e){return e.classList||new _y(e)}function _y(e){this._node=e,this._names=xy(e.getAttribute("class")||"")}_y.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function wy(e,t){for(var n=Hc(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function ky(e,t){for(var n=Hc(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function dN(e){return function(){wy(this,e)}}function fN(e){return function(){ky(this,e)}}function hN(e,t){return function(){(t.apply(this,arguments)?wy:ky)(this,e)}}function pN(e,t){var n=xy(e+"");if(arguments.length<2){for(var o=Hc(this.node()),r=-1,s=n.length;++r<s;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?hN:t?dN:fN)(n,t))}function gN(){this.textContent=""}function mN(e){return function(){this.textContent=e}}function yN(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function vN(e){return arguments.length?this.each(e==null?gN:(typeof e=="function"?yN:mN)(e)):this.node().textContent}function bN(){this.innerHTML=""}function xN(e){return function(){this.innerHTML=e}}function _N(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function wN(e){return arguments.length?this.each(e==null?bN:(typeof e=="function"?_N:xN)(e)):this.node().innerHTML}function kN(){this.nextSibling&&this.parentNode.appendChild(this)}function EN(){return this.each(kN)}function SN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $N(){return this.each(SN)}function CN(e){var t=typeof e=="function"?e:py(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function NN(){return null}function TN(e,t){var n=typeof e=="function"?e:py(e),o=t==null?NN:typeof t=="function"?t:zc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function AN(){var e=this.parentNode;e&&e.removeChild(this)}function IN(){return this.each(AN)}function ON(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function RN(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function MN(e){return this.select(e?RN:ON)}function DN(e){return arguments.length?this.property("__data__",e):this.node().__data__}function PN(e){return function(t){e.call(this,t,this.__data__)}}function VN(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function zN(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++o]=s;++o?t.length=o:delete this.__on}}}function HN(e,t,n){return function(){var o=this.__on,r,s=PN(t);if(o){for(var i=0,a=o.length;i<a;++i)if((r=o[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},o?o.push(r):this.__on=[r]}}function FN(e,t,n){var o=VN(e+""),r,s=o.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(r=0,c=a[l];r<s;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value}return}for(a=t?HN:zN,r=0;r<s;++r)this.each(a(o[r],t,n));return this}function Ey(e,t,n){var o=by(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function LN(e,t){return function(){return Ey(this,e,t)}}function BN(e,t){return function(){return Ey(this,e,t.apply(this,arguments))}}function jN(e,t){return this.each((typeof t=="function"?BN:LN)(e,t))}function*UN(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length,i;r<s;++r)(i=o[r])&&(yield i)}var Sy=[null];function en(e,t){this._groups=e,this._parents=t}function si(){return new en([[document.documentElement]],Sy)}function qN(){return this}en.prototype=si.prototype={constructor:en,select:y2,selectAll:_2,selectChild:S2,selectChildren:T2,filter:A2,data:P2,enter:I2,exit:z2,join:H2,merge:F2,selection:qN,order:L2,sort:B2,call:U2,nodes:q2,node:W2,size:Y2,empty:G2,each:Z2,attr:nN,style:iN,property:cN,classed:pN,text:vN,html:wN,raise:EN,lower:$N,append:CN,insert:TN,remove:IN,clone:MN,datum:DN,on:FN,dispatch:jN,[Symbol.iterator]:UN};function xo(e){return typeof e=="string"?new en([[document.querySelector(e)]],[document.documentElement]):new en([[e]],Sy)}function WN(e){let t;for(;t=e.sourceEvent;)e=t;return e}function uo(e,t){if(e=WN(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ou={capture:!0,passive:!1};function Ru(e){e.preventDefault(),e.stopImmediatePropagation()}function YN(e){var t=e.document.documentElement,n=xo(e).on("dragstart.drag",Ru,Ou);"onselectstart"in t?n.on("selectstart.drag",Ru,Ou):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function GN(e,t){var n=e.document.documentElement,o=xo(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ru,Ou),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Fc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function $y(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function ii(){}var Ls=.7,ma=1/Ls,mr="\\s*([+-]?\\d+)\\s*",Bs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ZN=/^#([0-9a-f]{3,8})$/,KN=new RegExp(`^rgb\\(${mr},${mr},${mr}\\)$`),XN=new RegExp(`^rgb\\(${Tn},${Tn},${Tn}\\)$`),JN=new RegExp(`^rgba\\(${mr},${mr},${mr},${Bs}\\)$`),QN=new RegExp(`^rgba\\(${Tn},${Tn},${Tn},${Bs}\\)$`),eT=new RegExp(`^hsl\\(${Bs},${Tn},${Tn}\\)$`),tT=new RegExp(`^hsla\\(${Bs},${Tn},${Tn},${Bs}\\)$`),nh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fc(ii,js,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:oh,formatHex:oh,formatHex8:nT,formatHsl:oT,formatRgb:rh,toString:rh});function oh(){return this.rgb().formatHex()}function nT(){return this.rgb().formatHex8()}function oT(){return Cy(this).formatHsl()}function rh(){return this.rgb().formatRgb()}function js(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ZN.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?sh(t):n===3?new Zt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_i(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_i(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=KN.exec(e))?new Zt(t[1],t[2],t[3],1):(t=XN.exec(e))?new Zt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=JN.exec(e))?_i(t[1],t[2],t[3],t[4]):(t=QN.exec(e))?_i(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=eT.exec(e))?lh(t[1],t[2]/100,t[3]/100,1):(t=tT.exec(e))?lh(t[1],t[2]/100,t[3]/100,t[4]):nh.hasOwnProperty(e)?sh(nh[e]):e==="transparent"?new Zt(NaN,NaN,NaN,0):null}function sh(e){return new Zt(e>>16&255,e>>8&255,e&255,1)}function _i(e,t,n,o){return o<=0&&(e=t=n=NaN),new Zt(e,t,n,o)}function rT(e){return e instanceof ii||(e=js(e)),e?(e=e.rgb(),new Zt(e.r,e.g,e.b,e.opacity)):new Zt}function Mu(e,t,n,o){return arguments.length===1?rT(e):new Zt(e,t,n,o??1)}function Zt(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Fc(Zt,Mu,$y(ii,{brighter(e){return e=e==null?ma:Math.pow(ma,e),new Zt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ls:Math.pow(Ls,e),new Zt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Zt(Uo(this.r),Uo(this.g),Uo(this.b),ya(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ih,formatHex:ih,formatHex8:sT,formatRgb:ah,toString:ah}));function ih(){return`#${Vo(this.r)}${Vo(this.g)}${Vo(this.b)}`}function sT(){return`#${Vo(this.r)}${Vo(this.g)}${Vo(this.b)}${Vo((isNaN(this.opacity)?1:this.opacity)*255)}`}function ah(){const e=ya(this.opacity);return`${e===1?"rgb(":"rgba("}${Uo(this.r)}, ${Uo(this.g)}, ${Uo(this.b)}${e===1?")":`, ${e})`}`}function ya(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Uo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Vo(e){return e=Uo(e),(e<16?"0":"")+e.toString(16)}function lh(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new un(e,t,n,o)}function Cy(e){if(e instanceof un)return new un(e.h,e.s,e.l,e.opacity);if(e instanceof ii||(e=js(e)),!e)return new un;if(e instanceof un)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),s=Math.max(t,n,o),i=NaN,a=s-r,l=(s+r)/2;return a?(t===s?i=(n-o)/a+(n<o)*6:n===s?i=(o-t)/a+2:i=(t-n)/a+4,a/=l<.5?s+r:2-s-r,i*=60):a=l>0&&l<1?0:i,new un(i,a,l,e.opacity)}function iT(e,t,n,o){return arguments.length===1?Cy(e):new un(e,t,n,o??1)}function un(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Fc(un,iT,$y(ii,{brighter(e){return e=e==null?ma:Math.pow(ma,e),new un(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ls:Math.pow(Ls,e),new un(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new Zt(jl(e>=240?e-240:e+120,r,o),jl(e,r,o),jl(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new un(uh(this.h),wi(this.s),wi(this.l),ya(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ya(this.opacity);return`${e===1?"hsl(":"hsla("}${uh(this.h)}, ${wi(this.s)*100}%, ${wi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function uh(e){return e=(e||0)%360,e<0?e+360:e}function wi(e){return Math.max(0,Math.min(1,e||0))}function jl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ny=e=>()=>e;function aT(e,t){return function(n){return e+n*t}}function lT(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function uT(e){return(e=+e)==1?Ty:function(t,n){return n-t?lT(t,n,e):Ny(isNaN(t)?n:t)}}function Ty(e,t){var n=t-e;return n?aT(e,n):Ny(isNaN(e)?t:e)}const ch=(function e(t){var n=uT(t);function o(r,s){var i=n((r=Mu(r)).r,(s=Mu(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),u=Ty(r.opacity,s.opacity);return function(c){return r.r=i(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return o.gamma=e,o})(1);function go(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Du=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ul=new RegExp(Du.source,"g");function cT(e){return function(){return e}}function dT(e){return function(t){return e(t)+""}}function fT(e,t){var n=Du.lastIndex=Ul.lastIndex=0,o,r,s,i=-1,a=[],l=[];for(e=e+"",t=t+"";(o=Du.exec(e))&&(r=Ul.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(o=o[0])===(r=r[0])?a[i]?a[i]+=r:a[++i]=r:(a[++i]=null,l.push({i,x:go(o,r)})),n=Ul.lastIndex;return n<t.length&&(s=t.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?l[0]?dT(l[0].x):cT(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}var dh=180/Math.PI,Pu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ay(e,t,n,o,r,s){var i,a,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*dh,skewX:Math.atan(l)*dh,scaleX:i,scaleY:a}}var ki;function hT(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Pu:Ay(t.a,t.b,t.c,t.d,t.e,t.f)}function pT(e){return e==null||(ki||(ki=document.createElementNS("http://www.w3.org/2000/svg","g")),ki.setAttribute("transform",e),!(e=ki.transform.baseVal.consolidate()))?Pu:(e=e.matrix,Ay(e.a,e.b,e.c,e.d,e.e,e.f))}function Iy(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function s(u,c,d,f,h,p){if(u!==d||c!==f){var y=h.push("translate(",null,t,null,n);p.push({i:y-4,x:go(u,d)},{i:y-2,x:go(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function i(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,o)-2,x:go(u,c)})):c&&d.push(r(d)+"rotate("+c+o)}function a(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,o)-2,x:go(u,c)}):c&&d.push(r(d)+"skewX("+c+o)}function l(u,c,d,f,h,p){if(u!==d||c!==f){var y=h.push(r(h)+"scale(",null,",",null,")");p.push({i:y-4,x:go(u,d)},{i:y-2,x:go(c,f)})}else(d!==1||f!==1)&&h.push(r(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,d,f),i(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var p=-1,y=f.length,m;++p<y;)d[(m=f[p]).i]=m.x(h);return d.join("")}}}var gT=Iy(hT,"px, ","px)","deg)"),mT=Iy(pT,", ",")",")"),yT=1e-12;function fh(e){return((e=Math.exp(e))+1/e)/2}function vT(e){return((e=Math.exp(e))-1/e)/2}function bT(e){return((e=Math.exp(2*e))-1)/(e+1)}const xT=(function e(t,n,o){function r(s,i){var a=s[0],l=s[1],u=s[2],c=i[0],d=i[1],f=i[2],h=c-a,p=d-l,y=h*h+p*p,m,v;if(y<yT)v=Math.log(f/u)/t,m=function(H){return[a+H*h,l+H*p,u*Math.exp(t*H*v)]};else{var E=Math.sqrt(y),_=(f*f-u*u+o*y)/(2*u*n*E),A=(f*f-u*u-o*y)/(2*f*n*E),Y=Math.log(Math.sqrt(_*_+1)-_),j=Math.log(Math.sqrt(A*A+1)-A);v=(j-Y)/t,m=function(H){var I=H*v,L=fh(Y),B=u/(n*E)*(L*bT(t*I+Y)-vT(Y));return[a+B*h,l+B*p,u*L/fh(t*I+Y)]}}return m.duration=v*1e3*t/Math.SQRT2,m}return r.rho=function(s){var i=Math.max(.001,+s),a=i*i,l=a*a;return e(i,a,l)},r})(Math.SQRT2,2,4);var Tr=0,ss=0,Zr=0,Oy=1e3,va,is,ba=0,Ko=0,dl=0,Us=typeof performance=="object"&&performance.now?performance:Date,Ry=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Lc(){return Ko||(Ry(_T),Ko=Us.now()+dl)}function _T(){Ko=0}function xa(){this._call=this._time=this._next=null}xa.prototype=My.prototype={constructor:xa,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Lc():+n)+(t==null?0:+t),!this._next&&is!==this&&(is?is._next=this:va=this,is=this),this._call=e,this._time=n,Vu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vu())}};function My(e,t,n){var o=new xa;return o.restart(e,t,n),o}function wT(){Lc(),++Tr;for(var e=va,t;e;)(t=Ko-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Tr}function hh(){Ko=(ba=Us.now())+dl,Tr=ss=0;try{wT()}finally{Tr=0,ET(),Ko=0}}function kT(){var e=Us.now(),t=e-ba;t>Oy&&(dl-=t,ba=e)}function ET(){for(var e,t=va,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:va=n);is=e,Vu(o)}function Vu(e){if(!Tr){ss&&(ss=clearTimeout(ss));var t=e-Ko;t>24?(e<1/0&&(ss=setTimeout(hh,e-Us.now()-dl)),Zr&&(Zr=clearInterval(Zr))):(Zr||(ba=Us.now(),Zr=setInterval(kT,Oy)),Tr=1,Ry(hh))}}function ph(e,t,n){var o=new xa;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var ST=Vc("start","end","cancel","interrupt"),$T=[],Dy=0,gh=1,zu=2,Hi=3,mh=4,Hu=5,Fi=6;function fl(e,t,n,o,r,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;CT(e,n,{name:t,index:o,group:r,on:ST,tween:$T,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Dy})}function Bc(e,t){var n=mn(e,t);if(n.state>Dy)throw new Error("too late; already scheduled");return n}function Dn(e,t){var n=mn(e,t);if(n.state>Hi)throw new Error("too late; already running");return n}function mn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function CT(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=My(s,0,n.time);function s(u){n.state=gh,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var c,d,f,h;if(n.state!==gh)return l();for(c in o)if(h=o[c],h.name===n.name){if(h.state===Hi)return ph(i);h.state===mh?(h.state=Fi,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=Fi,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(ph(function(){n.state===Hi&&(n.state=mh,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=zu,n.on.call("start",e,e.__data__,n.index,n.group),n.state===zu){for(n.state=Hi,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Hu,1),d=-1,f=r.length;++d<f;)r[d].call(e,c);n.state===Hu&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Fi,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Li(e,t){var n=e.__transition,o,r,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((o=n[i]).name!==t){s=!1;continue}r=o.state>zu&&o.state<Hu,o.state=Fi,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[i]}s&&delete e.__transition}}function NT(e){return this.each(function(){Li(this,e)})}function TT(e,t){var n,o;return function(){var r=Dn(this,e),s=r.tween;if(s!==n){o=n=s;for(var i=0,a=o.length;i<a;++i)if(o[i].name===t){o=o.slice(),o.splice(i,1);break}}r.tween=o}}function AT(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var s=Dn(this,e),i=s.tween;if(i!==o){r=(o=i).slice();for(var a={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=a;break}l===u&&r.push(a)}s.tween=r}}function IT(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=mn(this.node(),n).tween,r=0,s=o.length,i;r<s;++r)if((i=o[r]).name===e)return i.value;return null}return this.each((t==null?TT:AT)(n,e,t))}function jc(e,t,n){var o=e._id;return e.each(function(){var r=Dn(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return mn(r,o).value[t]}}function Py(e,t){var n;return(typeof t=="number"?go:t instanceof js?ch:(n=js(t))?(t=n,ch):fT)(e,t)}function OT(e){return function(){this.removeAttribute(e)}}function RT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function MT(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttribute(e);return i===r?null:i===o?s:s=t(o=i,n)}}function DT(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===o?s:s=t(o=i,n)}}function PT(e,t,n){var o,r,s;return function(){var i,a=n(this),l;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=a+"",i===l?null:i===o&&l===r?s:(r=l,s=t(o=i,a)))}}function VT(e,t,n){var o,r,s;return function(){var i,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=a+"",i===l?null:i===o&&l===r?s:(r=l,s=t(o=i,a)))}}function zT(e,t){var n=cl(e),o=n==="transform"?mT:Py;return this.attrTween(e,typeof t=="function"?(n.local?VT:PT)(n,o,jc(this,"attr."+e,t)):t==null?(n.local?RT:OT)(n):(n.local?DT:MT)(n,o,t))}function HT(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function FT(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function LT(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&FT(e,s)),n}return r._value=t,r}function BT(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&HT(e,s)),n}return r._value=t,r}function jT(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=cl(e);return this.tween(n,(o.local?LT:BT)(o,t))}function UT(e,t){return function(){Bc(this,e).delay=+t.apply(this,arguments)}}function qT(e,t){return t=+t,function(){Bc(this,e).delay=t}}function WT(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?UT:qT)(t,e)):mn(this.node(),t).delay}function YT(e,t){return function(){Dn(this,e).duration=+t.apply(this,arguments)}}function GT(e,t){return t=+t,function(){Dn(this,e).duration=t}}function ZT(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?YT:GT)(t,e)):mn(this.node(),t).duration}function KT(e,t){if(typeof t!="function")throw new Error;return function(){Dn(this,e).ease=t}}function XT(e){var t=this._id;return arguments.length?this.each(KT(t,e)):mn(this.node(),t).ease}function JT(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Dn(this,e).ease=n}}function QT(e){if(typeof e!="function")throw new Error;return this.each(JT(this._id,e))}function eA(e){typeof e!="function"&&(e=my(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new no(o,this._parents,this._name,this._id)}function tA(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,s=Math.min(o,r),i=new Array(o),a=0;a<s;++a)for(var l=t[a],u=n[a],c=l.length,d=i[a]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;a<o;++a)i[a]=t[a];return new no(i,this._parents,this._name,this._id)}function nA(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function oA(e,t,n){var o,r,s=nA(t)?Bc:Dn;return function(){var i=s(this,e),a=i.on;a!==o&&(r=(o=a).copy()).on(t,n),i.on=r}}function rA(e,t){var n=this._id;return arguments.length<2?mn(this.node(),n).on.on(e):this.each(oA(n,e,t))}function sA(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function iA(){return this.on("end.remove",sA(this._id))}function aA(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zc(e));for(var o=this._groups,r=o.length,s=new Array(r),i=0;i<r;++i)for(var a=o[i],l=a.length,u=s[i]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,fl(u[f],t,n,f,u,mn(c,n)));return new no(s,this._parents,t,n)}function lA(e){var t=this._name,n=this._id;typeof e!="function"&&(e=gy(e));for(var o=this._groups,r=o.length,s=[],i=[],a=0;a<r;++a)for(var l=o[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,p=mn(c,n),y=0,m=f.length;y<m;++y)(h=f[y])&&fl(h,t,n,y,f,p);s.push(f),i.push(c)}return new no(s,i,t,n)}var uA=si.prototype.constructor;function cA(){return new uA(this._groups,this._parents)}function dA(e,t){var n,o,r;return function(){var s=Nr(this,e),i=(this.style.removeProperty(e),Nr(this,e));return s===i?null:s===n&&i===o?r:r=t(n=s,o=i)}}function Vy(e){return function(){this.style.removeProperty(e)}}function fA(e,t,n){var o,r=n+"",s;return function(){var i=Nr(this,e);return i===r?null:i===o?s:s=t(o=i,n)}}function hA(e,t,n){var o,r,s;return function(){var i=Nr(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Nr(this,e))),i===l?null:i===o&&l===r?s:(r=l,s=t(o=i,a))}}function pA(e,t){var n,o,r,s="style."+t,i="end."+s,a;return function(){var l=Dn(this,e),u=l.on,c=l.value[s]==null?a||(a=Vy(t)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(i,r=c),l.on=o}}function gA(e,t,n){var o=(e+="")=="transform"?gT:Py;return t==null?this.styleTween(e,dA(e,o)).on("end.style."+e,Vy(e)):typeof t=="function"?this.styleTween(e,hA(e,o,jc(this,"style."+e,t))).each(pA(this._id,e)):this.styleTween(e,fA(e,o,t),n).on("end.style."+e,null)}function mA(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function yA(e,t,n){var o,r;function s(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&mA(e,i,n)),o}return s._value=t,s}function vA(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,yA(e,t,n??""))}function bA(e){return function(){this.textContent=e}}function xA(e){return function(){var t=e(this);this.textContent=t??""}}function _A(e){return this.tween("text",typeof e=="function"?xA(jc(this,"text",e)):bA(e==null?"":e+""))}function wA(e){return function(t){this.textContent=e.call(this,t)}}function kA(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&wA(r)),t}return o._value=e,o}function EA(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,kA(e))}function SA(){for(var e=this._name,t=this._id,n=zy(),o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,l,u=0;u<a;++u)if(l=i[u]){var c=mn(l,t);fl(l,e,n,u,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new no(o,this._parents,e,n)}function $A(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(s,i){var a={value:i},l={value:function(){--r===0&&s()}};n.each(function(){var u=Dn(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),r===0&&s()})}var CA=0;function no(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function zy(){return++CA}var Hn=si.prototype;no.prototype={constructor:no,select:aA,selectAll:lA,selectChild:Hn.selectChild,selectChildren:Hn.selectChildren,filter:eA,merge:tA,selection:cA,transition:SA,call:Hn.call,nodes:Hn.nodes,node:Hn.node,size:Hn.size,empty:Hn.empty,each:Hn.each,on:rA,attr:zT,attrTween:jT,style:gA,styleTween:vA,text:_A,textTween:EA,remove:iA,tween:IT,delay:WT,duration:ZT,ease:XT,easeVarying:QT,end:$A,[Symbol.iterator]:Hn[Symbol.iterator]};function NA(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var TA={time:null,delay:0,duration:250,ease:NA};function AA(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function IA(e){var t,n;e instanceof no?(t=e._id,e=e._name):(t=zy(),(n=TA).time=Lc(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,l,u=0;u<a;++u)(l=i[u])&&fl(l,e,t,u,i,n||AA(l,t));return new no(o,this._parents,e,t)}si.prototype.interrupt=NT;si.prototype.transition=IA;const Ei=e=>()=>e;function OA(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Wn(e,t,n){this.k=e,this.x=t,this.y=n}Wn.prototype={constructor:Wn,scale:function(e){return e===1?this:new Wn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Wn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Uc=new Wn(1,0,0);Wn.prototype;function ql(e){e.stopImmediatePropagation()}function Kr(e){e.preventDefault(),e.stopImmediatePropagation()}function RA(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function MA(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function yh(){return this.__zoom||Uc}function DA(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function PA(){return navigator.maxTouchPoints||"ontouchstart"in this}function VA(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function zA(){var e=RA,t=MA,n=VA,o=DA,r=PA,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,l=xT,u=Vc("start","zoom","end"),c,d,f,h=500,p=150,y=0,m=10;function v(g){g.property("__zoom",yh).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",B).filter(r).on("touchstart.zoom",V).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(g,C,w,F){var P=g.selection?g.selection():g;P.property("__zoom",yh),g!==P?Y(g,C,w,F):P.interrupt().each(function(){j(this,arguments).event(F).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},v.scaleBy=function(g,C,w,F){v.scaleTo(g,function(){var P=this.__zoom.k,X=typeof C=="function"?C.apply(this,arguments):C;return P*X},w,F)},v.scaleTo=function(g,C,w,F){v.transform(g,function(){var P=t.apply(this,arguments),X=this.__zoom,G=w==null?A(P):typeof w=="function"?w.apply(this,arguments):w,oe=X.invert(G),ge=typeof C=="function"?C.apply(this,arguments):C;return n(_(E(X,ge),G,oe),P,i)},w,F)},v.translateBy=function(g,C,w,F){v.transform(g,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof w=="function"?w.apply(this,arguments):w),t.apply(this,arguments),i)},null,F)},v.translateTo=function(g,C,w,F,P){v.transform(g,function(){var X=t.apply(this,arguments),G=this.__zoom,oe=F==null?A(X):typeof F=="function"?F.apply(this,arguments):F;return n(Uc.translate(oe[0],oe[1]).scale(G.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof w=="function"?-w.apply(this,arguments):-w),X,i)},F,P)};function E(g,C){return C=Math.max(s[0],Math.min(s[1],C)),C===g.k?g:new Wn(C,g.x,g.y)}function _(g,C,w){var F=C[0]-w[0]*g.k,P=C[1]-w[1]*g.k;return F===g.x&&P===g.y?g:new Wn(g.k,F,P)}function A(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function Y(g,C,w,F){g.on("start.zoom",function(){j(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(F).end()}).tween("zoom",function(){var P=this,X=arguments,G=j(P,X).event(F),oe=t.apply(P,X),ge=w==null?A(oe):typeof w=="function"?w.apply(P,X):w,Z=Math.max(oe[1][0]-oe[0][0],oe[1][1]-oe[0][1]),ce=P.__zoom,pe=typeof C=="function"?C.apply(P,X):C,xe=l(ce.invert(ge).concat(Z/ce.k),pe.invert(ge).concat(Z/pe.k));return function(K){if(K===1)K=pe;else{var le=xe(K),ie=Z/le[2];K=new Wn(ie,ge[0]-le[0]*ie,ge[1]-le[1]*ie)}G.zoom(null,K)}})}function j(g,C,w){return!w&&g.__zooming||new H(g,C)}function H(g,C){this.that=g,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(g,C),this.taps=0}H.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,C){return this.mouse&&g!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var C=xo(this.that).datum();u.call(g,this.that,new OA(g,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:u}),C)}};function I(g,...C){if(!e.apply(this,arguments))return;var w=j(this,C).event(g),F=this.__zoom,P=Math.max(s[0],Math.min(s[1],F.k*Math.pow(2,o.apply(this,arguments)))),X=uo(g);if(w.wheel)(w.mouse[0][0]!==X[0]||w.mouse[0][1]!==X[1])&&(w.mouse[1]=F.invert(w.mouse[0]=X)),clearTimeout(w.wheel);else{if(F.k===P)return;w.mouse=[X,F.invert(X)],Li(this),w.start()}Kr(g),w.wheel=setTimeout(G,p),w.zoom("mouse",n(_(E(F,P),w.mouse[0],w.mouse[1]),w.extent,i));function G(){w.wheel=null,w.end()}}function L(g,...C){if(f||!e.apply(this,arguments))return;var w=g.currentTarget,F=j(this,C,!0).event(g),P=xo(g.view).on("mousemove.zoom",ge,!0).on("mouseup.zoom",Z,!0),X=uo(g,w),G=g.clientX,oe=g.clientY;YN(g.view),ql(g),F.mouse=[X,this.__zoom.invert(X)],Li(this),F.start();function ge(ce){if(Kr(ce),!F.moved){var pe=ce.clientX-G,xe=ce.clientY-oe;F.moved=pe*pe+xe*xe>y}F.event(ce).zoom("mouse",n(_(F.that.__zoom,F.mouse[0]=uo(ce,w),F.mouse[1]),F.extent,i))}function Z(ce){P.on("mousemove.zoom mouseup.zoom",null),GN(ce.view,F.moved),Kr(ce),F.event(ce).end()}}function B(g,...C){if(e.apply(this,arguments)){var w=this.__zoom,F=uo(g.changedTouches?g.changedTouches[0]:g,this),P=w.invert(F),X=w.k*(g.shiftKey?.5:2),G=n(_(E(w,X),F,P),t.apply(this,C),i);Kr(g),a>0?xo(this).transition().duration(a).call(Y,G,F,g):xo(this).call(v.transform,G,F,g)}}function V(g,...C){if(e.apply(this,arguments)){var w=g.touches,F=w.length,P=j(this,C,g.changedTouches.length===F).event(g),X,G,oe,ge;for(ql(g),G=0;G<F;++G)oe=w[G],ge=uo(oe,this),ge=[ge,this.__zoom.invert(ge),oe.identifier],P.touch0?!P.touch1&&P.touch0[2]!==ge[2]&&(P.touch1=ge,P.taps=0):(P.touch0=ge,X=!0,P.taps=1+!!c);c&&(c=clearTimeout(c)),X&&(P.taps<2&&(d=ge[0],c=setTimeout(function(){c=null},h)),Li(this),P.start())}}function S(g,...C){if(this.__zooming){var w=j(this,C).event(g),F=g.changedTouches,P=F.length,X,G,oe,ge;for(Kr(g),X=0;X<P;++X)G=F[X],oe=uo(G,this),w.touch0&&w.touch0[2]===G.identifier?w.touch0[0]=oe:w.touch1&&w.touch1[2]===G.identifier&&(w.touch1[0]=oe);if(G=w.that.__zoom,w.touch1){var Z=w.touch0[0],ce=w.touch0[1],pe=w.touch1[0],xe=w.touch1[1],K=(K=pe[0]-Z[0])*K+(K=pe[1]-Z[1])*K,le=(le=xe[0]-ce[0])*le+(le=xe[1]-ce[1])*le;G=E(G,Math.sqrt(K/le)),oe=[(Z[0]+pe[0])/2,(Z[1]+pe[1])/2],ge=[(ce[0]+xe[0])/2,(ce[1]+xe[1])/2]}else if(w.touch0)oe=w.touch0[0],ge=w.touch0[1];else return;w.zoom("touch",n(_(G,oe,ge),w.extent,i))}}function z(g,...C){if(this.__zooming){var w=j(this,C).event(g),F=g.changedTouches,P=F.length,X,G;for(ql(g),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),X=0;X<P;++X)G=F[X],w.touch0&&w.touch0[2]===G.identifier?delete w.touch0:w.touch1&&w.touch1[2]===G.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(G=uo(G,this),Math.hypot(d[0]-G[0],d[1]-G[1])<m)){var oe=xo(this).on("dblclick.zoom");oe&&oe.apply(this,arguments)}}}return v.wheelDelta=function(g){return arguments.length?(o=typeof g=="function"?g:Ei(+g),v):o},v.filter=function(g){return arguments.length?(e=typeof g=="function"?g:Ei(!!g),v):e},v.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Ei(!!g),v):r},v.extent=function(g){return arguments.length?(t=typeof g=="function"?g:Ei([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),v):t},v.scaleExtent=function(g){return arguments.length?(s[0]=+g[0],s[1]=+g[1],v):[s[0],s[1]]},v.translateExtent=function(g){return arguments.length?(i[0][0]=+g[0][0],i[1][0]=+g[1][0],i[0][1]=+g[0][1],i[1][1]=+g[1][1],v):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},v.constrain=function(g){return arguments.length?(n=g,v):n},v.duration=function(g){return arguments.length?(a=+g,v):a},v.interpolate=function(g){return arguments.length?(l=g,v):l},v.on=function(){var g=u.on.apply(u,arguments);return g===u?v:g},v.clickDistance=function(g){return arguments.length?(y=(g=+g)*g,v):Math.sqrt(y)},v.tapDistance=function(g){return arguments.length?(m=+g,v):m},v}const Hy=Symbol("MiniMapSlots"),HA=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],FA={name:"MiniMapNode",compatConfig:{MODE:3},inheritAttrs:!1},LA=ht({...FA,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{},hidden:{type:Boolean}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{emit:t}){const n=e,o=Ot(Hy),r=pc(),s=ft(()=>r.style??{});function i(d){t("click",d)}function a(d){t("dblclick",d)}function l(d){t("mouseenter",d)}function u(d){t("mousemove",d)}function c(d){t("mouseleave",d)}return(d,f)=>!d.hidden&&d.dimensions.width!==0&&d.dimensions.height!==0?(O(),D(Pe,{key:0},[ye(o)[`node-${n.type}`]?(O(),ut(yo(ye(o)[`node-${n.type}`]),Ze(Cs({key:0},{...n,...d.$attrs})),null,16)):(O(),D("rect",Cs({key:1,id:d.id},d.$attrs,{class:["vue-flow__minimap-node",{selected:d.selected,dragging:d.dragging}],x:d.position.x,y:d.position.y,rx:d.borderRadius,ry:d.borderRadius,width:d.dimensions.width,height:d.dimensions.height,fill:d.color||s.value.background||s.value.backgroundColor,stroke:d.strokeColor,"stroke-width":d.strokeWidth,"shape-rendering":d.shapeRendering,onClick:i,onDblclick:a,onMouseenter:l,onMousemove:u,onMouseleave:c}),null,16,HA))],64)):we("",!0)}}),BA=["width","height","viewBox","aria-labelledby"],jA=["id"],UA=["d","fill","stroke","stroke-width"],qA={name:"MiniMap",compatConfig:{MODE:3}},WA=ht({...qA,props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:1},offsetScale:{default:5},maskBorderRadius:{default:0}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=Bp(),o=pc(),r=200,s=150,{id:i,edges:a,viewport:l,translateExtent:u,dimensions:c,emits:d,d3Selection:f,d3Zoom:h,getNodesInitialized:p}=gt(),y=de();dn(Hy,n);const m=ft(()=>{var P;return e.width??((P=o.style)==null?void 0:P.width)??r}),v=ft(()=>{var P;return e.height??((P=o.style)==null?void 0:P.height)??s}),E=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",_=ne(()=>typeof e.nodeColor=="string"?()=>e.nodeColor:e.nodeColor),A=ne(()=>typeof e.nodeStrokeColor=="string"?()=>e.nodeStrokeColor:e.nodeStrokeColor),Y=ne(()=>typeof e.nodeClassName=="string"?()=>e.nodeClassName:typeof e.nodeClassName=="function"?e.nodeClassName:()=>""),j=ne(()=>Rc(p.value.filter(P=>!P.hidden))),H=ne(()=>({x:-l.value.x/l.value.zoom,y:-l.value.y/l.value.zoom,width:c.value.width/l.value.zoom,height:c.value.height/l.value.zoom})),I=ne(()=>p.value&&p.value.length?ES(j.value,H.value):H.value),L=ne(()=>{const P=I.value.width/m.value,X=I.value.height/v.value;return Math.max(P,X)}),B=ne(()=>{const P=L.value*m.value,X=L.value*v.value,G=e.offsetScale*L.value;return{offset:G,x:I.value.x-(P-I.value.width)/2-G,y:I.value.y-(X-I.value.height)/2-G,width:P+G*2,height:X+G*2}}),V=ne(()=>!B.value.x||!B.value.y?"":`
    M${B.value.x-B.value.offset},${B.value.y-B.value.offset}
    h${B.value.width+B.value.offset*2}
    v${B.value.height+B.value.offset*2}
    h${-B.value.width-B.value.offset*2}z
    M${H.value.x+e.maskBorderRadius},${H.value.y}
    h${H.value.width-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},${e.maskBorderRadius}
    v${H.value.height-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},${e.maskBorderRadius}
    h${-(H.value.width-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},-${e.maskBorderRadius}
    v${-(H.value.height-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},-${e.maskBorderRadius}z`);O0(P=>{if(y.value){const X=xo(y.value),G=Z=>{if(Z.sourceEvent.type!=="wheel"||!f.value||!h.value)return;const ce=Z.sourceEvent.ctrlKey&&Fs()?10:1,pe=-Z.sourceEvent.deltaY*(Z.sourceEvent.deltaMode===1?.05:Z.sourceEvent.deltaMode?1:.002)*e.zoomStep,xe=l.value.zoom*2**(pe*ce);h.value.scaleTo(f.value,xe)},oe=Z=>{if(Z.sourceEvent.type!=="mousemove"||!f.value||!h.value)return;const ce=L.value*Math.max(1,l.value.zoom)*(e.inversePan?-1:1),pe={x:l.value.x-Z.sourceEvent.movementX*ce,y:l.value.y-Z.sourceEvent.movementY*ce},xe=[[0,0],[c.value.width,c.value.height]],K=Uc.translate(pe.x,pe.y).scale(l.value.zoom),le=h.value.constrain()(K,xe,u.value);h.value.transform(f.value,le)},ge=zA().wheelDelta(Z=>Cu(Z)*(e.zoomStep/10)).on("zoom",e.pannable?oe:()=>{}).on("zoom.wheel",e.zoomable?G:()=>{});X.call(ge),P(()=>{X.on("zoom",null)})}},{flush:"post"});function S(P){const[X,G]=uo(P);t("click",{event:P,position:{x:X,y:G}})}function z(P,X){const G={event:P,node:X,connectedEdges:Ro([X],a.value)};d.miniMapNodeClick(G),t("nodeClick",G)}function g(P,X){const G={event:P,node:X,connectedEdges:Ro([X],a.value)};d.miniMapNodeDoubleClick(G),t("nodeDblclick",G)}function C(P,X){const G={event:P,node:X,connectedEdges:Ro([X],a.value)};d.miniMapNodeMouseEnter(G),t("nodeMouseenter",G)}function w(P,X){const G={event:P,node:X,connectedEdges:Ro([X],a.value)};d.miniMapNodeMouseMove(G),t("nodeMousemove",G)}function F(P,X){const G={event:P,node:X,connectedEdges:Ro([X],a.value)};d.miniMapNodeMouseLeave(G),t("nodeMouseleave",G)}return(P,X)=>(O(),ut(ye(dy),{position:P.position,class:qe(["vue-flow__minimap",{pannable:P.pannable,zoomable:P.zoomable}])},{default:ze(()=>[(O(),D("svg",{ref_key:"el",ref:y,width:m.value,height:v.value,viewBox:[B.value.x,B.value.y,B.value.width,B.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${ye(i)}`,onClick:S},[P.ariaLabel?(O(),D("title",{key:0,id:`vue-flow__minimap-${ye(i)}`},be(P.ariaLabel),9,jA)):we("",!0),(O(!0),D(Pe,null,at(ye(p),G=>(O(),ut(LA,{id:G.id,key:G.id,f:"",position:G.computedPosition,dimensions:G.dimensions,selected:G.selected,dragging:G.dragging,style:vt(G.style),class:qe(Y.value(G)),color:_.value(G),"border-radius":P.nodeBorderRadius,"stroke-color":A.value(G),"stroke-width":P.nodeStrokeWidth,"shape-rendering":ye(E),type:G.type,hidden:G.hidden,onClick:oe=>z(oe,G),onDblclick:oe=>g(oe,G),onMouseenter:oe=>C(oe,G),onMousemove:oe=>w(oe,G),onMouseleave:oe=>F(oe,G)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","hidden","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),b("path",{class:"vue-flow__minimap-mask",d:V.value,fill:P.maskColor,stroke:P.maskStrokeColor,"stroke-width":P.maskStrokeWidth,"fill-rule":"evenodd"},null,8,UA)],8,BA))]),_:1},8,["position","class"]))}});function YA(e,t){const n=new Set;return t.forEach(o=>{n.add(o.source),n.add(o.target)}),e.forEach(o=>{o.type==="input"&&n.add(o.id)}),e.filter(o=>n.has(o.id))}function GA(e,t,n){const o=new Map;e.forEach(s=>{if(s.type!=="variable")return;const i=n(s.id),a=(i==null?void 0:i.mode)||"get",l=i==null?void 0:i.variableName;if(!l||l.trim()==="")return;o.has(l)||o.set(l,{setNodes:[],getNodes:[]});const u=o.get(l);a==="set"?u.setNodes.push(s.id):a==="get"&&u.getNodes.push(s.id)});const r=[];for(const[s,{setNodes:i,getNodes:a}]of o)i.forEach(l=>{a.forEach(u=>{r.push({id:`virtual-var-${s}-${l}-${u}`,source:l,target:u,edgeType:"data",sourceHandle:"data-out",targetHandle:"data-in",_virtual:!0})})});return[...t,...r]}class ZA{constructor(t=null,n=null){this.executionResults=new Map,this.executingNodes=new Set,this.executedNodes=new Set,this.errorNodes=new Set,this.executeTimers=new Map,this.execSignals=new Set,this.readyQueue=[],this.apiConfig=null,this.globalVariables={},this.nodeData=new Map,this.onStateChange=null,this.executeNodeFn=t,this.extractOutputsFn=n}setConfig(t,n={}){this.apiConfig=t,this.globalVariables=n}setNodeData(t,n){this.nodeData.set(t,n)}getNodeData(t){return this.nodeData.get(t)||{}}clearExecutionResults(){this.executionResults.clear(),this.executedNodes.clear(),this.executingNodes.clear(),this.errorNodes.clear(),this.execSignals.clear(),this.readyQueue=[];for(const t of this.executeTimers.values())clearTimeout(t);this.executeTimers.clear(),this._notifyStateChange()}async executeNode(t,n={}){var r;const o=this.getNodeData(t.id);this.executingNodes.add(t.id),this.errorNodes.delete(t.id),this._notifyStateChange();try{const s={apiConfig:this.apiConfig,globalVariables:this.globalVariables,nodeId:t.id,updateNodeData:a=>{const l=this.getNodeData(t.id);this.setNodeData(t.id,{...l,...a})}},i=await this.executeNodeFn(t,o,n,s);return this.executingNodes.delete(t.id),this.executedNodes.add(t.id),this._notifyStateChange(),i}catch(s){throw this.executingNodes.delete(t.id),this.errorNodes.add(t.id),this._notifyStateChange(),console.error(`
 Execution Error`),console.error("".repeat(50)),console.error(`Node: ${((r=t.data)==null?void 0:r.label)||t.type} (${t.id})`),console.error(`Type: ${t.type}`),console.error(`Message: ${s.message}`),s.stack&&(console.error(`
Stack trace:`),console.error(s.stack)),console.error("".repeat(50)+`
`),s}}async executeFlow(t,n){console.log(`
 EXECUTION START`),this.clearExecutionResults(),this.globalVariables={},this.currentNodes=t;const o=YA(t,n),r=GA(o,n,u=>this.getNodeData(u)),s=[],i=this._findTrueEntryNodes(o,r);console.log(`
 FLOW ANALYSIS:`),console.log("Total nodes:",o.length),o.filter(u=>this._hasExecInput(u,n)),o.filter(u=>this._hasExecOutput(u,n)),this.readyQueue=[...i];const a=o.length*2;let l=0;for(;this.readyQueue.length>0&&l<a;){l++;const u=this.readyQueue.shift();if(this.executedNodes.has(u.id))continue;if(!this._isReadyToExecute(u,r)){this.readyQueue.push(u);continue}const c=this._getNodeLabel(u);s.push(c),this._hasExecInput(u,n),this._hasExecOutput(u,n);const d=this._gatherInputs(u,n);try{const f=await this.executeNode(u,d);if(this.extractOutputsFn){const h={...u,data:this.getNodeData(u.id)},p=this.extractOutputsFn(h,f);this.executionResults.set(u.id,p)}else this.executionResults.set(u.id,f);if(this._hasExecOutput(u,n))if(u.type==="conditional-branch"){const h=f==null?void 0:f.branch,p=h==="exec-true"?"TRUE":"FALSE";s[s.length-1]+=` ( ${p})`,h&&this._sendExecSignal(u.id,n,h)}else this._sendExecSignal(u.id,n);o.forEach(h=>{if(this.executedNodes.has(h.id)||this.readyQueue.includes(h))return;const p=r.some(m=>m.target===h.id&&m.source===u.id&&m.edgeType==="data"),y=this.execSignals.has(h.id);(p||y)&&this._isReadyToExecute(h,r)&&this.readyQueue.push(h)})}catch(f){s[s.length-1]+=" ",this.executionResults.set(u.id,{error:f.message}),this._notifyStateChange(),console.log(` EXECUTION END (error)
`);return}}console.log(` EXECUTION END
`),this._notifyStateChange()}async executeConnectedNodes(t,n,o,r=null){const s=o.filter(i=>i.source===t&&i.edgeType==="exec"&&(r===null||i.sourceHandle===r));if(s.length!==0)for(const i of s){const a=n.find(u=>u.id===i.target);if(!a)continue;const l=this._gatherInputs(a,o);try{const u=await this.executeNode(a,l);if(this.executionResults.set(a.id,u),a.type==="conditional-branch"){const c=u==null?void 0:u.branch;c&&await this.executeConnectedNodes(a.id,n,o,`exec-${c}`)}else a.type==="forEach"||a.type==="whileLoop"||await this.executeConnectedNodes(a.id,n,o)}catch(u){this.executionResults.set(a.id,{error:u.message})}}}async executeWhileLoop(t,n,o,r,s=1e3){let i=0,a=r;for(;a&&i<s;){i++,await this.executeConnectedNodes(t,n,o,"exec-loop");const l=this.executionResults.get(t);if(a=(l==null?void 0:l.condition)??!1,i>=s)break}await this.executeConnectedNodes(t,n,o,"exec-done")}async executeForEachLoop(t,n,o,r){const s=[];for(let i=0;i<r.length;i++){const a=r[i];this.executionResults.set(t,{currentItem:a,currentIndex:i,totalItems:r.length}),await this.executeConnectedNodes(t,n,o,"exec-loop"),s.push(a)}this.executionResults.set(t,{results:s}),await this.executeConnectedNodes(t,n,o,"exec-done")}getResult(t){return this.executionResults.get(t)}getAllResults(){return Object.fromEntries(this.executionResults)}getAllExecutedNodes(){return Array.from(this.executedNodes)}getAllExecutingNodes(){return Array.from(this.executingNodes)}getAllErrorNodes(){return Array.from(this.errorNodes)}isExecuting(t){return this.executingNodes.has(t)}hasExecuted(t){return this.executedNodes.has(t)}hasError(t){return this.errorNodes.has(t)}_gatherInputs(t,n){const o={},r=n.filter(s=>s.target===t.id&&s.edgeType==="data");for(const s of r){const i=this.executionResults.get(s.source);if(!i)continue;const a=i[s.sourceHandle];o[s.targetHandle]=a}return o}_hasPendingDependencies(t,n){const o=n.filter(s=>{var i;return s.target!==t.id?!1:s.edgeType==="data"||!((i=s.sourceHandle)!=null&&i.startsWith("exec-"))}),r=this.getNodeData(t.id);if(t.type==="variable"&&(r==null?void 0:r.mode)==="get"&&o.every(i=>{var u;const a=(u=this.currentNodes)==null?void 0:u.find(c=>c.id===i.source),l=a?this.getNodeData(a.id):null;return(a==null?void 0:a.type)==="variable"&&(l==null?void 0:l.mode)==="set"})&&o.length>0)return!o.some(a=>this.executionResults.get(a.source));for(const s of o){const i=this.executionResults.get(s.source);if(!i||i[s.sourceHandle]===void 0)return!0}return!1}_hasExecInput(t,n){return n.some(o=>o.target===t.id&&o.edgeType==="flow")}_hasExecOutput(t,n){return n.some(o=>o.source===t.id&&o.edgeType==="flow")}_sendExecSignal(t,n,o=null){n.filter(s=>s.source===t&&s.edgeType==="flow"&&(o===null||s.sourceHandle===o)).forEach(s=>{this.execSignals.add(s.target)})}_isReadyToExecute(t,n){return!(this._hasPendingDependencies(t,n)||this._hasExecInput(t,n)&&!this.execSignals.has(t.id))}_findEntryNodes(t,n){return t.filter(o=>!this._hasExecInput(o,n))}_findTrueEntryNodes(t,n){return t.filter(o=>{if(o.type==="input"||o.type==="constant")return!0;if(o.type==="variable"){const i=this.getNodeData(o.id);if((i==null?void 0:i.mode)==="get")return!0}return this._hasExecInput(o,n)?!1:!n.some(i=>i.target===o.id&&i.edgeType==="data")})}_getNodeLabel(t){var s;const n=this.getNodeData(t.id),o=(n==null?void 0:n.label)||((s=t.data)==null?void 0:s.label);return o||{input:"Input",output:"Output",connector:"Data Connector",variable:"Variable","conditional-branch":"Conditional Branch",constant:"Constant","http-request":"HTTP Request","string-ops":"String Ops","field-extractor":"Field Extractor"}[t.type]||t.type}_notifyStateChange(){this.onStateChange&&this.onStateChange({executionResults:this.getAllResults(),executingNodes:Array.from(this.executingNodes),executedNodes:Array.from(this.executedNodes),errorNodes:Array.from(this.errorNodes)})}}let as=null;async function KA(){if(as)return as;try{return as=await(await fetch("/config/dataTypes.json")).json(),as}catch{return Fy()}}function Fy(){return{types:{any:{label:"Any",color:"#3b82f6"},string:{label:"String",color:"#10b981"},number:{label:"Number",color:"#f59e0b"},integer:{label:"Integer",color:"#f97316"},float:{label:"Float",color:"#fb923c"},boolean:{label:"Boolean",color:"#8b5cf6"},array:{label:"Array",color:"#ec4899"},object:{label:"Object",color:"#06b6d4"},date:{label:"Date",color:"#14b8a6"},null:{label:"Null",color:"#6b7280"}},compatibility:{any:["any","string","number","integer","float","boolean","array","object","date","null"],string:["any","string"],number:["any","number","integer","float"],integer:["any","number","integer"],float:["any","number","float"],boolean:["any","boolean"],array:["any","array"],object:["any","object"],date:["any","date","string"],null:["any","null"]}}}function _a(e){var n;return((n=(as||Fy()).types[e])==null?void 0:n.color)||"#3b82f6"}function wa(e){return e===null||e===void 0?"null":typeof e=="string"?"string":typeof e=="boolean"?"boolean":Array.isArray(e)?"array":e instanceof Date?"date":typeof e=="object"?"object":typeof e=="number"?Number.isInteger(e)?"integer":"float":"any"}const XA=Object.assign({});let JA=class{constructor(){this.nodes=new Map,this.categories=new Map,this.methodCache=new Map}registerNode(t,n){this.nodes.set(t,n)}registerCategory(t,n){this.categories.set(t,n)}getNodeDefinition(t){const n=this.nodes.get(t);return n||null}getAllNodes(){return Array.from(this.nodes.values())}getNodesByCategory(t){return this.getAllNodes().filter(n=>n.category===t)}getAllCategories(){return Array.from(this.categories.values())}hasNode(t){return this.nodes.has(t)}async getNodeFunction(t,n="method"){const o=this.getNodeDefinition(t);if(!o)return null;const r=o[n];if(!r)return null;const s=`${t}:${n}`;if(this.methodCache.has(s))return this.methodCache.get(s);try{const[i,a]=r.split(":"),l=`../../${i}`,u=XA[l];if(!u)throw new Error(`Mdulo "${i}" no encontrado no registry`);const c=await u();if(!c[a])throw new Error(`Funo "${a}" no encontrada no mdulo "${i}"`);const d=c[a];return this.methodCache.set(s,d),d}catch{return null}}validateNodeConfig(t,n){const o=this.getNodeDefinition(t);if(!o)return{valid:!1,errors:[`Node type "${t}" no existe`]};const r=[],s=o.config||{};for(const[i,a]of Object.entries(s))if(a.required&&(n[i]===void 0||n[i]===null||n[i]==="")&&r.push(`Campo obrigatrio "${i}" est vazio`),a.condition&&n[i]!==void 0){const[l,u]=Object.entries(a.condition)[0],c=n[l];if(Array.isArray(u)){if(!u.includes(c))continue}else if(c!==u)continue}return{valid:r.length===0,errors:r}}getNodeHandles(t){const n=this.getNodeDefinition(t);return n?n.handles||{inputs:{execution:[],data:[]},outputs:{execution:[],data:[]}}:null}clear(){this.nodes.clear(),this.categories.clear(),this.methodCache.clear()}getStats(){return{totalNodes:this.nodes.size,totalCategories:this.categories.size,cachedMethods:this.methodCache.size,nodesByCategory:Array.from(this.categories.keys()).reduce((t,n)=>(t[n]=this.getNodesByCategory(n).length,t),{})}}};const QA=new JA,Ly=e=>QA.getNodeDefinition(e);function eI(e,t,n){var o,r,s;if((o=n==null?void 0:n.executionResults)!=null&&o[e]){const i=n.executionResults[e][t];if(i!==void 0)return wa(i)}return(s=(r=n==null?void 0:n.savedDetectedTypes)==null?void 0:r[e])!=null&&s[t]?n.savedDetectedTypes[e][t]:"any"}function tI(e,t,n){var i;if(!(n!=null&&n.edges)||!(n!=null&&n.nodes))return"any";const o=n.edges.find(a=>{var l;return a.target===e&&a.targetHandle===t&&!((l=a.sourceHandle)!=null&&l.startsWith("exec-"))});if(!o)return"any";const r=n.nodes.find(a=>a.id===o.source);if(!r)return"any";const s=((i=n.nodeData)==null?void 0:i[r.id])||{};return wo(r.type,s,o.sourceHandle,"source",n)}function nI(e,t){const n=e==null?void 0:e[t];return n&&{number:"number",string:"string",boolean:"boolean",object:"object",array:"array",null:"any",integer:"integer",float:"float",date:"date"}[n]||"any"}function oI(e,t,n,o){const r=e==null?void 0:e._nodeId,s=e==null?void 0:e.variableName,i=(e==null?void 0:e.mode)||"get";if(!o||!r)return"any";if(n==="source"&&t==="data-out"){if(i==="set"){const a=o.edges.filter(l=>{var u;return l.target===r&&l.targetHandle==="data-input"&&!((u=l.sourceHandle)!=null&&u.startsWith("exec-"))});if(a.length>0){const l=o.nodes.find(u=>u.id===a[0].source);if(l){const u=o.nodeData[l.id];return wo(l.type,u,a[0].sourceHandle,"source",o)}}}if(i==="get"&&s){const a=o.nodes.filter(l=>{var u,c;return l.type==="variable"&&l.id!==r&&((u=o.nodeData[l.id])==null?void 0:u.mode)==="set"&&((c=o.nodeData[l.id])==null?void 0:c.variableName)===s});for(const l of a){const u=o.edges.filter(c=>{var d;return c.target===l.id&&c.targetHandle==="data-input"&&!((d=c.sourceHandle)!=null&&d.startsWith("exec-"))});if(u.length>0){const c=o.nodes.find(d=>d.id===u[0].source);if(c){const d=o.nodeData[c.id];return wo(c.type,d,u[0].sourceHandle,"source",o)}}}}}return"any"}function rI(e,t,n,o,r,s){const i=r==null?void 0:r.dynamic;if(!i)return(r==null?void 0:r.type)||"any";const a=t==null?void 0:t._nodeId;switch(i.mode){case"runtime-detection":return eI(a,n,s);case"input-inference":return tI(a,i.inferFrom||n,s);case"config-based":return nI(t,i.configField);case"wildcard":return oI(t,n,o,s);default:return(r==null?void 0:r.type)||"any"}}function wo(e,t,n,o,r=null){var l,u;if(e==="field-extractor"){if(n==="all-data")return"object";const c=(t==null?void 0:t.fieldTypes)||{},d=n.replace("field-","").replace(/-/g,".");return c[d]||"any"}if(e==="output"){const c=(t==null?void 0:t.customInputs)||[],d=parseInt(n.replace("data-input-",""));return((l=c[d])==null?void 0:l.type)||"any"}if(e==="input"){const c=(t==null?void 0:t.parameters)||[],d=parseInt(n.replace("param-output-",""));return((u=c[d])==null?void 0:u.type)||"any"}const s=Ly(e);if(!s||!s.handles)return"any";let i=o==="source"?s.handles.outputs:s.handles.inputs;if(s.dynamicHandles&&t){const c=s.dynamicHandles.mode;let d="mode";s.dynamicHandles[c]||(d=c);const f=t[d]||c,h=s.dynamicHandles[f];h&&(i=o==="source"?h.outputs:h.inputs)}if(!i||!i.data)return"any";const a=i.data.find(c=>c.id===n);return a?a.dynamic?rI(e,t,n,o,a,r):a.type||"any":"any"}function Fu(e,t){if(t.startsWith("exec-"))return["exec"];const n=Ly(e);if(!n||!n.handles||!n.handles.inputs||!n.handles.inputs.data)return["any"];const o=n.handles.inputs.data.find(r=>r.id===t);return!o||!o.type?["any"]:Array.isArray(o.type)?o.type:[o.type]}function By(e,t){if(e==="exec"||t.includes("exec"))return e==="exec"&&t.includes("exec");if(t.includes("any")||e==="any"||t.includes(e))return!0;const n=["number","integer","float"];return n.includes(e)?t.some(o=>n.includes(o)):!1}function sI(e,t,n,o,r){const s={...r.nodeData[e.id]||{},_nodeId:e.id};if({...r.nodeData[n.id]||{},_nodeId:n.id},t.startsWith("exec-"))return!0;const i=wo(e.type,s,t,"source",r),a=Fu(n.type,o);return By(i,a)}class iI{constructor(){this.detectedTypes=new Map}detectType(t,n,o){const r=wa(o);return this.detectedTypes.has(t)||this.detectedTypes.set(t,new Map),this.detectedTypes.get(t).set(n,r),r}detectAllTypes(t){const n={};for(const[o,r]of Object.entries(t))if(!(!r||typeof r!="object")){n[o]={};for(const s in r){if(s.startsWith("exec-"))continue;const i=r[s],a=this.detectType(o,s,i);n[o][s]=a}}return n}getDetectedType(t,n){const o=this.detectedTypes.get(t);return o&&o.get(n)||null}getNodeDetectedTypes(t){const n=this.detectedTypes.get(t);return n?Object.fromEntries(n):{}}loadDetectedTypes(t){this.detectedTypes.clear();for(const n in t){const o=new Map;for(const r in t[n])o.set(r,t[n][r]);this.detectedTypes.set(n,o)}}exportDetectedTypes(){const t={};for(const[n,o]of this.detectedTypes)t[n]=Object.fromEntries(o);return t}clearDetectedTypes(){this.detectedTypes.clear()}getHandleType(t,n,o={}){const r=this.getDetectedType(t.id,n.id);return r||wo(t,n,o)}isTypeCompatible(t,n){if(t==="any"||n==="any"||t===n)return!0;const o=["number","integer","float"];return!!(o.includes(t)&&o.includes(n)||t.startsWith("array")&&n==="array"||t==="array"&&n.startsWith("array")||t.startsWith("object")&&n==="object"||t==="object"&&n.startsWith("object"))}getTypeColor(t){const n={string:"#10b981",number:"#3b82f6",integer:"#3b82f6",float:"#3b82f6",boolean:"#f59e0b",array:"#8b5cf6",object:"#ec4899",date:"#14b8a6",any:"#6b7280",exec:"#ef4444",null:"#6b7280"};return t.startsWith("array")?n.array:t.startsWith("object")?n.object:n[t]||n.any}inferTypeFromInputs(t){if(!t||Object.keys(t).length===0)return"any";const n=Object.values(t)[0];return wa(n)}getTypeStats(){const t={totalNodes:this.detectedTypes.size,totalHandles:0,typeDistribution:{}};for(const n of this.detectedTypes.values()){t.totalHandles+=n.size;for(const o of n.values())t.typeDistribution[o]=(t.typeDistribution[o]||0)+1}return t}}class aI{constructor(){this.autoExecuteDelay=500,this.autoExecuteOnCreate=["input","constant","variable","array-create","object-create"],this.autoExecuteOnConfigChange=["input","constant","variable","data-connector","array-create","object-create","array-slice","array-filter","array-map","array-sort","array-aggregate","array-merge","array-distinct","array-groupby","object-filter","object-pick","object-merge","object-transform","object-rename","object-set-property","object-to-array","object-keys-values","field-extractor","comparison","logic","math","string-ops","type-conversion","debug-viewer"],this.autoExecuteOnDataReceived=["array-filter","array-map","array-sort","array-aggregate","array-merge","array-distinct","array-groupby","array-slice","object-filter","object-pick","object-merge","object-transform","object-rename","object-set-property","object-to-array","object-keys-values","field-extractor","comparison","logic","math","string-ops","type-conversion","debug-viewer"]}shouldAutoExecuteOnCreate(t){return this.autoExecuteOnCreate.includes(t)}shouldAutoExecuteOnConfigChange(t){return this.autoExecuteOnConfigChange.includes(t)}shouldAutoExecuteOnDataReceived(t){return this.autoExecuteOnDataReceived.includes(t)}shouldAutoExecute(t,n){switch(n){case"create":return this.shouldAutoExecuteOnCreate(t);case"config":return this.shouldAutoExecuteOnConfigChange(t);case"data":return this.shouldAutoExecuteOnDataReceived(t);default:return!1}}getDelay(){return this.autoExecuteDelay}setDelay(t){this.autoExecuteDelay=t}hasExecInputs(t,n){return n.some(o=>o.target===t&&o.edgeType==="exec")}getAffectedNodes(t,n,o){const r=[],s=new Set,i=a=>{if(s.has(a))return;s.add(a);const l=o.filter(u=>u.source===a&&u.edgeType==="data");for(const u of l){const c=n.find(d=>d.id===u.target);c&&this.shouldAutoExecuteOnDataReceived(c.type)&&(this.hasExecInputs(c.id,o)||(r.push(c.id),i(c.id)))}};return i(t),r}determineTrigger(t,n,o){if(this.hasExecInputs(t.id,n))return null;switch(o){case"create":return this.shouldAutoExecuteOnCreate(t.type)?"create":null;case"config-change":return this.shouldAutoExecuteOnConfigChange(t.type)?"config":null;case"upstream-execution":return this.shouldAutoExecuteOnDataReceived(t.type)?"data":null;default:return null}}getExecutionPlan(t,n,o,r){const s=[];if(r==="create"||r==="config-change"){const i=n.find(a=>a.id===t);i&&this.determineTrigger(i,o,r)&&s.push(t)}if(r==="upstream-execution"){const i=this.getAffectedNodes(t,n,o);s.push(...i)}return s}addAutoExecuteRule(t,n){switch(n){case"create":this.autoExecuteOnCreate.includes(t)||this.autoExecuteOnCreate.push(t);break;case"config":this.autoExecuteOnConfigChange.includes(t)||this.autoExecuteOnConfigChange.push(t);break;case"data":this.autoExecuteOnDataReceived.includes(t)||this.autoExecuteOnDataReceived.push(t);break}}removeAutoExecuteRule(t,n){switch(n){case"create":this.autoExecuteOnCreate=this.autoExecuteOnCreate.filter(o=>o!==t);break;case"config":this.autoExecuteOnConfigChange=this.autoExecuteOnConfigChange.filter(o=>o!==t);break;case"data":this.autoExecuteOnDataReceived=this.autoExecuteOnDataReceived.filter(o=>o!==t);break}}getRules(){return{onCreate:[...this.autoExecuteOnCreate],onConfigChange:[...this.autoExecuteOnConfigChange],onDataReceived:[...this.autoExecuteOnDataReceived]}}}function Lu(e,t){if(!e||!t)return;const n=t.split(".");let o=e;for(const r of n){if(o==null)return;o=o[r]}return o}async function lI(e,t,n,o={}){var d,f;const{type:r,id:s}=e;if(!o.registry)throw new Error("context.registry is required for executeNode");const{getNodeDefinition:i,getNodeFunction:a}=o.registry,l=i(r);if(!l)throw new Error(`Node type "${r}" no encontrado no catlogo`);const u=((d=l.execution)==null?void 0:d.async)!==!1,c=await a(r,"method");if(!c)throw new Error(`Mtodo de execuo no encontrado para node type "${r}"`);try{const h={...t};t.exposedFields&&n&&Object.keys(t.exposedFields).forEach(v=>{const E=`exposed-${v}`.replace("data-","");n[E]!==void 0&&(h[v]=n[E])});const p={nodeData:h,inputs:n,context:o,nodeId:s},y=((f=l.execution)==null?void 0:f.timeout)||3e4;return u?await uI(c(p),y):c(p)}catch(h){throw h}}function uI(e,t){return Promise.race([e,new Promise((n,o)=>setTimeout(()=>o(new Error(`Timeout aps ${t}ms`)),t))])}function cI(e,t,n={}){var i,a,l,u,c;if(!n.registry)throw new Error("context.registry is required");const o=n.registry.getNodeDefinition(e.type);if(!o)return{};const r={};if(o.outputMapping)return dI(e,t,o,r);if(e.type==="connector"||["constant","array-filter","array-aggregate","array-slice","array-merge","array-create","object-create"].includes(e.type))return r["data-out"]=t,r;if(e.type==="input")return(((i=e.data)==null?void 0:i.parameters)||[]).forEach((f,h)=>{const p=`param-output-${h}`;r[p]=t[f.name]}),r;if(e.type==="output")return r["data-out"]=t,r;if(e.type==="field-extractor"){const d=((a=e.data)==null?void 0:a.selectedFields)||[],f=t!=null&&t.__wrapped?t.__originalData:t;return r["data-out"]=t!=null&&t.__wrapped?t.value:t,d.length>1&&(r["all-data"]=t),d.forEach(h=>{const p=`field-${h.replace(/\./g,"-")}`;r[p]=fI(f,h)}),r}let s=((u=(l=o.handles)==null?void 0:l.outputs)==null?void 0:u.data)||[];if(o.dynamicHandles&&e.data){const d=o.dynamicHandles.mode,f=e.data[d]||d;o.dynamicHandles[f]&&(s=((c=o.dynamicHandles[f].outputs)==null?void 0:c.data)||[])}return s.length===1?r[s[0].id]=t:s.length>1&&typeof t=="object"&&t!==null&&s.forEach(d=>{const f=d.id.replace("data-","");t[f]!==void 0&&(r[d.id]=t[f])}),r}function dI(e,t,n,o){var s;const r=n.outputMapping;if(r.mode==="dynamic"){const i=((s=e.data)==null?void 0:s[r.fieldSource])||[];Array.isArray(i)&&i.forEach((a,l)=>{const u=r.template.replace("{fieldName}",typeof a=="string"?a:a.name).replace("{index}",l),c=typeof a=="string"?Lu(t,a):t[a.name];o[u]=c})}return r.mainOutput&&(o[r.mainOutput]=t),o}function fI(e,t){if(Array.isArray(e))return e.map(n=>Lu(n,t));if(typeof e=="object"&&e!==null)return Lu(e,t)}function Ar(e){if(e===null||typeof e!="object")return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return e.map(n=>Ar(n));const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=Ar(e[n]));return t}function hI(e,t){Array.isArray(e)&&e.length>0&&(e=e[0]);const n=t.split(".");let o=e;for(const r of n)if(o&&typeof o=="object"&&r in o)o=o[r];else return;return o}var lt;(function(e){e.assertEqual=r=>{};function t(r){}e.assertIs=t;function n(r){throw new Error}e.assertNever=n,e.arrayToEnum=r=>{const s={};for(const i of r)s[i]=i;return s},e.getValidEnumValues=r=>{const s=e.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),i={};for(const a of s)i[a]=r[a];return e.objectValues(i)},e.objectValues=r=>e.objectKeys(r).map(function(s){return r[s]}),e.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&s.push(i);return s},e.find=(r,s)=>{for(const i of r)if(s(i))return i},e.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function o(r,s=" | "){return r.map(i=>typeof i=="string"?`'${i}'`:i).join(s)}e.joinValues=o,e.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(lt||(lt={}));var vh;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(vh||(vh={}));const Ie=lt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),mo=e=>{switch(typeof e){case"undefined":return Ie.undefined;case"string":return Ie.string;case"number":return Number.isNaN(e)?Ie.nan:Ie.number;case"boolean":return Ie.boolean;case"function":return Ie.function;case"bigint":return Ie.bigint;case"symbol":return Ie.symbol;case"object":return Array.isArray(e)?Ie.array:e===null?Ie.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ie.promise:typeof Map<"u"&&e instanceof Map?Ie.map:typeof Set<"u"&&e instanceof Set?Ie.set:typeof Date<"u"&&e instanceof Date?Ie.date:Ie.object;default:return Ie.unknown}},Ee=lt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class On extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(s){return s.message},o={_errors:[]},r=s=>{for(const i of s.issues)if(i.code==="invalid_union")i.unionErrors.map(r);else if(i.code==="invalid_return_type")r(i.returnTypeError);else if(i.code==="invalid_arguments")r(i.argumentsError);else if(i.path.length===0)o._errors.push(n(i));else{let a=o,l=0;for(;l<i.path.length;){const u=i.path[l];l===i.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(i))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return r(this),o}static assert(t){if(!(t instanceof On))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,lt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},o=[];for(const r of this.issues)if(r.path.length>0){const s=r.path[0];n[s]=n[s]||[],n[s].push(t(r))}else o.push(t(r));return{formErrors:o,fieldErrors:n}}get formErrors(){return this.flatten()}}On.create=e=>new On(e);const Bu=(e,t)=>{let n;switch(e.code){case Ee.invalid_type:e.received===Ie.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Ee.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,lt.jsonStringifyReplacer)}`;break;case Ee.unrecognized_keys:n=`Unrecognized key(s) in object: ${lt.joinValues(e.keys,", ")}`;break;case Ee.invalid_union:n="Invalid input";break;case Ee.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${lt.joinValues(e.options)}`;break;case Ee.invalid_enum_value:n=`Invalid enum value. Expected ${lt.joinValues(e.options)}, received '${e.received}'`;break;case Ee.invalid_arguments:n="Invalid function arguments";break;case Ee.invalid_return_type:n="Invalid function return type";break;case Ee.invalid_date:n="Invalid date";break;case Ee.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:lt.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Ee.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Ee.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Ee.custom:n="Invalid input";break;case Ee.invalid_intersection_types:n="Intersection results could not be merged";break;case Ee.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Ee.not_finite:n="Number must be finite";break;default:n=t.defaultError,lt.assertNever(e)}return{message:n}};let pI=Bu;function gI(){return pI}const mI=e=>{const{data:t,path:n,errorMaps:o,issueData:r}=e,s=[...n,...r.path||[]],i={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=o.filter(u=>!!u).slice().reverse();for(const u of l)a=u(i,{data:t,defaultError:a}).message;return{...r,path:s,message:a}};function Ne(e,t){const n=gI(),o=mI({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Bu?void 0:Bu].filter(r=>!!r)});e.common.issues.push(o)}class Yt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const o=[];for(const r of n){if(r.status==="aborted")return Be;r.status==="dirty"&&t.dirty(),o.push(r.value)}return{status:t.value,value:o}}static async mergeObjectAsync(t,n){const o=[];for(const r of n){const s=await r.key,i=await r.value;o.push({key:s,value:i})}return Yt.mergeObjectSync(t,o)}static mergeObjectSync(t,n){const o={};for(const r of n){const{key:s,value:i}=r;if(s.status==="aborted"||i.status==="aborted")return Be;s.status==="dirty"&&t.dirty(),i.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof i.value<"u"||r.alwaysSet)&&(o[s.value]=i.value)}return{status:t.value,value:o}}}const Be=Object.freeze({status:"aborted"}),ls=e=>({status:"dirty",value:e}),on=e=>({status:"valid",value:e}),bh=e=>e.status==="aborted",xh=e=>e.status==="dirty",Ir=e=>e.status==="valid",ka=e=>typeof Promise<"u"&&e instanceof Promise;var De;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(De||(De={}));class Rn{constructor(t,n,o,r){this._cachedPath=[],this.parent=t,this.data=n,this._path=o,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _h=(e,t)=>{if(Ir(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new On(e.common.issues);return this._error=n,this._error}}};function Ye(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:o,description:r}=e;if(t&&(n||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:r}:{errorMap:(i,a)=>{const{message:l}=e;return i.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??o??a.defaultError}:i.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:r}}class nt{get description(){return this._def.description}_getType(t){return mo(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:mo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Yt,ctx:{common:t.parent.common,data:t.data,parsedType:mo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(ka(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const o=this.safeParse(t,n);if(o.success)return o.data;throw o.error}safeParse(t,n){const o={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:mo(t)},r=this._parseSync({data:t,path:o.path,parent:o});return _h(o,r)}"~validate"(t){var o,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:mo(t)};if(!this["~standard"].async)try{const s=this._parseSync({data:t,path:[],parent:n});return Ir(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(r=(o=s==null?void 0:s.message)==null?void 0:o.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(s=>Ir(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(t,n){const o=await this.safeParseAsync(t,n);if(o.success)return o.data;throw o.error}async safeParseAsync(t,n){const o={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:mo(t)},r=this._parse({data:t,path:o.path,parent:o}),s=await(ka(r)?r:Promise.resolve(r));return _h(o,s)}refine(t,n){const o=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const i=t(r),a=()=>s.addIssue({code:Ee.custom,...o(r)});return typeof Promise<"u"&&i instanceof Promise?i.then(l=>l?!0:(a(),!1)):i?!0:(a(),!1)})}refinement(t,n){return this._refinement((o,r)=>t(o)?!0:(r.addIssue(typeof n=="function"?n(o,r):n),!1))}_refinement(t){return new Mr({schema:this,typeName:Le.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ko.create(this,this._def)}nullable(){return Dr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return An.create(this)}promise(){return Na.create(this,this._def)}or(t){return Sa.create([this,t],this._def)}and(t){return $a.create(this,t,this._def)}transform(t){return new Mr({...Ye(this._def),schema:this,typeName:Le.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Gu({...Ye(this._def),innerType:this,defaultValue:n,typeName:Le.ZodDefault})}brand(){return new HI({typeName:Le.ZodBranded,type:this,...Ye(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Zu({...Ye(this._def),innerType:this,catchValue:n,typeName:Le.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return qc.create(this,t)}readonly(){return Ku.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const yI=/^c[^\s-]{8,}$/i,vI=/^[0-9a-z]+$/,bI=/^[0-9A-HJKMNP-TV-Z]{26}$/i,xI=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_I=/^[a-z0-9_-]{21}$/i,wI=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,kI=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,EI=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,SI="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Wl;const $I=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,CI=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,NI=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,TI=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,AI=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,II=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,jy="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",OI=new RegExp(`^${jy}$`);function Uy(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function RI(e){return new RegExp(`^${Uy(e)}$`)}function MI(e){let t=`${jy}T${Uy(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function DI(e,t){return!!((t==="v4"||!t)&&$I.test(e)||(t==="v6"||!t)&&NI.test(e))}function PI(e,t){if(!wI.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const o=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(o));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||t&&r.alg!==t)}catch{return!1}}function VI(e,t){return!!((t==="v4"||!t)&&CI.test(e)||(t==="v6"||!t)&&TI.test(e))}class Yn extends nt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Ie.string){const s=this._getOrReturnCtx(t);return Ne(s,{code:Ee.invalid_type,expected:Ie.string,received:s.parsedType}),Be}const o=new Yt;let r;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(r=this._getOrReturnCtx(t,r),Ne(r,{code:Ee.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),o.dirty());else if(s.kind==="max")t.data.length>s.value&&(r=this._getOrReturnCtx(t,r),Ne(r,{code:Ee.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),o.dirty());else if(s.kind==="length"){const i=t.data.length>s.value,a=t.data.length<s.value;(i||a)&&(r=this._getOrReturnCtx(t,r),i?Ne(r,{code:Ee.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Ne(r,{code:Ee.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),o.dirty())}else if(s.kind==="email")EI.test(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{validation:"email",code:Ee.invalid_string,message:s.message}),o.dirty());else if(s.kind==="emoji")Wl||(Wl=new RegExp(SI,"u")),Wl.test(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{validation:"emoji",code:Ee.invalid_string,message:s.message}),o.dirty());else if(s.kind==="uuid")xI.test(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{validation:"uuid",code:Ee.invalid_string,message:s.message}),o.dirty());else if(s.kind==="nanoid")_I.test(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{validation:"nanoid",code:Ee.invalid_string,message:s.message}),o.dirty());else if(s.kind==="cuid")yI.test(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{validation:"cuid",code:Ee.invalid_string,message:s.message}),o.dirty());else if(s.kind==="cuid2")vI.test(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{validation:"cuid2",code:Ee.invalid_string,message:s.message}),o.dirty());else if(s.kind==="ulid")bI.test(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{validation:"ulid",code:Ee.invalid_string,message:s.message}),o.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{r=this._getOrReturnCtx(t,r),Ne(r,{validation:"url",code:Ee.invalid_string,message:s.message}),o.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{validation:"regex",code:Ee.invalid_string,message:s.message}),o.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(t,r),Ne(r,{code:Ee.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),o.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(r=this._getOrReturnCtx(t,r),Ne(r,{code:Ee.invalid_string,validation:{startsWith:s.value},message:s.message}),o.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(r=this._getOrReturnCtx(t,r),Ne(r,{code:Ee.invalid_string,validation:{endsWith:s.value},message:s.message}),o.dirty()):s.kind==="datetime"?MI(s).test(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{code:Ee.invalid_string,validation:"datetime",message:s.message}),o.dirty()):s.kind==="date"?OI.test(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{code:Ee.invalid_string,validation:"date",message:s.message}),o.dirty()):s.kind==="time"?RI(s).test(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{code:Ee.invalid_string,validation:"time",message:s.message}),o.dirty()):s.kind==="duration"?kI.test(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{validation:"duration",code:Ee.invalid_string,message:s.message}),o.dirty()):s.kind==="ip"?DI(t.data,s.version)||(r=this._getOrReturnCtx(t,r),Ne(r,{validation:"ip",code:Ee.invalid_string,message:s.message}),o.dirty()):s.kind==="jwt"?PI(t.data,s.alg)||(r=this._getOrReturnCtx(t,r),Ne(r,{validation:"jwt",code:Ee.invalid_string,message:s.message}),o.dirty()):s.kind==="cidr"?VI(t.data,s.version)||(r=this._getOrReturnCtx(t,r),Ne(r,{validation:"cidr",code:Ee.invalid_string,message:s.message}),o.dirty()):s.kind==="base64"?AI.test(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{validation:"base64",code:Ee.invalid_string,message:s.message}),o.dirty()):s.kind==="base64url"?II.test(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{validation:"base64url",code:Ee.invalid_string,message:s.message}),o.dirty()):lt.assertNever(s);return{status:o.value,value:t.data}}_regex(t,n,o){return this.refinement(r=>t.test(r),{validation:n,code:Ee.invalid_string,...De.errToObj(o)})}_addCheck(t){return new Yn({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...De.errToObj(t)})}url(t){return this._addCheck({kind:"url",...De.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...De.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...De.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...De.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...De.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...De.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...De.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...De.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...De.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...De.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...De.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...De.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...De.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...De.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...De.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...De.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...De.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...De.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...De.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...De.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...De.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...De.errToObj(n)})}nonempty(t){return this.min(1,De.errToObj(t))}trim(){return new Yn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Yn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Yn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Yn.create=e=>new Yn({checks:[],typeName:Le.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Ye(e)});function zI(e,t){const n=(e.toString().split(".")[1]||"").length,o=(t.toString().split(".")[1]||"").length,r=n>o?n:o,s=Number.parseInt(e.toFixed(r).replace(".","")),i=Number.parseInt(t.toFixed(r).replace(".",""));return s%i/10**r}class Or extends nt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Ie.number){const s=this._getOrReturnCtx(t);return Ne(s,{code:Ee.invalid_type,expected:Ie.number,received:s.parsedType}),Be}let o;const r=new Yt;for(const s of this._def.checks)s.kind==="int"?lt.isInteger(t.data)||(o=this._getOrReturnCtx(t,o),Ne(o,{code:Ee.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(o=this._getOrReturnCtx(t,o),Ne(o,{code:Ee.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(o=this._getOrReturnCtx(t,o),Ne(o,{code:Ee.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?zI(t.data,s.value)!==0&&(o=this._getOrReturnCtx(t,o),Ne(o,{code:Ee.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(o=this._getOrReturnCtx(t,o),Ne(o,{code:Ee.not_finite,message:s.message}),r.dirty()):lt.assertNever(s);return{status:r.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,De.toString(n))}gt(t,n){return this.setLimit("min",t,!1,De.toString(n))}lte(t,n){return this.setLimit("max",t,!0,De.toString(n))}lt(t,n){return this.setLimit("max",t,!1,De.toString(n))}setLimit(t,n,o,r){return new Or({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:o,message:De.toString(r)}]})}_addCheck(t){return new Or({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:De.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:De.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:De.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:De.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:De.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:De.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:De.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:De.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:De.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&lt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(n===null||o.value>n)&&(n=o.value):o.kind==="max"&&(t===null||o.value<t)&&(t=o.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Or.create=e=>new Or({checks:[],typeName:Le.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ye(e)});class qs extends nt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Ie.bigint)return this._getInvalidInput(t);let o;const r=new Yt;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(o=this._getOrReturnCtx(t,o),Ne(o,{code:Ee.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(o=this._getOrReturnCtx(t,o),Ne(o,{code:Ee.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(o=this._getOrReturnCtx(t,o),Ne(o,{code:Ee.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):lt.assertNever(s);return{status:r.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Ne(n,{code:Ee.invalid_type,expected:Ie.bigint,received:n.parsedType}),Be}gte(t,n){return this.setLimit("min",t,!0,De.toString(n))}gt(t,n){return this.setLimit("min",t,!1,De.toString(n))}lte(t,n){return this.setLimit("max",t,!0,De.toString(n))}lt(t,n){return this.setLimit("max",t,!1,De.toString(n))}setLimit(t,n,o,r){return new qs({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:o,message:De.toString(r)}]})}_addCheck(t){return new qs({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:De.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:De.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:De.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:De.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:De.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}qs.create=e=>new qs({checks:[],typeName:Le.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Ye(e)});class ju extends nt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Ie.boolean){const o=this._getOrReturnCtx(t);return Ne(o,{code:Ee.invalid_type,expected:Ie.boolean,received:o.parsedType}),Be}return on(t.data)}}ju.create=e=>new ju({typeName:Le.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ye(e)});class Ea extends nt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Ie.date){const s=this._getOrReturnCtx(t);return Ne(s,{code:Ee.invalid_type,expected:Ie.date,received:s.parsedType}),Be}if(Number.isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return Ne(s,{code:Ee.invalid_date}),Be}const o=new Yt;let r;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(r=this._getOrReturnCtx(t,r),Ne(r,{code:Ee.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),o.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(r=this._getOrReturnCtx(t,r),Ne(r,{code:Ee.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),o.dirty()):lt.assertNever(s);return{status:o.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Ea({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:De.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:De.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Ea.create=e=>new Ea({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Le.ZodDate,...Ye(e)});class wh extends nt{_parse(t){if(this._getType(t)!==Ie.symbol){const o=this._getOrReturnCtx(t);return Ne(o,{code:Ee.invalid_type,expected:Ie.symbol,received:o.parsedType}),Be}return on(t.data)}}wh.create=e=>new wh({typeName:Le.ZodSymbol,...Ye(e)});class kh extends nt{_parse(t){if(this._getType(t)!==Ie.undefined){const o=this._getOrReturnCtx(t);return Ne(o,{code:Ee.invalid_type,expected:Ie.undefined,received:o.parsedType}),Be}return on(t.data)}}kh.create=e=>new kh({typeName:Le.ZodUndefined,...Ye(e)});class Uu extends nt{_parse(t){if(this._getType(t)!==Ie.null){const o=this._getOrReturnCtx(t);return Ne(o,{code:Ee.invalid_type,expected:Ie.null,received:o.parsedType}),Be}return on(t.data)}}Uu.create=e=>new Uu({typeName:Le.ZodNull,...Ye(e)});class Eh extends nt{constructor(){super(...arguments),this._any=!0}_parse(t){return on(t.data)}}Eh.create=e=>new Eh({typeName:Le.ZodAny,...Ye(e)});class qu extends nt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return on(t.data)}}qu.create=e=>new qu({typeName:Le.ZodUnknown,...Ye(e)});class Co extends nt{_parse(t){const n=this._getOrReturnCtx(t);return Ne(n,{code:Ee.invalid_type,expected:Ie.never,received:n.parsedType}),Be}}Co.create=e=>new Co({typeName:Le.ZodNever,...Ye(e)});class Sh extends nt{_parse(t){if(this._getType(t)!==Ie.undefined){const o=this._getOrReturnCtx(t);return Ne(o,{code:Ee.invalid_type,expected:Ie.void,received:o.parsedType}),Be}return on(t.data)}}Sh.create=e=>new Sh({typeName:Le.ZodVoid,...Ye(e)});class An extends nt{_parse(t){const{ctx:n,status:o}=this._processInputParams(t),r=this._def;if(n.parsedType!==Ie.array)return Ne(n,{code:Ee.invalid_type,expected:Ie.array,received:n.parsedType}),Be;if(r.exactLength!==null){const i=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(i||a)&&(Ne(n,{code:i?Ee.too_big:Ee.too_small,minimum:a?r.exactLength.value:void 0,maximum:i?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),o.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(Ne(n,{code:Ee.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),o.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(Ne(n,{code:Ee.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),o.dirty()),n.common.async)return Promise.all([...n.data].map((i,a)=>r.type._parseAsync(new Rn(n,i,n.path,a)))).then(i=>Yt.mergeArray(o,i));const s=[...n.data].map((i,a)=>r.type._parseSync(new Rn(n,i,n.path,a)));return Yt.mergeArray(o,s)}get element(){return this._def.type}min(t,n){return new An({...this._def,minLength:{value:t,message:De.toString(n)}})}max(t,n){return new An({...this._def,maxLength:{value:t,message:De.toString(n)}})}length(t,n){return new An({...this._def,exactLength:{value:t,message:De.toString(n)}})}nonempty(t){return this.min(1,t)}}An.create=(e,t)=>new An({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Le.ZodArray,...Ye(t)});function ar(e){if(e instanceof At){const t={};for(const n in e.shape){const o=e.shape[n];t[n]=ko.create(ar(o))}return new At({...e._def,shape:()=>t})}else return e instanceof An?new An({...e._def,type:ar(e.element)}):e instanceof ko?ko.create(ar(e.unwrap())):e instanceof Dr?Dr.create(ar(e.unwrap())):e instanceof Xo?Xo.create(e.items.map(t=>ar(t))):e}class At extends nt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=lt.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==Ie.object){const u=this._getOrReturnCtx(t);return Ne(u,{code:Ee.invalid_type,expected:Ie.object,received:u.parsedType}),Be}const{status:o,ctx:r}=this._processInputParams(t),{shape:s,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof Co&&this._def.unknownKeys==="strip"))for(const u in r.data)i.includes(u)||a.push(u);const l=[];for(const u of i){const c=s[u],d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Rn(r,d,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof Co){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:r.data[c]}});else if(u==="strict")a.length>0&&(Ne(r,{code:Ee.unrecognized_keys,keys:a}),o.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Rn(r,d,r.path,c)),alwaysSet:c in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key,f=await c.value;u.push({key:d,value:f,alwaysSet:c.alwaysSet})}return u}).then(u=>Yt.mergeObjectSync(o,u)):Yt.mergeObjectSync(o,l)}get shape(){return this._def.shape()}strict(t){return De.errToObj,new At({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,o)=>{var s,i;const r=((i=(s=this._def).errorMap)==null?void 0:i.call(s,n,o).message)??o.defaultError;return n.code==="unrecognized_keys"?{message:De.errToObj(t).message??r}:{message:r}}}:{}})}strip(){return new At({...this._def,unknownKeys:"strip"})}passthrough(){return new At({...this._def,unknownKeys:"passthrough"})}extend(t){return new At({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new At({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Le.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new At({...this._def,catchall:t})}pick(t){const n={};for(const o of lt.objectKeys(t))t[o]&&this.shape[o]&&(n[o]=this.shape[o]);return new At({...this._def,shape:()=>n})}omit(t){const n={};for(const o of lt.objectKeys(this.shape))t[o]||(n[o]=this.shape[o]);return new At({...this._def,shape:()=>n})}deepPartial(){return ar(this)}partial(t){const n={};for(const o of lt.objectKeys(this.shape)){const r=this.shape[o];t&&!t[o]?n[o]=r:n[o]=r.optional()}return new At({...this._def,shape:()=>n})}required(t){const n={};for(const o of lt.objectKeys(this.shape))if(t&&!t[o])n[o]=this.shape[o];else{let s=this.shape[o];for(;s instanceof ko;)s=s._def.innerType;n[o]=s}return new At({...this._def,shape:()=>n})}keyof(){return qy(lt.objectKeys(this.shape))}}At.create=(e,t)=>new At({shape:()=>e,unknownKeys:"strip",catchall:Co.create(),typeName:Le.ZodObject,...Ye(t)});At.strictCreate=(e,t)=>new At({shape:()=>e,unknownKeys:"strict",catchall:Co.create(),typeName:Le.ZodObject,...Ye(t)});At.lazycreate=(e,t)=>new At({shape:e,unknownKeys:"strip",catchall:Co.create(),typeName:Le.ZodObject,...Ye(t)});class Sa extends nt{_parse(t){const{ctx:n}=this._processInputParams(t),o=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const i=s.map(a=>new On(a.ctx.common.issues));return Ne(n,{code:Ee.invalid_union,unionErrors:i}),Be}if(n.common.async)return Promise.all(o.map(async s=>{const i={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:i}),ctx:i}})).then(r);{let s;const i=[];for(const l of o){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&i.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=i.map(l=>new On(l));return Ne(n,{code:Ee.invalid_union,unionErrors:a}),Be}}get options(){return this._def.options}}Sa.create=(e,t)=>new Sa({options:e,typeName:Le.ZodUnion,...Ye(t)});function Wu(e,t){const n=mo(e),o=mo(t);if(e===t)return{valid:!0,data:e};if(n===Ie.object&&o===Ie.object){const r=lt.objectKeys(t),s=lt.objectKeys(e).filter(a=>r.indexOf(a)!==-1),i={...e,...t};for(const a of s){const l=Wu(e[a],t[a]);if(!l.valid)return{valid:!1};i[a]=l.data}return{valid:!0,data:i}}else if(n===Ie.array&&o===Ie.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let s=0;s<e.length;s++){const i=e[s],a=t[s],l=Wu(i,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===Ie.date&&o===Ie.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class $a extends nt{_parse(t){const{status:n,ctx:o}=this._processInputParams(t),r=(s,i)=>{if(bh(s)||bh(i))return Be;const a=Wu(s.value,i.value);return a.valid?((xh(s)||xh(i))&&n.dirty(),{status:n.value,value:a.data}):(Ne(o,{code:Ee.invalid_intersection_types}),Be)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([s,i])=>r(s,i)):r(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}}$a.create=(e,t,n)=>new $a({left:e,right:t,typeName:Le.ZodIntersection,...Ye(n)});class Xo extends nt{_parse(t){const{status:n,ctx:o}=this._processInputParams(t);if(o.parsedType!==Ie.array)return Ne(o,{code:Ee.invalid_type,expected:Ie.array,received:o.parsedType}),Be;if(o.data.length<this._def.items.length)return Ne(o,{code:Ee.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Be;!this._def.rest&&o.data.length>this._def.items.length&&(Ne(o,{code:Ee.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...o.data].map((i,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Rn(o,i,o.path,a)):null}).filter(i=>!!i);return o.common.async?Promise.all(s).then(i=>Yt.mergeArray(n,i)):Yt.mergeArray(n,s)}get items(){return this._def.items}rest(t){return new Xo({...this._def,rest:t})}}Xo.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xo({items:e,typeName:Le.ZodTuple,rest:null,...Ye(t)})};class Ca extends nt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:o}=this._processInputParams(t);if(o.parsedType!==Ie.object)return Ne(o,{code:Ee.invalid_type,expected:Ie.object,received:o.parsedType}),Be;const r=[],s=this._def.keyType,i=this._def.valueType;for(const a in o.data)r.push({key:s._parse(new Rn(o,a,o.path,a)),value:i._parse(new Rn(o,o.data[a],o.path,a)),alwaysSet:a in o.data});return o.common.async?Yt.mergeObjectAsync(n,r):Yt.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(t,n,o){return n instanceof nt?new Ca({keyType:t,valueType:n,typeName:Le.ZodRecord,...Ye(o)}):new Ca({keyType:Yn.create(),valueType:t,typeName:Le.ZodRecord,...Ye(n)})}}class $h extends nt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:o}=this._processInputParams(t);if(o.parsedType!==Ie.map)return Ne(o,{code:Ee.invalid_type,expected:Ie.map,received:o.parsedType}),Be;const r=this._def.keyType,s=this._def.valueType,i=[...o.data.entries()].map(([a,l],u)=>({key:r._parse(new Rn(o,a,o.path,[u,"key"])),value:s._parse(new Rn(o,l,o.path,[u,"value"]))}));if(o.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of i){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Be;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of i){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Be;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}$h.create=(e,t,n)=>new $h({valueType:t,keyType:e,typeName:Le.ZodMap,...Ye(n)});class Ws extends nt{_parse(t){const{status:n,ctx:o}=this._processInputParams(t);if(o.parsedType!==Ie.set)return Ne(o,{code:Ee.invalid_type,expected:Ie.set,received:o.parsedType}),Be;const r=this._def;r.minSize!==null&&o.data.size<r.minSize.value&&(Ne(o,{code:Ee.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&o.data.size>r.maxSize.value&&(Ne(o,{code:Ee.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function i(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Be;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...o.data.values()].map((l,u)=>s._parse(new Rn(o,l,o.path,u)));return o.common.async?Promise.all(a).then(l=>i(l)):i(a)}min(t,n){return new Ws({...this._def,minSize:{value:t,message:De.toString(n)}})}max(t,n){return new Ws({...this._def,maxSize:{value:t,message:De.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Ws.create=(e,t)=>new Ws({valueType:e,minSize:null,maxSize:null,typeName:Le.ZodSet,...Ye(t)});class Yu extends nt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Yu.create=(e,t)=>new Yu({getter:e,typeName:Le.ZodLazy,...Ye(t)});class Ch extends nt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Ne(n,{received:n.data,code:Ee.invalid_literal,expected:this._def.value}),Be}return{status:"valid",value:t.data}}get value(){return this._def.value}}Ch.create=(e,t)=>new Ch({value:e,typeName:Le.ZodLiteral,...Ye(t)});function qy(e,t){return new Rr({values:e,typeName:Le.ZodEnum,...Ye(t)})}class Rr extends nt{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),o=this._def.values;return Ne(n,{expected:lt.joinValues(o),received:n.parsedType,code:Ee.invalid_type}),Be}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),o=this._def.values;return Ne(n,{received:n.data,code:Ee.invalid_enum_value,options:o}),Be}return on(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Rr.create(t,{...this._def,...n})}exclude(t,n=this._def){return Rr.create(this.options.filter(o=>!t.includes(o)),{...this._def,...n})}}Rr.create=qy;class Nh extends nt{_parse(t){const n=lt.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(t);if(o.parsedType!==Ie.string&&o.parsedType!==Ie.number){const r=lt.objectValues(n);return Ne(o,{expected:lt.joinValues(r),received:o.parsedType,code:Ee.invalid_type}),Be}if(this._cache||(this._cache=new Set(lt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const r=lt.objectValues(n);return Ne(o,{received:o.data,code:Ee.invalid_enum_value,options:r}),Be}return on(t.data)}get enum(){return this._def.values}}Nh.create=(e,t)=>new Nh({values:e,typeName:Le.ZodNativeEnum,...Ye(t)});class Na extends nt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Ie.promise&&n.common.async===!1)return Ne(n,{code:Ee.invalid_type,expected:Ie.promise,received:n.parsedType}),Be;const o=n.parsedType===Ie.promise?n.data:Promise.resolve(n.data);return on(o.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Na.create=(e,t)=>new Na({type:e,typeName:Le.ZodPromise,...Ye(t)});class Mr extends nt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Le.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:o}=this._processInputParams(t),r=this._def.effect||null,s={addIssue:i=>{Ne(o,i),i.fatal?n.abort():n.dirty()},get path(){return o.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const i=r.transform(o.data,s);if(o.common.async)return Promise.resolve(i).then(async a=>{if(n.value==="aborted")return Be;const l=await this._def.schema._parseAsync({data:a,path:o.path,parent:o});return l.status==="aborted"?Be:l.status==="dirty"||n.value==="dirty"?ls(l.value):l});{if(n.value==="aborted")return Be;const a=this._def.schema._parseSync({data:i,path:o.path,parent:o});return a.status==="aborted"?Be:a.status==="dirty"||n.value==="dirty"?ls(a.value):a}}if(r.type==="refinement"){const i=a=>{const l=r.refinement(a,s);if(o.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(o.common.async===!1){const a=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),i(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(a=>a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),i(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(o.common.async===!1){const i=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!Ir(i))return Be;const a=r.transform(i.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(i=>Ir(i)?Promise.resolve(r.transform(i.value,s)).then(a=>({status:n.value,value:a})):Be);lt.assertNever(r)}}Mr.create=(e,t,n)=>new Mr({schema:e,typeName:Le.ZodEffects,effect:t,...Ye(n)});Mr.createWithPreprocess=(e,t,n)=>new Mr({schema:t,effect:{type:"preprocess",transform:e},typeName:Le.ZodEffects,...Ye(n)});class ko extends nt{_parse(t){return this._getType(t)===Ie.undefined?on(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ko.create=(e,t)=>new ko({innerType:e,typeName:Le.ZodOptional,...Ye(t)});class Dr extends nt{_parse(t){return this._getType(t)===Ie.null?on(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Dr.create=(e,t)=>new Dr({innerType:e,typeName:Le.ZodNullable,...Ye(t)});class Gu extends nt{_parse(t){const{ctx:n}=this._processInputParams(t);let o=n.data;return n.parsedType===Ie.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Gu.create=(e,t)=>new Gu({innerType:e,typeName:Le.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ye(t)});class Zu extends nt{_parse(t){const{ctx:n}=this._processInputParams(t),o={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return ka(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new On(o.common.issues)},input:o.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new On(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}}Zu.create=(e,t)=>new Zu({innerType:e,typeName:Le.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ye(t)});class Th extends nt{_parse(t){if(this._getType(t)!==Ie.nan){const o=this._getOrReturnCtx(t);return Ne(o,{code:Ee.invalid_type,expected:Ie.nan,received:o.parsedType}),Be}return{status:"valid",value:t.data}}}Th.create=e=>new Th({typeName:Le.ZodNaN,...Ye(e)});class HI extends nt{_parse(t){const{ctx:n}=this._processInputParams(t),o=n.data;return this._def.type._parse({data:o,path:n.path,parent:n})}unwrap(){return this._def.type}}class qc extends nt{_parse(t){const{status:n,ctx:o}=this._processInputParams(t);if(o.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return s.status==="aborted"?Be:s.status==="dirty"?(n.dirty(),ls(s.value)):this._def.out._parseAsync({data:s.value,path:o.path,parent:o})})();{const r=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return r.status==="aborted"?Be:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:o.path,parent:o})}}static create(t,n){return new qc({in:t,out:n,typeName:Le.ZodPipeline})}}class Ku extends nt{_parse(t){const n=this._def.innerType._parse(t),o=r=>(Ir(r)&&(r.value=Object.freeze(r.value)),r);return ka(n)?n.then(r=>o(r)):o(n)}unwrap(){return this._def.innerType}}Ku.create=(e,t)=>new Ku({innerType:e,typeName:Le.ZodReadonly,...Ye(t)});var Le;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Le||(Le={}));const Ah=Yn.create,Ih=Or.create,Oh=ju.create,Rh=Uu.create,Si=qu.create;Co.create;const Mh=An.create,Dh=Sa.create;$a.create;Xo.create;const Ph=Ca.create,Vh=Yu.create;Rr.create;Na.create;ko.create;Dr.create;const En=10,Wy=1024*1024;function FI(e){if(typeof e!="string"||e.length>Wy)return!1;try{return JSON.parse(e),!0}catch{return!1}}function qo(e,t=0){if(t>En||e===null||typeof e!="object")return t;if(Array.isArray(e))return e.length===0?t+1:Math.max(...e.map(o=>qo(o,t+1)));const n=Object.values(e);return n.length===0?t+1:Math.max(...n.map(o=>qo(o,t+1)))}function T6(e,t=null,n={}){const o=n.maxDepth||En,r=n.maxSize||Wy;if(typeof e!="string")throw new Error("Input must be a string");if(e.length>r)throw new Error(`JSON string exceeds maximum size of ${r} bytes`);if(!FI(e))throw new Error("Invalid JSON syntax");let s;try{s=JSON.parse(e)}catch(a){throw new Error(`JSON parse error: ${a.message}`)}if(qo(s)>o)throw new Error(`Object nesting exceeds maximum depth of ${o}`);if(t)try{return t.parse(s)}catch(a){if(a instanceof On){const l=a.errors.map(u=>`${u.path.join(".")}: ${u.message}`).join(", ");throw new Error(`Schema validation failed: ${l}`)}throw a}return s}function A6(e){if(typeof e!="string")throw new Error("Input must be a string");return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const I6={safeObject:Ph(Si()).refine(e=>qo(e)<=En,{message:`Object depth exceeds ${En} levels`}),safeArray:Mh(Si()).refine(e=>qo(e)<=En,{message:`Array depth exceeds ${En} levels`}),primitive:Dh([Ah(),Ih(),Oh(),Rh()]),safeValue:Dh([Ah(),Ih(),Oh(),Rh(),Vh(()=>Ph(Si())),Vh(()=>Mh(Si()))]).refine(e=>qo(e)<=En,{message:`Value depth exceeds ${En} levels`})};function O6(e){if(qo(e)>En)throw new Error(`Value nesting exceeds maximum depth of ${En}`);if(typeof e=="object"&&e!==null){const n=Object.keys(e),o=["__proto__","constructor","prototype"];for(const r of n)if(o.includes(r))throw new Error(`Dangerous key detected: ${r}`)}}const LI=Object.assign({"../methods/connectors/connector.js":()=>Xe(()=>import("./connector-X0R_pwZQ.js"),[]),"../methods/io/output.js":()=>Xe(()=>import("./output-DMPsce-H.js"),__vite__mapDeps([0,1]))}),BI={"lib/methods/comparison/comparison.js":()=>Xe(()=>import("./comparison-C-3EnatI.js"),__vite__mapDeps([2,1])),"lib/methods/constants/constant.js":()=>Xe(()=>import("./constant-Dhmj4NOE.js"),[]),"lib/methods/conversion/typeConversion.js":()=>Xe(()=>import("./typeConversion-Dht7g6FP.js"),__vite__mapDeps([3,1])),"lib/methods/io/input.js":()=>Xe(()=>import("./input-BPNNlCXK.js"),[]),"lib/methods/iteration/forEach.js":()=>Xe(()=>import("./forEach-9OFFvcAY.js"),__vite__mapDeps([4,1])),"lib/methods/iteration/whileLoop.js":()=>Xe(()=>import("./whileLoop-BWu1MzO-.js"),__vite__mapDeps([5,1])),"lib/methods/logic/conditionalBranch.js":()=>Xe(()=>import("./conditionalBranch-CkXXrdZr.js"),__vite__mapDeps([6,1])),"lib/methods/logic/logic.js":()=>Xe(()=>import("./logic-ePm9P3Wg.js"),__vite__mapDeps([7,1])),"lib/methods/organization/marker.js":()=>Xe(()=>import("./marker-BauP6ejb.js"),[]),"lib/methods/processors/arrayAggregate.js":()=>Xe(()=>import("./arrayAggregate-CkKjWZHZ.js"),__vite__mapDeps([8,1,9])),"lib/methods/processors/arrayCreate.js":()=>Xe(()=>import("./arrayCreate-CWf8_DP0.js"),__vite__mapDeps([10,1])),"lib/methods/processors/arrayDistinct.js":()=>Xe(()=>import("./arrayDistinct-BWVL-7wK.js"),__vite__mapDeps([11,1,9])),"lib/methods/processors/arrayFilter.js":()=>Xe(()=>import("./arrayFilter-K5CDwtc6.js"),__vite__mapDeps([12,1,9])),"lib/methods/processors/arrayGroupBy.js":()=>Xe(()=>import("./arrayGroupBy-CYBBXmnL.js"),__vite__mapDeps([13,1,9])),"lib/methods/processors/arrayMap.js":()=>Xe(()=>import("./arrayMap-CliYjwMt.js"),__vite__mapDeps([14,1,9])),"lib/methods/processors/arrayMerge.js":()=>Xe(()=>import("./arrayMerge-DTWeiSuC.js"),__vite__mapDeps([15,1])),"lib/methods/processors/arrayProcessor.js":()=>Xe(()=>import("./arrayProcessor-3bzHxIk3.js"),__vite__mapDeps([16,1])),"lib/methods/processors/arraySlice.js":()=>Xe(()=>import("./arraySlice-CQXToVqn.js"),__vite__mapDeps([17,1])),"lib/methods/processors/arraySort.js":()=>Xe(()=>import("./arraySort-D7ytYpDA.js"),__vite__mapDeps([18,1,9])),"lib/methods/processors/debugViewer.js":()=>Xe(()=>import("./debugViewer-DCC5-KnR.js"),__vite__mapDeps([19,1])),"lib/methods/processors/fieldExtractor.js":()=>Xe(()=>import("./fieldExtractor-CLOjMr49.js"),__vite__mapDeps([20,1,9])),"lib/methods/processors/math.js":()=>Xe(()=>import("./math-BT4bU4qf.js"),__vite__mapDeps([21,1])),"lib/methods/processors/objectCreate.js":()=>Xe(()=>import("./objectCreate-Cp_MSNis.js"),__vite__mapDeps([22,1])),"lib/methods/processors/objectFilter.js":()=>Xe(()=>import("./objectFilter-EJheFovF.js"),__vite__mapDeps([23,1])),"lib/methods/processors/objectKeysValues.js":()=>Xe(()=>import("./objectKeysValues-DCvxA3oL.js"),__vite__mapDeps([24,1])),"lib/methods/processors/objectMerge.js":()=>Xe(()=>import("./objectMerge-BDO1RdGM.js"),__vite__mapDeps([25,1])),"lib/methods/processors/objectPick.js":()=>Xe(()=>import("./objectPick-DE_VODpI.js"),__vite__mapDeps([26,1,9])),"lib/methods/processors/objectRename.js":()=>Xe(()=>import("./objectRename-Txwo_3ZR.js"),__vite__mapDeps([27,1])),"lib/methods/processors/objectSetProperty.js":()=>Xe(()=>import("./objectSetProperty-D743SG3x.js"),__vite__mapDeps([28,1])),"lib/methods/processors/objectToArray.js":()=>Xe(()=>import("./objectToArray-3882GLb-.js"),__vite__mapDeps([29,1])),"lib/methods/processors/objectTransform.js":()=>Xe(()=>import("./objectTransform-CmxYo7p8.js"),__vite__mapDeps([30,1,9])),"lib/methods/processors/round.js":()=>Xe(()=>import("./round-DvGedJfu.js"),__vite__mapDeps([31,1])),"lib/methods/storage/variable.js":()=>Xe(()=>import("./variable-Bon__ptv.js"),[]),"lib/methods/string/stringOps.js":()=>Xe(()=>import("./stringOps-BU9R2q4Y.js"),__vite__mapDeps([32,1]))},zh={...BI,...LI};class jI{constructor(){this.nodes=new Map,this.categories=new Map,this.methodCache=new Map}registerNode(t,n){this.nodes.set(t,n)}registerCategory(t,n){this.categories.set(t,n)}getNodeDefinition(t){const n=this.nodes.get(t);return n||null}getAllNodes(){return Array.from(this.nodes.values())}getNodesByCategory(t){return this.getAllNodes().filter(n=>n.category===t)}getAllCategories(){return Array.from(this.categories.values())}hasNode(t){return this.nodes.has(t)}async getNodeFunction(t,n="method"){const o=this.getNodeDefinition(t);if(!o)return null;const r=o[n];if(!r)return null;const s=`${t}:${n}`;if(this.methodCache.has(s))return this.methodCache.get(s);try{const[i,a]=r.split(":");let l=null,u=null;const c=i.replace("lib/methods/","../methods/");if(l=zh[c],u=c,l||(u=i,l=zh[u]),!l)throw new Error(`Mdulo "${i}" no encontrado no registry`);const d=await l();if(!d[a])throw new Error(`Funo "${a}" no encontrada no mdulo "${i}"`);const f=d[a];return this.methodCache.set(s,f),f}catch{return null}}validateNodeConfig(t,n){const o=this.getNodeDefinition(t);if(!o)return{valid:!1,errors:[`Node type "${t}" no existe`]};const r=[],s=o.config||{};for(const[i,a]of Object.entries(s))if(a.required&&(n[i]===void 0||n[i]===null||n[i]==="")&&r.push(`Campo obrigatrio "${i}" est vazio`),a.condition&&n[i]!==void 0){const[l,u]=Object.entries(a.condition)[0],c=n[l];if(Array.isArray(u)){if(!u.includes(c))continue}else if(c!==u)continue}return{valid:r.length===0,errors:r}}getNodeHandles(t){const n=this.getNodeDefinition(t);return n?n.handles||{inputs:{execution:[],data:[]},outputs:{execution:[],data:[]}}:null}clear(){this.nodes.clear(),this.categories.clear(),this.methodCache.clear()}getStats(){return{totalNodes:this.nodes.size,totalCategories:this.categories.size,cachedMethods:this.methodCache.size,nodesByCategory:Array.from(this.categories.keys()).reduce((t,n)=>(t[n]=this.getNodesByCategory(n).length,t),{})}}}const Qo=new jI,R6=(e,t)=>Qo.registerNode(e,t),M6=(e,t)=>Qo.registerCategory(e,t),Jo=e=>Qo.getNodeDefinition(e),UI=()=>Qo.getAllNodes(),qI=e=>Qo.getNodesByCategory(e),Yy=()=>Qo.getAllCategories(),WI=(e,t)=>Qo.getNodeFunction(e,t),Gy={getNodeDefinition:Jo,getNodeFunction:WI};async function YI(e,t,n,o={}){const r={...o,registry:Gy};return lI(e,t,n,r)}function Bi(e,t){return cI(e,t,{registry:Gy})}function GI(e,t){const n=t.find(l=>l.id===e.source),o=t.find(l=>l.id===e.target);if(!n||!o)return;const r=Jo(n.type),s=Jo(o.type),i=Hh(n,r,e.sourceHandle,"output"),a=Hh(o,s,e.targetHandle,"input");console.log(" Edge connected:",{source:{node:n.type,handle:e.sourceHandle,type:i},target:{node:o.type,handle:e.targetHandle,type:a}})}function Hh(e,t,n,o){var i,a,l,u,c,d;if(!t||!n)return"unknown";if(e.type==="input"&&o==="output"){const f=parseInt(n.replace("param-output-",""));return((a=(((i=e.data)==null?void 0:i.parameters)||[])[f])==null?void 0:a.type)||"any"}const r=o==="output"?(u=(l=t.handles)==null?void 0:l.outputs)==null?void 0:u.data:(d=(c=t.handles)==null?void 0:c.inputs)==null?void 0:d.data;if(!r)return"unknown";const s=r.find(f=>f.id===n);return(s==null?void 0:s.type)||"unknown"}const Rt=vg("flow",()=>{const e=new ZA(YI,Bi),t=new iI,n=new aI,o=de([]),r=de([]),s=de({}),i=de({}),a=de(null),l=de(!1),u=de({}),c=de(new Set),d=de(new Set),f=de(new Set),h=de({}),p=de(new Map),y=de(new Set);let m=null;const v=de(!1),E=de([]),_=de(-1),A=50,Y=de(!1),j=de({token:null,flowId:null,flowDataId:null,baseUrl:"http://localhost:3001"}),H=de("offline"),I=de(null),L=de(!1),B=de(null),V=12e4,S=ne(()=>r.value.filter(q=>{var re;return q.edgeType==="flow"||((re=q.sourceHandle)==null?void 0:re.startsWith("exec-"))})),z=ne(()=>r.value.filter(q=>{var re;return q.edgeType==="data"||!((re=q.sourceHandle)!=null&&re.startsWith("exec-"))})),g=ne(()=>({nodes:UI(),categories:Yy()})),C=ne(()=>{var me,ae;const q=o.value.filter(Se=>Se.type==="input"),re=o.value.filter(Se=>Se.type==="output");return{hasInput:q.length>0,hasOutput:re.length>0,hasMultipleInputs:q.length>1,hasMultipleOutputs:re.length>1,isValid:q.length===1&&re.length===1,inputNodeId:((me=q[0])==null?void 0:me.id)||null,outputNodeId:((ae=re[0])==null?void 0:ae.id)||null}});e.onStateChange=q=>{u.value=q.executionResults,c.value=new Set(q.executingNodes),d.value=new Set(q.executedNodes),f.value=new Set(q.errorNodes)},Fe(s,q=>{for(const re in q)e.setNodeData(re,q[re])},{deep:!0}),Fe([j,i],()=>{e.setConfig(j.value,i.value)},{deep:!0});const w=de({});Fe(i,q=>{const re=new Set;for(const me in q)q[me]!==w.value[me]&&re.add(me);w.value={...q},re.size>0&&o.value.forEach(me=>{if(me.type==="variable"){const ae=s.value[me.id];(ae==null?void 0:ae.mode)==="get"&&(ae!=null&&ae.variableName)&&re.has(ae.variableName)&&R(me.id)}})},{deep:!0}),Fe(r,()=>{r.value.forEach(q=>{var re,me;if(!q.edgeType){const ae=((re=q.sourceHandle)==null?void 0:re.startsWith("exec-"))||((me=q.targetHandle)==null?void 0:me.startsWith("exec-"));q.edgeType=ae?"flow":"data"}})},{immediate:!0});const P=()=>{if(Y.value)return;const q={nodes:JSON.parse(JSON.stringify(o.value)),edges:JSON.parse(JSON.stringify(r.value)),nodeData:JSON.parse(JSON.stringify(s.value))};_.value<E.value.length-1&&(E.value=E.value.slice(0,_.value+1)),E.value.push(q),_.value=E.value.length-1,E.value.length>A&&(E.value.shift(),_.value--)},X=()=>{if(_.value<=0)return!1;Y.value=!0,_.value--;const q=E.value[_.value];return o.value=JSON.parse(JSON.stringify(q.nodes)),r.value=JSON.parse(JSON.stringify(q.edges)),s.value=JSON.parse(JSON.stringify(q.nodeData)),Y.value=!1,!0},G=()=>{if(_.value>=E.value.length-1)return!1;Y.value=!0,_.value++;const q=E.value[_.value];return o.value=JSON.parse(JSON.stringify(q.nodes)),r.value=JSON.parse(JSON.stringify(q.edges)),s.value=JSON.parse(JSON.stringify(q.nodeData)),Y.value=!1,!0},oe=q=>{var ae;if(q.type==="input"&&C.value.hasInput)return console.warn(" Cannot add Input node: Flow already has an Input node"),!1;if(q.type==="output"&&C.value.hasOutput)return console.warn(" Cannot add Output node: Flow already has an Output node"),!1;o.value=[...o.value,q],s.value={...s.value,[q.id]:{}},P();const re=n.shouldAutoExecuteOnCreate(q.type),me=q.type==="variable"&&!((ae=q.data)!=null&&ae.variableName);return re&&!me&&setTimeout(()=>R(q.id),n.getDelay()),!0},ge=q=>{const re=o.value.find(Se=>Se.id===q);if(re&&(re.type==="input"||re.type==="output"))return console.warn(` Cannot remove ${re.type} node: It is required for the flow`),!1;o.value=o.value.filter(Se=>Se.id!==q);const{[q]:me,...ae}=s.value;s.value=ae,r.value=r.value.filter(Se=>Se.source!==q&&Se.target!==q),_e(q),P()},Z=(q,re)=>{const me=o.value.findIndex(ae=>ae.id===q);me!==-1&&(o.value[me].position=re)},ce=q=>{l.value=q},pe=(q,re)=>{const me={...s.value[q],...re};s.value={...s.value,[q]:me},e.setNodeData(q,me);const ae=o.value.find(Se=>Se.id===q);ae&&n.shouldAutoExecuteOnConfigChange(ae.type)&&setTimeout(()=>R(q),n.getDelay())},xe=q=>{var ae,Se;const re=((ae=q.sourceHandle)==null?void 0:ae.startsWith("exec-"))||((Se=q.targetHandle)==null?void 0:Se.startsWith("exec-"));q.edgeType=re?"flow":"data",r.value=[...r.value,q],GI(q,o.value),P(),o.value.find(Ae=>Ae.id===q.target)&&q.edgeType==="data"&&u.value[q.source]!==void 0&&setTimeout(()=>R(q.target),n.getDelay())},K=q=>{r.value=r.value.filter(re=>re.id!==q),P()},le=q=>{const re={},me=z.value.filter(ae=>ae.target===q);for(const ae of me){const Se=u.value[ae.source];if(Se!==void 0){const Ae=typeof Se=="object"&&Se!==null&&ae.sourceHandle in Se?Se[ae.sourceHandle]:Se,ve=ae.targetHandle||"data-input";re[ve]=Ae}}return re},ie=(q,re)=>{const me=u.value[q];u.value={...u.value,[q]:re},e.executionResults.set(q,re),!v.value&&me!==re&&J(q)},_e=q=>{const{[q]:re,...me}=u.value;u.value=me,e.executionResults.delete(q)},Re=q=>{u.value={...u.value,...q},Object.entries(q).forEach(([re,me])=>{e.executionResults.set(re,me)})},T=()=>{u.value={},e.clearExecutionResults()},R=async q=>{const re=o.value.find(Ae=>Ae.id===q);if(!re)return;const me=le(q),ae=z.value.filter(Ae=>Ae.target===q),Se=ae.every(Ae=>u.value[Ae.source]!==void 0);if(!(ae.length>0&&!Se))try{const Ae=await e.executeNode(re,me),ve={...re,data:s.value[q]},Ge=Bi(ve,Ae);if(ie(q,Ge),Ge&&typeof Ge=="object"){for(const ot in Ge)ot.startsWith("exec-")||t.detectType(q,ot,Ge[ot]);h.value=t.exportDetectedTypes()}const Qe=n.getExecutionPlan(q,o.value,r.value,"upstream-execution");for(const ot of Qe)setTimeout(()=>R(ot),100);return Ge}catch(Ae){throw Ae}},x=async()=>{const q=Date.now();let re="failed",me=0,ae=null;const Se=()=>{const ve={};return o.value.filter(Qe=>Qe.type==="input").forEach(Qe=>{((s.value[Qe.id]||{}).parameters||[]).forEach(St=>{ve[St.name]=St.value??St.defaultValue})}),ve},Ae=ve=>{const Ge=o.value.filter(Dt=>Dt.type==="output");if(Ge.length===0){console.warn(" No Output node found in flow");const Dt=Object.keys(ve)[Object.keys(ve).length-1];return ve[Dt]}const Qe=Ge[0],ot=ve[Qe.id];if(!ot){const Dt=r.value.filter($t=>$t.target===Qe.id&&$t.edgeType==="data"),St={};if(Dt.forEach($t=>{const er=ve[$t.source];if(er&&$t.sourceHandle){const Zc=er[$t.sourceHandle];if(Zc!==void 0){const lv=$t.targetHandle||$t.sourceHandle;St[lv]=Zc}}}),Object.keys(St).length>0)return St;const Tt=r.value.filter($t=>{var er;return $t.target===Qe.id&&($t.edgeType==="flow"||((er=$t.sourceHandle)==null?void 0:er.startsWith("exec-")))});if(Tt.length>0){const $t=Tt[0].source;return ve[$t]||null}return null}return ot&&ot["data-out"]?ot["data-out"]:ot||null};v.value=!0;try{await e.executeFlow(o.value,r.value);const ve=e.getAllResults();me=Object.keys(ve).length,u.value={...ve},d.value=new Set(e.getAllExecutedNodes()),c.value=new Set(e.getAllExecutingNodes()),f.value=new Set(e.getAllErrorNodes()),i.value={...e.globalVariables},t.detectAllTypes(u.value),h.value=t.exportDetectedTypes(),ae=Ae(ve),re="success"}catch(ve){throw console.error("Flow execution error:",ve),re="failed",ve}finally{v.value=!1;const ve=Date.now()-q;if(j.value.token&&j.value.flowId)try{const Ge=Se();await k({flowId:j.value.flowId,status:re,executionTime:ve,nodesExecuted:me,inputData:Ge,outputData:ae,flowSnapshot:{totalNodes:o.value.length,nodes:o.value.map(Qe=>{var ot;return{nodeId:Qe.id,type:Qe.type,name:((ot=s.value[Qe.id])==null?void 0:ot.label)||Qe.type}})}}),console.log(" Execution saved to history")}catch(Ge){console.warn(" Failed to save execution to history:",Ge)}}},k=async q=>{var re,me,ae;try{return(await bo.post("/executions/save",q)).data}catch(Se){const Ae=((ae=(me=(re=Se.response)==null?void 0:re.data)==null?void 0:me.error)==null?void 0:ae.message)||Se.message||"Failed to save execution";throw new Error(Ae)}},N=async(q=null,re={},me={})=>{var Se,Ae;const ae=q||j.value.flowId;if(!ae)throw new Error("Flow ID no fornecido. Fornea flowId como parmetro ou configure apiConfig.flowId");try{const ve=await bo.post(`/flows/${ae}/execute`,{inputData:re,options:{saveResult:me.saveResult||!1,includeNodeResults:me.includeNodeResults||!1,timeout:me.timeout||6e4}});if(ve.data.success)return ve.data.data;throw new Error(ve.data.message||"Erro desconhecido na execuo")}catch(ve){console.error(" Erro ao executar flow no backend:",ve);const Ge=((Ae=(Se=ve.response)==null?void 0:Se.data)==null?void 0:Ae.message)||ve.message;throw new Error(Ge)}},$=async(q,re=null)=>{await e.executeConnectedNodes(q,o.value,r.value,re),u.value=e.getAllResults()},U=async(q,re={})=>{try{const me=await e.executeNode(q,re);if(ie(q.id,me),me&&typeof me=="object")for(const ae in me)ae.startsWith("exec-")||t.detectType(q.id,ae,me[ae]);return me}catch(me){throw me}},te=async q=>{const re=o.value.find(Se=>Se.id===q.target);if(!re)return;const me=le(q.target);if(["add","subtract","multiply","divide","variable","field-extractor","connector","input","array-filter","array-aggregate","array-slice","array-sort","array-map","array-groupby","array-distinct","array-merge","array-create","object-merge","object-pick","object-keys-values","object-rename","object-set-property","object-to-array","object-transform","object-create","constant","compare","type-conversion","logic","string-ops","debug-viewer"].includes(re.type))try{const Se=await U(re,me),Ae={...re,data:s.value[re.id]},ve=Bi(Ae,Se);ie(q.target,ve);const Ge=z.value.filter(Qe=>Qe.source===q.target);for(const Qe of Ge)await te(Qe)}catch{}},ee=()=>{T(),t.clearDetectedTypes(),c.value=new Set,d.value=new Set,f.value=new Set,p.value.clear(),y.value.clear(),m&&(clearTimeout(m),m=null)},J=async q=>{if(v.value)return;p.value.has(q)&&clearTimeout(p.value.get(q));const re=setTimeout(async()=>{const me=n.getExecutionPlan(q,o.value,r.value,"upstream-execution");for(const ae of me)await R(ae);p.value.delete(q)},n.getDelay());p.value.set(q,re)},he=q=>{y.value.add(q),m&&clearTimeout(m),m=setTimeout(async()=>{const re=Array.from(y.value);y.value.clear();for(const me of re)await R(me);m=null},300)},fe=async()=>{const q=o.value.filter(re=>{const me=z.value.some(Se=>Se.target===re.id),ae=n.shouldAutoExecuteOnCreate(re.type);return!me&&ae});for(const re of q)try{await R(re.id)}catch(me){console.error(`Error executing source node ${re.id}:`,me)}},ke=()=>{const q=t.exportDetectedTypes(),re={nodes:o.value,edges:r.value,nodeData:s.value,detectedTypes:q,timestamp:new Date().toISOString(),version:"2.0"},me=JSON.stringify(re,null,2),ae=new Blob([me],{type:"application/json"}),Se=URL.createObjectURL(ae),Ae=document.createElement("a");return Ae.href=Se,Ae.download=`flow-forge-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),URL.revokeObjectURL(Se),re},$e=q=>{try{if(!q.nodes||!q.edges)throw new Error("Invalid flow data format");v.value=!0,ee(),o.value=[],r.value=[],s.value={},i.value={},s.value={...q.nodeData||{}},q.detectedTypes&&(t.loadDetectedTypes(q.detectedTypes),h.value=q.detectedTypes),setTimeout(()=>{o.value=q.nodes.map(re=>({...re})),r.value=q.edges.map(re=>({...re})),B.value={nodes:o.value.map(re=>({id:re.id,type:re.type,position:{x:re.position.x,y:re.position.y}})),edges:r.value.map(re=>({id:re.id,source:re.source,target:re.target,sourceHandle:re.sourceHandle,targetHandle:re.targetHandle})),nodeData:Ar(s.value)},setTimeout(async()=>{v.value=!1,await fe()},200)},100)}catch(re){throw v.value=!1,re}},M=async()=>{var q,re;if(j.value.flowDataId)try{H.value="syncing";const me={nodes:o.value,edges:r.value,nodeData:s.value,detectedTypes:t.exportDetectedTypes()};await bo.put(`/flow-data/${j.value.flowDataId}`,{data:me}),H.value="synced",I.value=null,L.value=!1,B.value={nodes:o.value.map(ae=>({id:ae.id,type:ae.type,position:{x:ae.position.x,y:ae.position.y}})),edges:r.value.map(ae=>({id:ae.id,source:ae.source,target:ae.target,sourceHandle:ae.sourceHandle,targetHandle:ae.targetHandle})),nodeData:Ar(s.value)}}catch(me){H.value="error",I.value=((re=(q=me.response)==null?void 0:q.data)==null?void 0:re.message)||me.message}},Q=async q=>{var re,me;try{const ae=await bo.get(`/flow-data/${q}`);$e(ae.data.flowData),j.value.flowDataId=q,H.value="synced"}catch(ae){const Se=((me=(re=ae.response)==null?void 0:re.data)==null?void 0:me.message)||ae.message||"Load failed";throw new Error(Se)}},W=async()=>{const q=await KA();a.value=q,e.setConfig(j.value,i.value)},Te=()=>{const re=new URLSearchParams(window.location.search).get("flowId"),me=localStorage.getItem("accessToken"),ae=re;me&&ae?(j.value.token=me,j.value.flowId=ae,Me()):H.value="offline"},Me=async()=>{var q,re,me,ae;if(!j.value.token||!j.value.flowId)return H.value="offline",!1;H.value="syncing";try{const Se=await bo.get(`/flow-data/by-flow/${j.value.flowId}`);if(Se.data.success&&Se.data.data){const Ae=Se.data;if(j.value.flowDataId=Ae.data._id,Ae.data.data&&Ae.data.data.nodes&&Ae.data.data.edges){const ve={nodes:Ae.data.data.nodes,edges:Ae.data.data.edges,nodeData:Ae.data.data.nodeData||{},detectedTypes:Ae.data.data.detectedTypes||{},variables:Ae.data.data.variables||{}};$e(ve),Ae.data.data.variables&&Object.assign(i.value,Ae.data.data.variables)}else ee();return H.value="synced",He(),!0}else throw new Error("Invalid response format")}catch(Se){return((q=Se.response)==null?void 0:q.status)===401||((re=Se.response)==null?void 0:re.status)===403?(H.value="error",I.value="Authentication failed",!1):(H.value="error",I.value=((ae=(me=Se.response)==null?void 0:me.data)==null?void 0:ae.message)||Se.message,!1)}},He=()=>{setInterval(async()=>{L.value&&j.value.flowDataId&&H.value!=="syncing"&&(console.log(" Auto-save: salvando mudanas pendentes..."),await M())},V);let q=null;Fe([o,r,s],()=>{q&&clearTimeout(q),q=setTimeout(()=>{if(!v.value&&B.value!==null&&!L.value){const re=ve=>{const Ge={};return Object.keys(ve).sort().forEach(Qe=>{const ot=ve[Qe];ot!=null&&(typeof ot=="object"&&!Array.isArray(ot)?Ge[Qe]=re(ot):Ge[Qe]=ot)}),Ge},me={nodes:o.value.map(ve=>({id:ve.id,type:ve.type,x:Math.round(ve.position.x),y:Math.round(ve.position.y)})),edges:r.value.map(ve=>({id:ve.id,s:ve.source,t:ve.target,sh:ve.sourceHandle,th:ve.targetHandle})),nodeData:re(s.value)},ae={nodes:B.value.nodes.map(ve=>({id:ve.id,type:ve.type,x:Math.round(ve.position.x),y:Math.round(ve.position.y)})),edges:B.value.edges.map(ve=>({id:ve.id,s:ve.source,t:ve.target,sh:ve.sourceHandle,th:ve.targetHandle})),nodeData:re(B.value.nodeData)},Se=JSON.stringify(me),Ae=JSON.stringify(ae);Se!==Ae&&(L.value=!0)}},300)},{deep:!0})};return{flowEngine:e,typeEngine:t,autoExecEngine:n,nodes:o,edges:r,nodeData:s,executionResults:u,executingNodes:c,executedNodes:d,errorNodes:f,savedDetectedTypes:h,globalVariables:i,dataTypes:a,isDragging:l,apiConfig:j,syncStatus:H,lastSyncError:I,hasUnsavedChanges:L,flowEdges:S,dataEdges:z,nodeCatalog:g,flowValidation:C,addNode:oe,removeNode:ge,updateNodePosition:Z,setDragging:ce,updateNodeData:pe,addEdge:xe,removeEdge:K,executeNode:U,executeNodeById:R,executeFlow:x,executeFlowOnBackend:N,saveExecutionToHistory:k,executeConnectedNodes:$,propagateDataToTarget:te,clearExecutionResults:ee,getNodeDataInputs:le,setExecutionResult:ie,removeExecutionResult:_e,updateExecutionResults:Re,clearAllExecutionResults:T,propagateToDownstream:J,scheduleExecution:he,executeSourceNodes:fe,isLoadingFlow:v,saveFlow:ke,loadFlow:$e,syncToAPI:M,loadFromAPI:Q,undo:X,redo:G,saveSnapshot:P,initialize:W,initializeFromUrl:Te,fetchFlowData:Me}});function ZI(){const e=de(!1),t=de({x:0,y:0}),n=de({x:0,y:0}),o=(i,a)=>{t.value={x:i,y:a},n.value={x:i,y:a},e.value=!0};return{showContextMenu:e,contextMenuPosition:t,lastRightClickPosition:n,openContextMenu:o,closeContextMenu:()=>{e.value=!1},handleContextMenu:i=>{i.preventDefault(),o(i.clientX,i.clientY)}}}const Zy=/^[a-z0-9]+(-[a-z0-9]+)*$/,hl=(e,t,n,o="")=>{const r=e.split(":");if(e.slice(0,1)==="@"){if(r.length<2||r.length>3)return null;o=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const a=r.pop(),l=r.pop(),u={provider:r.length>0?r[0]:o,prefix:l,name:a};return t&&!ji(u)?null:u}const s=r[0],i=s.split("-");if(i.length>1){const a={provider:o,prefix:i.shift(),name:i.join("-")};return t&&!ji(a)?null:a}if(n&&o===""){const a={provider:o,prefix:"",name:s};return t&&!ji(a,n)?null:a}return null},ji=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1,Ky=Object.freeze({left:0,top:0,width:16,height:16}),Ta=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),pl=Object.freeze({...Ky,...Ta}),Xu=Object.freeze({...pl,body:"",hidden:!1});function KI(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const o=((e.rotate||0)+(t.rotate||0))%4;return o&&(n.rotate=o),n}function Fh(e,t){const n=KI(e,t);for(const o in Xu)o in Ta?o in e&&!(o in n)&&(n[o]=Ta[o]):o in t?n[o]=t[o]:o in e&&(n[o]=e[o]);return n}function XI(e,t){const n=e.icons,o=e.aliases||Object.create(null),r=Object.create(null);function s(i){if(n[i])return r[i]=[];if(!(i in r)){r[i]=null;const a=o[i]&&o[i].parent,l=a&&s(a);l&&(r[i]=[a].concat(l))}return r[i]}return Object.keys(n).concat(Object.keys(o)).forEach(s),r}function JI(e,t,n){const o=e.icons,r=e.aliases||Object.create(null);let s={};function i(a){s=Fh(o[a]||r[a],s)}return i(t),n.forEach(i),Fh(e,s)}function Xy(e,t){const n=[];if(typeof e!="object"||typeof e.icons!="object")return n;e.not_found instanceof Array&&e.not_found.forEach(r=>{t(r,null),n.push(r)});const o=XI(e);for(const r in o){const s=o[r];s&&(t(r,JI(e,r,s)),n.push(r))}return n}const QI={provider:"",aliases:{},not_found:{},...Ky};function Yl(e,t){for(const n in t)if(n in e&&typeof e[n]!=typeof t[n])return!1;return!0}function Jy(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object"||!Yl(e,QI))return null;const n=t.icons;for(const r in n){const s=n[r];if(!r||typeof s.body!="string"||!Yl(s,Xu))return null}const o=t.aliases||Object.create(null);for(const r in o){const s=o[r],i=s.parent;if(!r||typeof i!="string"||!n[i]&&!o[i]||!Yl(s,Xu))return null}return t}const Lh=Object.create(null);function e3(e,t){return{provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function Pr(e,t){const n=Lh[e]||(Lh[e]=Object.create(null));return n[t]||(n[t]=e3(e,t))}function Qy(e,t){return Jy(t)?Xy(t,(n,o)=>{o?e.icons[n]=o:e.missing.add(n)}):[]}function t3(e,t,n){try{if(typeof n.body=="string")return e.icons[t]={...n},!0}catch{}return!1}let Ys=!1;function ev(e){return typeof e=="boolean"&&(Ys=e),Ys}function n3(e){const t=typeof e=="string"?hl(e,!0,Ys):e;if(t){const n=Pr(t.provider,t.prefix),o=t.name;return n.icons[o]||(n.missing.has(o)?null:void 0)}}function o3(e,t){const n=hl(e,!0,Ys);if(!n)return!1;const o=Pr(n.provider,n.prefix);return t?t3(o,n.name,t):(o.missing.add(n.name),!0)}function r3(e,t){if(typeof e!="object")return!1;if(typeof t!="string"&&(t=e.provider||""),Ys&&!t&&!e.prefix){let r=!1;return Jy(e)&&(e.prefix="",Xy(e,(s,i)=>{o3(s,i)&&(r=!0)})),r}const n=e.prefix;if(!ji({prefix:n,name:"a"}))return!1;const o=Pr(t,n);return!!Qy(o,e)}const tv=Object.freeze({width:null,height:null}),nv=Object.freeze({...tv,...Ta}),s3=/(-?[0-9.]*[0-9]+[0-9.]*)/g,i3=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Bh(e,t,n){if(t===1)return e;if(n=n||100,typeof e=="number")return Math.ceil(e*t*n)/n;if(typeof e!="string")return e;const o=e.split(s3);if(o===null||!o.length)return e;const r=[];let s=o.shift(),i=i3.test(s);for(;;){if(i){const a=parseFloat(s);isNaN(a)?r.push(s):r.push(Math.ceil(a*t*n)/n)}else r.push(s);if(s=o.shift(),s===void 0)return r.join("");i=!i}}function a3(e,t="defs"){let n="";const o=e.indexOf("<"+t);for(;o>=0;){const r=e.indexOf(">",o),s=e.indexOf("</"+t);if(r===-1||s===-1)break;const i=e.indexOf(">",s);if(i===-1)break;n+=e.slice(r+1,s).trim(),e=e.slice(0,o).trim()+e.slice(i+1)}return{defs:n,content:e}}function l3(e,t){return e?"<defs>"+e+"</defs>"+t:t}function u3(e,t,n){const o=a3(e);return l3(o.defs,t+o.content+n)}const c3=e=>e==="unset"||e==="undefined"||e==="none";function d3(e,t){const n={...pl,...e},o={...nv,...t},r={left:n.left,top:n.top,width:n.width,height:n.height};let s=n.body;[n,o].forEach(y=>{const m=[],v=y.hFlip,E=y.vFlip;let _=y.rotate;v?E?_+=2:(m.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),m.push("scale(-1 1)"),r.top=r.left=0):E&&(m.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),m.push("scale(1 -1)"),r.top=r.left=0);let A;switch(_<0&&(_-=Math.floor(_/4)*4),_=_%4,_){case 1:A=r.height/2+r.top,m.unshift("rotate(90 "+A.toString()+" "+A.toString()+")");break;case 2:m.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:A=r.width/2+r.left,m.unshift("rotate(-90 "+A.toString()+" "+A.toString()+")");break}_%2===1&&(r.left!==r.top&&(A=r.left,r.left=r.top,r.top=A),r.width!==r.height&&(A=r.width,r.width=r.height,r.height=A)),m.length&&(s=u3(s,'<g transform="'+m.join(" ")+'">',"</g>"))});const i=o.width,a=o.height,l=r.width,u=r.height;let c,d;i===null?(d=a===null?"1em":a==="auto"?u:a,c=Bh(d,l/u)):(c=i==="auto"?l:i,d=a===null?Bh(c,u/l):a==="auto"?u:a);const f={},h=(y,m)=>{c3(m)||(f[y]=m.toString())};h("width",c),h("height",d);const p=[r.left,r.top,l,u];return f.viewBox=p.join(" "),{attributes:f,viewBox:p,body:s}}const f3=/\sid="(\S+)"/g,h3="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let p3=0;function g3(e,t=h3){const n=[];let o;for(;o=f3.exec(e);)n.push(o[1]);if(!n.length)return e;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(s=>{const i=typeof t=="function"?t(s):t+(p3++).toString(),a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+i+r+"$3")}),e=e.replace(new RegExp(r,"g"),""),e}const Ju=Object.create(null);function m3(e,t){Ju[e]=t}function Qu(e){return Ju[e]||Ju[""]}function Wc(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return{resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const Yc=Object.create(null),Xr=["https://api.simplesvg.com","https://api.unisvg.com"],Ui=[];for(;Xr.length>0;)Xr.length===1||Math.random()>.5?Ui.push(Xr.shift()):Ui.push(Xr.pop());Yc[""]=Wc({resources:["https://api.iconify.design"].concat(Ui)});function y3(e,t){const n=Wc(t);return n===null?!1:(Yc[e]=n,!0)}function Gc(e){return Yc[e]}const v3=()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}};let jh=v3();function b3(e,t){const n=Gc(e);if(!n)return 0;let o;if(!n.maxURL)o=0;else{let r=0;n.resources.forEach(i=>{r=Math.max(r,i.length)});const s=t+".json?icons=";o=n.maxURL-r-n.path.length-s.length}return o}function x3(e){return e===404}const _3=(e,t,n)=>{const o=[],r=b3(e,t),s="icons";let i={type:s,provider:e,prefix:t,icons:[]},a=0;return n.forEach((l,u)=>{a+=l.length+1,a>=r&&u>0&&(o.push(i),i={type:s,provider:e,prefix:t,icons:[]},a=l.length),i.icons.push(l)}),o.push(i),o};function w3(e){if(typeof e=="string"){const t=Gc(e);if(t)return t.path}return"/"}const k3=(e,t,n)=>{if(!jh){n("abort",424);return}let o=w3(t.provider);switch(t.type){case"icons":{const s=t.prefix,a=t.icons.join(","),l=new URLSearchParams({icons:a});o+=s+".json?"+l.toString();break}case"custom":{const s=t.uri;o+=s.slice(0,1)==="/"?s.slice(1):s;break}default:n("abort",400);return}let r=503;jh(e+o).then(s=>{const i=s.status;if(i!==200){setTimeout(()=>{n(x3(i)?"abort":"next",i)});return}return r=501,s.json()}).then(s=>{if(typeof s!="object"||s===null){setTimeout(()=>{s===404?n("abort",s):n("next",r)});return}setTimeout(()=>{n("success",s)})}).catch(()=>{n("next",r)})},E3={prepare:_3,send:k3};function S3(e){const t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((r,s)=>r.provider!==s.provider?r.provider.localeCompare(s.provider):r.prefix!==s.prefix?r.prefix.localeCompare(s.prefix):r.name.localeCompare(s.name));let o={provider:"",prefix:"",name:""};return e.forEach(r=>{if(o.name===r.name&&o.prefix===r.prefix&&o.provider===r.provider)return;o=r;const s=r.provider,i=r.prefix,a=r.name,l=n[s]||(n[s]=Object.create(null)),u=l[i]||(l[i]=Pr(s,i));let c;a in u.icons?c=t.loaded:i===""||u.missing.has(a)?c=t.missing:c=t.pending;const d={provider:s,prefix:i,name:a};c.push(d)}),t}function ov(e,t){e.forEach(n=>{const o=n.loaderCallbacks;o&&(n.loaderCallbacks=o.filter(r=>r.id!==t))})}function $3(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let n=!1;const o=e.provider,r=e.prefix;t.forEach(s=>{const i=s.icons,a=i.pending.length;i.pending=i.pending.filter(l=>{if(l.prefix!==r)return!0;const u=l.name;if(e.icons[u])i.loaded.push({provider:o,prefix:r,name:u});else if(e.missing.has(u))i.missing.push({provider:o,prefix:r,name:u});else return n=!0,!0;return!1}),i.pending.length!==a&&(n||ov([e],s.id),s.callback(i.loaded.slice(0),i.missing.slice(0),i.pending.slice(0),s.abort))})}))}let C3=0;function N3(e,t,n){const o=C3++,r=ov.bind(null,n,o);if(!t.pending.length)return r;const s={id:o,icons:t,callback:e,abort:r};return n.forEach(i=>{(i.loaderCallbacks||(i.loaderCallbacks=[])).push(s)}),r}function T3(e,t=!0,n=!1){const o=[];return e.forEach(r=>{const s=typeof r=="string"?hl(r,t,n):r;s&&o.push(s)}),o}var A3={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function I3(e,t,n,o){const r=e.resources.length,s=e.random?Math.floor(Math.random()*r):e.index;let i;if(e.random){let j=e.resources.slice(0);for(i=[];j.length>1;){const H=Math.floor(Math.random()*j.length);i.push(j[H]),j=j.slice(0,H).concat(j.slice(H+1))}i=i.concat(j)}else i=e.resources.slice(s).concat(e.resources.slice(0,s));const a=Date.now();let l="pending",u=0,c,d=null,f=[],h=[];typeof o=="function"&&h.push(o);function p(){d&&(clearTimeout(d),d=null)}function y(){l==="pending"&&(l="aborted"),p(),f.forEach(j=>{j.status==="pending"&&(j.status="aborted")}),f=[]}function m(j,H){H&&(h=[]),typeof j=="function"&&h.push(j)}function v(){return{startTime:a,payload:t,status:l,queriesSent:u,queriesPending:f.length,subscribe:m,abort:y}}function E(){l="failed",h.forEach(j=>{j(void 0,c)})}function _(){f.forEach(j=>{j.status==="pending"&&(j.status="aborted")}),f=[]}function A(j,H,I){const L=H!=="success";switch(f=f.filter(B=>B!==j),l){case"pending":break;case"failed":if(L||!e.dataAfterTimeout)return;break;default:return}if(H==="abort"){c=I,E();return}if(L){c=I,f.length||(i.length?Y():E());return}if(p(),_(),!e.random){const B=e.resources.indexOf(j.resource);B!==-1&&B!==e.index&&(e.index=B)}l="completed",h.forEach(B=>{B(I)})}function Y(){if(l!=="pending")return;p();const j=i.shift();if(j===void 0){if(f.length){d=setTimeout(()=>{p(),l==="pending"&&(_(),E())},e.timeout);return}E();return}const H={status:"pending",resource:j,callback:(I,L)=>{A(H,I,L)}};f.push(H),u++,d=setTimeout(Y,e.rotate),n(j,t,H.callback)}return setTimeout(Y),v}function rv(e){const t={...A3,...e};let n=[];function o(){n=n.filter(a=>a().status==="pending")}function r(a,l,u){const c=I3(t,a,l,(d,f)=>{o(),u&&u(d,f)});return n.push(c),c}function s(a){return n.find(l=>a(l))||null}return{query:r,find:s,setIndex:a=>{t.index=a},getIndex:()=>t.index,cleanup:o}}function Uh(){}const Gl=Object.create(null);function O3(e){if(!Gl[e]){const t=Gc(e);if(!t)return;const n=rv(t),o={config:t,redundancy:n};Gl[e]=o}return Gl[e]}function R3(e,t,n){let o,r;if(typeof e=="string"){const s=Qu(e);if(!s)return n(void 0,424),Uh;r=s.send;const i=O3(e);i&&(o=i.redundancy)}else{const s=Wc(e);if(s){o=rv(s);const i=e.resources?e.resources[0]:"",a=Qu(i);a&&(r=a.send)}}return!o||!r?(n(void 0,424),Uh):o.query(t,r,n)().abort}function qh(){}function M3(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,$3(e)}))}function D3(e){const t=[],n=[];return e.forEach(o=>{(o.match(Zy)?t:n).push(o)}),{valid:t,invalid:n}}function Jr(e,t,n){function o(){const r=e.pendingIcons;t.forEach(s=>{r&&r.delete(s),e.icons[s]||e.missing.add(s)})}if(n&&typeof n=="object")try{if(!Qy(e,n).length){o();return}}catch(r){console.error(r)}o(),M3(e)}function Wh(e,t){e instanceof Promise?e.then(n=>{t(n)}).catch(()=>{t(null)}):t(e)}function P3(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:n,prefix:o}=e,r=e.iconsToLoad;if(delete e.iconsToLoad,!r||!r.length)return;const s=e.loadIcon;if(e.loadIcons&&(r.length>1||!s)){Wh(e.loadIcons(r,o,n),c=>{Jr(e,r,c)});return}if(s){r.forEach(c=>{const d=s(c,o,n);Wh(d,f=>{const h=f?{prefix:o,icons:{[c]:f}}:null;Jr(e,[c],h)})});return}const{valid:i,invalid:a}=D3(r);if(a.length&&Jr(e,a,null),!i.length)return;const l=o.match(Zy)?Qu(n):null;if(!l){Jr(e,i,null);return}l.prepare(n,o,i).forEach(c=>{R3(n,c,d=>{Jr(e,c.icons,d)})})}))}const V3=(e,t)=>{const n=T3(e,!0,ev()),o=S3(n);if(!o.pending.length){let l=!0;return t&&setTimeout(()=>{l&&t(o.loaded,o.missing,o.pending,qh)}),()=>{l=!1}}const r=Object.create(null),s=[];let i,a;return o.pending.forEach(l=>{const{provider:u,prefix:c}=l;if(c===a&&u===i)return;i=u,a=c,s.push(Pr(u,c));const d=r[u]||(r[u]=Object.create(null));d[c]||(d[c]=[])}),o.pending.forEach(l=>{const{provider:u,prefix:c,name:d}=l,f=Pr(u,c),h=f.pendingIcons||(f.pendingIcons=new Set);h.has(d)||(h.add(d),r[u][c].push(d))}),s.forEach(l=>{const u=r[l.provider][l.prefix];u.length&&P3(l,u)}),t?N3(t,o,s):qh};function z3(e,t){const n={...e};for(const o in t){const r=t[o],s=typeof r;o in tv?(r===null||r&&(s==="string"||s==="number"))&&(n[o]=r):s===typeof n[o]&&(n[o]=o==="rotate"?r%4:r)}return n}const H3=/[\s,]+/;function F3(e,t){t.split(H3).forEach(n=>{switch(n.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}})}function L3(e,t=0){const n=e.replace(/^-?[0-9.]*/,"");function o(r){for(;r<0;)r+=4;return r%4}if(n===""){const r=parseInt(e);return isNaN(r)?0:o(r)}else if(n!==e){let r=0;switch(n){case"%":r=25;break;case"deg":r=90}if(r){let s=parseFloat(e.slice(0,e.length-n.length));return isNaN(s)?0:(s=s/r,s%1===0?o(s):0)}}return t}function B3(e,t){let n=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const o in t)n+=" "+o+'="'+t[o]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}function j3(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function U3(e){return"data:image/svg+xml,"+j3(e)}function q3(e){return'url("'+U3(e)+'")'}const Yh={...nv,inline:!1},W3={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Y3={display:"inline-block"},ec={backgroundColor:"currentColor"},sv={backgroundColor:"transparent"},Gh={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},Zh={webkitMask:ec,mask:ec,background:sv};for(const e in Zh){const t=Zh[e];for(const n in Gh)t[e+n]=Gh[n]}const qi={};["horizontal","vertical"].forEach(e=>{const t=e.slice(0,1)+"Flip";qi[e+"-flip"]=t,qi[e.slice(0,1)+"-flip"]=t,qi[e+"Flip"]=t});function Kh(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}const Xh=(e,t)=>{const n=z3(Yh,t),o={...W3},r=t.mode||"svg",s={},i=t.style,a=typeof i=="object"&&!(i instanceof Array)?i:{};for(let y in t){const m=t[y];if(m!==void 0)switch(y){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":n[y]=m===!0||m==="true"||m===1;break;case"flip":typeof m=="string"&&F3(n,m);break;case"color":s.color=m;break;case"rotate":typeof m=="string"?n[y]=L3(m):typeof m=="number"&&(n[y]=m);break;case"ariaHidden":case"aria-hidden":m!==!0&&m!=="true"&&delete o["aria-hidden"];break;default:{const v=qi[y];v?(m===!0||m==="true"||m===1)&&(n[v]=!0):Yh[y]===void 0&&(o[y]=m)}}}const l=d3(e,n),u=l.attributes;if(n.inline&&(s.verticalAlign="-0.125em"),r==="svg"){o.style={...s,...a},Object.assign(o,u);let y=0,m=t.id;return typeof m=="string"&&(m=m.replace(/-/g,"_")),o.innerHTML=g3(l.body,m?()=>m+"ID"+y++:"iconifyVue"),rt("svg",o)}const{body:c,width:d,height:f}=e,h=r==="mask"||(r==="bg"?!1:c.indexOf("currentColor")!==-1),p=B3(c,{...u,width:d+"",height:f+""});return o.style={...s,"--svg":q3(p),width:Kh(u.width),height:Kh(u.height),...Y3,...h?ec:sv,...a},rt("span",o)};ev(!0);m3("",E3);if(typeof document<"u"&&typeof window<"u"){const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(o=>{try{(typeof o!="object"||o===null||o instanceof Array||typeof o.icons!="object"||typeof o.prefix!="string"||!r3(o))&&console.error(n)}catch{console.error(n)}})}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let n in t){const o="IconifyProviders["+n+"] is invalid.";try{const r=t[n];if(typeof r!="object"||!r||r.resources===void 0)continue;y3(n,r)||console.error(o)}catch{console.error(o)}}}}const G3={...pl,body:""},Z3=ht((e,{emit:t})=>{const n=de(null);function o(){var u,c;n.value&&((c=(u=n.value).abort)==null||c.call(u),n.value=null)}const r=de(!!e.ssr),s=de(""),i=yr(null);function a(){const u=e.icon;if(typeof u=="object"&&u!==null&&typeof u.body=="string")return s.value="",{data:u};let c;if(typeof u!="string"||(c=hl(u,!1,!0))===null)return null;let d=n3(c);if(!d){const p=n.value;return(!p||p.name!==u)&&(d===null?n.value={name:u}:n.value={name:u,abort:V3([c],l)}),null}o(),s.value!==u&&(s.value=u,Bt(()=>{t("load",u)}));const f=e.customise;if(f){d=Object.assign({},d);const p=f(d.body,c.name,c.prefix,c.provider);typeof p=="string"&&(d.body=p)}const h=["iconify"];return c.prefix!==""&&h.push("iconify--"+c.prefix),c.provider!==""&&h.push("iconify--"+c.provider),{data:d,classes:h}}function l(){var c;const u=a();u?u.data!==((c=i.value)==null?void 0:c.data)&&(i.value=u):i.value=null}return r.value?l():wt(()=>{r.value=!0,l()}),Fe(()=>e.icon,l),Hr(o),()=>{const u=i.value;if(!u)return Xh(G3,e);let c=e;return u.classes&&(c={...e,class:u.classes.join(" ")}),Xh({...pl,...u.data},c)}},{props:["icon","mode","ssr","width","height","style","color","inline","rotate","hFlip","horizontalFlip","vFlip","verticalFlip","flip","id","ariaHidden","customise","title"],emits:["load"]}),Mt=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},K3={__name:"Icon",props:{icon:{type:String,required:!0},size:{type:[String,Number],default:16},width:{type:[String,Number],default:null},height:{type:[String,Number],default:null},color:{type:String,default:null},className:{type:String,default:""}},setup(e){return(t,n)=>(O(),ut(ye(Z3),{icon:e.icon,width:e.width||e.size,height:e.height||e.size,class:qe(["flow-icon",e.className]),style:vt({color:e.color})},null,8,["icon","width","height","class","style"]))}},Je=Mt(K3,[["__scopeId","data-v-4b4f777d"]]),X3={class:"relative px-4 py-3 lg:pl-4 lg:pr-4 flex-shrink-0 z-[100]"},J3={class:"relative border bg-[#ffff] shadow-sm border-white/20 rounded-2xl overflow-hidden"},Q3={class:"flex items-center justify-between px-4 sm:px-6 h-14"},eO={class:"flex items-center space-x-3"},tO={class:"w-9 h-9 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-lg shadow-blue-500/30"},nO={class:"flex items-center gap-2 flex-1 justify-center"},oO={class:"flex items-center gap-1"},rO=["disabled"],sO={class:"flex items-center gap-1"},iO=["disabled"],aO=["disabled"],lO={key:0,class:"flex items-center gap-2"},uO=["disabled","title"],cO={key:1,class:"w-px h-6 bg-gray-300 mx-2 opacity-30"},dO=["title"],fO={key:3,class:"flex items-center gap-1.5 px-3 py-1.5 bg-white rounded-lg border border-gray-200 shadow-sm"},hO={class:"text-xs text-gray-700 font-medium tracking-wide"},pO=["title"],gO={key:1,class:"flex items-center gap-2"},mO={key:0,class:"flex items-center gap-1.5 px-3 py-1.5 bg-white rounded-lg border border-gray-200 shadow-sm"},yO={class:"text-xs text-gray-700 font-medium tracking-wide"},vO={__name:"TopToolbar",props:{canUndo:{type:Boolean,default:!1},canRedo:{type:Boolean,default:!1},executionStatus:{type:String,default:null},hasUnsavedChanges:{type:Boolean,default:!1},hideSaveButton:{type:Boolean,default:!1},playgroundMode:{type:Boolean,default:!1}},emits:["execute","undo","redo","save"],setup(e,{emit:t}){const n=Ig(),{user:o}=sm(),r=e,s=t,i=Rt(),{isDark:a,toggleTheme:l}=Rg(),u=ne(()=>{var H;const j=(H=o.value)==null?void 0:H.role;return j==="administrator"||j==="moderator"}),c=ne(()=>r.executionStatus==="running"),d=ne(()=>{switch(r.executionStatus){case"running":return"Executando...";case"success":return"Executado";case"error":return"Erro";default:return""}}),f=ne(()=>i.syncStatus),h=ne(()=>{if(r.hasUnsavedChanges&&f.value!=="syncing")return"material-symbols:cloud-upload";switch(f.value){case"synced":return"material-symbols:cloud-done";case"syncing":return"material-symbols:sync";case"error":return"material-symbols:cloud-off";case"offline":return"material-symbols:wifi-off";default:return"material-symbols:cloud"}}),p=ne(()=>{if(r.hasUnsavedChanges&&f.value!=="syncing")return"No Salvo";switch(f.value){case"synced":return"Salvo";case"syncing":return"Salvando...";case"error":return"Erro";case"offline":return"Offline";default:return""}}),y=ne(()=>{if(r.hasUnsavedChanges&&f.value!=="syncing")return"Voc tem alteraes no salvas (salvamento automtico em at 2 minutos)";switch(f.value){case"synced":return"Todas as alteraes salvas na nuvem";case"syncing":return"Salvando alteraes...";case"error":return"Falha ao salvar alteraes";case"offline":return"Sem conexo com o servidor";default:return""}}),m=()=>{s("execute")},v=ne(()=>f.value==="syncing"?"Salvando...":r.hasUnsavedChanges?"Salvar":"Salvo"),E=ne(()=>f.value==="syncing"?"Salvando alteraes na nuvem...":r.hasUnsavedChanges?"Salvar alteraes na nuvem (Ctrl+S)":"Sem alteraes no salvas"),_=()=>{r.hasUnsavedChanges&&f.value!=="syncing"&&s("save")},A=()=>{n.push("/docs")},Y=()=>{try{const j={id:i.apiConfig.flowId||`tutorial_${Date.now()}`,title:prompt("Nome do Tutorial:")||"Tutorial Sem Nome",description:prompt("Descrio do Tutorial:")||"",flow:{nodes:i.nodes,edges:i.edges,nodeData:i.nodeData,detectedTypes:i.savedDetectedTypes,variables:i.globalVariables},exportedAt:new Date().toISOString()},H=JSON.stringify(j,null,2),I=new Blob([H],{type:"application/json"}),L=URL.createObjectURL(I),B=document.createElement("a");B.href=L,B.download=`tutorial-${j.id}.json`,document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(L),console.log(" Tutorial exportado com sucesso!"),alert(`Tutorial exportado! Salve o arquivo "${j.id}.json" em:
packages/editor/src/data/tutorials/`)}catch(j){console.error(" Erro ao exportar tutorial:",j),alert("Erro ao exportar tutorial: "+j.message)}};return(j,H)=>(O(),D("header",X3,[b("div",J3,[H[6]||(H[6]=b("div",{class:"absolute inset-0 -z-10 bg-gradient-to-r from-blue-500/5 to-cyan-500/5 transition-all duration-700 rounded-2xl"},null,-1)),H[7]||(H[7]=b("div",{class:"absolute inset-0 -z-10 bg-white/70 rounded-2xl"},null,-1)),b("div",Q3,[b("div",eO,[b("div",tO,[ue(Je,{icon:"lucide:workflow",class:"w-5 h-5 text-white"})]),H[3]||(H[3]=b("span",{class:"hidden sm:block text-xl font-light text-gray-900 tracking-wide"},[st(" Lynt "),b("span",{class:"font-normal text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-cyan-600"},"Flow")],-1))]),b("div",nO,[b("div",oO,[b("button",{onClick:m,disabled:c.value,class:qe([{"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 cursor-pointer":!c.value,"bg-gray-400 cursor-not-allowed opacity-60":c.value},"inline-flex items-center gap-1.5 px-4 py-2 border-0 rounded-lg text-white text-sm font-semibold transition-all duration-200 tracking-wide"])},[ue(Je,{icon:c.value?"material-symbols:sync":"material-symbols:play-arrow",size:16,class:qe({"animate-spin":c.value})},null,8,["icon","class"]),st(" "+be(c.value?"Executando...":"Executar"),1)],10,rO)]),e.playgroundMode?we("",!0):(O(),D(Pe,{key:0},[H[4]||(H[4]=b("div",{class:"w-px h-6 bg-gray-300 mx-3 opacity-30"},null,-1)),b("div",sO,[b("button",{onClick:H[0]||(H[0]=I=>j.$emit("undo")),class:"inline-flex items-center gap-1.5 px-2 py-1.5 bg-white border border-gray-200 rounded-lg text-gray-700 text-sm font-medium cursor-pointer transition-all hover:bg-gray-50 hover:border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",title:"Desfazer (Ctrl+Z)",disabled:!e.canUndo},[ue(Je,{icon:"material-symbols:undo",size:16})],8,iO),b("button",{onClick:H[1]||(H[1]=I=>j.$emit("redo")),class:"inline-flex items-center gap-1.5 px-2 py-1.5 bg-white border border-gray-200 rounded-lg text-gray-700 text-sm font-medium cursor-pointer transition-all hover:bg-gray-50 hover:border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",title:"Refazer (Ctrl+Y)",disabled:!e.canRedo},[ue(Je,{icon:"material-symbols:redo",size:16})],8,aO)])],64))]),e.playgroundMode?(O(),D("div",gO,[e.executionStatus?(O(),D("div",mO,[b("div",{class:qe(["w-2 h-2 rounded-full",{"bg-gray-400":!e.executionStatus,"bg-orange-500 animate-pulse":e.executionStatus==="running","bg-green-500":e.executionStatus==="success","bg-red-500":e.executionStatus==="error"}])},null,2),b("span",yO,be(d.value),1)])):we("",!0)])):(O(),D("div",lO,[e.hideSaveButton?we("",!0):(O(),D("button",{key:0,onClick:_,disabled:!e.hasUnsavedChanges||f.value==="syncing",class:qe(["inline-flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-all tracking-wide shadow-sm",{"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 cursor-pointer":e.hasUnsavedChanges&&f.value!=="syncing","bg-white border border-gray-200 text-gray-400 cursor-not-allowed opacity-60":!e.hasUnsavedChanges||f.value==="syncing"}]),title:E.value},[ue(Je,{icon:f.value==="syncing"?"material-symbols:sync":"material-symbols:save",size:16,class:qe({"animate-spin":f.value==="syncing"})},null,8,["icon","class"]),st(" "+be(v.value),1)],10,uO)),e.hideSaveButton?we("",!0):(O(),D("div",cO)),e.hideSaveButton?we("",!0):(O(),D("div",{key:2,class:qe(["flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg border shadow-sm",{"bg-orange-50 border-orange-200":e.hasUnsavedChanges&&f.value!=="syncing","bg-green-50 border-green-200":!e.hasUnsavedChanges&&f.value==="synced","bg-blue-50 border-blue-200":f.value==="syncing","bg-red-50 border-red-200":f.value==="error","bg-gray-50 border-gray-200":f.value==="offline"}]),title:y.value},[ue(Je,{icon:h.value,size:14,class:qe({"text-orange-600":e.hasUnsavedChanges&&f.value!=="syncing","text-green-600":!e.hasUnsavedChanges&&f.value==="synced","text-blue-600 animate-spin":f.value==="syncing","text-red-600":f.value==="error","text-gray-600":f.value==="offline"})},null,8,["icon","class"]),b("span",{class:qe(["text-xs font-medium tracking-wide",{"text-orange-700":e.hasUnsavedChanges&&f.value!=="syncing","text-green-700":!e.hasUnsavedChanges&&f.value==="synced","text-blue-700":f.value==="syncing","text-red-700":f.value==="error","text-gray-700":f.value==="offline"}])},be(p.value),3)],10,dO)),e.executionStatus?(O(),D("div",fO,[b("div",{class:qe(["w-2 h-2 rounded-full",{"bg-gray-400":!e.executionStatus,"bg-orange-500 animate-pulse":e.executionStatus==="running","bg-green-500":e.executionStatus==="success","bg-red-500":e.executionStatus==="error"}])},null,2),b("span",hO,be(d.value),1)])):we("",!0),b("button",{onClick:A,class:"inline-flex items-center gap-1.5 px-3 py-2 bg-white border border-gray-200 rounded-lg text-gray-700 text-sm font-medium cursor-pointer transition-all hover:bg-gray-50 hover:border-gray-300 shadow-sm",title:"Abrir Documentao"},[ue(Je,{icon:"material-symbols:help",size:16}),H[5]||(H[5]=b("span",null,"Ajuda",-1))]),b("button",{onClick:H[2]||(H[2]=(...I)=>ye(l)&&ye(l)(...I)),class:"inline-flex items-center gap-1.5 px-2 py-2 bg-white border border-gray-200 rounded-lg text-gray-700 text-sm font-medium cursor-pointer transition-all hover:bg-gray-50 hover:border-gray-300 shadow-sm",title:`Mudar para modo ${ye(a)?"claro":"escuro"}`},[ue(Je,{icon:ye(a)?"material-symbols:light-mode":"material-symbols:dark-mode",size:16},null,8,["icon"])],8,pO),u.value?(O(),D("button",{key:4,onClick:Y,class:"inline-flex items-center gap-1.5 px-2 py-2 bg-white border border-gray-200 rounded-lg text-gray-700 text-sm font-medium cursor-pointer transition-all hover:bg-gray-50 hover:border-gray-300 shadow-sm",title:"Exportar como Tutorial"},[ue(Je,{icon:"material-symbols:download",size:16})])):we("",!0)]))])])]))}},bO=Mt(vO,[["__scopeId","data-v-24a32255"]]),xO={class:"glass-sidebar fixed top-20 bottom-4 left-4 w-64 backdrop-blur-xl bg-white/70 border border-white/40 rounded-2xl shadow-xl shadow-gray-900/5 z-30 transition-transform duration-300 ease-in-out -translate-x-full lg:translate-x-0 flex flex-col overflow-hidden group"},_O={class:"p-4 border-b border-white/40 relative z-10"},wO={class:"flex-1 overflow-y-auto px-4 pb-4 pt-4 space-y-2 relative z-10"},kO=["onClick"],EO={class:"flex-1 text-sm font-medium"},SO={class:"ml-4 mt-1 space-y-0.5 pb-2"},$O=["draggable","onDragstart","onClick"],CO={class:"flex-1 text-left truncate"},NO={__name:"NodeSidebar",setup(e){const t=Rt(),{addNodes:n,project:o}=gt(),r=de(""),s=de({}),i=de([]);wt(()=>{a()});function a(){try{const p=Yy();i.value=p.map(y=>{const v=qI(y.id).map(E=>({type:E.type,name:E.label,icon:E.icon,description:E.description,color:E.color}));return s.value[y.label]=!1,{name:y.label,icon:y.icon,id:y.id,nodes:v}})}catch{i.value=[]}}const l=ne(()=>r.value?i.value.map(p=>({...p,nodes:p.nodes.filter(y=>y.name.toLowerCase().includes(r.value.toLowerCase())||y.description.toLowerCase().includes(r.value.toLowerCase()))})).filter(p=>p.nodes.length>0):i.value),u=p=>{s.value[p]===void 0?s.value[p]=!0:s.value[p]=!s.value[p]},c=p=>!!(p==="input"&&t.flowValidation.hasInput||p==="output"&&t.flowValidation.hasOutput),d=(p,y)=>{if(y.type==="input"&&t.flowValidation.hasInput){p.preventDefault(),console.warn(" Cannot add Input node: Flow already has an Input node");return}if(y.type==="output"&&t.flowValidation.hasOutput){p.preventDefault(),console.warn(" Cannot add Output node: Flow already has an Output node");return}p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("application/vueflow",JSON.stringify(y))},f=p=>{if(p.type==="input"&&t.flowValidation.hasInput){console.warn(" Cannot add Input node: Flow already has an Input node");return}if(p.type==="output"&&t.flowValidation.hasOutput){console.warn(" Cannot add Output node: Flow already has an Output node");return}const{x:y,y:m}=o({x:window.innerWidth/2,y:window.innerHeight/2}),v=h(p.type,{x:y,y:m});n([v])},h=(p,y)=>{const m={id:`${p}_${Date.now()}`,type:p,position:y,data:{}};switch(p){case"input":m.data={label:"API Input",parameters:[]};break;case"connector":m.data={label:"Data Connector",sourceType:"analytics",analyticsType:"sales",selectedApi:"custom",apiUrl:"",dataPath:"",mockData:Math.floor(Math.random()*100)};break;case"field-extractor":m.data={label:"Field Extractor",selectedFields:[]};break;case"array-processor":m.data={label:"Array Processor",operation:"extract",fieldPath:"",filterValue:""};break;case"add":case"subtract":case"multiply":case"divide":m.data={label:p.charAt(0).toUpperCase()+p.slice(1),operation:p};break;case"output":m.data={label:"My Output",outputFields:[]};break;case"variable":m.data={label:"Variable",mode:"set",variableName:"myVariable"};break;default:m.data={label:p.charAt(0).toUpperCase()+p.slice(1)}}return m};return(p,y)=>(O(),D("div",xO,[y[1]||(y[1]=b("div",{class:"absolute inset-0 rounded-2xl bg-gradient-to-br from-blue-500/5 via-transparent to-cyan-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"},null,-1)),y[2]||(y[2]=b("div",{class:"absolute -bottom-10 -right-10 w-32 h-32 bg-gradient-to-br from-blue-500 to-cyan-500 opacity-5 rounded-full blur-2xl group-hover:opacity-10 transition-opacity duration-500 pointer-events-none"},null,-1)),b("div",_O,[Ue(b("input",{"onUpdate:modelValue":y[0]||(y[0]=m=>r.value=m),type:"text",placeholder:"Buscar nodes...",class:"w-full px-3 py-2 border-2 border-gray-200 rounded-xl text-sm bg-white text-gray-900 transition-all duration-200 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 placeholder-gray-500 tracking-wide shadow-sm"},null,512),[[mt,r.value]])]),b("div",wO,[(O(!0),D(Pe,null,at(l.value,m=>(O(),D("div",{key:m.name,class:"space-y-1"},[b("div",{class:qe(["group flex items-center w-full px-3 py-2.5 cursor-pointer transition-all duration-300 select-none rounded-xl shadow-sm",s.value[m.name]?"bg-blue-500/10 text-blue-600 shadow-md shadow-blue-500/10":"text-gray-700 hover:bg-white/50 hover:shadow-sm hover:-translate-y-0.5"]),onClick:v=>u(m.name)},[ue(Je,{icon:s.value[m.name]?"material-symbols:keyboard-arrow-down":"material-symbols:keyboard-arrow-right",size:16,class:qe(["mr-2 transition-transform duration-200",s.value[m.name]?"text-blue-600":"text-gray-500"])},null,8,["icon","class"]),ue(Je,{icon:m.icon,size:16,class:qe(["w-5 h-5 mr-3 flex-shrink-0 transition-all duration-300",s.value[m.name]?"text-blue-600 scale-110":"text-gray-500 group-hover:scale-110"])},null,8,["icon","class"]),b("span",EO,be(m.name),1),b("span",{class:qe(["text-xs px-2 py-0.5 rounded-full font-medium",s.value[m.name]?"text-blue-700 bg-blue-50 border border-blue-200":"text-gray-600 bg-gray-50 border border-gray-200"])},be(m.nodes.length),3)],10,kO),Ue(b("div",SO,[(O(!0),D(Pe,null,at(m.nodes,v=>(O(),D("div",{key:v.type},[b("button",{class:qe(["group flex items-center w-full px-3 py-2 text-sm rounded-lg transition-all duration-200 bg-white border shadow-sm",c(v.type)?"opacity-50 cursor-not-allowed text-gray-500 border-gray-200":"text-gray-700 border-gray-200 hover:bg-blue-50 hover:border-blue-300 hover:shadow-md"]),draggable:!c(v.type),onDragstart:E=>d(E,v),onClick:E=>f(v)},[ue(Je,{icon:v.icon,class:qe(["w-4 h-4 mr-3 flex-shrink-0 transition-colors",c(v.type)?"text-gray-400":"text-gray-500 group-hover:text-blue-600"])},null,8,["icon","class"]),b("span",CO,be(v.name),1)],42,$O)]))),128))],512),[[sb,s.value[m.name]]])]))),128))])]))}},TO=Mt(NO,[["__scopeId","data-v-7e9c42cb"]]),iv=vg("connection",()=>{const e=de([]),t=de(!1),n=de(null),o=ne(()=>e.value.filter(p=>p.serviceType==="analytics")),r=ne(()=>e.value.filter(p=>p.serviceType==="sheets")),s=ne(()=>o.value.length>0),i=ne(()=>r.value.length>0),a=h=>e.value.find(p=>p.id===h),l=h=>e.value.filter(p=>p.serviceType===h);return{connections:e,loading:t,error:n,getAnalyticsConnections:o,getSheetsConnections:r,hasAnalyticsConnection:s,hasSheetsConnection:i,getConnectionById:a,getConnectionsByType:l,fetchConnections:async h=>{var p;t.value=!0,n.value=null;try{const y=(h==null?void 0:h.baseUrl)||"http://localhost:3001",m=h==null?void 0:h.token;if(!m){e.value=[];return}const v=await fetch(`${y}/api/oauth/connections`,{method:"GET",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});if(!v.ok)throw new Error(`Failed to fetch connections: ${v.status}`);const E=await v.json();let _=((p=E.data)==null?void 0:p.connections)||E.connections||[];const A=[],Y=new Set;for(const j of _){const H=j.id||j._id||j.connectionId;if(!H){A.push(j);continue}j.id||(j.id=H),Y.has(H)||(Y.add(H),A.push(j))}e.value=A}catch(y){n.value=y.message,e.value=[]}finally{t.value=!1}},connectGoogle:async(h,p)=>{var y;t.value=!0,n.value=null;try{const m=(p==null?void 0:p.baseUrl)||"http://localhost:3001",v=p==null?void 0:p.token;if(!v)throw localStorage.getItem("LyntFlow_token")?new Error(" Token no foi passado corretamente. Verifique que flowStore.apiConfig.token est configurado."):new Error(" Token de autenticao no encontrado. Acesse a aplicao com ?accessToken=SEU_TOKEN&flowId=SEU_FLOW_ID");const E=l(h);if(E.length>0){const B=h==="analytics"?"Google Analytics":"Google Sheets",V=E.map(z=>{var g;return z.email||((g=z.providerData)==null?void 0:g.email)||"Conta existente"}).join(", ");if(!window.confirm(`Voc j possui ${E.length} conexo(es) ${B}:

${V}

Deseja reconectar? Isso atualizar a conexo existente se for a mesma conta.`)){t.value=!1;return}}const A={analytics:"analytics",sheets:"sheets"}[h];if(!A)throw new Error(`Tipo de servio desconhecido: ${h}`);const Y=p==null?void 0:p.flowId,j=`${m}/api/oauth/google/authorize?scopes=${A}&purpose=connection&serviceType=${h}&flowId=${Y||""}`,H=await fetch(j,{method:"GET",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});if(!H.ok){let B=`Erro HTTP ${H.status}`;try{const V=await H.json();B=V.message||V.error||B}catch{}throw H.status===404?new Error(" Rota OAuth no encontrada no backend. Verifique se o backend est atualizado e rodando."):H.status===401?new Error(" Token invlido ou expirado. Configure o token no flowStore."):new Error(` Falha ao iniciar OAuth: ${B}`)}const I=await H.json(),L=((y=I.data)==null?void 0:y.authUrl)||I.authUrl;if(!L)throw new Error(" Backend no retornou URL de autorizao. Verifique se a rota /api/oauth/google/authorize est implementada no backend.");window.location.href=L}catch(m){throw n.value=m.message,t.value=!1,m}},revokeConnection:async(h,p)=>{t.value=!0,n.value=null;try{const y=(p==null?void 0:p.baseUrl)||"http://localhost:3001",m=p==null?void 0:p.token;if(!m)throw new Error("Authentication token required");const v=await fetch(`${y}/api/oauth/connections/${h}`,{method:"DELETE",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});if(!v.ok)throw new Error(`Failed to revoke connection: ${v.status}`);const E=await v.json();if(E.success)e.value=e.value.filter(_=>_.id!==h);else throw new Error(E.error||"Failed to revoke connection")}catch(y){throw n.value=y.message,y}finally{t.value=!1}},handleOAuthCallback:h=>{const p=h.get("success")==="true",y=h.get("serviceType"),m=h.get("email"),v=h.get("error");return p&&y&&m?{success:!0,message:`Google ${y==="analytics"?"Analytics":"Sheets"} conectado com sucesso!`,serviceType:y,email:m}:v?{success:!1,message:`Erro ao conectar: ${v}`}:{success:!1,message:"Erro desconhecido ao conectar"}}}}),AO={class:"connection-select space-y-2"},IO={class:"flex items-center gap-2"},OO=["value"],RO=["value"],MO={key:1,class:"flex-1 text-center py-2 bg-gray-50 dark:bg-gray-800 rounded-md border border-dashed border-gray-300 dark:border-gray-600"},DO=["disabled"],PO=["disabled"],VO={class:"mr-2"},zO={__name:"ConnectionSelect",props:{serviceType:{type:String,required:!0,validator:e=>["analytics","sheets"].includes(e)},modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,r=iv(),s=Rt(),i=de(!1),a=de(!1),l=ne(()=>n.serviceType==="analytics"?r.getAnalyticsConnections:r.getSheetsConnections),u=ne(()=>n.serviceType==="analytics"?"Google Analytics":"Google Sheets"),c=h=>{const p=h.target.value;console.log(" ConnectionSelect: Emitindo valor:",{value:p,type:typeof p}),o("update:modelValue",p)},d=async()=>{i.value=!0;try{await r.connectGoogle(n.serviceType,s.apiConfig)}catch(h){alert(`Erro ao conectar: ${h.message}`)}finally{i.value=!1}},f=async()=>{a.value=!0;try{await r.fetchConnections(s.apiConfig)}catch{}finally{a.value=!1}};return wt(async()=>{r.connections.length===0&&await r.fetchConnections(s.apiConfig),console.log(" Conexes disponveis:",l.value.map(h=>({id:h.id,email:h.email,serviceType:h.serviceType})))}),(h,p)=>(O(),D("div",AO,[b("div",IO,[l.value.length>0?(O(),D("select",{key:0,value:e.modelValue,onChange:c,class:"flex-1 px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[p[0]||(p[0]=b("option",{value:""},"Selecione uma conexo...",-1)),(O(!0),D(Pe,null,at(l.value,y=>{var m;return O(),D("option",{key:y.id||y._id||Math.random(),value:y.id||y._id||y.connectionId},be(y.email||y.accountEmail||y.name||`Conexo ${(m=y.id||y._id)==null?void 0:m.substring(0,8)}`)+" "+be(!y.id&&!y._id?" ( SEM ID)":""),9,RO)}),128))],40,OO)):(O(),D("div",MO,[...p[1]||(p[1]=[b("p",{class:"text-xs text-gray-600 dark:text-gray-400"}," Nenhuma conexo disponvel ",-1)])])),l.value.length>0?(O(),D("button",{key:2,onClick:f,type:"button",disabled:a.value,class:qe(["p-2 text-gray-500 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",{"animate-spin":a.value}]),title:"Recarregar conexes"},[...p[2]||(p[2]=[b("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[b("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],10,DO)):we("",!0)]),b("button",{onClick:d,disabled:i.value,type:"button",class:"w-full px-3 py-2 text-sm bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-200 dark:border-blue-800 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[b("span",VO,be(l.value.length>0?"":""),1),st(" "+be(i.value?"Conectando...":`${l.value.length>0?"Adicionar":"Conectar"} ${u.value}`),1)],8,PO)]))}},av=Mt(zO,[["__scopeId","data-v-91c5b68f"]]),HO={class:"property-select space-y-2"},FO={class:"flex items-center gap-2"},LO=["value"],BO=["value"],jO={key:1,class:"flex-1 text-center py-2 bg-gray-50 dark:bg-gray-800 rounded-md border border-gray-300 dark:border-gray-600"},UO={key:2,class:"flex-1 text-center py-2 bg-gray-50 dark:bg-gray-800 rounded-md border border-dashed border-gray-300 dark:border-gray-600"},qO={key:3,class:"flex-1 text-center py-2 bg-yellow-50 dark:bg-yellow-900/20 rounded-md border border-yellow-200 dark:border-yellow-800"},WO=["disabled"],YO={key:0,class:"py-3 px-4 bg-red-50 dark:bg-red-900/20 rounded-md border border-red-200 dark:border-red-800"},GO={class:"text-sm text-red-600 dark:text-red-400 mb-2"},ZO={key:0,class:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded text-xs text-blue-800 dark:text-blue-300"},KO={key:1,class:"mt-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded text-xs text-yellow-800 dark:text-yellow-300"},XO={__name:"PropertySelect",props:{connectionId:{type:String,default:""},modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,r=Rt(),s=de([]),i=de(!1),a=de(!1),l=de(null),u=d=>{o("update:modelValue",d.target.value)},c=async()=>{var d,f,h;if(!n.connectionId){s.value=[];return}i.value=!0,a.value=!0,l.value=null;try{const p=((d=r.apiConfig)==null?void 0:d.baseUrl)||"http://localhost:3001",y=(f=r.apiConfig)==null?void 0:f.token;if(console.log(" Carregando propriedades GA:",{connectionId:n.connectionId,baseUrl:p,hasToken:!!y}),!y)throw new Error("Token de autenticao no encontrado");const m=`${p}/api/connectors/ga/properties?connectionId=${n.connectionId}`;console.log(" Fazendo request para:",m);const v=await fetch(m,{method:"GET",headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"}});if(!v.ok){let _=`Erro HTTP ${v.status}`;try{const A=await v.json();_=A.message||A.error||_}catch{}throw new Error(_)}const E=await v.json();console.log(" Resposta recebida:",E),s.value=((h=E.data)==null?void 0:h.properties)||[],console.log(" Propriedades carregadas:",s.value.length),n.modelValue&&!s.value.find(_=>_.id===n.modelValue)&&o("update:modelValue","")}catch(p){p instanceof Error?l.value=p.message:typeof p=="string"?l.value=p:p&&p.message?l.value=p.message:l.value="Erro ao carregar propriedades. Tente novamente.",s.value=[],console.error("Erro ao carregar propriedades GA:",p)}finally{i.value=!1,a.value=!1}};return Fe(()=>n.connectionId,(d,f)=>{console.log(" ConnectionId mudou:",{old:f,new:d,type:typeof d}),d!==f&&(o("update:modelValue",""),d?c():s.value=[])}),wt(()=>{n.connectionId&&c()}),(d,f)=>(O(),D("div",HO,[b("div",FO,[s.value.length>0&&!i.value?(O(),D("select",{key:0,value:e.modelValue,onChange:u,class:"flex-1 px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[f[0]||(f[0]=b("option",{value:""},"Selecione uma propriedade...",-1)),(O(!0),D(Pe,null,at(s.value,h=>(O(),D("option",{key:h.id,value:h.id},be(h.name)+" ("+be(h.accountName)+") - ID: "+be(h.id),9,BO))),128))],40,LO)):i.value?(O(),D("div",jO,[...f[1]||(f[1]=[b("p",{class:"text-xs text-gray-600 dark:text-gray-400"}," Carregando... ",-1)])])):!i.value&&s.value.length===0&&e.connectionId?(O(),D("div",UO,[...f[2]||(f[2]=[b("p",{class:"text-xs text-gray-600 dark:text-gray-400"}," Nenhuma propriedade encontrada ",-1)])])):e.connectionId?we("",!0):(O(),D("div",qO,[...f[3]||(f[3]=[b("p",{class:"text-xs text-yellow-700 dark:text-yellow-400"}," Conecte uma conta primeiro ",-1)])])),s.value.length>0&&!i.value?(O(),D("button",{key:4,onClick:c,type:"button",disabled:a.value,class:qe(["p-2 text-gray-500 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",{"animate-spin":a.value}]),title:"Recarregar propriedades"},[...f[4]||(f[4]=[b("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[b("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],10,WO)):we("",!0)]),l.value?(O(),D("div",YO,[b("p",GO,be(l.value),1),l.value.includes("no est habilitada")||l.value.includes("has not been used")?(O(),D("div",ZO,[...f[5]||(f[5]=[Qn('<p class="font-semibold mb-2" data-v-de92ecff> Como habilitar a Google Analytics Admin API:</p><ol class="list-decimal list-inside space-y-1 ml-2" data-v-de92ecff><li data-v-de92ecff>Acesse o <strong data-v-de92ecff>Google Cloud Console</strong> no link do erro acima</li><li data-v-de92ecff>Faa login com sua conta Google</li><li data-v-de92ecff>Clique no boto <strong data-v-de92ecff>&quot;ENABLE&quot;</strong> (Ativar)</li><li data-v-de92ecff>Aguarde <strong data-v-de92ecff>5 minutos</strong> para propagao</li><li data-v-de92ecff>Volte aqui e clique em &quot;Tentar novamente&quot;</li></ol><p class="mt-2 text-xs italic" data-v-de92ecff>  Isso  necessrio apenas uma vez. Aps habilitar, voc poder selecionar propriedades automaticamente. </p>',3)])])):l.value.includes("reconectada")||l.value.includes("Permisso")?(O(),D("div",KO,[...f[6]||(f[6]=[Qn('<p class="font-semibold mb-2" data-v-de92ecff> Como reconectar sua conta:</p><ol class="list-decimal list-inside space-y-1 ml-2" data-v-de92ecff><li data-v-de92ecff>V para a pgina de <strong data-v-de92ecff>Integraes</strong></li><li data-v-de92ecff>Encontre sua conta Google Analytics</li><li data-v-de92ecff>Clique em <strong data-v-de92ecff>Desconectar</strong></li><li data-v-de92ecff>Clique em <strong data-v-de92ecff>Conectar Google Analytics</strong> novamente</li><li data-v-de92ecff>Autorize as novas permisses</li><li data-v-de92ecff>Volte aqui e tente novamente</li></ol>',2)])])):we("",!0),b("button",{onClick:c,class:"mt-3 text-xs text-red-700 dark:text-red-400 underline hover:no-underline"},"  Tentar novamente ")])):we("",!0)]))}},JO=Mt(XO,[["__scopeId","data-v-de92ecff"]]),QO={class:"metrics-dimensions-select space-y-2"},e4={key:0,class:"flex flex-wrap gap-1"},t4=["title"],n4=["onClick"],o4={class:"relative"},r4={class:"flex items-center gap-2"},s4={class:"relative flex-1"},i4=["placeholder","disabled","onKeydown"],a4=["disabled"],l4=["disabled"],u4={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-64 overflow-y-auto"},c4={key:0,class:"p-3 text-center text-sm text-gray-500 dark:text-gray-400"},d4={key:1},f4={class:"px-3 py-1.5 bg-gray-50 dark:bg-gray-800 text-xs font-semibold text-gray-700 dark:text-gray-300 sticky top-0"},h4=["onMousedown"],p4=["checked"],g4={class:"flex-1 min-w-0"},m4={class:"text-xs font-medium text-gray-900 dark:text-gray-100 truncate"},y4={class:"text-[11px] text-gray-500 dark:text-gray-400 truncate"},v4={key:1,class:"flex items-center gap-2 px-3 py-2 bg-red-50 dark:bg-red-900/20 rounded-md border border-red-200 dark:border-red-800"},b4={class:"text-xs text-red-600 dark:text-red-400 flex-1"},x4={key:2,class:"text-xs text-gray-500 dark:text-gray-400"},_4={__name:"MetricsDimensionsSelect",props:{type:{type:String,required:!0,validator:e=>["metrics","dimensions"].includes(e)},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,r=Rt(),s=de([]),i=de(!1),a=de(null),l=de(""),u=de(!1),c=de(null);let d=null;const f=ne(()=>n.type==="metrics"?"mtricas":"dimenses"),h=ne(()=>n.modelValue||[]),p=ne(()=>{if(!l.value)return s.value;const S=l.value.toLowerCase();return s.value.filter(z=>z.name.toLowerCase().includes(S)||z.label.toLowerCase().includes(S)||z.description.toLowerCase().includes(S))}),y=ne(()=>{const S={};return p.value.forEach(z=>{const g=z.category||"Other";S[g]||(S[g]=[]),S[g].push(z)}),Object.entries(S).map(([z,g])=>({name:z,items:g})).sort((z,g)=>z.name.localeCompare(g.name))}),m=S=>h.value.includes(S),v=S=>{const z=s.value.find(g=>g.name===S);return z?z.label:S},E=S=>{const z=[...h.value];if(z.includes(S)){const g=z.indexOf(S);z.splice(g,1)}else z.push(S);o("update:modelValue",z),c.value&&c.value.focus()},_=S=>{const z=[...h.value],g=z.indexOf(S);g>-1&&(z.splice(g,1),o("update:modelValue",z))},A=()=>{d&&(clearTimeout(d),d=null),u.value=!0},Y=()=>{u.value=!1,l.value=""},j=()=>{d=setTimeout(()=>{Y()},200)},H=()=>{u.value?Y():(A(),c.value&&c.value.focus())},I=()=>{const S=l.value.trim();if(!S)return;const z=s.value.find(g=>g.name.toLowerCase()===S.toLowerCase()||g.label.toLowerCase()===S.toLowerCase());if(z)E(z.name);else if(y.value.length>0&&y.value[0].items.length>0){const g=y.value[0].items[0];E(g.name)}else L(S);l.value=""},L=S=>{const z=[...h.value];z.includes(S)||(z.push(S),o("update:modelValue",z)),c.value&&c.value.focus()},B=S=>!s.value.find(z=>z.name===S),V=async()=>{var S,z,g,C;i.value=!0,a.value=null;try{const w=((S=r.apiConfig)==null?void 0:S.baseUrl)||"http://localhost:3001",F=(z=r.apiConfig)==null?void 0:z.token;if(!F)throw new Error("Token de autenticao no encontrado");const P=await fetch(`${w}/api/connectors/ga/metadata`,{method:"GET",headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"}});if(!P.ok){let G=`Erro HTTP ${P.status}`;try{const oe=await P.json();G=oe.message||oe.error||G}catch{}throw new Error(G)}const X=await P.json();s.value=n.type==="metrics"?((g=X.data)==null?void 0:g.metrics)||[]:((C=X.data)==null?void 0:C.dimensions)||[]}catch(w){w instanceof Error?a.value=w.message:typeof w=="string"?a.value=w:w&&w.message?a.value=w.message:a.value=`Erro ao carregar ${f.value}`,s.value=[],console.error("Erro ao carregar metadata GA:",w)}finally{i.value=!1}};return wt(()=>{V()}),Fa(()=>{d&&clearTimeout(d)}),(S,z)=>(O(),D("div",QO,[h.value.length>0?(O(),D("div",e4,[(O(!0),D(Pe,null,at(h.value,g=>(O(),D("div",{key:g,class:qe(["inline-flex items-center gap-1 px-2 py-1 text-xs rounded",B(g)?"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200":"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200"]),title:B(g)?"Mtrica/dimenso customizada":""},[b("span",null,be(v(g)),1),b("button",{onClick:C=>_(g),class:"hover:text-red-600 dark:hover:text-red-400 cursor-pointer font-bold",title:"Remover"},"  ",8,n4)],10,t4))),128))])):we("",!0),b("div",o4,[b("div",r4,[b("div",s4,[Ue(b("input",{ref_key:"searchInput",ref:c,"onUpdate:modelValue":z[0]||(z[0]=g=>l.value=g),type:"text",placeholder:i.value?"Carregando...":`Buscar ou digitar ${f.value} customizada...`,disabled:i.value||!!a.value,onFocus:A,onBlur:j,onKeydown:[lr(Y,["escape"]),lr(Un(I,["prevent"]),["enter"])],class:"w-full px-3 py-2 pr-8 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,40,i4),[[mt,l.value]]),b("button",{onMousedown:Un(H,["prevent"]),type:"button",class:qe(["absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-transform",{"rotate-180":u.value}]),disabled:i.value||!!a.value},[...z[1]||(z[1]=[b("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[b("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])],42,a4)]),b("button",{onClick:V,type:"button",disabled:i.value,class:qe(["p-2 text-gray-500 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",{"animate-spin":i.value}]),title:"Recarregar"},[...z[2]||(z[2]=[b("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[b("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],10,l4)]),u.value&&!i.value&&!a.value?(O(),D("div",u4,[y.value.length===0?(O(),D("div",c4,be(l.value?`Nenhum resultado para "${l.value}"`:`Nenhum ${f.value} disponvel`),1)):(O(),D("div",d4,[(O(!0),D(Pe,null,at(y.value,g=>(O(),D("div",{key:g.name,class:"border-b border-gray-200 dark:border-gray-700 last:border-b-0"},[b("div",f4,be(g.name),1),b("div",null,[(O(!0),D(Pe,null,at(g.items,C=>(O(),D("button",{key:C.name,onMousedown:Un(w=>E(C.name),["prevent"]),type:"button",class:qe(["w-full text-left px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-start gap-2 border-b border-gray-100 dark:border-gray-800 last:border-b-0",{"bg-blue-50 dark:bg-blue-900/20":m(C.name)}])},[b("input",{type:"checkbox",checked:m(C.name),class:"mt-0.5 w-3.5 h-3.5 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 pointer-events-none",tabindex:"-1"},null,8,p4),b("div",g4,[b("div",m4,be(C.label),1),b("div",y4,be(C.description),1)])],42,h4))),128))])]))),128))]))])):we("",!0)]),a.value?(O(),D("div",v4,[z[3]||(z[3]=b("svg",{class:"w-4 h-4 text-red-600 dark:text-red-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[b("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),b("p",b4,be(a.value),1)])):we("",!0),!i.value&&!a.value&&s.value.length>0?(O(),D("p",x4,be(s.value.length)+" "+be(f.value)+" disponveis  Pressione Enter para adicionar customizadas ",1)):we("",!0)]))}},Jh=Mt(_4,[["__scopeId","data-v-42d40d8e"]]),w4={class:"generic-properties space-y-4"},k4={key:0,class:"mb-4"},E4=["disabled"],S4={key:0,class:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700"},$4={class:"text-xs text-gray-600 dark:text-gray-400 overflow-auto max-h-32"},C4={key:0,class:"space-y-1"},N4={class:"flex items-center justify-between"},T4={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},A4={key:0,class:"text-red-500"},I4={key:0,class:"flex items-center gap-1"},O4=["checked","onChange"],R4=["onUpdate:modelValue","placeholder","disabled"],M4={key:1,class:"space-y-1"},D4={class:"flex items-center justify-between"},P4={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},V4={key:0,class:"text-red-500"},z4={key:0,class:"flex items-center gap-1"},H4=["checked","onChange"],F4=["onUpdate:modelValue","placeholder","disabled"],L4={key:2,class:"space-y-1"},B4={class:"flex items-center justify-between"},j4={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},U4={key:0,class:"text-red-500"},q4={key:0,class:"flex items-center gap-1"},W4=["checked","onChange"],Y4=["onUpdate:modelValue","disabled"],G4=["value"],Z4={key:3,class:"space-y-1"},K4={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},X4={key:0,class:"text-red-500"},J4={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mb-2"},Q4={key:4,class:"space-y-1"},eR={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},tR={key:0,class:"text-red-500"},nR={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mb-2"},oR={key:5,class:"space-y-1"},rR={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},sR={key:0,class:"text-red-500"},iR={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mb-2"},aR={key:6,class:"space-y-1"},lR={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},uR={key:0,class:"text-red-500"},cR={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mb-2"},dR={key:7,class:"space-y-1"},fR={class:"flex items-center justify-between"},hR={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},pR={key:0,class:"text-red-500"},gR={key:0,class:"flex items-center gap-1"},mR=["checked","onChange"],yR=["onUpdate:modelValue","placeholder","disabled"],vR={key:8,class:"space-y-1"},bR={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},xR={key:0,class:"text-red-500"},_R={class:"flex items-center gap-2"},wR=["onUpdate:modelValue"],kR=["onUpdate:modelValue","placeholder"],ER={key:9,class:"space-y-1"},SR={class:"flex items-center justify-between"},$R={class:"flex items-center space-x-2"},CR=["onUpdate:modelValue","disabled"],NR={class:"text-xs font-medium text-gray-700 dark:text-gray-300"},TR={key:0,class:"flex items-center gap-1"},AR=["checked","onChange"],IR={key:10,class:"space-y-1"},OR={class:"flex items-center justify-between"},RR={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},MR={key:0,class:"text-red-500"},DR={key:0,class:"flex items-center gap-1"},PR=["checked","onChange"],VR=["onUpdate:modelValue","placeholder","disabled"],zR={key:11,class:"space-y-1"},HR={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},FR={key:0,class:"text-red-500"},LR={class:"flex gap-2"},BR=["onUpdate:modelValue"],jR=["value"],UR=["onUpdate:modelValue","placeholder"],qR={key:12,class:"space-y-2"},WR={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},YR={key:0,class:"text-xs text-gray-500 dark:text-gray-400 italic mb-2"},GR={key:1,class:"space-y-2 mb-3"},ZR={class:"flex items-center justify-between"},KR={class:"text-xs font-medium text-gray-700 dark:text-gray-300"},XR=["onClick"],JR=["onUpdate:modelValue"],QR=["onUpdate:modelValue"],e5=["onUpdate:modelValue"],t5=["onUpdate:modelValue","step"],n5={key:2,class:"flex items-center gap-2 px-2 py-1"},o5=["onUpdate:modelValue"],r5={class:"text-xs text-gray-600 dark:text-gray-400"},s5={key:3,class:"space-y-2"},i5=["onUpdate:modelValue"],a5=["onUpdate:modelValue"],l5=["onUpdate:modelValue","placeholder"],u5={class:"flex items-center gap-2"},c5=["onUpdate:modelValue"],d5=["onClick"],f5={key:13,class:"space-y-1"},h5={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},p5={key:0,class:"text-red-500"},g5={key:14,class:"space-y-2"},m5={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},y5={key:0,class:"text-red-500"},v5={key:0,class:"text-xs text-gray-500 dark:text-gray-400 italic mb-2"},b5={key:1,class:"space-y-1 mb-2"},x5={class:"text-xs font-medium text-gray-600 dark:text-gray-400"},_5={class:"flex flex-wrap gap-1"},w5=["onClick","title"],k5=["title"],E5=["onClick"],S5={class:"space-y-1"},$5={key:0,class:"max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded p-2 space-y-1"},C5=["onClick","disabled"],N5={key:1,class:"text-xs text-gray-500 dark:text-gray-400 italic p-2 border border-dashed border-gray-300 dark:border-gray-600 rounded"},T5={key:1,class:"text-center py-8"},A5={__name:"GenericProperties",props:{nodeId:{type:String,required:!0},localData:{type:Object,default:()=>({})}},emits:["update-node-data"],setup(e,{emit:t}){const n=e,o=t,r=Rt(),s=de({...n.localData}),i=de(!1),a=de(null),l=ne(()=>{const V=r.nodes.find(g=>g.id===n.nodeId);return!V||V.type!=="variable"?[]:r.nodes.filter(g=>{var C;return g.type==="variable"&&g.id!==n.nodeId&&((C=r.nodeData[g.id])==null?void 0:C.mode)==="set"}).map(g=>{var C;return(C=r.nodeData[g.id])==null?void 0:C.variableName}).filter(g=>g&&g.trim()!=="").filter((g,C,w)=>w.indexOf(g)===C).sort()}),u=ne(()=>{if(!r.nodes.find(w=>w.id===n.nodeId))return[];const S=r.edges.filter(w=>w.target===n.nodeId&&w.targetHandle==="data-input"&&w.edgeType!=="flow");if(S.length===0)return[];const z=S[0],g=r.executionResults[z.source];if(!g)return[];const C=typeof g=="object"&&g!==null&&z.sourceHandle in g?g[z.sourceHandle]:g;return c(C)}),c=(V,S="")=>{const z=[];if(!V||typeof V!="object")return z;if(Array.isArray(V))return V.length>0?c(V[0],S):z;for(const g in V){const C=S?`${S}.${g}`:g;if(z.push(C),V[g]&&typeof V[g]=="object"&&!Array.isArray(V[g])){const w=c(V[g],C);z.push(...w)}}return z},d=ne(()=>{const V=r.nodes.find(S=>S.id===n.nodeId);return V?Jo(V.type):null}),f=ne(()=>{var V;return((V=d.value)==null?void 0:V.config)||{}}),h=(V,S)=>{if(!V.condition)return!0;for(const[z,g]of Object.entries(V.condition)){const C=s.value[z];if(Array.isArray(g)){if(!g.includes(C))return!1}else if(C!==g)return!1}return!0},p=ne(()=>{const V={};for(const[S,z]of Object.entries(f.value))h(z)&&(V[S]=z);return V});Fe(()=>n.localData,V=>{s.value={...V}},{deep:!0,immediate:!0}),wt(()=>{const V=f.value;for(const S in V)s.value[S]===void 0&&V[S].default!==void 0&&(s.value[S]=V[S].default);v()});const y=async()=>{var V,S;i.value=!0,a.value=null;try{const z=r.nodes.find(oe=>oe.id===n.nodeId);if(!z)throw new Error("Node not found");const g={...s.value},C={apiConfig:{baseUrl:(V=r.apiConfig)==null?void 0:V.baseUrl,token:((S=r.apiConfig)==null?void 0:S.token)||""}},w=r.getNodeDataInputs(n.nodeId);r.updateNodeData(n.nodeId,g);const F={...z,data:g},P=await r.executeNode(F,w);a.value=P;const X=Bi(F,P);r.setExecutionResult(n.nodeId,X);const G=r.edges.filter(oe=>{var ge;return oe.source===n.nodeId&&(oe.edgeType==="data"||!((ge=oe.sourceHandle)!=null&&ge.startsWith("exec-")))});for(const oe of G)await r.propagateDataToTarget(oe)}catch(z){a.value={error:z.message}}finally{i.value=!1}},m=V=>V?V.error?`Error: ${V.error}`:JSON.stringify(V,null,2):"",v=()=>{const V=f.value;for(const[S,z]of Object.entries(V))z.mapTo&&s.value[S]!==void 0&&(s.value[z.mapTo]=s.value[S]);r.updateNodeData(n.nodeId,s.value),o("update-node-data")},E=(V,S)=>{var C;const z=f.value[V];(z==null?void 0:z.singleSelect)===!0?s.value[V]=[S]:(s.value[V]||(s.value[V]=[]),s.value[V].includes(S)||s.value[V].push(S)),((C=d.value)==null?void 0:C.type)==="field-extractor"&&_(S),v()},_=V=>{if(!r.nodes.find(P=>P.id===n.nodeId))return;const z=r.edges.filter(P=>P.target===n.nodeId&&P.targetHandle==="data-input"&&P.edgeType!=="flow");if(z.length===0)return;const g=z[0],C=r.executionResults[g.source];if(!C)return;const w=hI(C,V),F=wa(w);s.value.fieldTypes||(s.value.fieldTypes={}),s.value.fieldTypes[V]=F,v()},A=(V,S)=>{if(s.value[V]){const z=s.value[V][S];s.value[V].splice(S,1),s.value.fieldOutputsEnabled&&z&&delete s.value.fieldOutputsEnabled[z],s.value.fieldTypes&&z&&delete s.value.fieldTypes[z],v()}},Y=V=>{s.value[V]||(s.value[V]=[]),s.value[V].push({name:`param${s.value[V].length+1}`,type:"any",required:!1,defaultValue:null,dateFormat:"DD/MM/YYYY"}),v()},j=(V,S)=>{s.value[V]&&(s.value[V].splice(S,1),v())},H=V=>{s.value.fieldOutputsEnabled||(s.value.fieldOutputsEnabled={});const S=s.value.fieldOutputsEnabled[V];s.value.fieldOutputsEnabled[V]=S===!1,v()},I=V=>s.value.fieldOutputsEnabled?s.value.fieldOutputsEnabled[V]!==!1:!0,L=V=>{var S;return((S=s.value.exposedFields)==null?void 0:S[V])!==void 0},B=(V,S)=>{s.value.exposedFields||(s.value.exposedFields={}),s.value.exposedFields[V]?delete s.value.exposedFields[V]:s.value.exposedFields[V]={label:S.label,type:S.type||"any",required:S.required||!1},v()};return(V,S)=>{var z;return O(),D("div",w4,[(z=d.value)!=null&&z.executable?(O(),D("div",k4,[b("button",{onClick:y,disabled:i.value,class:"w-full px-4 py-2.5 flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white text-sm font-medium rounded-md cursor-pointer transition-colors disabled:cursor-not-allowed"},[ue(Je,{icon:i.value?"material-symbols:hourglass-empty":"material-symbols:play-arrow",size:16},null,8,["icon"]),st(" "+be(i.value?"Executing...":"Execute Node"),1)],8,E4),a.value?(O(),D("div",S4,[S[0]||(S[0]=b("div",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Result:",-1)),b("pre",$4,be(m(a.value)),1)])):we("",!0)])):we("",!0),(O(!0),D(Pe,null,at(p.value,(g,C)=>{var w,F,P,X,G,oe,ge;return O(),D("div",{key:C,class:"form-group"},[g.type==="string"?(O(),D("div",C4,[b("div",N4,[b("label",T4,[st(be(g.label)+" ",1),g.required?(O(),D("span",A4,"*")):we("",!0)]),((w=d.value)==null?void 0:w.type)!=="input"?(O(),D("div",I4,[b("input",{type:"checkbox",checked:L(C),onChange:Z=>B(C,g),class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500",title:"Expor como input"},null,40,O4),S[1]||(S[1]=b("span",{class:"text-[10px] text-gray-500 dark:text-gray-400"},"Expor",-1))])):we("",!0)]),Ue(b("input",{type:"text","onUpdate:modelValue":Z=>s.value[C]=Z,onInput:v,placeholder:g.placeholder||"",disabled:L(C),class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,40,R4),[[mt,s.value[C]]])])):g.type==="textarea"?(O(),D("div",M4,[b("div",D4,[b("label",P4,[st(be(g.label)+" ",1),g.required?(O(),D("span",V4,"*")):we("",!0)]),((F=d.value)==null?void 0:F.type)!=="input"?(O(),D("div",z4,[b("input",{type:"checkbox",checked:L(C),onChange:Z=>B(C,g),class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500",title:"Expor como input"},null,40,H4),S[2]||(S[2]=b("span",{class:"text-[10px] text-gray-500 dark:text-gray-400"},"Expor",-1))])):we("",!0)]),Ue(b("textarea",{"onUpdate:modelValue":Z=>s.value[C]=Z,onInput:v,placeholder:g.placeholder||"",disabled:L(C),rows:"4",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,40,F4),[[mt,s.value[C]]])])):g.type==="select"?(O(),D("div",L4,[b("div",B4,[b("label",j4,[st(be(g.label)+" ",1),g.required?(O(),D("span",U4,"*")):we("",!0)]),((P=d.value)==null?void 0:P.type)!=="input"?(O(),D("div",q4,[b("input",{type:"checkbox",checked:L(C),onChange:Z=>B(C,g),class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500",title:"Expor como input"},null,40,W4),S[3]||(S[3]=b("span",{class:"text-[10px] text-gray-500 dark:text-gray-400"},"Expor",-1))])):we("",!0)]),Ue(b("select",{"onUpdate:modelValue":Z=>s.value[C]=Z,onChange:v,disabled:L(C),class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[(O(!0),D(Pe,null,at(g.options,Z=>(O(),D("option",{key:Z.value,value:Z.value},be(Z.label),9,G4))),128))],40,Y4),[[rn,s.value[C]]])])):g.type==="connection-select"?(O(),D("div",Z4,[b("label",K4,[st(be(g.label)+" ",1),g.required?(O(),D("span",X4,"*")):we("",!0)]),g.description?(O(),D("p",J4,be(g.description),1)):we("",!0),ue(av,{"service-type":g.serviceType,modelValue:s.value[C],"onUpdate:modelValue":[Z=>s.value[C]=Z,v]},null,8,["service-type","modelValue","onUpdate:modelValue"])])):g.type==="property-select"?(O(),D("div",Q4,[b("label",eR,[st(be(g.label)+" ",1),g.required?(O(),D("span",tR,"*")):we("",!0)]),g.description?(O(),D("p",nR,be(g.description),1)):we("",!0),ue(JO,{"connection-id":s.value[g.dependsOn]||"",modelValue:s.value[C],"onUpdate:modelValue":[Z=>s.value[C]=Z,v]},null,8,["connection-id","modelValue","onUpdate:modelValue"])])):g.type==="metrics-select"?(O(),D("div",oR,[b("label",rR,[st(be(g.label)+" ",1),g.required?(O(),D("span",sR,"*")):we("",!0)]),g.description?(O(),D("p",iR,be(g.description),1)):we("",!0),ue(Jh,{type:"metrics",modelValue:s.value[C],"onUpdate:modelValue":[Z=>s.value[C]=Z,v]},null,8,["modelValue","onUpdate:modelValue"])])):g.type==="dimensions-select"?(O(),D("div",aR,[b("label",lR,[st(be(g.label)+" ",1),g.required?(O(),D("span",uR,"*")):we("",!0)]),g.description?(O(),D("p",cR,be(g.description),1)):we("",!0),ue(Jh,{type:"dimensions",modelValue:s.value[C],"onUpdate:modelValue":[Z=>s.value[C]=Z,v]},null,8,["modelValue","onUpdate:modelValue"])])):g.type==="number"?(O(),D("div",dR,[b("div",fR,[b("label",hR,[st(be(g.label)+" ",1),g.required?(O(),D("span",pR,"*")):we("",!0)]),((X=d.value)==null?void 0:X.type)!=="input"?(O(),D("div",gR,[b("input",{type:"checkbox",checked:L(C),onChange:Z=>B(C,g),class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500",title:"Expor como input"},null,40,mR),S[4]||(S[4]=b("span",{class:"text-[10px] text-gray-500 dark:text-gray-400"},"Expor",-1))])):we("",!0)]),Ue(b("input",{type:"number","onUpdate:modelValue":Z=>s.value[C]=Z,onInput:v,placeholder:g.placeholder||"",disabled:L(C),class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,40,yR),[[mt,s.value[C],void 0,{number:!0}]])])):g.type==="color"?(O(),D("div",vR,[b("label",bR,[st(be(g.label)+" ",1),g.required?(O(),D("span",xR,"*")):we("",!0)]),b("div",_R,[Ue(b("input",{type:"color","onUpdate:modelValue":Z=>s.value[C]=Z,onInput:v,class:"w-12 h-10 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,wR),[[mt,s.value[C]]]),Ue(b("input",{type:"text","onUpdate:modelValue":Z=>s.value[C]=Z,onInput:v,placeholder:g.placeholder||"#000000",class:"flex-1 px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono"},null,40,kR),[[mt,s.value[C]]])])])):g.type==="boolean"?(O(),D("div",ER,[b("div",SR,[b("div",$R,[Ue(b("input",{type:"checkbox","onUpdate:modelValue":Z=>s.value[C]=Z,onChange:v,disabled:L(C),class:"w-4 h-4 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,40,CR),[[ms,s.value[C]]]),b("label",NR,be(g.label),1)]),((G=d.value)==null?void 0:G.type)!=="input"?(O(),D("div",TR,[b("input",{type:"checkbox",checked:L(C),onChange:Z=>B(C,g),class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500",title:"Expor como input"},null,40,AR),S[5]||(S[5]=b("span",{class:"text-[10px] text-gray-500 dark:text-gray-400"},"Expor",-1))])):we("",!0)])])):g.type==="date"?(O(),D("div",IR,[b("div",OR,[b("label",RR,[st(be(g.label)+" ",1),g.required?(O(),D("span",MR,"*")):we("",!0)]),((oe=d.value)==null?void 0:oe.type)!=="input"?(O(),D("div",DR,[b("input",{type:"checkbox",checked:L(C),onChange:Z=>B(C,g),class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500",title:"Expor como input"},null,40,PR),S[6]||(S[6]=b("span",{class:"text-[10px] text-gray-500 dark:text-gray-400"},"Expor",-1))])):we("",!0)]),Ue(b("input",{type:"date","onUpdate:modelValue":Z=>s.value[C]=Z,onInput:v,placeholder:g.placeholder||"",disabled:L(C),class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,40,VR),[[mt,s.value[C]]])])):g.type==="variableSelector"?(O(),D("div",zR,[b("label",HR,[st(be(g.label)+" ",1),g.required?(O(),D("span",FR,"*")):we("",!0)]),b("div",LR,[Ue(b("select",{"onUpdate:modelValue":Z=>s.value[C]=Z,onChange:v,class:"flex-1 px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[S[7]||(S[7]=b("option",{value:""},"-- Select or type below --",-1)),(O(!0),D(Pe,null,at(l.value,Z=>(O(),D("option",{key:Z,value:Z},be(Z),9,jR))),128))],40,BR),[[rn,s.value[C]]])]),g.allowCustom?Ue((O(),D("input",{key:0,type:"text","onUpdate:modelValue":Z=>s.value[C]=Z,onInput:v,placeholder:g.placeholder||"Or type custom name",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,UR)),[[mt,s.value[C]]]):we("",!0)])):g.type==="array"&&C==="parameters"&&((ge=d.value)==null?void 0:ge.type)==="input"?(O(),D("div",qR,[b("label",WR,be(g.label),1),g.description?(O(),D("div",YR,be(g.description),1)):we("",!0),s.value[C]&&s.value[C].length>0?(O(),D("div",GR,[(O(!0),D(Pe,null,at(s.value[C],(Z,ce)=>(O(),D("div",{key:ce,class:"p-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md space-y-2"},[b("div",ZR,[b("span",KR,"Parameter "+be(ce+1),1),b("button",{onClick:pe=>j(C,ce),class:"text-red-500 hover:text-red-700 dark:hover:text-red-400",title:"Remove parameter"},[ue(Je,{icon:"material-symbols:delete",size:16})],8,XR)]),Ue(b("input",{type:"text","onUpdate:modelValue":pe=>Z.name=pe,onInput:v,placeholder:"Parameter name",class:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},null,40,JR),[[mt,Z.name]]),Ue(b("select",{"onUpdate:modelValue":pe=>Z.type=pe,onChange:v,class:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},[...S[8]||(S[8]=[Qn('<option value="any" data-v-d306f2ee>Any</option><option value="string" data-v-d306f2ee>String</option><option value="number" data-v-d306f2ee>Number</option><option value="integer" data-v-d306f2ee>Integer</option><option value="float" data-v-d306f2ee>Float</option><option value="boolean" data-v-d306f2ee>Boolean</option><option value="object" data-v-d306f2ee>Object</option><option value="array" data-v-d306f2ee>Array</option><option value="date" data-v-d306f2ee>Date</option>',9)])],40,QR),[[rn,Z.type]]),Z.type==="string"||Z.type==="any"?Ue((O(),D("input",{key:0,type:"text","onUpdate:modelValue":pe=>Z.defaultValue=pe,onInput:v,placeholder:"Default value (optional)",class:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},null,40,e5)),[[mt,Z.defaultValue]]):Z.type==="number"||Z.type==="integer"||Z.type==="float"?Ue((O(),D("input",{key:1,type:"number","onUpdate:modelValue":pe=>Z.defaultValue=pe,onInput:v,step:Z.type==="integer"?"1":"any",placeholder:"Default value (optional)",class:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},null,40,t5)),[[mt,Z.defaultValue,void 0,{number:!0}]]):Z.type==="boolean"?(O(),D("div",n5,[Ue(b("input",{type:"checkbox","onUpdate:modelValue":pe=>Z.defaultValue=pe,onChange:v,class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"},null,40,o5),[[ms,Z.defaultValue]]),b("label",r5,"Default: "+be(Z.defaultValue?"true":"false"),1)])):Z.type==="date"?(O(),D("div",s5,[Ue(b("input",{type:"date","onUpdate:modelValue":pe=>Z.defaultValue=pe,onInput:v,class:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},null,40,i5),[[mt,Z.defaultValue]]),Ue(b("select",{"onUpdate:modelValue":pe=>Z.dateFormat=pe,onChange:v,class:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},[...S[9]||(S[9]=[Qn('<option value="DD/MM/YYYY" data-v-d306f2ee>DD/MM/YYYY (Brasil)</option><option value="MM/DD/YYYY" data-v-d306f2ee>MM/DD/YYYY (EUA)</option><option value="YYYY-MM-DD" data-v-d306f2ee>YYYY-MM-DD (ISO)</option><option value="DD-MM-YYYY" data-v-d306f2ee>DD-MM-YYYY</option><option value="YYYY/MM/DD" data-v-d306f2ee>YYYY/MM/DD</option>',5)])],40,a5),[[rn,Z.dateFormat]])])):Z.type==="array"||Z.type==="object"?Ue((O(),D("textarea",{key:4,"onUpdate:modelValue":pe=>Z.defaultValue=pe,onInput:v,placeholder:Z.type==="array"?"[1, 2, 3]":"{key: value}",rows:"2",class:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 font-mono"},null,40,l5)),[[mt,Z.defaultValue]]):we("",!0),b("div",u5,[Ue(b("input",{type:"checkbox","onUpdate:modelValue":pe=>Z.required=pe,onChange:v,class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"},null,40,c5),[[ms,Z.required]]),S[10]||(S[10]=b("label",{class:"text-xs text-gray-600 dark:text-gray-400"},"Required",-1))])]))),128))])):we("",!0),b("button",{onClick:Z=>Y(C),class:"w-full px-3 py-2 flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white text-xs font-medium rounded-md transition-colors"},[ue(Je,{icon:"material-symbols:add",size:14}),S[11]||(S[11]=st(" Add Parameter ",-1))],8,d5)])):g.type==="array"?(O(),D("div",f5,[b("label",h5,[st(be(g.label)+" ",1),g.required?(O(),D("span",p5,"*")):we("",!0)]),S[12]||(S[12]=b("div",{class:"text-xs text-gray-500 dark:text-gray-400 italic"}," Complex array editing - see node documentation ",-1))])):g.type==="fieldSelector"?(O(),D("div",g5,[b("label",m5,[st(be(g.label)+" ",1),g.required?(O(),D("span",y5,"*")):we("",!0)]),g.description?(O(),D("div",v5,be(g.description),1)):we("",!0),s.value[C]&&s.value[C].length>0?(O(),D("div",b5,[b("div",x5,be(g.singleSelect?"Selected Field:":"Selected Fields:"),1),b("div",_5,[(O(!0),D(Pe,null,at(s.value[C],(Z,ce)=>{var pe;return O(),D("div",{key:ce,class:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded"},[((pe=d.value)==null?void 0:pe.type)==="field-extractor"&&!g.singleSelect?(O(),D("button",{key:0,onClick:xe=>H(Z),class:"hover:opacity-70 cursor-pointer",title:I(Z)?"Disable individual output":"Enable individual output"},[ue(Je,{icon:I(Z)?"material-symbols:visibility":"material-symbols:visibility-off",size:14},null,8,["icon"])],8,w5)):we("",!0),b("span",null,be(Z),1),s.value.fieldTypes&&s.value.fieldTypes[Z]?(O(),D("span",{key:1,class:"text-[10px] px-1 py-0.5 bg-white dark:bg-gray-800 rounded opacity-70",title:`Type: ${s.value.fieldTypes[Z]}`},be(s.value.fieldTypes[Z]),9,k5)):we("",!0),b("button",{onClick:xe=>A(C,ce),class:"hover:text-red-600 dark:hover:text-red-400 cursor-pointer"},"  ",8,E5)])}),128))])])):we("",!0),b("div",S5,[S[13]||(S[13]=b("div",{class:"text-xs font-medium text-gray-600 dark:text-gray-400"},"Available Fields:",-1)),u.value.length>0?(O(),D("div",$5,[(O(!0),D(Pe,null,at(u.value,Z=>{var ce,pe,xe;return O(),D("button",{key:Z,onClick:K=>E(C,Z),disabled:(ce=s.value[C])==null?void 0:ce.includes(Z),class:qe(["block w-full text-left px-2 py-1 text-xs rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",{"bg-gray-50 dark:bg-gray-800":!((pe=s.value[C])!=null&&pe.includes(Z)),"bg-gray-200 dark:bg-gray-600":(xe=s.value[C])==null?void 0:xe.includes(Z)}])},be(Z),11,C5)}),128))])):(O(),D("div",N5," No data connected. Connect a data source to see available fields. "))])])):we("",!0)])}),128)),Object.keys(p.value).length===0?(O(),D("div",T5,[...S[14]||(S[14]=[b("p",{class:"text-sm text-gray-500 dark:text-gray-400 italic"}," No configuration options available for this node. ",-1)])])):we("",!0)])}}},I5=Mt(A5,[["__scopeId","data-v-d306f2ee"]]),O5={class:"output-properties space-y-4"},R5={class:"dynamic-inputs-section"},M5={key:0,class:"space-y-2 mb-3"},D5=["onUpdate:modelValue"],P5=["onUpdate:modelValue"],V5=["onClick"],z5={key:1,class:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm border border-dashed border-gray-300 dark:border-gray-600 rounded"},H5={class:"destination-section"},F5={key:0,class:"destination-config space-y-3"},L5={key:0},B5={key:1,class:"space-y-3"},j5={class:"flex items-center"},U5={key:2,class:"space-y-3"},q5={key:3,class:"space-y-3"},W5={key:4,class:"space-y-3"},Y5={__name:"OutputProperties",props:{nodeId:{type:String,required:!0}},setup(e){var h,p;const t=e,n=Rt(),o=de({destination:"display",...n.nodeData[t.nodeId]}),r=de(((h=n.nodeData[t.nodeId])==null?void 0:h.dynamicInputs)||[]),s=de(((p=n.nodeData[t.nodeId])==null?void 0:p.destinationConfig)||i(o.value.destination));function i(y){return{apiResponse:{format:"wrapped"},webhook:{url:"",method:"POST",headers:"{}",retry:!0},email:{to:"",subject:"LyntFlow Report",format:"html"},googleSheets:{connectionId:"",spreadsheetUrl:"",sheetName:"Sheet1",writeMode:"append"},download:{filename:"output",format:"json"}}[y]||{}}function a(){const y={id:`input-${Date.now()}`,key:"",type:"any"};r.value.push(y),u()}function l(y){r.value.splice(y,1),u()}function u(){const y=r.value.filter(m=>m.key).map(m=>({id:`data-${m.key}`,label:m.key,type:m.type||"any",position:"left"}));n.updateNodeData(t.nodeId,{dynamicInputs:[...r.value],dynamicHandles:{inputs:y,_updated:Date.now()}})}function c(){const y=r.value.filter(m=>m.key).map(m=>({id:`data-${m.key}`,label:m.key,type:m.type||"any",position:"left"}));n.updateNodeData(t.nodeId,{dynamicHandles:{inputs:y,_updated:Date.now()}})}function d(){n.updateNodeData(t.nodeId,{destination:o.value.destination}),s.value=i(o.value.destination),f()}function f(){n.updateNodeData(t.nodeId,{destinationConfig:s.value})}return Fe(()=>o.value.destination,y=>{s.value=i(y),f()}),wt(()=>{r.value.length>0&&c()}),(y,m)=>(O(),D("div",O5,[b("div",R5,[b("div",{class:"flex items-center justify-between mb-3"},[m[15]||(m[15]=b("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Inputs",-1)),b("button",{onClick:a,class:"px-2 py-1 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors"},"  Adicionar Input ")]),r.value.length>0?(O(),D("div",M5,[(O(!0),D(Pe,null,at(r.value,(v,E)=>(O(),D("div",{key:v.id,class:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded"},[Ue(b("input",{"onUpdate:modelValue":_=>v.key=_,onInput:u,placeholder:"Nome do input",class:"flex-1 px-2 py-1 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,D5),[[mt,v.key]]),Ue(b("select",{"onUpdate:modelValue":_=>v.type=_,onChange:u,class:"px-2 py-1 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded"},[...m[16]||(m[16]=[Qn('<option value="any" data-v-5f488c03>Any</option><option value="string" data-v-5f488c03>String</option><option value="number" data-v-5f488c03>Number</option><option value="boolean" data-v-5f488c03>Boolean</option><option value="object" data-v-5f488c03>Object</option><option value="array" data-v-5f488c03>Array</option>',6)])],40,P5),[[rn,v.type]]),b("button",{onClick:_=>l(E),class:"px-2 py-1 text-xs text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors"},"  ",8,V5)]))),128))])):(O(),D("div",z5," Nenhum input adicionado "))]),b("div",H5,[m[18]||(m[18]=b("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Destination ",-1)),Ue(b("select",{"onUpdate:modelValue":m[0]||(m[0]=v=>o.value.destination=v),onChange:d,class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[...m[17]||(m[17]=[Qn('<option value="display" data-v-5f488c03>Display Only</option><option value="apiResponse" data-v-5f488c03>API Response</option><option value="webhook" data-v-5f488c03>Webhook</option><option value="email" data-v-5f488c03>Email</option><option value="googleSheets" data-v-5f488c03>Google Sheets</option><option value="download" data-v-5f488c03>Download</option>',6)])],544),[[rn,o.value.destination]])]),o.value.destination&&o.value.destination!=="display"?(O(),D("div",F5,[m[38]||(m[38]=b("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Configurao do Destination",-1)),o.value.destination==="apiResponse"?(O(),D("div",L5,[m[20]||(m[20]=b("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Formato de Resposta ",-1)),Ue(b("select",{"onUpdate:modelValue":m[1]||(m[1]=v=>s.value.format=v),onChange:f,class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},[...m[19]||(m[19]=[b("option",{value:"data_only"},"S dados",-1),b("option",{value:"wrapped"},"{ success, data }",-1),b("option",{value:"full"},"{ success, flowId, executedAt, data }",-1)])],544),[[rn,s.value.format]])])):o.value.destination==="webhook"?(O(),D("div",B5,[b("div",null,[m[21]||(m[21]=b("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},[st(" URL "),b("span",{class:"text-red-500"},"*")],-1)),Ue(b("input",{"onUpdate:modelValue":m[2]||(m[2]=v=>s.value.url=v),onInput:f,placeholder:"https://...",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},null,544),[[mt,s.value.url]])]),b("div",null,[m[23]||(m[23]=b("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Mtodo HTTP ",-1)),Ue(b("select",{"onUpdate:modelValue":m[3]||(m[3]=v=>s.value.method=v),onChange:f,class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},[...m[22]||(m[22]=[b("option",{value:"POST"},"POST",-1),b("option",{value:"PUT"},"PUT",-1),b("option",{value:"PATCH"},"PATCH",-1)])],544),[[rn,s.value.method]])]),b("div",null,[m[24]||(m[24]=b("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Headers (JSON) ",-1)),Ue(b("textarea",{"onUpdate:modelValue":m[4]||(m[4]=v=>s.value.headers=v),onInput:f,rows:"3",placeholder:'{"Authorization": "Bearer ..."}',class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md font-mono"},null,544),[[mt,s.value.headers]])]),b("div",null,[b("label",j5,[Ue(b("input",{type:"checkbox","onUpdate:modelValue":m[5]||(m[5]=v=>s.value.retry=v),onChange:f,class:"w-4 h-4 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded"},null,544),[[ms,s.value.retry]]),m[25]||(m[25]=b("span",{class:"ml-2 text-xs text-gray-700 dark:text-gray-300"},"Retry em caso de erro",-1))])])])):o.value.destination==="email"?(O(),D("div",U5,[b("div",null,[m[26]||(m[26]=b("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},[st(" Para (emails separados por vrgula) "),b("span",{class:"text-red-500"},"*")],-1)),Ue(b("input",{"onUpdate:modelValue":m[6]||(m[6]=v=>s.value.to=v),onInput:f,placeholder:"user@example.com, other@example.com",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},null,544),[[mt,s.value.to]])]),b("div",null,[m[27]||(m[27]=b("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Assunto ",-1)),Ue(b("input",{"onUpdate:modelValue":m[7]||(m[7]=v=>s.value.subject=v),onInput:f,placeholder:"Relatrio LyntFlow",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},null,544),[[mt,s.value.subject]])]),b("div",null,[m[29]||(m[29]=b("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Formato ",-1)),Ue(b("select",{"onUpdate:modelValue":m[8]||(m[8]=v=>s.value.format=v),onChange:f,class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},[...m[28]||(m[28]=[b("option",{value:"html"},"HTML (tabela)",-1),b("option",{value:"json"},"JSON (anexo)",-1),b("option",{value:"csv"},"CSV (anexo)",-1)])],544),[[rn,s.value.format]])])])):o.value.destination==="googleSheets"?(O(),D("div",q5,[b("div",null,[m[30]||(m[30]=b("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},[st(" Conexo Google "),b("span",{class:"text-red-500"},"*")],-1)),ue(av,{"service-type":"sheets",modelValue:s.value.connectionId,"onUpdate:modelValue":[m[9]||(m[9]=v=>s.value.connectionId=v),f]},null,8,["modelValue"])]),b("div",null,[m[31]||(m[31]=b("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},[st(" URL da Planilha "),b("span",{class:"text-red-500"},"*")],-1)),Ue(b("input",{"onUpdate:modelValue":m[10]||(m[10]=v=>s.value.spreadsheetUrl=v),onInput:f,placeholder:"https://docs.google.com/spreadsheets/d/...",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},null,544),[[mt,s.value.spreadsheetUrl]])]),b("div",null,[m[32]||(m[32]=b("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Nome da Aba ",-1)),Ue(b("input",{"onUpdate:modelValue":m[11]||(m[11]=v=>s.value.sheetName=v),onInput:f,placeholder:"Sheet1",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},null,544),[[mt,s.value.sheetName]])]),b("div",null,[m[34]||(m[34]=b("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Modo de Escrita ",-1)),Ue(b("select",{"onUpdate:modelValue":m[12]||(m[12]=v=>s.value.writeMode=v),onChange:f,class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},[...m[33]||(m[33]=[b("option",{value:"append"},"Adicionar no final",-1),b("option",{value:"replace"},"Substituir tudo",-1),b("option",{value:"update"},"Atualizar a partir de A1",-1)])],544),[[rn,s.value.writeMode]])])])):o.value.destination==="download"?(O(),D("div",W5,[b("div",null,[m[35]||(m[35]=b("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Nome do Arquivo ",-1)),Ue(b("input",{"onUpdate:modelValue":m[13]||(m[13]=v=>s.value.filename=v),onInput:f,placeholder:"output",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},null,544),[[mt,s.value.filename]])]),b("div",null,[m[37]||(m[37]=b("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Formato ",-1)),Ue(b("select",{"onUpdate:modelValue":m[14]||(m[14]=v=>s.value.format=v),onChange:f,class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},[...m[36]||(m[36]=[b("option",{value:"json"},"JSON",-1),b("option",{value:"csv"},"CSV",-1),b("option",{value:"excel"},"Excel (via CSV)",-1)])],544),[[rn,s.value.format]])])])):we("",!0)])):we("",!0)]))}},G5=Mt(Y5,[["__scopeId","data-v-5f488c03"]]),Z5={class:"array-merge-properties space-y-4"},K5={class:"dynamic-inputs-section"},X5={key:0,class:"space-y-2 mb-3"},J5={class:"text-xs text-gray-500 dark:text-gray-400 w-8"},Q5=["onUpdate:modelValue"],eM=["onClick","disabled"],tM={key:1,class:"w-8"},nM={class:"remove-duplicates-section"},oM={class:"flex items-center cursor-pointer"},rM={__name:"ArrayMergeProperties",props:{nodeId:{type:String,required:!0}},setup(e){var d;const t=e,n=Rt(),o=de({removeDuplicates:!1,...n.nodeData[t.nodeId]}),r=de(((d=n.nodeData[t.nodeId])==null?void 0:d.arrayInputs)||s());function s(){return[{id:"array1",label:"Array 1"},{id:"array2",label:"Array 2"}]}function i(){const f=r.value.length+1,h={id:`array${f}`,label:`Array ${f}`};r.value.push(h),l()}function a(f){r.value.length<=2||(r.value.splice(f,1),l())}function l(){n.updateNodeData(t.nodeId,{arrayInputs:r.value}),u()}function u(){const f=r.value.map(h=>({id:`data-${h.id}`,label:h.label||h.id,type:"array",position:"left",required:!1}));n.updateNodeData(t.nodeId,{dynamicHandles:{inputs:f}})}function c(){n.updateNodeData(t.nodeId,{removeDuplicates:o.value.removeDuplicates})}return wt(()=>{r.value.length>0&&u()}),(f,h)=>(O(),D("div",Z5,[b("div",K5,[b("div",{class:"flex items-center justify-between mb-3"},[h[1]||(h[1]=b("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Arrays para Mesclar",-1)),b("button",{onClick:i,class:"px-2 py-1 text-xs bg-teal-600 hover:bg-teal-700 text-white rounded transition-colors"},"  Adicionar Array ")]),r.value.length>0?(O(),D("div",X5,[(O(!0),D(Pe,null,at(r.value,(p,y)=>(O(),D("div",{key:p.id,class:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded"},[b("span",J5,be(y+1),1),Ue(b("input",{"onUpdate:modelValue":m=>p.label=m,onInput:l,placeholder:"Nome do array",class:"flex-1 px-2 py-1 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-teal-500"},null,40,Q5),[[mt,p.label]]),r.value.length>2?(O(),D("button",{key:0,onClick:m=>a(y),class:"px-2 py-1 text-xs text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",disabled:r.value.length<=2},"  ",8,eM)):(O(),D("span",tM))]))),128))])):we("",!0),h[2]||(h[2]=b("div",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"}," Mnimo de 2 arrays ",-1))]),b("div",nM,[b("label",oM,[Ue(b("input",{type:"checkbox","onUpdate:modelValue":h[0]||(h[0]=p=>o.value.removeDuplicates=p),onChange:c,class:"w-4 h-4 text-teal-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-teal-500"},null,544),[[ms,o.value.removeDuplicates]]),h[3]||(h[3]=b("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},"Remover Duplicados",-1))]),h[4]||(h[4]=b("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6"}," Remove itens duplicados do array resultante ",-1))])]))}},sM=Mt(rM,[["__scopeId","data-v-36d74172"]]),iM={class:"object-create-properties space-y-4"},aM={class:"dynamic-properties-section"},lM={key:0,class:"space-y-2 mb-3"},uM={class:"text-xs text-gray-500 dark:text-gray-400 w-8"},cM=["onUpdate:modelValue"],dM=["onClick","disabled"],fM={key:1,class:"w-8"},hM={__name:"ObjectCreateProperties",props:{nodeId:{type:String,required:!0}},setup(e){var u;const t=e,n=Rt(),o=de(((u=n.nodeData[t.nodeId])==null?void 0:u.properties)||r());function r(){return[{id:"prop1",key:"key1"}]}function s(){const c=o.value.length+1;o.value.push({id:`prop${c}`,key:`key${c}`}),a()}function i(c){o.value.length<=1||(o.value.splice(c,1),a())}function a(){n.updateNodeData(t.nodeId,{properties:o.value}),l()}function l(){const c=o.value.map(d=>({id:`data-${d.id}`,label:d.key||d.id,type:"any",position:"left",required:!1}));n.updateNodeData(t.nodeId,{dynamicHandles:{inputs:c}})}return wt(()=>{o.value.length>0&&l()}),(c,d)=>(O(),D("div",iM,[b("div",aM,[b("div",{class:"flex items-center justify-between mb-3"},[d[0]||(d[0]=b("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Propriedades do Objeto",-1)),b("button",{onClick:s,class:"px-2 py-1 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors"},"  Adicionar Propriedade ")]),o.value.length>0?(O(),D("div",lM,[(O(!0),D(Pe,null,at(o.value,(f,h)=>(O(),D("div",{key:f.id,class:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded"},[b("span",uM,be(h+1),1),Ue(b("input",{"onUpdate:modelValue":p=>f.key=p,onInput:a,placeholder:"Nome da chave",class:"flex-1 px-2 py-1 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,cM),[[mt,f.key]]),o.value.length>1?(O(),D("button",{key:0,onClick:p=>i(h),class:"px-2 py-1 text-xs text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",disabled:o.value.length<=1},"  ",8,dM)):(O(),D("span",fM))]))),128))])):we("",!0),d[1]||(d[1]=b("div",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},"Mnimo de 1 propriedade",-1))])]))}},pM={class:"array-create-properties space-y-4"},gM={class:"dynamic-items-section"},mM={key:0,class:"space-y-2 mb-3"},yM={class:"text-xs text-gray-500 dark:text-gray-400 w-8"},vM=["onUpdate:modelValue"],bM=["onClick","disabled"],xM={key:1,class:"w-8"},_M={__name:"ArrayCreateProperties",props:{nodeId:{type:String,required:!0}},setup(e){var u;const t=e,n=Rt(),o=de(((u=n.nodeData[t.nodeId])==null?void 0:u.items)||r());function r(){return[{id:"item1",label:"Item 1"}]}function s(){const c=o.value.length+1;o.value.push({id:`item${c}`,label:`Item ${c}`}),a()}function i(c){o.value.length<=1||(o.value.splice(c,1),a())}function a(){n.updateNodeData(t.nodeId,{items:o.value}),l()}function l(){const c=o.value.map(d=>({id:`data-${d.id}`,label:d.label||d.id,type:"any",position:"left",required:!1}));n.updateNodeData(t.nodeId,{dynamicHandles:{inputs:c}})}return wt(()=>{o.value.length>0&&l()}),(c,d)=>(O(),D("div",pM,[b("div",gM,[b("div",{class:"flex items-center justify-between mb-3"},[d[0]||(d[0]=b("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Itens do Array",-1)),b("button",{onClick:s,class:"px-2 py-1 text-xs bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors"},"  Adicionar Item ")]),o.value.length>0?(O(),D("div",mM,[(O(!0),D(Pe,null,at(o.value,(f,h)=>(O(),D("div",{key:f.id,class:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded"},[b("span",yM,be(h+1),1),Ue(b("input",{"onUpdate:modelValue":p=>f.label=p,onInput:a,placeholder:"Nome do item",class:"flex-1 px-2 py-1 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-purple-500"},null,40,vM),[[mt,f.label]]),o.value.length>1?(O(),D("button",{key:0,onClick:p=>i(h),class:"px-2 py-1 text-xs text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",disabled:o.value.length<=1},"  ",8,bM)):(O(),D("span",xM))]))),128))])):we("",!0),d[1]||(d[1]=b("div",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},"Mnimo de 1 item",-1))])]))}},wM={key:0,class:"w-80 h-full glass-sidebar backdrop-blur-xl bg-white/30 dark:bg-gray-900/30 border-l border-white/20 dark:border-gray-700/20 flex flex-col transition-all duration-300"},kM={class:"h-full flex flex-col"},EM={class:"flex items-center p-4 border-b border-white/20 dark:border-gray-700/20 bg-white/10 dark:bg-gray-800/10"},SM={class:"w-10 h-10 flex items-center justify-center bg-white/60 dark:bg-gray-900/60 border border-white/30 dark:border-gray-700/30 rounded-lg mr-3"},$M={class:"flex-1"},CM={class:"text-base font-semibold text-gray-900 dark:text-gray-100 m-0 tracking-wide"},NM={class:"text-xs text-gray-600 dark:text-gray-400 m-0 mt-0.5 tracking-wide"},TM={class:"flex-1 overflow-y-auto p-4"},AM={key:1,class:"mb-6"},IM={class:"p-4 border-t border-white/20 dark:border-gray-700/20"},OM={__name:"PropertiesPanel",props:{selectedNode:{type:Object,default:null}},emits:["close","delete"],setup(e,{emit:t}){const n=e,o=t,r=Rt(),s=ne(()=>n.selectedNode?n.selectedNode.type==="output"?G5:n.selectedNode.type==="array-merge"?sM:n.selectedNode.type==="object-create"?hM:n.selectedNode.type==="array-create"?_M:I5:null),i=ne(()=>{if(!n.selectedNode)return{};const d=r.nodeData[n.selectedNode.id],f=d?{...d}:{};return n.selectedNode.type==="field-extractor"&&(f.selectedFields||(f.selectedFields=[]),f.fieldOutputsEnabled||(f.fieldOutputsEnabled={}),f.fieldTypes||(f.fieldTypes={})),n.selectedNode.type==="output"&&!f.outputFields&&(f.outputFields=[]),f}),a=()=>{},l=()=>{n.selectedNode&&(r.removeNode(n.selectedNode.id),o("delete"))},u=d=>({input:"material-symbols:input",connector:"material-symbols:cable","field-extractor":"material-symbols:filter-alt","array-processor":"material-symbols:list",add:"material-symbols:add",subtract:"material-symbols:remove",multiply:"material-symbols:close",divide:"material-symbols:percent",variable:"material-symbols:bookmark",output:"material-symbols:output"})[d]||"material-symbols:view-in-ar",c=d=>({input:"Parmetros de Entrada",connector:"Conector de Dados","field-extractor":"Extrator de Campos","array-processor":"Processador de Array",add:"Adio",subtract:"Subtrao",multiply:"Multiplicao",divide:"Diviso",variable:"Varivel",output:"Sada"})[d]||d;return(d,f)=>{var h;return e.selectedNode?(O(),D("div",wM,[b("div",kM,[b("div",EM,[b("div",SM,[ue(Je,{icon:u(e.selectedNode.type),size:20,class:"text-brand-purple dark:text-brand-purple"},null,8,["icon"])]),b("div",$M,[b("h3",CM,be(((h=e.selectedNode.data)==null?void 0:h.label)||"Node"),1),b("p",NM,be(c(e.selectedNode.type)),1)]),b("button",{onClick:f[0]||(f[0]=p=>d.$emit("close")),class:"w-8 h-8 flex items-center justify-center bg-transparent border-none rounded-md text-gray-600 dark:text-gray-400 cursor-pointer transition-all duration-200 hover:bg-white/40 dark:hover:bg-gray-900/40 hover:brightness-110 hover:text-gray-800 dark:hover:text-gray-200"},[ue(Je,{icon:"material-symbols:close",size:16})])]),b("div",TM,[s.value?(O(),ut(yo(s.value),{key:0,"node-id":e.selectedNode.id,"local-data":i.value,onUpdateNodeData:a},null,40,["node-id","local-data"])):e.selectedNode?(O(),D("div",AM,[...f[1]||(f[1]=[b("div",{class:"p-4 text-center text-xs text-gray-600 dark:text-gray-400 italic bg-white/40 dark:bg-gray-800/40 rounded-md border border-dashed border-white/30 dark:border-gray-700/30 tracking-wide"}," Nenhuma propriedade especfica disponvel para este tipo de node. ",-1)])])):we("",!0)]),b("div",IM,[b("button",{onClick:l,class:"w-full px-2.5 py-2.5 flex items-center justify-center gap-2 bg-white/60 dark:bg-gray-900/60 hover:bg-white/80 dark:hover:bg-gray-800/80 border border-brand-red hover:brightness-110 rounded-md text-brand-red text-sm font-medium cursor-pointer transition-all tracking-wide"},[ue(Je,{icon:"material-symbols:delete",size:16}),f[2]||(f[2]=st(" Deletar Node ",-1))])])])])):we("",!0)}}},RM=Mt(OM,[["__scopeId","data-v-a635d920"]]),MM={class:"px-2 py-2"},DM={class:"relative"},PM=["onKeydown"],VM={class:"px-3 py-1 text-11 font-semibold text-flow-text-muted dark:text-flow-text-muted-dark uppercase tracking-wider"},zM={class:"flex flex-col max-h-[400px] overflow-y-auto"},HM={key:0,class:"px-3 py-4 text-center text-sm text-flow-text-muted dark:text-flow-text-muted-dark"},FM=["onClick","onMouseenter"],LM={class:"flex-1 min-w-0"},BM=["innerHTML"],jM={key:0,class:"text-xs text-flow-text-muted dark:text-flow-text-muted-dark truncate"},UM={class:"text-10 text-flow-text-muted dark:text-flow-text-muted-dark uppercase tracking-wide"},qM={__name:"ContextMenu",props:{show:{type:Boolean,required:!0},position:{type:Object,required:!0},nodes:{type:Array,required:!0}},emits:["create-node","close"],setup(e,{emit:t}){const n=e,o=t,r=Rt(),s=de(null),i=de(""),a=de(0),l=ne(()=>{var m;return n.nodes&&n.nodes.length>0?n.nodes:((m=r.nodeCatalog)==null?void 0:m.nodes)||[]}),u=ne(()=>{var m;return((m=r.nodeCatalog)==null?void 0:m.categories)||[]}),c=ne(()=>{if(!i.value.trim())return l.value;const m=i.value.toLowerCase();return l.value.filter(E=>{var H,I,L;const _=(H=E.label)==null?void 0:H.toLowerCase().includes(m),A=(I=E.description)==null?void 0:I.toLowerCase().includes(m),Y=d(E.category).toLowerCase().includes(m),j=(L=E.type)==null?void 0:L.toLowerCase().includes(m);return _||A||Y||j})});function d(m){const v=u.value.find(E=>E.id===m);return(v==null?void 0:v.label)||m||""}function f(m){if(!i.value.trim()||!m)return m;const v=i.value,E=new RegExp(`(${v})`,"gi");return m.replace(E,'<mark class="bg-yellow-200 dark:bg-yellow-700 px-0.5 rounded">$1</mark>')}function h(){a.value<c.value.length-1&&a.value++}function p(){a.value>0&&a.value--}function y(){const m=c.value[a.value];m&&o("create-node",m.type)}return Fe(()=>n.show,(m,v)=>{m?Bt(()=>{var E;(E=s.value)==null||E.focus()}):(i.value="",a.value=0)}),Fe(i,()=>{a.value=0}),(m,v)=>e.show?(O(),D("div",{key:0,style:vt({position:"fixed",left:e.position.x+"px",top:e.position.y+"px",zIndex:99999,backgroundColor:"white",border:"3px solid red"}),class:"rounded-lg shadow-2xl p-2 min-w-[280px] max-w-[400px]",onClick:v[2]||(v[2]=Un(()=>{},["stop"]))},[b("div",MM,[b("div",DM,[ue(Je,{icon:"material-symbols:search",size:14,class:"absolute left-2 top-1/2 -translate-y-1/2 text-flow-text-muted dark:text-flow-text-muted-dark"}),Ue(b("input",{ref_key:"searchInput",ref:s,"onUpdate:modelValue":v[0]||(v[0]=E=>i.value=E),type:"text",placeholder:"Buscar nodes...",class:"w-full pl-8 pr-3 py-1.5 text-sm bg-white dark:bg-gray-700 border border-flow-border dark:border-flow-border-dark rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-flow-text dark:text-flow-text-dark",onKeydown:[lr(Un(h,["prevent"]),["down"]),lr(Un(p,["prevent"]),["up"]),lr(Un(y,["prevent"]),["enter"]),v[1]||(v[1]=lr(E=>m.$emit("close"),["esc"]))]},null,40,PM),[[mt,i.value]])])]),b("div",VM,be(i.value?`${c.value.length} encontrado(s)`:"Quick Add"),1),b("div",zM,[c.value.length===0?(O(),D("div",HM,' Nenhum node encontrado para "'+be(i.value)+'" ',1)):we("",!0),(O(!0),D(Pe,null,at(c.value,(E,_)=>(O(),D("button",{key:E.type,onClick:A=>m.$emit("create-node",E.type),onMouseenter:A=>a.value=_,class:qe(["flex items-center gap-2.5 px-3 py-2 bg-transparent border-none rounded text-flow-text-secondary dark:text-flow-text-secondary-dark text-sm text-left cursor-pointer transition-all duration-150",_===a.value?"bg-blue-100 dark:bg-blue-900/30 scale-[1.02]":"hover:bg-flow-surface-hover dark:hover:bg-flow-surface-hover-dark hover:scale-[1.02]"])},[b("div",{class:"w-6 h-6 rounded flex items-center justify-center flex-shrink-0",style:vt({backgroundColor:E.color+"20",color:E.color})},[ue(Je,{icon:E.icon,size:14},null,8,["icon"])],4),b("div",LM,[b("div",{class:"font-medium",innerHTML:f(E.label)},null,8,BM),E.description?(O(),D("div",jM,be(E.description),1)):we("",!0)]),b("div",UM,be(d(E.category)),1)],42,FM))),128))]),v[3]||(v[3]=b("div",{class:"px-3 py-1.5 border-t border-flow-border dark:border-flow-border-dark text-10 text-flow-text-muted dark:text-flow-text-muted-dark"},[b("span",{class:"inline-flex items-center gap-1"},[b("kbd",{class:"px-1.5 py-0.5 bg-white dark:bg-gray-700 border border-flow-border rounded text-9"},""),st(" navegar "),b("kbd",{class:"px-1.5 py-0.5 bg-white dark:bg-gray-700 border border-flow-border rounded text-9 ml-2"},"Enter"),st(" selecionar ")])],-1))],4)):we("",!0)}};function WM(e,t){const n=Rt();return{dynamicHandles:ne(()=>{var l,u,c,d,f;if(!n.nodes.find(h=>h.id===e))return[];const s=n.nodeData[e];if(!s)return[];const i=[],a=t.value||t;if(a==="field-extractor"){const h=s.selectedFields||[],p=s.fieldOutputsEnabled||{},y=s.fieldTypes||{};let m="any";const v=n.edges.filter(E=>E.target===e&&E.targetHandle==="data-input"&&E.edgeType!=="flow");if(v.length>0){const E=n.executionResults[v[0].source];if(E&&v[0].sourceHandle in E){const _=E[v[0].sourceHandle];Array.isArray(_)?m="array":typeof _=="object"&&_!==null&&(m="object")}}i.push({id:"data-out",label:"Extracted Data",type:m,position:"right"}),h.length>1&&i.push({id:"all-data",label:"All Extracted Data",type:"object",position:"right"}),h.forEach(E=>{const _=`field-${E.replace(/\./g,"-")}`,A=p[E]!==!1,Y=y[E]||"any";A&&i.push({id:_,label:E,type:Y,position:"right"})})}if(a==="output"){const h=s.dynamicInputs||[],p=((l=s.dynamicHandles)==null?void 0:l.inputs)||[];(u=s.dynamicHandles)==null||u._updated,p.length>0?p.forEach(y=>{i.push({...y,position:"left"})}):h.length>0&&h.forEach(y=>{y.key&&i.push({id:`data-${y.key}`,label:y.key,type:y.type||"any",position:"left"})})}if(a==="array-merge"){const h=((c=s.dynamicHandles)==null?void 0:c.inputs)||[];h.length>0?h.forEach(p=>{i.push({...p,position:"left"})}):(s.arrayInputs||[{id:"array1",label:"Array 1"},{id:"array2",label:"Array 2"}]).forEach(y=>{i.push({id:`data-${y.id}`,label:y.label||y.id,type:"array",position:"left",required:!1})})}if(a==="object-create"){const h=((d=s.dynamicHandles)==null?void 0:d.inputs)||[];h.length>0?h.forEach(p=>{i.push({...p,position:"left"})}):(s.properties||[{id:"prop1",key:"key1"}]).forEach(y=>{i.push({id:`data-${y.id}`,label:y.key||y.id,type:"any",position:"left",required:!1})})}if(a==="array-create"){const h=((f=s.dynamicHandles)==null?void 0:f.inputs)||[];h.length>0?h.forEach(p=>{i.push({...p,position:"left"})}):(s.items||[{id:"item1",label:"Item 1"}]).forEach(y=>{i.push({id:`data-${y.id}`,label:y.label||y.id,type:"any",position:"left",required:!1})})}if(a==="input"&&(s.parameters||[]).forEach((p,y)=>{i.push({id:`param-output-${y}`,label:p.name||`Parameter ${y+1}`,type:p.type||"any",position:"right",required:p.required||!1})}),a==="string-ops"&&s.operation==="template"){const h=s.templateString||"",p=/\{([^}]+)\}/g,y=new Set;let m;for(;(m=p.exec(h))!==null;)y.add(m[1]);y.forEach(v=>{i.push({id:v,label:v,type:"any",position:"left",required:!1})})}return a!=="input"&&s.exposedFields&&Object.entries(s.exposedFields).forEach(([h,p])=>{i.push({id:`exposed-${h}`,label:p.label||h,type:p.type||"any",position:"left",required:p.required||!1})}),i})}}const YM={"data-input":"#3b82f6","logic-control":"#a855f7",operations:"#22c55e","data-processing":"#f97316",debug:"#6b7280",organization:"#6b7280",sources:"#3b82f6",io:"#3b82f6",storage:"#3b82f6",constants:"#3b82f6",comparison:"#a855f7",logic:"#a855f7",iteration:"#a855f7",math:"#22c55e",string:"#22c55e",conversion:"#22c55e",processors:"#f97316","array-processors":"#f97316","object-processors":"#f97316"};function GM(e){return YM[e]||"#3b82f6"}const ZM={__name:"DataHandle",props:{type:{type:String,required:!0,validator:e=>["source","target"].includes(e)},position:{type:String,required:!0},id:{type:String,required:!0},dataType:{type:String,default:"any"},color:{type:String,default:null},top:{type:String,default:"50%"}},setup(e){const t=e,n=ne(()=>t.type==="target"?1:1/0),o=ne(()=>t.color?t.color:_a(t.dataType)),r=ne(()=>({top:t.top,[t.type==="source"?"right":"left"]:t.type==="source"?"-10px":"-7px",background:o.value,borderColor:o.value,zIndex:20,pointerEvents:"auto"}));return(s,i)=>(O(),ut(ye($o),{type:e.type,position:e.position,id:e.id,style:vt(r.value),"max-connections":n.value,class:"data-handle-minimal"},null,8,["type","position","id","style","max-connections"]))}},Qh=Mt(ZM,[["__scopeId","data-v-885728db"]]),KM={__name:"ExecHandleInput",props:{position:{type:String,required:!0},id:{type:String,required:!0},top:{type:String,default:"12px"}},setup(e){const t=e,n=ne(()=>({top:t.top,left:"-7px",background:"#9ca3af",borderColor:"#9ca3af",zIndex:10,pointerEvents:"auto"}));return(o,r)=>(O(),ut(ye($o),{type:"target",position:e.position,id:e.id,style:vt(n.value),connectable:!0,"max-connections":1/0,class:"exec-handle-input"},null,8,["position","id","style"]))}},XM=Mt(KM,[["__scopeId","data-v-de0d7a93"]]),JM={__name:"ExecHandleOutput",props:{position:{type:String,required:!0},id:{type:String,required:!0},top:{type:String,default:"12px"}},setup(e){const t=e,n=ne(()=>({top:t.top,right:"-10px",background:"#9ca3af",borderColor:"#9ca3af",zIndex:10,pointerEvents:"auto"}));return(o,r)=>(O(),ut(ye($o),{type:"source",position:e.position,id:e.id,style:vt(n.value),connectable:!0,"max-connections":1,class:"exec-handle-output"},null,8,["position","id","style"]))}},ep=Mt(JM,[["__scopeId","data-v-bead03cb"]]),QM={class:"node-row header-row border-b border-gray-200 dark:border-gray-700"},eD={class:"handle-cell handle-left nodrag"},tD={class:"content-cell px-3 py-2"},nD={class:"flex items-center gap-2"},oD={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},rD={class:"handle-cell handle-right nodrag"},sD={key:0},iD={key:1,class:"flex flex-col gap-1"},aD={class:"text-[10px] text-gray-600 dark:text-gray-400"},lD={key:0,class:"data-section"},uD={class:"node-row"},cD={class:"handle-cell handle-left nodrag"},dD={class:"content-cell"},fD={class:"content-split"},hD={class:"content-left"},pD={class:"label-list"},gD=["title"],mD={class:"text-xs text-gray-600 dark:text-gray-400"},yD={class:"content-right"},vD={class:"label-list"},bD={class:"text-xs text-gray-600 dark:text-gray-400"},xD=["title"],_D={class:"handle-cell handle-right nodrag"},wD={__name:"GenericNode",props:{id:{type:String,required:!0},data:{type:Object,default:()=>({})},selected:{type:Boolean,default:!1}},setup(e){const t=e,n=Rt(),o=ne(()=>{const I=n.nodes.find(L=>L.id===t.id);return I==null?void 0:I.type}),r=ne(()=>{const I=n.nodes.find(L=>L.id===t.id);return I?Jo(I.type):null}),s=ne(()=>t.selected),i=ne(()=>n.executingNodes.has(t.id)),a=ne(()=>n.executedNodes.has(t.id)),l=ne(()=>n.errorNodes.has(t.id)),u=ne(()=>{var L;const I=(L=r.value)==null?void 0:L.category;return I?GM(I):"#3b82f6"});ne(()=>n.executionResults[t.id]);const c=ne(()=>n.nodes.find(I=>I.id===t.id)),d=ne(()=>{const I=r.value;if(!I)return null;if(I.dynamicHandles&&c.value){let L="mode";const B=I.dynamicHandles.mode;I.dynamicHandles[B]||(L=B);const V=n.nodeData[t.id],S=(V==null?void 0:V[L])||B;return I.dynamicHandles[S]||I.handles}return I.handles}),f=ne(()=>{var L;const I=d.value;return((L=I==null?void 0:I.inputs)==null?void 0:L.execution)&&I.inputs.execution.length>0});ne(()=>{var L;const I=d.value;return((L=I==null?void 0:I.outputs)==null?void 0:L.execution)&&I.outputs.execution.length>0});const h=ne(()=>{var L;const I=d.value;return((L=I==null?void 0:I.outputs)==null?void 0:L.execution)||[]}),p=ne(()=>{var z;n.edges.length;const I=y.value.filter(g=>g.position==="left"),L=d.value,B=((z=L==null?void 0:L.inputs)==null?void 0:z.data)||[],V=n.nodeData[t.id],S=B.map(g=>{if(g.dynamic){const C=wo(o.value,{...V,_nodeId:t.id},g.id,"target",n);return{...g,type:C}}return o.value==="variable"?{...g,type:E(g.id,"target")}:g});return o.value==="string-ops"&&(V==null?void 0:V.operation)==="template"||o.value==="output"||o.value==="array-merge"||o.value==="object-create"||o.value==="array-create"?I:[...S,...I]}),{dynamicHandles:y}=WM(t.id,o),m=ne(()=>{var V;if(n.edges.length,n.savedDetectedTypes[t.id],o.value==="field-extractor"||o.value==="input")return y.value;const I=d.value,L=((V=I==null?void 0:I.outputs)==null?void 0:V.data)||[],B=n.nodeData[t.id];return L.map(S=>{if(S.dynamic){const g=wo(o.value,{...B,_nodeId:t.id},S.id,"source",n);return{...S,type:g}}return(o.value==="variable"||o.value==="array-slice")&&S.wildcard?{...S,type:E(S.id,"source")}:["array-filter","array-sort","array-distinct","array-map","array-groupby","array-merge"].includes(o.value)&&["array","any"].includes(S.type)?{...S,type:v()}:S})}),v=()=>{const I=n.edges.filter(L=>L.target===t.id&&L.targetHandle==="data-input"&&L.edgeType!=="flow");if(I.length>0){const L=n.executionResults[I[0].source];if(L&&I[0].sourceHandle in L){const B=L[I[0].sourceHandle];if(Array.isArray(B))return"array";if(typeof B=="object"&&B!==null)return"object";if(typeof B=="number")return"number";if(typeof B=="string")return"string";if(typeof B=="boolean")return"boolean"}}return"any"},E=(I,L)=>{if(o.value==="array-slice"&&L==="source"&&I==="data-out"){const z=n.nodeData[t.id],g=(z==null?void 0:z.operation)||"first";if(["take","skip","slice"].includes(g))return"array";const C=n.edges.filter(w=>w.target===t.id&&w.targetHandle==="data-input"&&w.edgeType!=="flow");if(C.length>0){const w=n.executionResults[C[0].source];if(w&&C[0].sourceHandle in w){const F=w[C[0].sourceHandle];if(Array.isArray(F)&&F.length>0){const P=F[0];if(typeof P=="object"&&P!==null)return"object";if(typeof P=="number")return"number";if(typeof P=="string")return"string";if(typeof P=="boolean")return"boolean"}}}return"any"}if(o.value!=="variable")return"any";const B=n.nodeData[t.id],V=B==null?void 0:B.variableName,S=(B==null?void 0:B.mode)||"get";if(L==="source"&&I==="data-out"){if(S==="set"){const z=n.edges.filter(g=>g.target===t.id&&g.targetHandle==="data-input"&&g.edgeType!=="flow");if(z.length>0){const g=n.nodes.find(C=>C.id===z[0].source);if(g)return _(g,z[0].sourceHandle)}}if(S==="get"&&V){const z=n.nodes.filter(g=>{var C,w;return g.type==="variable"&&g.id!==t.id&&((C=n.nodeData[g.id])==null?void 0:C.mode)==="set"&&((w=n.nodeData[g.id])==null?void 0:w.variableName)===V});for(const g of z){const C=n.edges.filter(w=>w.target===g.id&&w.targetHandle==="data-input"&&w.edgeType!=="flow");if(C.length>0){const w=n.nodes.find(F=>F.id===C[0].source);if(w)return _(w,C[0].sourceHandle)}}}}if(L==="target"&&I==="data-input"){const z=n.edges.filter(g=>g.source===t.id&&g.sourceHandle==="data-out"&&g.edgeType!=="flow");if(z.length>0){const g=n.nodes.find(C=>C.id===z[0].target);if(g)return _(g,z[0].targetHandle)}}return"any"},_=(I,L)=>{const B=n.nodeData[I.id];if(!B)return"any";const V={...B,_nodeId:I.id};return wo(I.type,V,L,"source",n)},A=()=>{const I=n.executionResults[t.id],L=n.savedDetectedTypes[t.id]||{},B=n.edges.filter(g=>g.target===t.id&&g.targetHandle==="exec-in"&&g.edgeType==="flow"),V=n.edges.filter(g=>g.source===t.id&&g.sourceHandle==="exec-out"&&g.edgeType==="flow"),S={};p.value.forEach(g=>{const C=n.edges.filter(w=>w.target===t.id&&w.targetHandle===g.id&&w.edgeType!=="flow");if(C.length>0){const w=C[0],F=n.executionResults[w.source],P=n.savedDetectedTypes[w.source]||{},X=F==null?void 0:F[w.sourceHandle],G=P[w.sourceHandle]||g.type||"unknown";S[g.id]={value:X,type:G,label:g.label}}});const z={};m.value.forEach(g=>{var X;const C=I==null?void 0:I[g.id],w=((X=g.dynamic)==null?void 0:X.mode)==="config-based",F=o.value==="input",P=w||F?g.type||L[g.id]||"unknown":L[g.id]||g.type||"unknown";z[g.id]={value:C,type:P,label:g.label}}),console.group(` Node Debug: ${t.id} (${o.value})`),console.log(" INPUTS:",S),Object.entries(S).forEach(([g,C])=>{const w=H(C.value);console.log(`   ${C.label||g}:`,{type:C.type,value:w})}),console.log(" OUTPUTS:",z),Object.entries(z).forEach(([g,C])=>{const w=H(C.value);console.log(`   ${C.label||g}:`,{type:C.type,value:w})}),console.log(" EXECUTION EDGES:",{inputs:B.length,outputs:V.length}),console.groupEnd()},Y=I=>{const L=n.edges.filter(g=>g.target===t.id&&g.targetHandle===I&&g.edgeType!=="flow");if(L.length===0)return null;const B=L[0];if(!n.nodes.find(g=>g.id===B.source))return null;const S=n.executionResults[B.source];if(!S)return null;const z=typeof S=="object"&&S!==null&&B.sourceHandle in S?S[B.sourceHandle]:S;return H(z)},j=ne(()=>{const I=n.executionResults[t.id],L=n.nodes.find(V=>V.id===t.id),B=n.executedNodes.has(t.id);return V=>{if(!L||!I||!B)return null;if(L.type==="field-extractor"){if(V.label==="All Extracted Data")return null;const z=`field-${V.label.replace(/\./g,"-")}`,g=I[z];return g==null?null:H(g)}const S=I[V.id];return S==null?null:H(S)}}),H=I=>{if(I===void 0)return null;if(I===null)return"null";if(I instanceof Date){if(isNaN(I.getTime()))return"Invalid Date";const L=I.getFullYear(),B=String(I.getMonth()+1).padStart(2,"0"),V=String(I.getDate()).padStart(2,"0");return`${L}-${B}-${V}`}if(typeof I=="string")return[/^\d{4}-\d{2}-\d{2}$/,/^\d{2}\/\d{2}\/\d{4}$/,/^\d{2}-\d{2}-\d{4}$/,/^\d{4}\/\d{2}\/\d{2}$/].some(B=>B.test(I))?I:I.length>20?`"${I.substring(0,17)}..."`:`"${I}"`;if(typeof I=="number")return Math.abs(I)>=1e6?(I/1e6).toFixed(1)+"M":Math.abs(I)>=1e3?(I/1e3).toFixed(1)+"K":I.toString();if(typeof I=="boolean")return I?"":"";if(Array.isArray(I))return I.length===0?"[]":I.length===1?"[1 item]":`[${I.length} items]`;if(typeof I=="object"){const L=Object.keys(I);return L.length===0?"{}":L.length===1?`{${L[0]}}`:`{${L.length} keys}`}return String(I).substring(0,20)};return(I,L)=>{var B,V,S;return O(),D("div",{class:qe(["generic-node rounded-lg bg-white dark:bg-gray-800 border-2 transition-all",[s.value?"selected-node":"",i.value?"executing-node":"",a.value?"executed-node":"",l.value?"error-node":"",!i.value&&!a.value&&!l.value?"border-gray-300 dark:border-gray-600":"","hover:shadow-xl"]]),style:vt({borderLeftColor:u.value,borderLeftWidth:"4px"}),onClick:A},[b("div",QM,[b("div",eD,[f.value?(O(),ut(XM,{key:0,position:"left",id:"exec-in",top:"50%"})):we("",!0)]),b("div",tD,[b("div",nD,[ue(Je,{icon:((B=r.value)==null?void 0:B.icon)||"material-symbols:view-in-ar",size:16,style:vt({color:((V=r.value)==null?void 0:V.color)||"#3b82f6"})},null,8,["icon","style"]),b("span",oD,be(e.data.label||((S=r.value)==null?void 0:S.label)||"Node"),1)])]),b("div",rD,[h.value.length===1?(O(),D("div",sD,[ue(ep,{position:"right",id:h.value[0].id,top:"50%"},null,8,["id"])])):h.value.length>1?(O(),D("div",iD,[(O(!0),D(Pe,null,at(h.value,(z,g)=>(O(),D("div",{key:z.id,class:"flex items-center gap-1"},[b("span",aD,be(z.label),1),ue(ep,{position:"right",id:z.id,top:`${25+g*50}%`},null,8,["id","top"])]))),128))])):we("",!0)])]),p.value.length>0||m.value.length>0?(O(),D("div",lD,[b("div",uD,[b("div",cD,[(O(!0),D(Pe,null,at(p.value,z=>(O(),D("div",{key:z.id,class:"handle-wrapper"},[ue(Qh,{id:z.id,type:"target",position:z.position||"left","data-type":z.type||"any"},null,8,["id","position","data-type"])]))),128))]),b("div",dD,[b("div",fD,[b("div",hD,[b("div",pD,[(O(!0),D(Pe,null,at(p.value,z=>(O(),D("div",{key:z.id,class:"label-item"},[Y(z.id)?(O(),D("span",{key:0,class:"text-[10px] mr-1 px-1 py-0.5 bg-gray-100 dark:bg-gray-700 rounded font-mono text-gray-500 dark:text-gray-400",title:`Value: ${Y(z.id)}`},be(Y(z.id)),9,gD)):we("",!0),b("span",mD,be(z.label),1)]))),128))])]),b("div",yD,[b("div",vD,[(O(!0),D(Pe,null,at(m.value,z=>(O(),D("div",{key:z.id,class:"label-item"},[b("span",bD,be(z.label),1),j.value(z)?(O(),D("span",{key:0,class:"text-[10px] ml-1 px-1 py-0.5 bg-gray-100 dark:bg-gray-700 rounded font-mono text-gray-500 dark:text-gray-400",title:`Value: ${j.value(z)}`},be(j.value(z)),9,xD)):we("",!0)]))),128))])])])]),b("div",_D,[(O(!0),D(Pe,null,at(m.value,z=>(O(),D("div",{key:z.id,class:"handle-wrapper"},[ue(Qh,{id:z.id,type:"source",position:z.position||"right","data-type":z.type||"any"},null,8,["id","position","data-type"])]))),128))])])])):we("",!0)],6)}}},tt=Mt(wD,[["__scopeId","data-v-9b4c31c1"]]),kD={key:0,class:"primitive-line"},ED={key:1,class:"array-node"},SD={class:"expand-icon"},$D={class:"array-label"},CD={key:0,class:"array-children"},ND={class:"array-index"},TD={key:2,class:"object-node"},AD={class:"expand-icon"},ID={class:"object-label"},OD={key:0,class:"object-children"},RD={class:"property-key"},MD={__name:"DataNode",props:{value:{required:!0},path:{type:Array,default:()=>[]},depth:{type:Number,default:0}},setup(e){const t=e,n=de(t.depth<2),o=()=>{n.value=!n.value},r=ne(()=>{const d=t.value;return d===null?"null":d===void 0?"undefined":Array.isArray(d)?"array":typeof d=="object"?"object":typeof d=="string"?"string":typeof d=="number"?"number":typeof d=="boolean"?"boolean":"unknown"}),s=ne(()=>["null","undefined","string","number","boolean"].includes(r.value)),i=ne(()=>r.value==="array"),a=ne(()=>r.value==="object"),l=ne(()=>{const d=t.value;return d===null?"null":d===void 0?"undefined":typeof d=="string"?`"${d}"`:typeof d=="boolean"?d?"true":"false":String(d)}),u=ne(()=>a.value?Object.entries(t.value):[]),c=ne(()=>`{${Object.keys(t.value).length} props}`);return(d,f)=>{const h=La("DataNode",!0);return O(),D("div",{class:"data-node",style:vt({paddingLeft:`${e.depth*12}px`})},[s.value?(O(),D("div",kD,[b("span",{class:qe(["value",`type-${r.value}`])},be(l.value),3)])):i.value?(O(),D("div",ED,[b("div",{class:"array-header",onClick:o},[b("button",SD,[ue(Je,{icon:n.value?"material-symbols:arrow-drop-down":"material-symbols:arrow-right",size:14},null,8,["icon"])]),b("span",$D,"Array("+be(e.value.length)+")",1)]),n.value?(O(),D("div",CD,[(O(!0),D(Pe,null,at(e.value,(p,y)=>(O(),D("div",{key:y,class:"array-item-row"},[b("span",ND,be(y)+":",1),ue(h,{value:p,path:[...e.path,y],depth:e.depth+1},null,8,["value","path","depth"])]))),128))])):we("",!0)])):a.value?(O(),D("div",TD,[b("div",{class:"object-header",onClick:o},[b("button",AD,[ue(Je,{icon:n.value?"material-symbols:arrow-drop-down":"material-symbols:arrow-right",size:14},null,8,["icon"])]),b("span",ID,be(c.value),1)]),n.value?(O(),D("div",OD,[(O(!0),D(Pe,null,at(u.value,([p,y])=>(O(),D("div",{key:p,class:"object-property-row"},[b("span",RD,be(p)+":",1),ue(h,{value:y,path:[...e.path,p],depth:e.depth+1},null,8,["value","path","depth"])]))),128))])):we("",!0)])):we("",!0)],4)}}},DD=Mt(MD,[["__scopeId","data-v-b34df0fd"]]),PD={class:"debug-viewer-node"},VD={class:"node-header"},zD={class:"flex items-center gap-2"},HD={class:"font-medium"},FD={key:0,class:"data-container"},LD={key:0,class:"no-data"},BD={key:1,class:"data-tree"},jD={key:1,class:"collapsed-preview"},UD={key:0,class:"preview-text"},qD={key:1,class:"no-data-text"},WD={__name:"DebugViewerNode",props:{id:{type:String,required:!0},data:{type:Object,default:()=>({})}},setup(e){var f;const t=e,n=Rt(),o=ne(()=>{const h=n.nodes.find(p=>p.id===t.id);return h?Jo(h.type):null}),r=ne(()=>{var h,p;return((h=t.data)==null?void 0:h.label)||((p=o.value)==null?void 0:p.label)||"Debug Viewer"}),s=de(((f=t.data)==null?void 0:f.expanded)!==!1),i=()=>{s.value=!s.value},a=ne(()=>{const h=n.edges.filter(v=>v.target===t.id&&v.edgeType!=="flow");if(h.length===0)return null;const p=h[0],y=n.executionResults[p.source];return y?typeof y=="object"&&y!==null&&p.sourceHandle in y?y[p.sourceHandle]:y:null}),l=ne(()=>a.value!==null&&a.value!==void 0),u=ne(()=>{if(!l.value)return"undefined";const h=a.value;return Array.isArray(h)?"array":h===null?"null":typeof h=="object"?"object":typeof h=="string"?"string":typeof h=="number"?"number":typeof h=="boolean"?"boolean":"unknown"}),c=ne(()=>({array:"#10b981",object:"#3b82f6",string:"#f59e0b",number:"#8b5cf6",boolean:"#ec4899",null:"#6b7280",undefined:"#6b7280"})[u.value]||"#6b7280"),d=ne(()=>{if(!l.value)return"No data";if(u.value==="array")return`Array (${a.value.length})`;if(u.value==="object")return`Object {${Object.keys(a.value).length} props}`;const h=a.value;return h===null?"null":h===void 0?"undefined":typeof h=="string"?`"${h}"`:typeof h=="boolean"?h?"true":"false":String(h)});return Fe(()=>{var h;return(h=t.data)==null?void 0:h.expanded},h=>{h!==void 0&&(s.value=h)}),(h,p)=>{var y;return O(),D("div",PD,[b("div",VD,[b("div",zD,[ue(Je,{icon:((y=o.value)==null?void 0:y.icon)||"material-symbols:bug-report",size:16},null,8,["icon"]),b("span",HD,be(r.value),1)]),b("button",{onClick:i,class:"expand-btn",title:"Toggle expand/collapse"},[ue(Je,{icon:s.value?"material-symbols:expand-less":"material-symbols:expand-more",size:16},null,8,["icon"])])]),ue(ye($o),{id:`${e.id}-data-input`,type:"target",position:ye(Oe).Left,style:vt({background:ye(_a)("any"),top:"50%"}),class:"handle-input"},null,8,["id","position","style"]),s.value?(O(),D("div",FD,[b("div",{class:"type-badge",style:vt({backgroundColor:c.value})},be(u.value),5),l.value?(O(),D("div",BD,[ue(DD,{value:a.value,path:[]},null,8,["value"])])):(O(),D("div",LD,[ue(Je,{icon:"material-symbols:info-outline",size:20}),p[0]||(p[0]=b("span",null,"No data connected",-1))]))])):(O(),D("div",jD,[l.value?(O(),D("span",UD,be(d.value),1)):(O(),D("span",qD,"No data"))]))])}}},YD=Mt(WD,[["__scopeId","data-v-f8b0b06d"]]),GD={class:"marker-header"},ZD={__name:"MarkerNode",props:{id:{type:String,required:!0},selected:{type:Boolean,default:!1}},setup(e){const t=e,n=Rt(),o=ne(()=>n.nodeData[t.id]||{}),r=ne(()=>n.nodes.find(j=>j.id===t.id)),s=de(o.value.name||"Frame"),i=de(o.value.width||400),a=de(o.value.height||300),l=ne(()=>{const j=o.value.color||"rgba(147, 197, 253, 0.2)";if(j.startsWith("#")){let H=j.slice(1);H.length===3&&(H=H.split("").map(V=>V+V).join(""));const I=parseInt(H.slice(0,2),16),L=parseInt(H.slice(2,4),16),B=parseInt(H.slice(4,6),16);return`rgba(${I}, ${L}, ${B}, 0.2)`}return j.startsWith("rgba")?j.replace(/[\d.]+\)$/,"0.2)"):j.startsWith("rgb")?j.replace("rgb","rgba").replace(")",", 0.2)"):j}),u=ne(()=>t.selected?"#3b82f6":"#d1d5db"),c=()=>{n.updateNodeData(t.id,{name:s.value})};let d=!1,f=null,h=0,p=0,y=0,m=0,v=0,E=0;const _=j=>{var H,I,L,B;d=!0,f=j,h=event.clientX,p=event.clientY,y=i.value,m=a.value,v=((I=(H=r.value)==null?void 0:H.position)==null?void 0:I.x)||0,E=((B=(L=r.value)==null?void 0:L.position)==null?void 0:B.y)||0,document.addEventListener("mousemove",A),document.addEventListener("mouseup",Y),event.stopPropagation()},A=j=>{if(!d)return;const H=j.clientX-h,I=j.clientY-p;let L=y,B=m,V=v,S=E;switch(f){case"se":L=Math.max(200,y+H),B=Math.max(150,m+I);break;case"ne":L=Math.max(200,y+H),B=Math.max(150,m-I),S=E+I;break;case"sw":L=Math.max(200,y-H),B=Math.max(150,m+I),V=v+H;break;case"nw":L=Math.max(200,y-H),B=Math.max(150,m-I),V=v+H,S=E+I;break}i.value=L,a.value=B,(V!==v||S!==E)&&n.updateNodePosition(t.id,{x:V,y:S})},Y=()=>{d&&n.updateNodeData(t.id,{width:i.value,height:a.value}),d=!1,f=null,document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",Y)};return Hr(()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",Y)}),(j,H)=>(O(),D("div",{class:"marker-node",style:vt({width:`${i.value}px`,height:`${a.value}px`,backgroundColor:l.value,borderColor:u.value,zIndex:-1})},[b("div",GD,[Ue(b("input",{"onUpdate:modelValue":H[0]||(H[0]=I=>s.value=I),onInput:c,class:"marker-title",placeholder:"Frame name"},null,544),[[mt,s.value]])]),b("div",{class:"resize-handle resize-se",onMousedown:H[1]||(H[1]=I=>_("se"))},null,32),b("div",{class:"resize-handle resize-ne",onMousedown:H[2]||(H[2]=I=>_("ne"))},null,32),b("div",{class:"resize-handle resize-sw",onMousedown:H[3]||(H[3]=I=>_("sw"))},null,32),b("div",{class:"resize-handle resize-nw",onMousedown:H[4]||(H[4]=I=>_("nw"))},null,32)],4))}},KD=Mt(ZD,[["__scopeId","data-v-167e52f1"]]),XD={class:"h-screen flex flex-col relative overflow-hidden"},JD={class:"flex flex-1 overflow-hidden"},QD={__name:"FlowCanvas",props:{demoMode:{type:Boolean,default:!1},hideSidebar:{type:Boolean,default:!1},hideSaveButton:{type:Boolean,default:!1},hideMinimap:{type:Boolean,default:!1},hideControls:{type:Boolean,default:!1},allowDelete:{type:Boolean,default:!0}},setup(e){const t=e,n=Rt(),{addNodes:o,addEdges:r,project:s,viewportRef:i,updateNode:a,getSelectedEdges:l,fitView:u}=gt(),c=de(null),d=de({visible:!1,x:0,y:0,sourceNodeId:null,sourceHandle:null,compatibleNodes:[]}),f=de({active:!1,sourceNodeId:null,sourceHandle:null}),h=de(!1),p=de(!1),y=de(!1);Fe(()=>n.nodes,async M=>{M&&M.length>0&&!y.value&&(await Bt(),setTimeout(()=>{u({padding:2,duration:0}),y.value=!0},100))},{immediate:!0});const m=ne(()=>n.nodes.map(M=>M.type==="input"||M.type==="output"?{...M,deletable:!1}:M)),v=ne(()=>{const M=new Map;return m.value.forEach(Q=>M.set(Q.id,Q)),M}),E=ne(()=>n.edges),_=new Map;let A=!1;const Y=M=>{const Q=n.executionResults[M];return Q?`${typeof Q}-${Array.isArray(Q)?Q.length:Object.keys(Q).length}`:"null"},j=ne(()=>A&&_.size>0?Array.from(_.values()).map(Q=>Q.edge):E.value.map(Q=>{if(!Q.source||!Q.target)return null;const W=`${Q.id}-${Q.source}-${Q.target}-${Q.sourceHandle}-${Q.edgeType}`,Te=Y(Q.source);if(_.has(W)){const ae=_.get(W),Se=v.value.get(Q.source);if(Se&&ae.sourceNodeType===Se.type&&ae.executionResultsHash===Te)return ae.edge}let Me={},He={},q="any";if(Q.edgeType==="flow")Me={stroke:"#9ca3af",strokeWidth:3},He={type:"arrowclosed",width:10,height:10,color:"#9ca3af"};else{const ae=v.value.get(Q.source);if(ae){q=ie(ae,Q.sourceHandle);const Se=_a(q);Me={stroke:Se,strokeWidth:2.5},He={type:"arrowclosed",width:8,height:8,color:Se}}else Me={stroke:"#3b82f6",strokeWidth:2.5},He={type:"arrowclosed",width:8,height:8,color:"#3b82f6"}}const re={...Q,type:"default",animated:Q.edgeType==="flow",class:Q.edgeType==="flow"?"flow-edge":`data-edge data-edge-type-${q}`,style:Me,markerEnd:He,data:{...Q.data,edgeType:Q.edgeType,dataType:q}},me=v.value.get(Q.source);return _.set(W,{edge:re,sourceNodeType:me==null?void 0:me.type,executionResultsHash:Te}),re}).filter(Boolean)),H=()=>{const M=new URLSearchParams(window.location.search),Q=M.get("success"),W=M.get("error"),Te=M.get("email");if(Q==="true"){alert(` Successfully connected to Google Analytics!

Account: ${Te}`),M.delete("success"),M.delete("error"),M.delete("provider"),M.delete("serviceType"),M.delete("email");const Me=window.location.pathname+(M.toString()?"?"+M.toString():"");window.history.replaceState({},document.title,Me),window.dispatchEvent(new CustomEvent("oauth-success"))}if(W){alert(` Connection failed: ${W}`),M.delete("success"),M.delete("error"),M.delete("provider"),M.delete("serviceType"),M.delete("email");const Me=window.location.pathname+(M.toString()?"?"+M.toString():"");window.history.replaceState({},document.title,Me)}},I=de(null),L=de(null),B=de([]),V=de({x:0,y:0}),{showContextMenu:S,contextMenuPosition:z,openContextMenu:g,closeContextMenu:C}=ZI(),w=de([{type:"input",label:"Input",icon:"material-symbols:input"},{type:"connector",label:"Data Connector",icon:"material-symbols:cable"},{type:"field-extractor",label:"Field Extractor",icon:"material-symbols:filter-alt"},{type:"add",label:"Add",icon:"material-symbols:add"},{type:"output",label:"Output",icon:"material-symbols:output"}]),F={type:"default",animated:!0,style:{stroke:"#9ca3af",strokeWidth:2},markerEnd:{type:"arrowclosed",width:10,height:10,color:"#9ca3af"}},P=M=>{M.preventDefault();const Q=M.dataTransfer.getData("application/vueflow");if(Q)try{const W=JSON.parse(Q),Te=s({x:M.clientX-M.target.getBoundingClientRect().left,y:M.clientY-M.target.getBoundingClientRect().top}),Me=X(W.type,Te);o([Me])}catch{}},X=(M,Q)=>{const W={id:`${M}_${Date.now()}`,type:M,position:Q,data:{},zIndex:1};switch(M){case"connector":W.data={label:"Data Connector",sourceType:"api",apiUrl:"",dataPath:""};break;case"field-extractor":W.data={label:"Field Extractor",selectedFields:[]};break;case"add":case"subtract":case"multiply":case"divide":W.data={label:M.charAt(0).toUpperCase()+M.slice(1),operation:M};break;case"output":W.data={label:"Output",customInputs:[]},W.deletable=!1;break;case"constant":W.data={label:"Constant",valueType:"number",numberValue:0,stringValue:"",booleanValue:!1,objectValue:"{}",arrayValue:"[]"};break;case"compare":W.data={label:"Compare",operation:"equals"};break;case"type-conversion":W.data={label:"Type Conversion",targetType:"string"};break;case"logic":W.data={label:"Logic Operation",operation:"and"};break;case"string-ops":W.data={label:"String Operations",operation:"concat",templateString:"Hello {name}!"};break;case"marker":W.data={label:"Frame",name:"Frame",color:"rgba(147, 197, 253, 0.2)",width:400,height:300},W.zIndex=-100,W.selectable=!0,W.draggable=!0;break;case"input":W.data={label:"Input",parameters:[{name:"param1",type:"string",required:!1,defaultValue:"Hello World"}]},W.deletable=!1;break;case"variable":W.data={label:"Variable",mode:"get",variableName:""};break;default:W.data={label:M.charAt(0).toUpperCase()+M.slice(1)}}return n.addNode(W),W},G=M=>{I.value=M.node};let oe=new Map;const ge=M=>{n.setDragging(!0),A=!0,M.node.type==="marker"&&oe.set(M.node.id,{x:M.node.position.x,y:M.node.position.y})},Z=M=>{const Q={x1:M.position.x,y1:M.position.y,x2:M.position.x+(M.data.width||400),y2:M.position.y+(M.data.height||300)};return m.value.filter(W=>W.id!==M.id&&W.type!=="marker").filter(W=>{W.position.x,W.position.y,W.position.x+200,W.position.y+120;const He=W.position.x+200/2,q=W.position.y+120/2;return He>=Q.x1&&He<=Q.x2&&q>=Q.y1&&q<=Q.y2})},ce=M=>{},pe=M=>{n.setDragging(!1),A=!1,M.node&&(n.updateNodePosition(M.node.id,M.node.position),M.node.type==="marker"&&oe.has(M.node.id)&&(Z(M.node).forEach(W=>{n.updateNodePosition(W.id,W.position)}),oe.delete(M.node.id)))},xe=M=>{M.forEach(Q=>{var W;if(Q.type==="position"&&Q.position){const Te=v.value.get(Q.id);if((Te==null?void 0:Te.type)==="marker"&&n.isDragging&&oe.has(Q.id)){const He=oe.get(Q.id),q=Q.position.x-He.x,re=Q.position.y-He.y;Z({...Te,position:He}).forEach(ae=>{const Se={x:ae.position.x+q,y:ae.position.y+re};a(ae.id,{position:Se}),n.updateNodePosition(ae.id,Se)}),oe.set(Q.id,Q.position)}n.updateNodePosition(Q.id,Q.position)}else if(Q.type==="remove"){const Te=v.value.get(Q.id);if(Te&&(Te.type==="input"||Te.type==="output")){console.warn(` Cannot remove ${Te.type} node: It is required for the flow`);return}n.removeNode(Q.id)!==!1&&((W=I.value)==null?void 0:W.id)===Q.id&&(I.value=null)}else if(Q.type==="select"){const Te=v.value.get(Q.id);Te&&(Te.selected=Q.selected,Q.selected&&(I.value=Te))}})},K=M=>{M.forEach(Q=>{Q.type==="remove"&&n.removeEdge(Q.id)})},le=M=>{var q,re;const Q=(q=M.sourceHandle)==null?void 0:q.startsWith("exec-"),W=(re=M.targetHandle)==null?void 0:re.startsWith("exec-");if(Q!==W)return!1;if(Q&&W)return!0;const Te=n.nodes.find(me=>me.id===M.source),Me=n.nodes.find(me=>me.id===M.target);return!Te||!Me?!1:sI(Te,M.sourceHandle,Me,M.targetHandle,n)},ie=(M,Q,W)=>{var re,me,ae,Se,Ae;({...n.nodeData[M.id]||{},_nodeId:M.id});const Me=Jo(M.type);if(!Me)return"any";const He=(re=Me==null?void 0:Me.handles)==null?void 0:re.outputs,q=(me=He==null?void 0:He.data)==null?void 0:me.find(ve=>ve.id===Q);if(!q)return"any";if(((ae=q.dynamic)==null?void 0:ae.mode)==="runtime-detection"){const ve=(Se=n.executionResults[M.id])==null?void 0:Se[Q];if(ve!==void 0)return typeof ve=="number"?"number":typeof ve=="string"?"string":typeof ve=="boolean"?"boolean":Array.isArray(ve)?"array":typeof ve=="object"?"object":"any";const Ge=(Ae=n.savedDetectedTypes[M.id])==null?void 0:Ae[Q];if(Ge)return Ge}return q.type||"any"},_e=M=>{var re,me,ae,Se;if(!M.source||!M.target)return;const Q=((re=M.sourceHandle)==null?void 0:re.startsWith("exec-"))||((me=M.targetHandle)==null?void 0:me.startsWith("exec-")),W=(ae=M.sourceHandle)==null?void 0:ae.startsWith("exec-"),Te=(Se=M.targetHandle)==null?void 0:Se.startsWith("exec-");if(W!==Te)return;console.log(" onConnect - Nova conexo:",{source:M.source,sourceHandle:M.sourceHandle,target:M.target,targetHandle:M.targetHandle,isExec:Q}),Q?(n.edges.filter(ve=>ve.source===M.source&&ve.sourceHandle===M.sourceHandle&&ve.edgeType==="flow").forEach(ve=>{console.log(" Removendo conexo anterior do exec-out:",ve.id),n.removeEdge(ve.id)}),console.log(" exec-in permite mltiplas conexes")):n.edges.filter(ve=>ve.target===M.target&&ve.targetHandle===M.targetHandle&&ve.edgeType==="data").forEach(ve=>{n.removeEdge(ve.id)});let Me="#9ca3af",He="any";if(!Q){const Ae=n.nodes.find(ve=>ve.id===M.source);Ae&&(He=ie(Ae,M.sourceHandle),Me=_a(He))}if(!M.source||!M.target)return;const q={id:`edge_${Date.now()}`,source:M.source,target:M.target,sourceHandle:M.sourceHandle,targetHandle:M.targetHandle,edgeType:Q?"flow":"data",dataType:He,animated:Q,style:{stroke:Me,strokeWidth:Q?3:2.5},markerEnd:{type:"arrowclosed",width:Q?10:8,height:Q?10:8,color:Me}};if(!Q){const Ae=n.nodes.find(St=>St.id===M.source),ve=n.nodes.find(St=>St.id===M.target),Ge=n.executionResults[M.source],Qe=Ge==null?void 0:Ge[M.sourceHandle],ot=n.executionResults[M.target],Dt=ot==null?void 0:ot[M.targetHandle];console.log(`
 NOVA CONEXO
 OUTPUT
   Node: ${(Ae==null?void 0:Ae.type)||"unknown"} (${M.source})
   Parmetro: ${M.sourceHandle}
   Valor: ${Qe!==void 0?JSON.stringify(Qe):"no executado ainda"}

 INPUT
    Node: ${(ve==null?void 0:ve.type)||"unknown"} (${M.target})
    Parmetro: ${M.targetHandle}
    Valor: ${Dt!==void 0?JSON.stringify(Dt):"no executado ainda"}
    `)}n.addEdge(q),h.value=!0,setTimeout(()=>{h.value=!1},100)},Re=M=>{f.value={active:!0,sourceNodeId:M.nodeId,sourceHandle:M.handleId},h.value=!1},T=M=>{if(!f.value.active)return;if(h.value){f.value.active=!1;return}const Q=document.elementFromPoint(M.clientX,M.clientY);if(Q==null?void 0:Q.closest(".vue-flow__handle")){f.value.active=!1;return}if(Q==null?void 0:Q.closest(".vue-flow__node")){f.value.active=!1;return}const Me=n.nodes.find(ae=>ae.id===f.value.sourceNodeId),He=f.value.sourceHandle;if(!Me||!He){f.value.active=!1;return}const q=ie(Me,He),re=He.startsWith("exec-"),me=n.nodeCatalog.nodes.filter(ae=>{var ve,Ge,Qe,ot,Dt;return re?(Qe=(Ge=(ve=ae.handles)==null?void 0:ve.inputs)==null?void 0:Ge.execution)==null?void 0:Qe.some(St=>{var Tt;return(Tt=St.id)==null?void 0:Tt.startsWith("exec-")}):(((Dt=(ot=ae.handles)==null?void 0:ot.inputs)==null?void 0:Dt.data)||[]).some(St=>{const Tt=Fu(ae.type,St.id);return By(q,Tt)})});d.value.sourceNodeId=Me.id,d.value.sourceHandle=He,d.value.compatibleNodes=me,w.value=me,g(M.clientX,M.clientY),p.value=!0,setTimeout(()=>{p.value=!1},100),f.value.active=!1},R=({edge:M})=>{var Ge,Qe,ot,Dt,St;if(!M||M.edgeType==="flow")return;const Q=n.nodes.find(Tt=>Tt.id===M.source),W=n.nodes.find(Tt=>Tt.id===M.target),Te=n.executionResults[M.source];n.executionResults[M.target];const Me=n.savedDetectedTypes[M.source]||{},He=n.savedDetectedTypes[M.target]||{},q=Te==null?void 0:Te[M.sourceHandle];let re="unknown";if((Q==null?void 0:Q.type)==="input"){const Tt=parseInt((Ge=M.sourceHandle)==null?void 0:Ge.replace("param-output-",""));re=((ot=(((Qe=n.nodeData[M.source])==null?void 0:Qe.parameters)||[])[Tt])==null?void 0:ot.type)||"any"}else re=Me[M.sourceHandle]||"unknown";const me=((Dt=n.getNodeDataInputs)==null?void 0:Dt.call(n,M.target))||{},ae=((St=M.targetHandle)==null?void 0:St.replace("data-",""))||"input",Se=me[ae],Ae=He[M.targetHandle]||"unknown",ve=Tt=>{if(Tt===void 0)return"undefined";if(Tt===null)return"null";const $t=JSON.stringify(Tt);return $t.length>38?$t.substring(0,38):$t};console.log(`

           CONEXO CLICADA (VALOR SENDO TRANSMITIDO)          

                                                               
   OUTPUT (ORIGEM)                                           
   Node: ${((Q==null?void 0:Q.type)||"unknown").padEnd(47)}
   ID: ${(M.source||"unknown").padEnd(49)}
   Handle: ${(M.sourceHandle||"unknown").padEnd(45)}
   TIPO: ${re.padEnd(49)}
   VALOR: ${ve(q).padEnd(47)}
                                                               
   INPUT (DESTINO)                                           
   Node: ${((W==null?void 0:W.type)||"unknown").padEnd(47)}
   ID: ${(M.target||"unknown").padEnd(49)}
   Handle: ${(M.targetHandle||"unknown").padEnd(45)}
   TIPO: ${Ae.padEnd(49)}
   VALOR: ${ve(Se).padEnd(47)}
                                                               

`)},x=async()=>{L.value="running";try{await n.executeFlow(),L.value="success",setTimeout(()=>{L.value=null},3e3)}catch{L.value="error",setTimeout(()=>{L.value=null},5e3)}},k=async()=>{try{console.log(" Manual save triggered"),await n.syncToAPI()}catch(M){console.error(" Failed to save:",M)}},N=()=>{confirm("Are you sure you want to clear the entire flow? This action cannot be undone.")&&(n.clearFlow(),I.value=null)},$=M=>{var Te;if(["INPUT","SELECT","BUTTON","TEXTAREA"].includes((Te=document.activeElement)==null?void 0:Te.tagName)){M.key==="Escape"&&S.value&&C();return}if(M.ctrlKey&&M.key==="c"){M.preventDefault(),he();return}if(M.ctrlKey&&M.key==="v"){M.preventDefault(),fe();return}if((M.ctrlKey||M.metaKey)&&M.key==="s"){M.preventDefault(),n.hasUnsavedChanges&&n.syncStatus!=="syncing"&&k();return}if(M.code==="Space"){M.preventDefault(),g(V.value.x,V.value.y);return}if(M.key==="Escape"){C();return}},U=M=>{},te=M=>{var Me;if(["INPUT","SELECT","BUTTON","TEXTAREA"].includes(M.target.tagName)||p.value)return;S.value&&C(),d.value.visible&&closeQuickAddMenu(),M.target.closest(".vue-flow__node")||(Me=c.value)==null||Me.focus()},ee=M=>{["INPUT","SELECT","BUTTON","TEXTAREA"].includes(M.target.tagName)||(V.value={x:M.clientX,y:M.clientY})},J=M=>{const Q=ke(V.value.x,V.value.y),W=X(M,Q);C(),d.value.sourceNodeId&&d.value.sourceHandle&&setTimeout(()=>{var re,me,ae,Se,Ae,ve;const Te=d.value.sourceHandle,Me=Te.startsWith("exec-"),He=n.nodeCatalog.nodes.find(Ge=>Ge.type===M);let q=null;if(Me)q=((Se=(ae=(me=(re=He==null?void 0:He.handles)==null?void 0:re.inputs)==null?void 0:me.execution)==null?void 0:ae[0])==null?void 0:Se.id)||"exec-in";else{const Qe=(((ve=(Ae=He==null?void 0:He.handles)==null?void 0:Ae.inputs)==null?void 0:ve.data)||[]).find(ot=>{const Dt=Fu(M,ot.id),St=ie(n.nodes.find(Tt=>Tt.id===d.value.sourceNodeId),Te);return Dt.includes(St)||Dt.includes("any")});q=(Qe==null?void 0:Qe.id)||"data-input"}_e({source:d.value.sourceNodeId,sourceHandle:Te,target:W.id,targetHandle:q}),d.value.sourceNodeId=null,d.value.sourceHandle=null},100)},he=()=>{const M=m.value.filter(Q=>Q.selected);M.length!==0&&(B.value=M.map(Q=>({...Q,data:Ar(Q.data),position:{...Q.position}})))},fe=()=>{if(B.value.length===0)return;const M=ke(V.value.x,V.value.y),Q=30;B.value.forEach((W,Te)=>{const Me={...W,id:`${W.type}_${Date.now()}_${Te} `,position:{x:M.x+Te*Q,y:M.y+Te*Q},data:Ar(W.data),selected:!1};n.addNode(Me)})},ke=(M,Q)=>{var Te;if(!i.value){const Me=(Te=c.value)==null?void 0:Te.getBoundingClientRect();return Me?{x:M-Me.left,y:Q-Me.top}:{x:M,y:Q}}const W=i.value.getBoundingClientRect();return s({x:M-W.left,y:Q-W.top})},$e=M=>{if((M.ctrlKey||M.metaKey)&&M.key==="z"&&!M.shiftKey){M.preventDefault(),n.undo();return}if((M.ctrlKey||M.metaKey)&&(M.key==="y"||M.shiftKey&&M.key==="z")){M.preventDefault(),n.redo();return}};return wt(()=>{var M;(M=c.value)==null||M.focus(),H(),n.initializeFromUrl(),window.addEventListener("keydown",$e)}),Hr(()=>{window.removeEventListener("keydown",$e)}),(M,Q)=>(O(),D("div",XD,[Q[4]||(Q[4]=Qn('<div class="fixed inset-0 bg-white -z-10" data-v-a2824b6d></div><div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none bg-[#f2f7ff]" data-v-a2824b6d><div class="absolute top-1/4 right-1/4 w-[500px] h-[500px] bg-blue-300/20 rounded-full blur-3xl" data-v-a2824b6d></div><div class="absolute top-1/3 left-1/4 w-[450px] h-[450px] bg-cyan-300/15 rounded-full blur-3xl" data-v-a2824b6d></div><div class="absolute bottom-1/4 right-1/3 w-[400px] h-[400px] bg-purple-300/10 rounded-full blur-3xl" data-v-a2824b6d></div></div><div class="fixed inset-0 opacity-[0.02] -z-5 pointer-events-none" data-v-a2824b6d><div class="absolute inset-0" style="background-image:radial-gradient(circle, #3B82F6 1px, transparent 1px);background-size:40px 40px;" data-v-a2824b6d></div></div>',3)),ue(bO,{"can-undo":ye(n).canUndo,"can-redo":ye(n).canRedo,"execution-status":L.value,"has-unsaved-changes":ye(n).hasUnsavedChanges,"hide-save-button":t.hideSaveButton,"playground-mode":t.demoMode,onExecute:x,onClear:N,onUndo:ye(n).undo,onRedo:ye(n).redo,onSave:k},null,8,["can-undo","can-redo","execution-status","has-unsaved-changes","hide-save-button","playground-mode","onUndo","onRedo"]),b("div",JD,[t.hideSidebar?we("",!0):(O(),ut(TO,{key:0})),b("div",{class:"flex-1 relative outline-none focus:outline-none",onDrop:P,onDragover:Q[0]||(Q[0]=Un(()=>{},["prevent"])),onKeydown:$,onKeyup:U,onClick:te,onMousemove:ee,onContextmenu:Q[1]||(Q[1]=Un(()=>{},["prevent"])),tabindex:"0",ref_key:"canvasRef",ref:c},[ue(ye(SC),{nodes:m.value,edges:j.value,onNodesChange:xe,onEdgesChange:K,onConnect:_e,onConnectStart:Re,onConnectEnd:T,onEdgeClick:R,onNodeClick:G,onNodeDragStart:ge,onNodeDrag:ce,onNodeDragStop:pe,"default-edge-options":F,"is-valid-connection":le,"fit-view-on-init":!1,"connection-mode":ye(to).Loose,"zoom-on-scroll":!0,"pan-on-scroll":!1,"pan-on-drag":[1,2],"node-draggable":!0,"nodes-deletable":t.allowDelete,"edges-deletable":t.allowDelete,"delete-key-code":"Delete","multi-selection-key-code":"Control","selection-mode":"partial",class:"w-full h-full bg-transparent"},{"node-connector":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-add":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-subtract":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-multiply":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-divide":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-round":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-array-filter":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-array-aggregate":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-array-slice":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-array-sort":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-array-map":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-array-groupby":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-array-distinct":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-array-merge":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-object-create":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-array-create":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-object-merge":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-object-pick":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-object-keys-values":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-object-rename":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-object-set-property":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-object-to-array":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-object-transform":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-field-extractor":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-output":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-variable":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-input":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-constant":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-compare":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-conditional-branch":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-type-conversion":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-logic":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-string-ops":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-for-each":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-while-loop":ze(W=>[ue(tt,Ze(Ke(W)),null,16)]),"node-marker":ze(W=>[ue(KD,Ze(Ke(W)),null,16)]),"node-debug-viewer":ze(W=>[ue(YD,Ze(Ke(W)),null,16)]),default:ze(()=>[ue(ye(RC),{variant:ye($n).Dots,"pattern-color":"#94a3b8"},null,8,["variant"]),t.hideMinimap?we("",!0):(O(),ut(ye(WA),{key:0,pannable:"",zoomable:""})),t.hideControls?we("",!0):(O(),ut(ye(c2),{key:1}))]),_:1},8,["nodes","edges","connection-mode","nodes-deletable","edges-deletable"]),ue(qM,{show:ye(S),position:ye(z),nodes:w.value,onCreateNode:J},null,8,["show","position","nodes"])],544),ue(RM,{"selected-node":I.value,onClose:Q[2]||(Q[2]=W=>I.value=null),onDelete:Q[3]||(Q[3]=W=>I.value=null)},null,8,["selected-node"])])]))}},eP=Mt(QD,[["__scopeId","data-v-a2824b6d"]]),tP={__name:"HomeView",setup(e){return(t,n)=>(O(),ut(eP))}},nP={class:"min-h-screen bg-gray-50 dark:bg-gray-900 p-8"},oP={class:"max-w-4xl mx-auto"},rP={key:0,class:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg flex items-center justify-between"},sP={class:"flex items-center gap-3"},iP={class:"w-10 h-10 bg-green-100 dark:bg-green-800 rounded-full flex items-center justify-center"},aP={class:"text-sm text-green-700 dark:text-green-300"},lP={key:1,class:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg flex items-center justify-between"},uP={class:"flex items-center gap-3"},cP={class:"w-10 h-10 bg-red-100 dark:bg-red-800 rounded-full flex items-center justify-center"},dP={class:"text-sm text-red-700 dark:text-red-300"},fP={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6"},hP={class:"space-y-3"},pP={class:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-600 transition-colors"},gP={class:"flex items-center gap-4"},mP={class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/50 rounded-lg flex items-center justify-center"},yP=["disabled"],vP={class:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 opacity-60"},bP={class:"flex items-center gap-4"},xP={class:"w-12 h-12 bg-green-100 dark:bg-green-900/50 rounded-lg flex items-center justify-center"},_P={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},wP={key:0,class:"text-center py-8"},kP={key:1,class:"text-center py-8"},EP={key:2,class:"space-y-3"},SP={class:"flex items-center gap-4"},$P={class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/50 rounded-lg flex items-center justify-center"},CP={class:"font-medium text-gray-900 dark:text-gray-100"},NP={class:"text-sm text-gray-600 dark:text-gray-400"},TP={class:"flex items-center gap-3 mt-1"},AP={class:"text-xs text-gray-500 dark:text-gray-400"},IP={class:"flex items-center gap-2"},OP=["onClick"],RP=["onClick"],MP={__name:"IntegrationsView",setup(e){const t=_c(),n=Ig(),o=Rt(),r=de([]),s=de(!0),i=de(!1),a=de(!1),l=de(""),u=de(!1),c=de("");wt(async()=>{const m=t.query.success,v=t.query.error,E=t.query.email;m==="true"&&(a.value=!0,l.value=E||"Unknown",n.replace({query:{}})),v&&(u.value=!0,c.value=v,n.replace({query:{}})),await d()});const d=async()=>{var m;s.value=!0;try{const E=await fetch("http://localhost:3001/api/oauth/connections",{headers:{Authorization:`Bearer ${o.apiConfig.token||localStorage.getItem("LyntFlow_token")}`}});if(!E.ok)throw new Error("Failed to load connections");const _=await E.json();r.value=((m=_.data)==null?void 0:m.connections)||[]}catch{}finally{s.value=!1}},f=async()=>{i.value=!0;try{const v=await fetch("http://localhost:3001/api/oauth/google_analytics/authorize",{headers:{Authorization:`Bearer ${o.apiConfig.token||localStorage.getItem("LyntFlow_token")}`}});if(!v.ok)throw new Error("Failed to get authorization URL");const E=await v.json();window.location.href=E.data.authUrl}catch(m){u.value=!0,c.value=m.message,i.value=!1}},h=async m=>{var v;try{const A=await(await fetch(`http://localhost:3001/api/oauth/connections/${m}/test`,{method:"POST",headers:{Authorization:`Bearer ${o.apiConfig.token||localStorage.getItem("LyntFlow_token")}`}})).json();A.success?alert(" Connection is working!"):alert(" Connection test failed: "+(((v=A.error)==null?void 0:v.message)||"Unknown error"))}catch(E){alert(" Error: "+E.message)}},p=async m=>{if(confirm("Are you sure you want to disconnect this service?"))try{if(!(await fetch(`http://localhost:3001/api/oauth/connections/${m}`,{method:"DELETE",headers:{Authorization:`Bearer ${o.apiConfig.token||localStorage.getItem("LyntFlow_token")}`}})).ok)throw new Error("Failed to disconnect");await d()}catch(v){alert(" Error: "+v.message)}},y=m=>m?new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return(m,v)=>(O(),D("div",nP,[b("div",oP,[v[12]||(v[12]=b("div",{class:"mb-8"},[b("h1",{class:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2"},"Integrations"),b("p",{class:"text-gray-600 dark:text-gray-400"},"Connect external services to use in your flows")],-1)),a.value?(O(),D("div",rP,[b("div",sP,[b("div",iP,[ue(Je,{icon:"material-symbols:check-circle",size:24,class:"text-green-600 dark:text-green-400"})]),b("div",null,[v[2]||(v[2]=b("p",{class:"font-medium text-green-900 dark:text-green-100"},"Successfully connected!",-1)),b("p",aP,be(l.value),1)])]),b("button",{onClick:v[0]||(v[0]=E=>a.value=!1),class:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200"},[ue(Je,{icon:"material-symbols:close",size:20})])])):we("",!0),u.value?(O(),D("div",lP,[b("div",uP,[b("div",cP,[ue(Je,{icon:"material-symbols:error",size:24,class:"text-red-600 dark:text-red-400"})]),b("div",null,[v[3]||(v[3]=b("p",{class:"font-medium text-red-900 dark:text-red-100"},"Connection failed",-1)),b("p",dP,be(c.value),1)])]),b("button",{onClick:v[1]||(v[1]=E=>u.value=!1),class:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200"},[ue(Je,{icon:"material-symbols:close",size:20})])])):we("",!0),b("div",fP,[v[7]||(v[7]=b("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Available Integrations",-1)),b("div",hP,[b("div",pP,[b("div",gP,[b("div",mP,[ue(Je,{icon:"logos:google-analytics",size:28})]),v[4]||(v[4]=b("div",null,[b("h3",{class:"font-medium text-gray-900 dark:text-gray-100"},"Google Analytics"),b("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Connect your Google Analytics properties")],-1))]),b("button",{onClick:f,disabled:i.value,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors flex items-center gap-2"},[ue(Je,{icon:i.value?"material-symbols:hourglass-empty":"material-symbols:link",size:18},null,8,["icon"]),st(" "+be(i.value?"Connecting...":"Connect"),1)],8,yP)]),b("div",vP,[b("div",bP,[b("div",xP,[ue(Je,{icon:"logos:google-sheets",size:28})]),v[5]||(v[5]=b("div",null,[b("h3",{class:"font-medium text-gray-900 dark:text-gray-100"},"Google Sheets"),b("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Coming soon")],-1))]),v[6]||(v[6]=b("button",{disabled:"",class:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 rounded-lg font-medium cursor-not-allowed"}," Coming Soon ",-1))])])]),b("div",_P,[v[11]||(v[11]=b("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Your Connections",-1)),s.value?(O(),D("div",wP,[ue(Je,{icon:"material-symbols:hourglass-empty",size:32,class:"text-gray-400 animate-spin mx-auto mb-2"}),v[8]||(v[8]=b("p",{class:"text-gray-500 dark:text-gray-400"},"Loading connections...",-1))])):r.value.length===0?(O(),D("div",kP,[ue(Je,{icon:"material-symbols:cloud-off",size:48,class:"text-gray-300 dark:text-gray-600 mx-auto mb-3"}),v[9]||(v[9]=b("p",{class:"text-gray-500 dark:text-gray-400 mb-1"},"No connections yet",-1)),v[10]||(v[10]=b("p",{class:"text-sm text-gray-400 dark:text-gray-500"},"Connect your first service above!",-1))])):(O(),D("div",EP,[(O(!0),D(Pe,null,at(r.value,E=>(O(),D("div",{key:E._id,class:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600"},[b("div",SP,[b("div",$P,[ue(Je,{icon:"logos:google-analytics",size:28})]),b("div",null,[b("h3",CP,be(E.name),1),b("p",NP,be(E.email),1),b("div",TP,[b("span",{class:qe([E.isActive?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400","text-xs font-medium flex items-center gap-1"])},[b("span",{class:qe(["w-2 h-2 rounded-full",E.isActive?"bg-green-500":"bg-red-500"])},null,2),st(" "+be(E.isActive?"Active":"Inactive"),1)],2),b("span",AP," Expires: "+be(y(E.expiresAt)),1)])])]),b("div",IP,[b("button",{onClick:_=>h(E._id),class:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 rounded text-sm font-medium transition-colors"}," Test ",8,OP),b("button",{onClick:_=>p(E._id),class:"px-3 py-1.5 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-700 dark:text-red-400 rounded text-sm font-medium transition-colors"}," Disconnect ",8,RP)])]))),128))]))])])]))}},DP={class:"connections-view min-h-screen bg-gray-50 dark:bg-gray-900 p-6"},PP={class:"max-w-4xl mx-auto"},VP={key:0,class:"text-center py-12"},zP={key:1,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6"},HP={class:"flex items-center"},FP={class:"text-red-600 dark:text-red-400 text-sm"},LP={class:"flex items-center"},BP={class:"text-2xl mr-3"},jP={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6"},UP={key:0,class:"space-y-3 mb-4"},qP={class:"flex items-center"},WP={class:"font-medium text-gray-900 dark:text-white"},YP={class:"text-xs text-gray-500 dark:text-gray-400"},GP=["onClick","disabled"],ZP={key:1,class:"text-center py-6 text-gray-500 dark:text-gray-400 text-sm mb-4"},KP=["disabled"],XP={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6"},JP={key:0,class:"space-y-3 mb-4"},QP={class:"flex items-center"},e6={class:"font-medium text-gray-900 dark:text-white"},t6={class:"text-xs text-gray-500 dark:text-gray-400"},n6=["onClick","disabled"],o6={key:1,class:"text-center py-6 text-gray-500 dark:text-gray-400 text-sm mb-4"},r6=["disabled"],s6={__name:"ConnectionsView",setup(e){const t=iv(),n=Rt();_c();const o=de(!1),r=de(!1),s=de(""),i=de(!1),a=ne(()=>t.getAnalyticsConnections),l=ne(()=>t.getSheetsConnections),u=async f=>{o.value=!0;try{await t.connectGoogle(f,n.apiConfig)}catch(h){alert(`Erro ao conectar: ${h.message}`)}finally{o.value=!1}},c=async f=>{if(confirm("Tem certeza que deseja desconectar esta conta?")){r.value=!0;try{await t.revokeConnection(f,n.apiConfig),s.value="Conexo removida com sucesso!",i.value=!0,setTimeout(()=>{s.value=""},3e3)}catch(h){alert(`Erro ao desconectar: ${h.message}`)}finally{r.value=!1}}},d=f=>f?new Date(f).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"}):"Data desconhecida";return wt(async()=>{const f=new URLSearchParams(window.location.search);if(f.has("success")||f.has("error")){const p=t.handleOAuthCallback(f);s.value=p.message,i.value=p.success,window.history.replaceState({},document.title,window.location.pathname),setTimeout(()=>{s.value=""},5e3),p.success&&await new Promise(y=>setTimeout(y,1e3))}await t.fetchConnections(n.apiConfig)}),(f,h)=>(O(),D("div",DP,[b("div",PP,[h[11]||(h[11]=b("div",{class:"mb-8"},[b("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-2"}," Conexes Google "),b("p",{class:"text-gray-600 dark:text-gray-400"}," Gerencie suas conexes com Google Analytics e Google Sheets ")],-1)),ye(t).loading?(O(),D("div",VP,[...h[2]||(h[2]=[b("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1),b("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"Carregando conexes...",-1)])])):ye(t).error?(O(),D("div",zP,[b("div",HP,[h[4]||(h[4]=b("span",{class:"text-red-600 dark:text-red-400 text-xl mr-3"},"",-1)),b("div",null,[h[3]||(h[3]=b("h3",{class:"text-red-800 dark:text-red-300 font-semibold"},"Erro ao carregar conexes",-1)),b("p",FP,be(ye(t).error),1)])])])):we("",!0),s.value?(O(),D("div",{key:2,class:qe(["mb-6 p-4 rounded-lg",i.value?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"])},[b("div",LP,[b("span",BP,be(i.value?"":""),1),b("p",{class:qe(i.value?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300")},be(s.value),3)])],2)):we("",!0),b("div",jP,[h[7]||(h[7]=Qn('<div class="flex items-center justify-between mb-4" data-v-dc90dba2><div class="flex items-center" data-v-dc90dba2><span class="text-3xl mr-3" data-v-dc90dba2></span><div data-v-dc90dba2><h2 class="text-xl font-semibold text-gray-900 dark:text-white" data-v-dc90dba2>Google Analytics</h2><p class="text-sm text-gray-600 dark:text-gray-400" data-v-dc90dba2>Conecte suas propriedades do GA4</p></div></div></div>',1)),a.value.length>0?(O(),D("div",UP,[(O(!0),D(Pe,null,at(a.value,p=>{var y;return O(),D("div",{key:p.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-md"},[b("div",qP,[h[5]||(h[5]=b("span",{class:"text-green-500 mr-3"},"",-1)),b("div",null,[b("p",WP,be(p.email||p.accountEmail||p.name||`Conexo ${(y=p.id)==null?void 0:y.substring(0,8)}`),1),b("p",YP," Conectado em "+be(d(p.createdAt||p.createdDate)),1)])]),b("button",{onClick:m=>c(p.id),disabled:r.value,class:"px-3 py-1.5 text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors disabled:opacity-50"}," Desconectar ",8,GP)])}),128))])):(O(),D("div",ZP," Nenhuma conta conectada ")),b("button",{onClick:h[0]||(h[0]=p=>u("analytics")),disabled:o.value,class:"w-full px-4 py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium rounded-md transition-colors disabled:cursor-not-allowed flex items-center justify-center"},[h[6]||(h[6]=b("span",{class:"mr-2"},"",-1)),st(" "+be(o.value?"Conectando...":"Adicionar conta Google Analytics"),1)],8,KP)]),b("div",XP,[h[10]||(h[10]=Qn('<div class="flex items-center justify-between mb-4" data-v-dc90dba2><div class="flex items-center" data-v-dc90dba2><span class="text-3xl mr-3" data-v-dc90dba2></span><div data-v-dc90dba2><h2 class="text-xl font-semibold text-gray-900 dark:text-white" data-v-dc90dba2>Google Sheets</h2><p class="text-sm text-gray-600 dark:text-gray-400" data-v-dc90dba2>Acesse suas planilhas do Google</p></div></div></div>',1)),l.value.length>0?(O(),D("div",JP,[(O(!0),D(Pe,null,at(l.value,p=>{var y;return O(),D("div",{key:p.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-md"},[b("div",QP,[h[8]||(h[8]=b("span",{class:"text-green-500 mr-3"},"",-1)),b("div",null,[b("p",e6,be(p.email||p.accountEmail||p.name||`Conexo ${(y=p.id)==null?void 0:y.substring(0,8)}`),1),b("p",t6," Conectado em "+be(d(p.createdAt||p.createdDate)),1)])]),b("button",{onClick:m=>c(p.id),disabled:r.value,class:"px-3 py-1.5 text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors disabled:opacity-50"}," Desconectar ",8,n6)])}),128))])):(O(),D("div",o6," Nenhuma conta conectada ")),b("button",{onClick:h[1]||(h[1]=p=>u("sheets")),disabled:o.value,class:"w-full px-4 py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium rounded-md transition-colors disabled:cursor-not-allowed flex items-center justify-center"},[h[9]||(h[9]=b("span",{class:"mr-2"},"",-1)),st(" "+be(o.value?"Conectando...":"Adicionar conta Google Sheets"),1)],8,r6)])])]))}},i6=Mt(s6,[["__scopeId","data-v-dc90dba2"]]),a6=Dx({history:cx("/editor/"),routes:[{path:"/",name:"home",component:tP},{path:"/integrations",name:"integrations",component:MP},{path:"/connections",name:"connections",component:i6},{path:"/playground",name:"playground",component:()=>Xe(()=>import("./PlaygroundView-Ch076pby.js"),[])}]});async function l6(){try{const{initializeEngine:e}=await Xe(async()=>{const{initializeEngine:n}=await import("./loader-djZNpyzX.js");return{initializeEngine:n}},[]),t=await e();if(t.success)return t;throw new Error(t.error)}catch(e){throw e}}async function u6(){try{const e=await l6();if(!e.success)throw new Error(`Engine falhou: ${e.error}`);const t=Sb(y1);t.use(Nb()),t.use(a6),t.mount("#app")}catch(e){document.body.innerHTML=`
      <div style="
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        font-family: system-ui, -apple-system, sans-serif;
        background: #0f172a;
        color: #f1f5f9;
        padding: 2rem;
      ">
        <div style="max-width: 600px; text-align: center;">
          <h1 style="font-size: 2rem; margin-bottom: 1rem; color: #ef4444;">
             Falha ao Inicializar
          </h1>
          <p style="font-size: 1rem; margin-bottom: 2rem; color: #94a3b8;">
            No foi possvel carregar o LyntFlow Engine.
          </p>
          <details style="
            text-align: left;
            background: #1e293b;
            padding: 1rem;
            border-radius: 0.5rem;
            border: 1px solid #334155;
          ">
            <summary style="cursor: pointer; font-weight: 600; color: #f59e0b;">
              Detalhes do erro
            </summary>
            <pre style="
              margin-top: 1rem;
              font-size: 0.875rem;
              color: #e2e8f0;
              white-space: pre-wrap;
            ">${e.message}

${e.stack||""}</pre>
          </details>
          <button
            onclick="location.reload()"
            style="
              margin-top: 2rem;
              padding: 0.75rem 1.5rem;
              background: #3b82f6;
              color: white;
              border: none;
              border-radius: 0.5rem;
              font-size: 1rem;
              cursor: pointer;
              font-weight: 600;
            "
          >
             Tentar Novamente
          </button>
        </div>
      </div>
    `}}u6();export{eP as F,Xe as _,_c as a,ut as b,D as c,b as d,O as e,Qo as f,M6 as g,R6 as h,I6 as i,wa as j,Ar as k,A6 as l,wt as o,de as r,T6 as s,be as t,Rt as u,O6 as v};
