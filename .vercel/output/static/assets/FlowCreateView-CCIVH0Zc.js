var $=(b,x,m)=>new Promise((o,p)=>{var a=l=>{try{c(m.next(l))}catch(r){p(r)}},d=l=>{try{c(m.throw(l))}catch(r){p(r)}},c=l=>l.done?o(l.value):Promise.resolve(l.value).then(a,d);c((m=m.apply(b,x)).next())});import{A as D,c as L,i as w,m as F,b as g,k as e,l as i,u as n,I as u,t as f,z as y,r as h,a as P,s as R,n as T,q as k,v as C,F as A,C as z,J as U,K as M,E as I}from"./vue-vendor-BR4PrzJp.js";import{_ as N}from"./AppLayout-DfxNFnX7.js";import{u as B}from"./useFlows-ZtHeo4Pl.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-L5NC1uLI.js";import"./utils-nSMfNdYQ.js";const K={key:0,class:"bg-gradient-to-r from-orange-50 to-red-50 border-2 border-orange-300 rounded-lg p-6 shadow-lg"},j={class:"flex items-start gap-4"},G={class:"flex-shrink-0"},O={class:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center"},H={class:"flex-1"},J={class:"text-lg font-semibold text-gray-900 mb-2"},Q={class:"text-gray-700 mb-4"},W={class:"bg-white/80 rounded-lg p-4 mb-4"},X={class:"text-sm text-gray-600"},Y={class:"flex flex-wrap gap-3"},Z={__name:"PlanLimitAlert",props:{show:{type:Boolean,default:!1},errorMessage:{type:String,default:""},limitType:{type:String,default:"generic"}},emits:["close"],setup(b,{emit:x}){const m=b,o=x,p=D(),a=L(()=>{const l={flows:{title:"Limite de Flows Atingido",icon:"lucide:workflow",tip:"VocÃª pode excluir flows que nÃ£o estÃ¡ mais usando ou fazer upgrade para criar mais flows.",action:"Gerenciar Meus Flows",actionRoute:"/flows"},executions:{title:"Limite de ExecuÃ§Ãµes Atingido",icon:"lucide:play-circle",tip:"VocÃª atingiu o limite mensal de execuÃ§Ãµes. FaÃ§a upgrade para continuar executando seus flows.",action:"Ver HistÃ³rico de ExecuÃ§Ãµes",actionRoute:"/executions"},storage:{title:"Limite de Armazenamento Atingido",icon:"lucide:hard-drive",tip:"Seu armazenamento estÃ¡ cheio. VocÃª pode excluir execuÃ§Ãµes antigas ou fazer upgrade para mais espaÃ§o.",action:"Ver Armazenamento",actionRoute:"/profile?tab=plan"},schedules:{title:"Limite de Agendamentos Atingido",icon:"lucide:calendar",tip:"Schedules nÃ£o estÃ£o disponÃ­veis no plano FREE. FaÃ§a upgrade para agendar execuÃ§Ãµes automÃ¡ticas.",action:"Gerenciar Schedules",actionRoute:"/schedules"},generic:{title:"Limite do Plano Atingido",icon:"lucide:alert-triangle",tip:"VocÃª atingiu um limite do seu plano atual. FaÃ§a upgrade para continuar usando todos os recursos.",action:"Ver Detalhes",actionRoute:"/profile?tab=plan"}};return l[m.limitType]||l.generic});function d(){p.push("/profile?tab=plan"),o("close")}function c(){p.push(a.value.actionRoute),o("close")}return(l,r)=>b.show?(g(),w("div",K,[e("div",j,[e("div",G,[e("div",O,[i(n(u),{icon:a.value.icon,class:"w-6 h-6 text-orange-600"},null,8,["icon"])])]),e("div",H,[e("h3",J,f(a.value.title),1),e("p",Q,f(b.errorMessage||"VocÃª atingiu o limite do seu plano atual."),1),e("div",W,[e("p",X,[r[1]||(r[1]=e("strong",null,"ðŸ’¡ Dica:",-1)),y(" "+f(a.value.tip),1)])]),e("div",Y,[e("button",{onClick:d,class:"px-6 py-3 bg-brand-purple text-white rounded-lg hover:brightness-110 transition-all flex items-center gap-2 font-medium shadow-sm"},[i(n(u),{icon:"lucide:sparkles",class:"w-5 h-5"}),r[2]||(r[2]=y(" Ver Planos e Fazer Upgrade ",-1))]),e("button",{onClick:c,class:"px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-all flex items-center gap-2 font-medium"},[i(n(u),{icon:"lucide:arrow-right",class:"w-5 h-5"}),y(" "+f(a.value.action),1)])])]),e("button",{onClick:r[0]||(r[0]=_=>l.$emit("close")),class:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors"},[i(n(u),{icon:"lucide:x",class:"w-5 h-5"})])])])):F("",!0)}},ee={class:"flex items-center justify-between mb-8"},te={class:"flex items-center space-x-3"},oe=["disabled"],se={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3 mb-6"},ae={class:"flex-1"},le={class:"text-sm font-medium text-red-900"},re={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6 mb-6"},ie={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center tracking-wide"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},ue=["value"],de={class:"mb-6"},ce={class:"mb-6"},pe={class:"flex flex-wrap gap-2 mb-2"},me=["onClick"],ge={class:"flex gap-2"},fe={class:"border-t border-gray-200 pt-4"},be={class:"space-y-3"},xe={class:"flex items-center"},ve={key:0,class:"ml-6 p-3 bg-yellow-50 rounded-lg"},we={class:"text-sm text-yellow-800"},ye={__name:"FlowCreateView",setup(b){const x=D(),{createFlow:m}=B(),o=h({name:"",description:"",category:"automation",tags:[],isPublic:!1,metadata:{requirements:[]}}),p=h(""),a=h(!1),d=h(""),c=h(!1),l=[{value:"automation",label:"AutomaÃ§Ã£o",icon:"lucide:workflow"},{value:"data-processing",label:"Processamento de Dados",icon:"lucide:database"},{value:"api-integration",label:"IntegraÃ§Ã£o de API",icon:"lucide:link"},{value:"notification",label:"NotificaÃ§Ã£o",icon:"lucide:bell"},{value:"transformation",label:"TransformaÃ§Ã£o de Dados",icon:"lucide:shuffle"},{value:"utility",label:"Utilidade",icon:"lucide:wrench"}],r=L(()=>o.value.name.trim());function _(){const v=p.value.trim();v&&!o.value.tags.includes(v)&&(o.value.tags.push(v),p.value="")}function S(){return $(this,null,function*(){if(!r.value)return;a.value=!0,d.value="",c.value=!1;const v={name:o.value.name,description:o.value.description,category:o.value.category,tags:o.value.tags,isPublic:o.value.isPublic,metadata:o.value.metadata,status:"draft"},t=yield m(v);if(t.success)x.push("/flows");else{const s=t.error||"";(s.toLowerCase().includes("limite")||s.toLowerCase().includes("limit"))&&(c.value=!0),d.value=s}a.value=!1})}function E(){x.push("/flows")}return(v,t)=>(g(),P(N,null,{default:R(()=>[e("div",ee,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-3xl font-semibold text-gray-800 tracking-wide"},"Criar Novo Fluxo"),e("p",{class:"text-gray-600 mt-2 tracking-wide"},"Configure os metadados e configuraÃ§Ãµes do seu fluxo. O design visual serÃ¡ feito no Flow Builder.")],-1)),e("div",te,[e("button",{onClick:E,class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all flex items-center space-x-2 font-medium tracking-wide"},[i(n(u),{icon:"lucide:arrow-left",class:"w-4 h-4"}),t[7]||(t[7]=e("span",null,"Voltar",-1))]),e("button",{onClick:S,disabled:!r.value||a.value,class:"px-6 py-2 bg-brand-purple text-white rounded-lg hover:brightness-110 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center space-x-2 shadow-sm font-medium tracking-wide"},[i(n(u),{icon:a.value?"lucide:loader-2":"lucide:save",class:T(["w-4 h-4",{"animate-spin":a.value}])},null,8,["icon","class"]),e("span",null,f(a.value?"Salvando...":"Salvar Fluxo"),1)],8,oe)])]),c.value?(g(),P(Z,{key:0,show:c.value,"error-message":d.value,"limit-type":"flows",onClose:t[0]||(t[0]=s=>{d.value="",c.value=!1}),class:"mb-6"},null,8,["show","error-message"])):d.value?(g(),w("div",se,[i(n(u),{icon:"lucide:alert-circle",class:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e("div",ae,[e("p",le,f(d.value),1)]),e("button",{onClick:t[1]||(t[1]=s=>d.value=""),class:"flex-shrink-0 text-red-400 hover:text-red-600"},[i(n(u),{icon:"lucide:x",class:"w-4 h-4"})])])):F("",!0),e("div",re,[e("h2",ie,[i(n(u),{icon:"lucide:settings",class:"w-5 h-5 mr-2 text-brand-purple"}),t[9]||(t[9]=y(" ConfiguraÃ§Ã£o do Fluxo ",-1))]),e("div",ne,[e("div",null,[t[10]||(t[10]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"}," Nome do Fluxo * ",-1)),k(e("input",{id:"name","onUpdate:modelValue":t[2]||(t[2]=s=>o.value.name=s),type:"text",placeholder:"Digite o nome do fluxo (ex: 'Fluxo de Registro de UsuÃ¡rio')",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-purple focus:border-transparent focus:border-transparent"},null,512),[[C,o.value.name]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-2"}," Categoria ",-1)),k(e("select",{id:"category","onUpdate:modelValue":t[3]||(t[3]=s=>o.value.category=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-purple focus:border-transparent focus:border-transparent"},[(g(),w(A,null,z(l,s=>e("option",{key:s.value,value:s.value},f(s.label),9,ue)),64))],512),[[U,o.value.category]])])]),e("div",de,[t[12]||(t[12]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," DescriÃ§Ã£o ",-1)),k(e("textarea",{id:"description","onUpdate:modelValue":t[4]||(t[4]=s=>o.value.description=s),rows:"3",placeholder:"Descreva o que este fluxo faz, seu propÃ³sito e detalhes importantes...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-purple focus:border-transparent focus:border-transparent resize-none"},null,512),[[C,o.value.description]])]),e("div",ce,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tags ",-1)),e("div",pe,[(g(!0),w(A,null,z(o.value.tags,(s,V)=>(g(),w("span",{key:V,class:"inline-flex items-center px-2 py-1 bg-brand-purple/10 text-brand-purple border border-brand-purple/30 text-xs rounded-full"},[y(f(s)+" ",1),e("button",{onClick:he=>o.value.tags.splice(V,1),class:"ml-1 text-blue-600 hover:text-blue-800"},[i(n(u),{icon:"lucide:x",class:"w-3 h-3"})],8,me)]))),128))]),e("div",ge,[k(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>p.value=s),onKeyup:M(_,["enter"]),type:"text",placeholder:"Add tags (press Enter)",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-purple focus:border-transparent focus:border-transparent text-sm"},null,544),[[C,p.value]]),e("button",{onClick:_,type:"button",class:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"},[i(n(u),{icon:"lucide:plus",class:"w-4 h-4"})])])]),e("div",fe,[t[16]||(t[16]=e("h3",{class:"text-sm font-medium text-gray-900 mb-3"},"Publishing Options",-1)),e("div",be,[e("label",xe,[k(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.value.isPublic=s),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-brand-purple focus:border-transparent border-gray-300 rounded"},null,512),[[I,o.value.isPublic]]),t[14]||(t[14]=e("span",{class:"ml-2 text-sm text-gray-700"},"Make this flow public",-1)),i(n(u),{icon:"lucide:info",class:"w-4 h-4 ml-2 text-gray-400",title:"Public flows can be discovered and imported by other users"})]),o.value.isPublic?(g(),w("div",ve,[e("p",we,[i(n(u),{icon:"lucide:alert-triangle",class:"w-4 h-4 inline mr-1"}),t[15]||(t[15]=y(" Public flows will be visible in the community library. Ensure you don't include sensitive information. ",-1))])])):F("",!0)])])])]),_:1}))}},Ae=q(ye,[["__scopeId","data-v-aa23acaa"]]);export{Ae as default};
