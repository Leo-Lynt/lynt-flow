var L=Object.defineProperty;var k=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var S=(n,e,p)=>e in n?L(n,e,{enumerable:!0,configurable:!0,writable:!0,value:p}):n[e]=p,c=(n,e)=>{for(var p in e||(e={}))j.call(e,p)&&S(n,p,e[p]);if(k)for(var p of k(e))q.call(e,p)&&S(n,p,e[p]);return n};var i=(n,e,p)=>new Promise((y,h)=>{var $=f=>{try{g(p.next(f))}catch(m){h(m)}},w=f=>{try{g(p.throw(f))}catch(m){h(m)}},g=f=>f.done?y(f.value):Promise.resolve(f.value).then($,w);g((p=p.apply(n,e)).next())});import{a as v}from"./utils-nSMfNdYQ.js";import{r as A}from"./vue-vendor-BR4PrzJp.js";const d="http://localhost:3001";function M(){const n=A(!1),e=A(null);function p(){return i(this,arguments,function*(r={}){var u,o,t;n.value=!0,e.value=null;try{const s=localStorage.getItem("accessToken"),a=new URLSearchParams;r.page&&a.append("page",r.page),r.limit&&a.append("limit",r.limit),r.role&&a.append("role",r.role),r.search&&a.append("search",r.search);const l=yield v.get(`${d}/api/admin/users?${a}`,{headers:{Authorization:`Bearer ${s}`}});return c({success:!0},l.data)}catch(s){return e.value=((t=(o=(u=s.response)==null?void 0:u.data)==null?void 0:o.error)==null?void 0:t.message)||"Erro ao listar usuários",{success:!1,error:e.value}}finally{n.value=!1}})}function y(){return i(this,null,function*(){var r,u,o;n.value=!0,e.value=null;try{const t=localStorage.getItem("accessToken"),s=yield v.get(`${d}/api/admin/users/stats`,{headers:{Authorization:`Bearer ${t}`}});return c({success:!0},s.data)}catch(t){return e.value=((o=(u=(r=t.response)==null?void 0:r.data)==null?void 0:u.error)==null?void 0:o.message)||"Erro ao buscar estatísticas",{success:!1,error:e.value}}finally{n.value=!1}})}function h(r){return i(this,null,function*(){var u,o,t;n.value=!0,e.value=null;try{const s=localStorage.getItem("accessToken"),a=yield v.get(`${d}/api/admin/users/${r}`,{headers:{Authorization:`Bearer ${s}`}});return c({success:!0},a.data)}catch(s){return e.value=((t=(o=(u=s.response)==null?void 0:u.data)==null?void 0:o.error)==null?void 0:t.message)||"Erro ao buscar usuário",{success:!1,error:e.value}}finally{n.value=!1}})}function $(r,u){return i(this,null,function*(){var o,t,s;n.value=!0,e.value=null;try{const a=localStorage.getItem("accessToken"),l=yield v.put(`${d}/api/admin/users/${r}/role`,{role:u},{headers:{Authorization:`Bearer ${a}`}});return c({success:!0},l.data)}catch(a){return e.value=((s=(t=(o=a.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Erro ao atualizar role",{success:!1,error:e.value}}finally{n.value=!1}})}function w(r,u){return i(this,null,function*(){var o,t,s;n.value=!0,e.value=null;try{const a=localStorage.getItem("accessToken"),l=yield v.put(`${d}/api/admin/users/${r}/status`,{isActive:u},{headers:{Authorization:`Bearer ${a}`}});return c({success:!0},l.data)}catch(a){return e.value=((s=(t=(o=a.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Erro ao alterar status",{success:!1,error:e.value}}finally{n.value=!1}})}function g(r,u){return i(this,null,function*(){var o,t,s;n.value=!0,e.value=null;try{const a=localStorage.getItem("accessToken"),l=yield v.put(`${d}/api/admin/users/${r}/verified-creator`,{isVerified:u},{headers:{Authorization:`Bearer ${a}`}});return c({success:!0},l.data)}catch(a){return e.value=((s=(t=(o=a.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Erro ao alterar status de criador",{success:!1,error:e.value}}finally{n.value=!1}})}function f(r,u){return i(this,null,function*(){var o,t,s;n.value=!0,e.value=null;try{const a=localStorage.getItem("accessToken"),l=yield v.put(`${d}/api/admin/users/${r}/plan`,{planId:u},{headers:{Authorization:`Bearer ${a}`}});return c({success:!0},l.data)}catch(a){return e.value=((s=(t=(o=a.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Erro ao atualizar plano",{success:!1,error:e.value}}finally{n.value=!1}})}function m(r=1,u=20){return i(this,null,function*(){var o,t,s;n.value=!0,e.value=null;try{const a=localStorage.getItem("accessToken"),l=yield v.get(`${d}/api/public-flows/moderation/pending?page=${r}&limit=${u}`,{headers:{Authorization:`Bearer ${a}`}});return c({success:!0},l.data)}catch(a){return e.value=((s=(t=(o=a.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Erro ao listar flows pendentes",{success:!1,error:e.value}}finally{n.value=!1}})}function B(){return i(this,arguments,function*(r={}){var u,o,t;n.value=!0,e.value=null;try{const s=localStorage.getItem("accessToken"),a=new URLSearchParams;r.status&&a.append("status",r.status),r.page&&a.append("page",r.page),r.limit&&a.append("limit",r.limit);const l=yield v.get(`${d}/api/public-flows/moderation/reports?${a}`,{headers:{Authorization:`Bearer ${s}`}});return c({success:!0},l.data)}catch(s){return e.value=((t=(o=(u=s.response)==null?void 0:u.data)==null?void 0:o.error)==null?void 0:t.message)||"Erro ao listar reports",{success:!1,error:e.value}}finally{n.value=!1}})}function z(r,u=""){return i(this,null,function*(){var o,t,s;n.value=!0,e.value=null;try{const a=localStorage.getItem("accessToken"),l=yield v.post(`${d}/api/public-flows/moderation/${r}/approve`,{notes:u},{headers:{Authorization:`Bearer ${a}`}});return c({success:!0},l.data)}catch(a){return e.value=((s=(t=(o=a.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Erro ao aprovar flow",{success:!1,error:e.value}}finally{n.value=!1}})}function I(r,u){return i(this,null,function*(){var o,t,s;n.value=!0,e.value=null;try{const a=localStorage.getItem("accessToken"),l=yield v.post(`${d}/api/public-flows/moderation/${r}/reject`,{reason:u},{headers:{Authorization:`Bearer ${a}`}});return c({success:!0},l.data)}catch(a){return e.value=((s=(t=(o=a.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Erro ao rejeitar flow",{success:!1,error:e.value}}finally{n.value=!1}})}function E(r){return i(this,null,function*(){var u,o,t;n.value=!0,e.value=null;try{const s=localStorage.getItem("accessToken"),a=yield v.post(`${d}/api/public-flows/moderation/${r}/verify`,{},{headers:{Authorization:`Bearer ${s}`}});return c({success:!0},a.data)}catch(s){return e.value=((t=(o=(u=s.response)==null?void 0:u.data)==null?void 0:o.error)==null?void 0:t.message)||"Erro ao verificar flow",{success:!1,error:e.value}}finally{n.value=!1}})}function T(r,u,o=""){return i(this,null,function*(){var t,s,a;n.value=!0,e.value=null;try{const l=localStorage.getItem("accessToken"),R=yield v.post(`${d}/api/public-flows/moderation/reports/${r}/resolve`,{action:u,reviewNotes:o},{headers:{Authorization:`Bearer ${l}`}});return c({success:!0},R.data)}catch(l){return e.value=((a=(s=(t=l.response)==null?void 0:t.data)==null?void 0:s.error)==null?void 0:a.message)||"Erro ao resolver report",{success:!1,error:e.value}}finally{n.value=!1}})}function b(){return i(this,null,function*(){var r,u,o;n.value=!0,e.value=null;try{const t=localStorage.getItem("accessToken"),s=yield v.get(`${d}/api/public-flows/moderation/stats`,{headers:{Authorization:`Bearer ${t}`}});return c({success:!0},s.data)}catch(t){return e.value=((o=(u=(r=t.response)==null?void 0:r.data)==null?void 0:u.error)==null?void 0:o.message)||"Erro ao buscar estatísticas",{success:!1,error:e.value}}finally{n.value=!1}})}function U(){return i(this,arguments,function*(r={}){var u,o,t;n.value=!0,e.value=null;try{const s=localStorage.getItem("accessToken"),a=new URLSearchParams;r.search&&a.append("search",r.search),r.category&&a.append("category",r.category),r.verified!==void 0&&a.append("verified",r.verified),r.sortBy&&a.append("sortBy",r.sortBy),r.page&&a.append("page",r.page),r.limit&&a.append("limit",r.limit);const l=yield v.get(`${d}/api/public-flows/moderation/all-flows?${a}`,{headers:{Authorization:`Bearer ${s}`}});return c({success:!0},l.data)}catch(s){return e.value=((t=(o=(u=s.response)==null?void 0:u.data)==null?void 0:o.error)==null?void 0:t.message)||"Erro ao listar flows",{success:!1,error:e.value}}finally{n.value=!1}})}function F(r){return i(this,null,function*(){var u,o,t;n.value=!0,e.value=null;try{const s=localStorage.getItem("accessToken"),a=yield v.post(`${d}/api/public-flows/moderation/${r}/unverify`,{},{headers:{Authorization:`Bearer ${s}`}});return c({success:!0},a.data)}catch(s){return e.value=((t=(o=(u=s.response)==null?void 0:u.data)==null?void 0:o.error)==null?void 0:t.message)||"Erro ao remover verificação",{success:!1,error:e.value}}finally{n.value=!1}})}function P(r,u=""){return i(this,null,function*(){var o,t,s;n.value=!0,e.value=null;try{const a=localStorage.getItem("accessToken"),l=yield v.post(`${d}/api/public-flows/moderation/${r}/quarantine`,{reason:u},{headers:{Authorization:`Bearer ${a}`}});return c({success:!0},l.data)}catch(a){return e.value=((s=(t=(o=a.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Erro ao mover para quarentena",{success:!1,error:e.value}}finally{n.value=!1}})}return{loading:n,error:e,listUsers:p,getUserStats:y,getUserDetails:h,updateUserRole:$,toggleUserStatus:w,toggleVerifiedCreator:g,updateUserPlan:f,listPendingFlows:m,listReports:B,listAllPublicFlows:U,approveFlow:z,rejectFlow:I,verifyFlow:E,unverifyFlow:F,quarantineFlow:P,resolveReport:T,getModerationStats:b}}export{M as u};
