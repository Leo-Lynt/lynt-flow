var F=(a,u,i)=>new Promise((p,d)=>{var b=l=>{try{w(i.next(l))}catch(m){d(m)}},S=l=>{try{w(i.throw(l))}catch(m){d(m)}},w=l=>l.done?p(l.value):Promise.resolve(l.value).then(b,S);w((i=i.apply(a,u)).next())});import{c as v,i as c,b as n,k as e,m as A,t as h,n as P,l as f,u as r,I as x,a as E,z as k,r as D,o as Q,s as W,A as X,F as j,C as L,D as Y}from"./vue-vendor-BR4PrzJp.js";import{_ as Z}from"./AppLayout-ufbJ5Vfo.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as te}from"./ExecutionStatusBadge-DgNAHWYX.js";import{a as se,u as oe}from"./useAuth-C_Ik1XEG.js";import{u as ae}from"./usePlan-XIWt7Egh.js";import"./utils-nSMfNdYQ.js";const ie={class:"glass-card relative bg-white/70 backdrop-blur-xl rounded-2xl p-6 border border-white/40 shadow-xl shadow-gray-900/5 transition-all duration-500 hover:shadow-2xl hover:shadow-gray-900/10 hover:-translate-y-2 h-full overflow-hidden group"},ne={class:"relative z-10"},re={class:"flex items-start justify-between"},le={class:"flex-1"},ce={class:"text-xs font-medium text-gray-600 uppercase tracking-wider"},ue={class:"mt-4"},de={class:"flex items-baseline"},me={class:"text-3xl font-semibold text-gray-900"},ge={key:0,class:"mt-2 text-sm text-gray-600 leading-relaxed"},ve={key:0,class:"relative z-10 mt-6 pt-4 border-t border-gray-200/30"},xe={__name:"StatsCard",props:{title:String,value:[String,Number],change:Number,changeType:{type:String,default:"percentage",validator:a=>["percentage","absolute"].includes(a)},subtitle:String,icon:String,color:{type:String,default:"blue",validator:a=>["blue","green","red","yellow","purple","indigo"].includes(a)},actionText:String,actionHref:String},emits:["action-click"],setup(a,{emit:u}){const i=a,p=u,d=v(()=>i.change>0),b=v(()=>i.change<0),S=v(()=>{if(!i.change)return"";const g=d.value?"+":"",y=i.changeType==="percentage"?"%":"";return`${g}${i.change}${y}`}),w=v(()=>{const g={blue:"from-purple-500 to-pink-500",green:"from-green-500 to-emerald-500",red:"from-red-500 to-orange-500",yellow:"from-orange-500 to-yellow-500",purple:"from-purple-500 to-pink-500",indigo:"from-indigo-500 to-purple-500"};return g[i.color]||g.blue}),l=v(()=>{const g={blue:"shadow-purple-500/30",green:"shadow-green-500/30",red:"shadow-red-500/30",yellow:"shadow-orange-500/30",purple:"shadow-purple-500/30",indigo:"shadow-indigo-500/30"};return g[i.color]||g.blue});function m(){i.actionHref?window.open(i.actionHref,"_blank"):p("action-click")}return(g,y)=>(n(),c("div",ie,[y[0]||(y[0]=e("div",{class:"absolute inset-0 rounded-2xl bg-gradient-to-br from-purple-500/5 via-transparent to-pink-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"},null,-1)),e("div",ne,[e("div",re,[e("div",le,[e("p",ce,h(a.title),1)]),a.icon?(n(),c("div",{key:0,class:P(["inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-gradient-to-br",w.value,"group-hover:scale-110 group-hover:rotate-6 transition-all duration-300 shadow-lg",l.value])},[f(r(x),{icon:a.icon,class:"w-7 h-7 text-white"},null,8,["icon"])],2)):A("",!0)]),e("div",ue,[e("div",de,[e("p",me,h(a.value),1),a.change!==void 0?(n(),c("p",{key:0,class:P(["ml-2 flex items-baseline text-sm font-medium",d.value?"text-green-600":b.value?"text-red-600":"text-gray-500"])},[d.value?(n(),E(r(x),{key:0,icon:"lucide:trending-up",class:"self-center flex-shrink-0 h-4 w-4 mr-1"})):b.value?(n(),E(r(x),{key:1,icon:"lucide:trending-down",class:"self-center flex-shrink-0 h-4 w-4 mr-1"})):A("",!0),k(" "+h(S.value),1)],2)):A("",!0)]),a.subtitle?(n(),c("p",ge,h(a.subtitle),1)):A("",!0)])]),a.actionText?(n(),c("div",ve,[e("button",{onClick:m,class:"group/btn inline-flex items-center text-sm font-semibold text-purple-600 hover:text-purple-700 transition-all duration-200"},[k(h(a.actionText)+" ",1),f(r(x),{icon:"lucide:arrow-right",class:"ml-1.5 w-4 h-4 group-hover/btn:translate-x-1 transition-transform"})])])):A("",!0),e("div",{class:P(["absolute -bottom-10 -right-10 w-32 h-32 bg-gradient-to-br",w.value,"opacity-5 rounded-full blur-2xl group-hover:opacity-15 transition-opacity duration-500"])},null,2)]))}},he=ee(xe,[["__scopeId","data-v-3576a0c2"]]),T=D(null),V=D(!1),N=D(null);let C=null;function fe(){function a(u=!1){return F(this,null,function*(){return!u&&T.value?{success:!0,data:T.value}:(!u&&C||(u&&(C=null),C=F(null,null,function*(){var i,p;try{V.value=!0,N.value=null;const d=yield se.get("/dashboard/overview"),b=d.data.data||d.data;return T.value=b,{success:!0,data:b}}catch(d){return N.value=((p=(i=d.response)==null?void 0:i.data)==null?void 0:p.message)||"Erro ao carregar dashboard",{success:!1,error:N.value}}finally{V.value=!1,C=null}})),C)})}return{overview:v(()=>T.value),loading:v(()=>V.value),error:v(()=>N.value),getOverview:a}}const pe={class:"mb-8"},be={class:"text-gray-600 mt-2 text-sm tracking-wide"},we={class:"font-medium text-gray-800"},ye={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},_e={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},ke={class:"bg-white/70 backdrop-blur-xl rounded-2xl border border-white/40 shadow-sm p-6"},$e={class:"flex items-center justify-between mb-4"},Ce={key:0,class:"space-y-3"},Se=["onClick"],Fe={class:"flex items-center space-x-3 flex-1 min-w-0"},Ae={class:"w-9 h-9 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-sm"},De={class:"min-w-0 flex-1"},Te={class:"text-sm font-medium text-gray-900 truncate"},Ne={class:"text-xs text-gray-600"},Ee={key:1,class:"text-center py-8 text-gray-500"},Pe={class:"bg-white/70 backdrop-blur-xl rounded-2xl border border-white/40 shadow-sm p-6"},je={class:"flex items-center justify-between mb-4"},Le={key:0,class:"space-y-3"},Ve={class:"flex items-center space-x-3 flex-1 min-w-0"},ze={class:"w-9 h-9 rounded-lg bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center shadow-sm"},Be={class:"min-w-0 flex-1"},Ie={class:"text-sm font-medium text-gray-900 truncate"},He={class:"text-xs text-gray-600"},Ue={class:"text-xs px-2.5 py-1 bg-green-50 text-green-700 rounded-lg font-medium"},Oe={key:1,class:"text-center py-8 text-gray-500"},Xe={__name:"DashboardView",setup(a){const u=X(),{user:i}=oe(),{overview:p,getOverview:d}=fe(),{getCurrentPlan:b,getCurrentUsage:S,usage:w,planDetails:l}=ae(),m=D(null),g=D(!0);v(()=>{var o;return((o=m.value)==null?void 0:o.profile)||{}});const y=v(()=>{var o;return((o=m.value)==null?void 0:o.recentExecutions)||[]}),z=v(()=>{var o;return((o=m.value)==null?void 0:o.activeSchedules)||[]}),G=v(()=>{var s,_,I,H,U,O,R,q,M;const o=(s=m.value)==null?void 0:s.stats;if(!o)return[];const t=(I=(_=l.value)==null?void 0:_.limits)==null?void 0:I.flows,$=(U=(H=l.value)==null?void 0:H.limits)==null?void 0:U.executions;return[{title:"Total de Fluxos",value:t?`${((O=w.value)==null?void 0:O.activeFlows)||o.totalFlows||0} / ${t}`:o.totalFlows||0,change:0,subtitle:t?`Limite do plano ${((R=l.value)==null?void 0:R.name)||""}`:"Fluxos criados no seu workspace",icon:"lucide:workflow",color:"blue",actionText:"Criar novo fluxo"},{title:"Fluxos Compartilhados",value:o.sharedFlows||0,change:0,subtitle:"Publicados na biblioteca",icon:"lucide:share-2",color:"purple"},{title:"Agendamentos Ativos",value:o.activeSchedules||0,change:0,subtitle:"Fluxos automatizados",icon:"lucide:calendar-clock",color:"indigo"},{title:"Total de Execuções",value:$?`${((q=w.value)==null?void 0:q.executions)||0} / ${$}`:o.totalExecutions||0,change:0,subtitle:$?`Execuções mensais (${((M=l.value)==null?void 0:M.name)||""})`:"Execuções de todos os tempos",icon:"lucide:activity",color:"green"}]});Q(()=>F(null,null,function*(){p.value?(m.value=p.value,g.value=!1):yield J(),yield Promise.all([b(),S()])}));function J(o=!1){return F(this,null,function*(){try{g.value=!0;const t=yield d(o);t.success&&(m.value=t.data)}catch(t){}finally{g.value=!1}})}function K(){u.push("/flows/create")}function B(o){return new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}return(o,t)=>(n(),E(Z,null,{default:W(()=>{var $;return[e("div",pe,[t[5]||(t[5]=e("h1",{class:"text-3xl font-semibold text-gray-800 tracking-wide"}," Painel ",-1)),e("p",be,[t[3]||(t[3]=k(" Bem-vindo de volta, ",-1)),e("span",we,h((($=r(i))==null?void 0:$.name)||"Usuário"),1),t[4]||(t[4]=k("! Aqui está sua visão geral do LyntFlow. ",-1))])]),e("div",ye,[(n(!0),c(j,null,L(G.value,s=>(n(),E(he,Y({key:s.title},{ref_for:!0},s,{onActionClick:_=>s.actionText==="Criar novo fluxo"?K():null}),null,16,["onActionClick"]))),128))]),e("div",_e,[e("div",ke,[e("div",$e,[t[7]||(t[7]=e("h2",{class:"text-lg font-semibold text-gray-800"},"Execuções Recentes",-1)),e("button",{onClick:t[0]||(t[0]=s=>r(u).push("/executions")),class:"text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors flex items-center"},[t[6]||(t[6]=k(" Ver todas ",-1)),f(r(x),{icon:"lucide:arrow-right",class:"ml-1 w-4 h-4"})])]),y.value.length>0?(n(),c("div",Ce,[(n(!0),c(j,null,L(y.value,s=>(n(),c("div",{key:s.id||s._id,onClick:_=>r(u).push(`/executions/${s.id||s._id}`),class:"flex items-center justify-between p-3 bg-white/40 backdrop-blur-sm rounded-xl border border-white/30 hover:bg-white/50 cursor-pointer transition-colors"},[e("div",Fe,[e("div",Ae,[f(r(x),{icon:"lucide:play-circle",class:"w-5 h-5 text-white"})]),e("div",De,[e("div",Te,h(s.flowName||"Fluxo Desconhecido"),1),e("div",Ne,h(B(s.startedAt)),1)])]),f(te,{status:s.status},null,8,["status"])],8,Se))),128))])):(n(),c("div",Ee,[f(r(x),{icon:"lucide:inbox",class:"w-12 h-12 mx-auto mb-2 text-gray-400"}),t[8]||(t[8]=e("p",{class:"text-sm"},"Nenhuma execução recente",-1))]))]),e("div",Pe,[e("div",je,[t[10]||(t[10]=e("h2",{class:"text-lg font-semibold text-gray-800"},"Agendamentos Ativos",-1)),e("button",{onClick:t[1]||(t[1]=s=>r(u).push("/schedules")),class:"text-sm font-medium text-green-600 hover:text-green-700 transition-colors flex items-center"},[t[9]||(t[9]=k(" Ver todos ",-1)),f(r(x),{icon:"lucide:arrow-right",class:"ml-1 w-4 h-4"})])]),z.value.length>0?(n(),c("div",Le,[(n(!0),c(j,null,L(z.value.slice(0,5),s=>{var _;return n(),c("div",{key:s.id||s._id,class:"flex items-center justify-between p-3 bg-white/40 backdrop-blur-sm rounded-xl border border-white/30 hover:bg-white/50 transition-colors"},[e("div",Ve,[e("div",ze,[f(r(x),{icon:"lucide:clock",class:"w-5 h-5 text-white"})]),e("div",Be,[e("div",Ie,h(s.flowName||((_=s.flowId)==null?void 0:_.name)||"Fluxo Desconhecido"),1),e("div",He," Próximo: "+h(B(s.nextExecutionAt)),1)])]),e("span",Ue,h(s.scheduleType),1)])}),128))])):(n(),c("div",Oe,[f(r(x),{icon:"lucide:calendar-off",class:"w-12 h-12 mx-auto mb-2 text-gray-400"}),t[12]||(t[12]=e("p",{class:"text-sm"},"Nenhum agendamento ativo",-1)),e("button",{onClick:t[2]||(t[2]=s=>r(u).push("/schedules")),class:"mt-3 inline-flex items-center text-sm font-medium text-green-600 hover:text-green-700 transition-colors"},[t[11]||(t[11]=k(" Crie seu primeiro agendamento ",-1)),f(r(x),{icon:"lucide:arrow-right",class:"ml-1 w-4 h-4"})])]))])])]}),_:1}))}};export{Xe as default};
