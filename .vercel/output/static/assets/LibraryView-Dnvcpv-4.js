var I=(T,j,x)=>new Promise((B,k)=>{var f=d=>{try{p(x.next(d))}catch(b){k(b)}},m=d=>{try{p(x.throw(d))}catch(b){k(b)}},p=d=>d.done?B(d.value):Promise.resolve(d.value).then(f,m);p((x=x.apply(T,j)).next())});import{r as u,o as ge,w as pe,a as le,s as ve,A as xe,b as i,k as e,i as c,l as r,u as o,I as n,t as a,q as y,v as me,F as P,C as A,J as U,z as _,E as he,m as S,n as L}from"./vue-vendor-BR4PrzJp.js";import{_ as fe}from"./AppLayout-ufbJ5Vfo.js";import{u as we,_ as ye}from"./ImportFlowModal-BmgwUeLJ.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-C_Ik1XEG.js";import"./utils-nSMfNdYQ.js";const ke={class:"grid grid-cols-3 gap-4 mb-6"},Ce={class:"glass-card backdrop-blur-xl bg-white/70 rounded-xl p-4 border border-white/40 shadow-sm hover:bg-white/80 transition-all"},Fe={class:"flex items-center"},Me={class:"text-2xl font-bold text-gray-900"},Ve={class:"glass-card backdrop-blur-xl bg-white/70 rounded-xl p-4 border border-white/40 shadow-sm hover:bg-white/80 transition-all"},De={class:"flex items-center"},Ie={class:"text-2xl font-bold text-gray-900"},Pe={class:"glass-card backdrop-blur-xl bg-white/70 rounded-xl p-4 border border-white/40 shadow-sm hover:bg-white/80 transition-all"},Ae={class:"flex items-center"},Se={class:"text-2xl font-bold text-gray-900"},je={class:"glass-card backdrop-blur-xl bg-white/70 rounded-xl border border-white/40 shadow-sm p-4 mb-6"},Be={class:"flex flex-col sm:flex-row gap-4"},Ne={class:"flex-1"},Ue={class:"relative"},Le={class:"flex gap-2 flex-wrap"},Te=["value"],$e=["value"],Re={class:"flex items-center px-3 py-2 bg-white/50 backdrop-blur-sm rounded-lg text-sm cursor-pointer border border-white/30 hover:bg-white/70 transition-all"},ze={key:0,class:"flex items-center justify-center py-20"},Ee={key:1,class:"text-center py-12 glass-card backdrop-blur-xl bg-white/70 rounded-xl border border-white/40 shadow-sm"},Oe={key:2},qe={class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-6"},Je={class:"p-6 relative z-10"},Qe={class:"flex items-start justify-between mb-3"},Ze={class:"flex-1"},Ge={class:"flex items-center mb-2"},He={class:"text-lg font-semibold text-gray-900 mr-2"},Ke={class:"flex gap-2 mb-2"},We={class:"text-sm text-gray-600 mb-4 line-clamp-3"},Xe={class:"flex items-center mb-4"},Ye={class:"text-sm font-medium text-gray-900"},et={class:"text-xs text-gray-500"},tt={key:0,class:"flex flex-wrap gap-1 mb-4"},st={class:"flex items-center justify-between text-sm text-gray-500"},lt={class:"flex items-center space-x-4"},at={class:"flex items-center"},ot={class:"flex items-center"},it={class:"flex items-center"},rt={class:"px-6 py-4 bg-white/20 backdrop-blur-sm border-t border-white/20 relative z-10"},nt={class:"flex items-center justify-between"},dt=["onClick"],ct=["onClick"],ut={key:0,class:"flex items-center justify-center gap-2"},bt=["disabled"],gt={class:"text-sm text-gray-700 font-medium tracking-wide"},pt=["disabled"],vt={__name:"LibraryView",setup(T){const j=xe(),{listPublicFlows:x,getLibraryStats:B,loading:k}=we(),f=u([]),m=u({totalFlows:0,totalDownloads:0,verifiedFlows:0}),p=u(""),d=u("all"),b=u("all"),C=u("popular"),F=u(!1),g=u(1),w=u(1),M=u(!1),N=u(null),$=[{value:"all",label:"Todas Categorias"},{value:"automation",label:"Automação"},{value:"data-processing",label:"Processamento de Dados"},{value:"api-integration",label:"Integração de API"},{value:"notification",label:"Notificação"},{value:"utility",label:"Utilidade"}],R=[{value:"all",label:"Todos Níveis"},{value:"beginner",label:"Iniciante"},{value:"intermediate",label:"Intermediário"},{value:"advanced",label:"Avançado"}];ge(()=>I(null,null,function*(){yield V(),yield ae()})),pe([p,d,b,C,F],()=>{g.value=1,V()});function V(){return I(this,null,function*(){const l={search:p.value||void 0,category:d.value!=="all"?d.value:void 0,difficulty:b.value!=="all"?b.value:void 0,verifiedOnly:F.value,sortBy:C.value,page:g.value,limit:12},t=yield x(l);t.success&&(f.value=t.flows||[],t.pagination&&(w.value=t.pagination.pages))})}function ae(){return I(this,null,function*(){const l=yield B();l.success&&(m.value=l.data)})}function oe(l){j.push(`/library/${l._id}`)}function ie(l){N.value=l,M.value=!0}function re(){M.value=!1,N.value=null}function ne(l){const t={automation:"bg-blue-500/10 text-blue-700 border border-blue-500/30","data-processing":"bg-green-500/10 text-green-700 border border-green-500/30","api-integration":"bg-cyan-500/10 text-cyan-700 border border-cyan-500/30",notification:"bg-orange-500/10 text-orange-700 border border-orange-500/30",utility:"bg-gray-100 text-gray-700 border border-gray-300"};return t[l]||t.utility}function de(l){const t={beginner:"bg-green-500/10 text-green-700 border border-green-500/30",intermediate:"bg-orange-500/10 text-orange-700 border border-orange-500/30",advanced:"bg-red-500/10 text-red-700 border border-red-500/30"};return t[l]||t.beginner}function ce(l){return new Date(l).toLocaleDateString("pt-BR",{year:"numeric",month:"short",day:"numeric"})}function z(l){const t=(l==null?void 0:l.split(" ").map(D=>D[0]).join("").substring(0,2))||"??",h=["bg-blue-600","bg-green-600","bg-cyan-600","bg-orange-600","bg-red-600"],s=h[(l==null?void 0:l.length)%h.length]||h[0];return{initials:t,color:s}}function ue(){g.value<w.value&&(g.value++,V())}function be(){g.value>1&&(g.value--,V())}return(l,t)=>(i(),le(fe,null,{default:ve(()=>{var h;return[t[16]||(t[16]=e("div",{class:"mb-8"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-3xl font-semibold text-gray-800 tracking-wide"},"Biblioteca Pública"),e("p",{class:"text-gray-600 mt-1 tracking-wide"},"Descubra e importe fluxos compartilhados pela comunidade")])])],-1)),e("div",ke,[e("div",Ce,[e("div",Fe,[r(o(n),{icon:"lucide:users",class:"w-8 h-8 text-blue-600 mr-3"}),e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm text-gray-700 tracking-wide"},"Fluxos da Comunidade",-1)),e("p",Me,a(m.value.totalFlows),1)])])]),e("div",Ve,[e("div",De,[r(o(n),{icon:"lucide:download",class:"w-8 h-8 text-green-600 mr-3"}),e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm text-gray-700 tracking-wide"},"Total de Downloads",-1)),e("p",Ie,a(((h=m.value.totalDownloads)==null?void 0:h.toLocaleString())||0),1)])])]),e("div",Pe,[e("div",Ae,[r(o(n),{icon:"lucide:shield-check",class:"w-8 h-8 text-cyan-600 mr-3"}),e("div",null,[t[8]||(t[8]=e("p",{class:"text-sm text-gray-700 tracking-wide"},"Fluxos Verificados",-1)),e("p",Se,a(m.value.verifiedFlows),1)])])])]),e("div",je,[e("div",Be,[e("div",Ne,[e("div",Ue,[r(o(n),{icon:"lucide:search",class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),type:"text",placeholder:"Buscar fluxos públicos...",class:"w-full pl-10 pr-3 py-2 border border-white/30 bg-white/50 backdrop-blur-sm rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"},null,512),[[me,p.value]])])]),e("div",Le,[y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>d.value=s),class:"px-3 py-2 border border-white/30 bg-white/50 backdrop-blur-sm rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"},[(i(),c(P,null,A($,s=>e("option",{key:s.value,value:s.value},a(s.label),9,Te)),64))],512),[[U,d.value]]),y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>b.value=s),class:"px-3 py-2 border border-white/30 bg-white/50 backdrop-blur-sm rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"},[(i(),c(P,null,A(R,s=>e("option",{key:s.value,value:s.value},a(s.label),9,$e)),64))],512),[[U,b.value]]),y(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>C.value=s),class:"px-3 py-2 border border-white/30 bg-white/50 backdrop-blur-sm rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"},[...t[9]||(t[9]=[e("option",{value:"popular"},"Mais Popular",-1),e("option",{value:"recent"},"Adicionados Recentemente",-1),e("option",{value:"rating"},"Melhor Avaliados",-1),e("option",{value:"name"},"Nome A-Z",-1)])],512),[[U,C.value]]),e("label",Re,[y(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>F.value=s),type:"checkbox",class:"mr-2 h-4 w-4 text-blue-600 accent-blue-600"},null,512),[[he,F.value]]),t[10]||(t[10]=_(" Apenas Verificados ",-1))])])])]),o(k)?(i(),c("div",ze,[r(o(n),{icon:"lucide:loader-2",class:"w-12 h-12 text-blue-600 animate-spin"})])):f.value.length===0?(i(),c("div",Ee,[r(o(n),{icon:"lucide:search-x",class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t[11]||(t[11]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2 tracking-wide"},"Nenhum fluxo encontrado",-1)),t[12]||(t[12]=e("p",{class:"text-gray-600 tracking-wide"},"Tente ajustar seus termos de busca ou filtros",-1))])):(i(),c("div",Oe,[e("div",qe,[(i(!0),c(P,null,A(f.value,s=>{var D,E,O,q,J,Q,Z,G,H,K,W,X,Y,ee,te,se;return i(),c("div",{key:s._id,class:"glass-card backdrop-blur-xl bg-white/70 rounded-xl border border-white/40 shadow-sm hover:shadow-xl hover:bg-white/80 transition-all duration-200 overflow-hidden relative"},[t[15]||(t[15]=e("div",{class:"absolute top-0 left-0 right-0 h-32 bg-gradient-to-b from-blue-500/30 via-cyan-500/20 to-transparent blur-md pointer-events-none"},null,-1)),e("div",Je,[e("div",Qe,[e("div",Ze,[e("div",Ge,[e("h3",He,a(s.name),1),(D=s.publicationData)!=null&&D.isVerified?(i(),le(o(n),{key:0,icon:"lucide:shield-check",class:"w-5 h-5 text-blue-600",title:"Fluxo Verificado"})):S("",!0)]),e("div",Ke,[e("span",{class:L(["px-2 py-1 text-xs font-medium rounded-full",ne(s.category)])},a(((E=$.find(v=>v.value===s.category))==null?void 0:E.label)||s.category),3),(O=s.publicMetadata)!=null&&O.difficulty?(i(),c("span",{key:0,class:L(["px-2 py-1 text-xs font-medium rounded-full",de(s.publicMetadata.difficulty)])},a(((q=R.find(v=>v.value===s.publicMetadata.difficulty))==null?void 0:q.label)||s.publicMetadata.difficulty),3)):S("",!0)])])]),e("p",We,a(s.description),1),e("div",Xe,[e("div",{class:L(["w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-medium mr-3",z((Q=(J=s.publicMetadata)==null?void 0:J.author)==null?void 0:Q.name).color])},a(z((G=(Z=s.publicMetadata)==null?void 0:Z.author)==null?void 0:G.name).initials),3),e("div",null,[e("p",Ye,a(((K=(H=s.publicMetadata)==null?void 0:H.author)==null?void 0:K.name)||"Unknown"),1),e("p",et,"Updated "+a(ce(s.updatedAt)),1)])]),(W=s.publicMetadata)!=null&&W.tags&&s.publicMetadata.tags.length>0?(i(),c("div",tt,[(i(!0),c(P,null,A(s.publicMetadata.tags.slice(0,5),v=>(i(),c("span",{key:v,class:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded"},a(v),1))),128))])):S("",!0),e("div",st,[e("div",lt,[e("span",at,[r(o(n),{icon:"lucide:download",class:"w-4 h-4 mr-1"}),_(" "+a(((Y=(X=s.publicStats)==null?void 0:X.imports)==null?void 0:Y.toLocaleString())||0),1)]),e("span",ot,[r(o(n),{icon:"lucide:star",class:"w-4 h-4 mr-1 text-yellow-500"}),_(" "+a(((te=(ee=s.publicStats)==null?void 0:ee.averageRating)==null?void 0:te.toFixed(1))||"0.0"),1)]),e("span",it,[r(o(n),{icon:"lucide:message-circle",class:"w-4 h-4 mr-1"}),_(" "+a(((se=s.publicStats)==null?void 0:se.totalReviews)||0),1)])])])]),e("div",rt,[e("div",nt,[e("button",{onClick:v=>oe(s),class:"text-gray-700 hover:text-blue-600 flex items-center text-sm font-medium tracking-wide transition-all"},[r(o(n),{icon:"lucide:eye",class:"w-4 h-4 mr-1"}),t[13]||(t[13]=_(" Ver Detalhes ",-1))],8,dt),e("button",{onClick:v=>ie(s),class:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white px-4 py-2 rounded-lg text-sm transition-all flex items-center space-x-1 shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 font-medium tracking-wide"},[r(o(n),{icon:"lucide:download",class:"w-4 h-4"}),t[14]||(t[14]=e("span",null,"Importar",-1))],8,ct)])])])}),128))]),w.value>1?(i(),c("div",ut,[e("button",{onClick:be,disabled:g.value===1,class:"px-4 py-2 backdrop-blur-sm bg-white/70 border border-white/40 rounded-lg hover:bg-white/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-sm"},[r(o(n),{icon:"lucide:chevron-left",class:"w-5 h-5"})],8,bt),e("span",gt," Página "+a(g.value)+" de "+a(w.value),1),e("button",{onClick:ue,disabled:g.value===w.value,class:"px-4 py-2 backdrop-blur-sm bg-white/70 border border-white/40 rounded-lg hover:bg-white/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-sm"},[r(o(n),{icon:"lucide:chevron-right",class:"w-5 h-5"})],8,pt)])):S("",!0)])),r(ye,{show:M.value,flow:N.value,onClose:t[5]||(t[5]=s=>M.value=!1),onImported:re},null,8,["show","flow"])]}),_:1}))}},kt=_e(vt,[["__scopeId","data-v-8a3c72c1"]]);export{kt as default};
