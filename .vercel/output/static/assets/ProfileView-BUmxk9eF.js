var Fe=Object.defineProperty;var pe=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var be=(f,p,i)=>p in f?Fe(f,p,{enumerable:!0,configurable:!0,writable:!0,value:i}):f[p]=i,ge=(f,p)=>{for(var i in p||(p={}))Me.call(p,i)&&be(f,i,p[i]);if(pe)for(var i of pe(p))Ve.call(p,i)&&be(f,i,p[i]);return f};var P=(f,p,i)=>new Promise((V,_)=>{var x=h=>{try{g(i.next(h))}catch(B){_(B)}},F=h=>{try{g(i.throw(h))}catch(B){_(B)}},g=h=>h.done?V(h.value):Promise.resolve(h.value).then(x,F);g((i=i.apply(f,p)).next())});import{c as U,i as r,b as n,m as v,k as e,l as d,z as E,u as s,I as b,t as u,n as k,r as $,o as xe,N as re,s as j,F as K,C as H,a as ie,p as J,q as A,v as M,J as ve,E as Re}from"./vue-vendor-BR4PrzJp.js";import{_ as Ue}from"./AppLayout-DfxNFnX7.js";import{B as L}from"./BaseCard-C5zSWQaB.js";import{_ as Be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Ne}from"./usePlan-Cx8sQFTx.js";import{u as De}from"./useAuth-L5NC1uLI.js";import"./utils-nSMfNdYQ.js";const Te={key:0,class:"absolute -top-3 left-1/2 -translate-x-1/2 z-10"},je={key:1,class:"absolute -top-3 left-1/2 -translate-x-1/2 z-10"},Le={class:"px-4 py-1.5 bg-gradient-to-r from-blue-600 to-cyan-600 text-white text-xs font-semibold rounded-full shadow-lg whitespace-nowrap flex items-center gap-1.5"},ze={class:"mb-4 pt-1 flex-shrink-0"},Ie={class:"inline-block px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider mb-2 bg-blue-500/10 text-blue-700"},qe={class:"mb-2 flex items-baseline gap-1"},Ge={class:"text-4xl font-black text-gray-900 tracking-tighter leading-none"},Oe={key:0,class:"text-sm font-semibold text-gray-500"},Ye={class:"mb-3 flex-shrink-0"},Qe={key:0,disabled:"",class:"w-full bg-gray-100 text-gray-500 px-4 py-2.5 rounded-lg text-sm font-semibold cursor-not-allowed"},We={key:1,disabled:"",class:"w-full bg-gray-50 text-gray-400 px-4 py-2.5 rounded-lg text-sm font-semibold cursor-not-allowed border border-gray-200"},Je={class:"space-y-2"},Ke={class:"flex items-center gap-2 text-sm text-gray-700"},He={class:"w-4 h-4 rounded-full bg-blue-500/10 flex items-center justify-center flex-shrink-0"},Xe={class:"font-bold"},Ze={class:"flex items-center gap-2 text-sm text-gray-700"},et={class:"w-4 h-4 rounded-full bg-blue-500/10 flex items-center justify-center flex-shrink-0"},tt={class:"font-bold"},st={class:"flex items-center gap-2 text-sm text-gray-700"},lt={class:"w-4 h-4 rounded-full bg-blue-500/10 flex items-center justify-center flex-shrink-0"},ot={class:"font-bold"},at={key:2,class:"absolute inset-0 -z-10 blur-xl opacity-20 bg-gradient-to-b from-blue-500 to-cyan-500 rounded-xl"},nt={__name:"PlanCard",props:{plan:{type:Object,required:!0},current:{type:Boolean,default:!1},billingInterval:{type:String,default:"monthly",validator:f=>["monthly","yearly"].includes(f)},planIndex:{type:Number,default:0}},emits:["select"],setup(f,{emit:p}){const i=f,V=p;U(()=>{if(i.billingInterval==="yearly"){const F=i.plan.priceYearly||i.plan.price*12,g=i.plan.price*12,h=Math.round((g-F)*100)/100;return{value:F,period:"/ano",savings:h}}return{value:i.plan.price,period:"/mês",savings:0}}),U(()=>i.planIndex>0?["FREE","STARTER","PRO"][i.planIndex-1]:null);const _=U(()=>i.plan.popular&&!i.current);function x(){i.current||V("select",i.plan.id)}return(F,g)=>(n(),r("div",{class:k(["relative glass-card backdrop-blur-xl bg-white/70 rounded-xl border-2 p-5 flex flex-col shadow-sm transition-all duration-500",_.value?"border-blue-500 shadow-lg shadow-blue-500/20":"border-white/40",f.current?"border-blue-500":""])},[_.value?(n(),r("div",Te,[...g[0]||(g[0]=[e("div",{class:"px-4 py-1.5 bg-gradient-to-r from-blue-600 to-cyan-600 text-white text-xs font-semibold rounded-full shadow-lg whitespace-nowrap"}," MAIS POPULAR ",-1)])])):f.current?(n(),r("div",je,[e("div",Le,[d(s(b),{icon:"lucide:check-circle",class:"w-3.5 h-3.5"}),g[1]||(g[1]=E(" SEU PLANO ",-1))])])):v("",!0),e("div",ze,[e("div",Ie,u(f.plan.name),1),e("div",qe,[e("span",Ge,u(f.plan.price===0?"R$ 0":`R$ ${Math.floor(f.plan.price)}`),1),f.plan.price>0?(n(),r("span",Oe,"/mês")):v("",!0)])]),e("div",Ye,[f.current?(n(),r("button",Qe," Plano Atual ")):f.plan.id==="free"?(n(),r("button",We," Plano Gratuito ")):(n(),r("button",{key:2,onClick:x,class:k(["w-full px-4 py-2.5 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",_.value?"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40":"bg-white text-blue-600 border-2 border-blue-500 hover:bg-blue-600 hover:text-white"])},[e("span",null,u(f.plan.cta||`Escolher ${f.plan.name}`),1),d(s(b),{icon:"lucide:arrow-right",class:"w-4 h-4"})],2))]),g[5]||(g[5]=e("div",{class:"h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent mb-3 flex-shrink-0"},null,-1)),e("div",Je,[e("div",Ke,[e("div",He,[d(s(b),{icon:"lucide:zap",class:"w-2.5 h-2.5 text-blue-600"})]),e("span",null,[e("span",Xe,u(f.plan.limits.executions.toLocaleString("pt-BR")),1),g[2]||(g[2]=E(" execuções/mês",-1))])]),e("div",Ze,[e("div",et,[d(s(b),{icon:"lucide:workflow",class:"w-2.5 h-2.5 text-blue-600"})]),e("span",null,[e("span",tt,u(f.plan.limits.flows),1),g[3]||(g[3]=E(" flows ativos",-1))])]),e("div",st,[e("div",lt,[d(s(b),{icon:"lucide:database",class:"w-2.5 h-2.5 text-blue-600"})]),e("span",null,[e("span",ot,u(f.plan.limits.dataPerMonth>=1073741824?(f.plan.limits.dataPerMonth/1073741824).toFixed(0)+" GB":(f.plan.limits.dataPerMonth/1048576).toFixed(0)+" MB"),1),g[4]||(g[4]=E(" de armazenamento",-1))])])]),_.value?(n(),r("div",at)):v("",!0)],2))}},rt=Be(nt,[["__scopeId","data-v-e6df79bf"]]),it={class:"space-y-6"},dt={class:"bg-gradient-to-br from-blue-500/5 to-cyan-500/5 rounded-xl border border-blue-500/20 p-6 glass-card backdrop-blur-xl"},ut={key:0,class:"flex justify-center items-center py-8"},ct={key:1,class:"grid grid-cols-1 lg:grid-cols-12 gap-6"},ft={class:"lg:col-span-3"},mt={class:"flex items-center gap-3 mb-4"},pt={class:"bg-blue-500/10 text-blue-600 p-2.5 rounded-lg"},bt={class:"text-xl font-bold text-gray-900"},gt={class:"space-y-2 mb-4"},vt={key:0,class:"flex items-baseline gap-1"},xt={class:"text-2xl font-bold text-gray-900"},yt={key:1,class:"text-lg font-medium text-gray-600"},wt={key:2,class:"text-xs text-gray-500"},ht=["disabled"],kt={class:"lg:col-span-9"},_t={class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},Pt={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-4"},$t={class:"bg-white rounded-lg p-3 border border-gray-100"},At={class:"flex items-center justify-between mb-2"},St={class:"w-full bg-gray-100 rounded-full h-2 overflow-hidden mb-2"},Ct={class:"text-xs text-gray-500"},Et={class:"bg-white rounded-lg p-3 border border-gray-100"},Ft={class:"flex items-center justify-between mb-2"},Mt={class:"w-full bg-gray-100 rounded-full h-2 overflow-hidden mb-2"},Vt={class:"text-xs text-gray-500"},Rt={class:"bg-white rounded-lg p-3 border border-gray-100"},Ut={class:"flex items-center justify-between mb-2"},Bt={class:"w-full bg-gray-100 rounded-full h-2 overflow-hidden mb-2"},Nt={class:"text-xs text-gray-500"},Dt={key:1,class:"text-center py-4 text-gray-500"},Tt={key:2,class:"mt-3"},jt={class:"font-medium"},Lt={class:"flex items-center justify-between mb-6"},zt={class:"flex items-center gap-2 bg-gray-100 p-1 rounded-lg"},It={class:"grid grid-cols-1 md:grid-cols-3 gap-5"},qt={__name:"PlanManagement",setup(f){const{currentPlan:p,usage:i,loading:V,planDetails:_,usagePercentages:x,isNearLimit:F,isOverLimit:g,nextBillingDate:h,PLANS:B,getCurrentPlan:X,getSubscription:Z,createCheckoutSession:ee,openBillingPortal:te,formatBytes:O,formatNumber:Y}=Ne(),N=$("monthly");xe(()=>P(null,null,function*(){yield X(),yield Z()}));const D=U(()=>h.value?new Date(h.value).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}):null),Q=U(()=>[B.FREE,B.STARTER,B.PRO]);function z(m){return m>=100?"bg-red-600":m>=80?"bg-orange-600":"bg-green-600"}function I(m){return Math.min(m,100)+"%"}function se(m){return P(this,null,function*(){console.log("[PlanManagement] Selecting plan:",m,"interval:",N.value);const c=yield ee(m,N.value);c.success||(console.error("[PlanManagement] Checkout failed:",c.error),alert(`Erro ao criar checkout: ${c.error}`))})}function S(){return P(this,null,function*(){console.log("[PlanManagement] Opening billing portal");const m=yield te();m.success||(console.error("[PlanManagement] Portal failed:",m.error),alert(`Erro ao abrir portal: ${m.error}`))})}return(m,c)=>(n(),r("div",it,[e("div",dt,[s(V)&&!s(p)?(n(),r("div",ut,[d(s(b),{icon:"lucide:loader-2",class:"w-8 h-8 text-blue-600 animate-spin"})])):(n(),r("div",ct,[e("div",ft,[e("div",mt,[e("div",pt,[d(s(b),{icon:"lucide:sparkles",class:"w-5 h-5"})]),e("div",null,[c[2]||(c[2]=e("p",{class:"text-xs text-gray-500 uppercase tracking-wider"},"Seu Plano",-1)),e("h3",bt,u(s(_).name),1)])]),e("div",gt,[s(_).price>0?(n(),r("div",vt,[e("span",xt,"R$ "+u(s(_).price),1),c[3]||(c[3]=e("span",{class:"text-gray-500 text-sm"},"/mês",-1))])):(n(),r("p",yt,"Gratuito")),s(p)&&s(p).planId!=="free"?(n(),r("div",wt," Renova em "+u(D.value||"N/A"),1)):v("",!0)]),s(p)&&s(p).planId!=="free"?(n(),r("button",{key:0,onClick:S,disabled:s(V),class:"w-full bg-white text-blue-600 border border-blue-500 px-3 py-2 rounded-lg hover:bg-blue-600 hover:text-white transition-all disabled:opacity-50 text-sm font-medium"},[d(s(b),{icon:"lucide:settings",class:"w-4 h-4 inline mr-1.5"}),c[4]||(c[4]=E(" Gerenciar ",-1))],8,ht)):v("",!0)]),e("div",kt,[e("h4",_t,[d(s(b),{icon:"lucide:bar-chart-3",class:"w-4 h-4"}),c[5]||(c[5]=E(" Uso do Mês Atual ",-1))]),s(i)?(n(),r("div",Pt,[e("div",$t,[e("div",At,[c[6]||(c[6]=e("span",{class:"text-sm font-medium text-gray-700"},"Execuções",-1)),e("span",{class:k(["text-sm font-bold",(s(x).executions||0)>=80?"text-orange-600":"text-green-600"])},u(s(x).executions||0)+"% ",3)]),e("div",St,[e("div",{class:k(["h-2 rounded-full transition-all",z(s(x).executions||0)]),style:re({width:I(s(x).executions||0)})},null,6)]),e("p",Ct,u(s(Y)(s(i).executions||0))+" / "+u(s(Y)(s(_).limits.executions)),1)]),e("div",Et,[e("div",Ft,[c[7]||(c[7]=e("span",{class:"text-sm font-medium text-gray-700"},"Flows Ativos",-1)),e("span",{class:k(["text-sm font-bold",(s(x).flows||0)>=80?"text-orange-600":"text-green-600"])},u(s(x).flows||0)+"% ",3)]),e("div",Mt,[e("div",{class:k(["h-2 rounded-full transition-all",z(s(x).flows||0)]),style:re({width:I(s(x).flows||0)})},null,6)]),e("p",Vt,u(s(i).activeFlows||0)+" / "+u(s(_).limits.flows),1)]),e("div",Rt,[e("div",Ut,[c[8]||(c[8]=e("span",{class:"text-sm font-medium text-gray-700"},"Dados",-1)),e("span",{class:k(["text-sm font-bold",(s(x).data||0)>=80?"text-orange-600":"text-green-600"])},u(s(x).data||0)+"% ",3)]),e("div",Bt,[e("div",{class:k(["h-2 rounded-full transition-all",z(s(x).data||0)]),style:re({width:I(s(x).data||0)})},null,6)]),e("p",Nt,u(s(O)(s(i).dataUsed||0))+" / "+u(s(O)(s(_).limits.dataPerMonth)),1)])])):(n(),r("div",Dt," Carregando dados de uso... ")),s(g)||s(F)?(n(),r("div",Tt,[e("div",{class:k(["px-3 py-2 rounded-lg flex items-center gap-2 text-sm",s(g)?"bg-red-500/10 text-red-600":"bg-orange-500/10 text-orange-600"])},[d(s(b),{icon:s(g)?"lucide:alert-circle":"lucide:alert-triangle",class:"w-4 h-4 flex-shrink-0"},null,8,["icon"]),e("span",jt,u(s(g)?"Você excedeu os limites do plano":"Você está próximo dos limites"),1)],2)])):v("",!0)])]))]),d(L,null,{default:j(()=>[e("div",Lt,[c[10]||(c[10]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Planos Disponíveis"),e("p",{class:"text-sm text-gray-500 mt-1"},"Escolha o plano ideal para suas necessidades")],-1)),e("div",zt,[e("button",{onClick:c[0]||(c[0]=y=>N.value="monthly"),class:k(["px-4 py-1.5 rounded-md text-sm font-medium transition-all",N.value==="monthly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"])}," Mensal ",2),e("button",{onClick:c[1]||(c[1]=y=>N.value="yearly"),class:k(["px-4 py-1.5 rounded-md text-sm font-medium transition-all relative",N.value==="yearly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"])},[...c[9]||(c[9]=[E(" Anual ",-1),e("span",{class:"absolute -top-3 -right-3 bg-brand-green text-white text-[9px] font-bold px-1 py-0.5 rounded"}," -32% ",-1)])],2)])]),e("div",It,[(n(!0),r(K,null,H(Q.value,y=>{var C;return n(),ie(rt,{key:y.id,plan:y,current:((C=s(p))==null?void 0:C.planId)===y.id,"billing-interval":N.value,onSelect:se},null,8,["plan","current","billing-interval"])}),128))])]),_:1})]))}};function Gt(){const f=$("profile"),p=$(""),i=$(""),V=[{id:"profile",name:"Perfil",icon:"lucide:user"},{id:"security",name:"Segurança",icon:"lucide:shield"},{id:"preferences",name:"Preferências",icon:"lucide:settings"},{id:"plan",name:"Plano",icon:"lucide:sparkles"},{id:"sessions",name:"Sessões",icon:"lucide:monitor"},{id:"account",name:"Conta",icon:"lucide:trash-2"}];function _(h){f.value=h,x()}function x(){i.value="",p.value=""}function F(h){p.value=h,i.value=""}function g(h){i.value=h,p.value=""}return{activeTab:U(()=>f.value),message:U(()=>p.value),error:U(()=>i.value),tabs:V,setActiveTab:_,clearMessages:x,setMessage:F,setError:g}}const Ot={key:0,class:"mb-6 bg-green-500/10 border border-green-500/30 text-green-600 px-4 py-3 rounded-lg flex items-center backdrop-blur-sm"},Yt={key:1,class:"mb-6 bg-red-500/10 border border-red-500/30 text-red-600 px-4 py-3 rounded-lg flex items-center backdrop-blur-sm"},Qt={class:"grid grid-cols-1 lg:grid-cols-4 gap-8"},Wt={class:"lg:col-span-1"},Jt={class:"space-y-1"},Kt=["onClick"],Ht={key:0,class:"mt-6 glass-card backdrop-blur-xl bg-white/70 border border-white/40 shadow-sm rounded-xl p-4"},Xt={class:"space-y-2 text-sm"},Zt={class:"flex justify-between"},es={class:"font-medium text-gray-900"},ts={class:"flex justify-between"},ss={class:"font-medium text-gray-900"},ls={class:"flex justify-between"},os={class:"font-medium text-gray-900"},as={class:"lg:col-span-3"},ns={key:0},rs={class:"relative"},is={key:0,class:"absolute right-3 top-2.5"},ds={key:0,class:"mt-2 flex items-center justify-between bg-yellow-50 border border-yellow-200 rounded-lg p-3"},us=["disabled"],cs={class:"flex justify-end"},fs=["disabled"],ms={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},ps={class:"font-medium text-gray-900 mt-1"},bs={class:"font-medium text-gray-900 mt-1"},gs={class:"font-medium text-gray-900 mt-1"},vs={class:"font-medium text-gray-900 mt-1 capitalize"},xs={key:1},ys={class:"flex justify-end"},ws=["disabled"],hs={key:0,class:"space-y-4"},ks=["disabled"],_s={key:1,class:"space-y-4"},Ps={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},$s={class:"flex justify-center bg-white p-4 rounded-lg"},As=["src"],Ss={class:"flex space-x-3"},Cs=["disabled"],Es={key:2,class:"space-y-4"},Fs={class:"flex items-center space-x-2 text-green-600"},Ms={key:3,class:"space-y-4"},Vs={class:"flex space-x-3"},Rs=["disabled"],Us={key:4,class:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Bs={class:"font-medium text-yellow-900 mb-2 flex items-center"},Ns={class:"grid grid-cols-2 gap-2 bg-white p-3 rounded font-mono text-sm"},Ds={key:2},Ts={class:"flex items-center space-x-3 cursor-pointer"},js={class:"flex justify-end"},Ls=["disabled"],zs={key:3},Is={key:4},qs={key:0,class:"text-center py-8 text-gray-500"},Gs={key:1,class:"space-y-4"},Os={class:"flex items-start justify-between"},Ys={class:"flex-1"},Qs={class:"flex items-center space-x-2 mb-2"},Ws={class:"font-medium text-gray-900"},Js={class:"text-sm text-gray-600 space-y-1"},Ks={class:"flex items-center space-x-2"},Hs={class:"flex items-center space-x-2"},Xs=["onClick"],Zs={class:"pt-4 border-t border-gray-200"},el=["disabled"],tl={key:5},sl={class:"space-y-6"},ll={class:"bg-red-50 border border-red-200 rounded-lg p-4"},ol={class:"flex items-start"},al=["disabled"],pl={__name:"ProfileView",setup(f){const{user:p,getProfile:i,updateProfile:V,changePassword:_,sendVerificationEmail:x,getPreferences:F,updatePreferences:g,getProfileStats:h,getActiveSessions:B,revokeSession:X,revokeAllSessions:Z,getConnectedAccounts:ee,enable2FA:te,verify2FA:O,disable2FA:Y,deleteAccount:N}=De(),{activeTab:D,message:Q,error:z,tabs:I,setActiveTab:se,setMessage:S,setError:m}=Gt(),c=$({name:"",email:""}),y=$({currentPassword:"",newPassword:"",confirmPassword:""}),C=$({theme:"light",language:"pt-BR",timezone:"America/Sao_Paulo",emailNotifications:!0}),T=$({password:"",confirmation:""}),w=$({password:"",token:""}),a=$(!1),R=$(null),le=$([]),de=$(null),ue=$(null),oe=$([]),q=$(!1),G=$(!1),ce=U(()=>{var o;return((o=p.value)==null?void 0:o.isVerified)||!1}),fe=U(()=>{var o;return((o=p.value)==null?void 0:o.twoFactorEnabled)||!1});xe(()=>P(null,null,function*(){yield i(),p.value&&(c.value={name:p.value.name||"",email:p.value.email||""});const o=yield F();o.success&&(C.value=ge({},o.data));const t=yield h();t.success&&(R.value=t.data);const l=yield ee();l.success&&(de.value=l.data)}));function ye(){return P(this,null,function*(){if(m(""),S(""),!c.value.name||!c.value.email){m("Please fill in all fields");return}a.value=!0;const o=yield V(c.value);a.value=!1,o.success?S("Profile updated successfully"):m(o.error)})}function we(){return P(this,null,function*(){a.value=!0;const o=yield x();a.value=!1,o.success?S("Verification email sent successfully"):m(o.error)})}function he(){return P(this,null,function*(){if(m(""),S(""),!y.value.currentPassword||!y.value.newPassword||!y.value.confirmPassword){m("Please fill in all password fields");return}if(y.value.newPassword!==y.value.confirmPassword){m("New passwords do not match");return}if(y.value.newPassword.length<6){m("New password must be at least 6 characters long");return}a.value=!0;const o=yield _(y.value.currentPassword,y.value.newPassword);a.value=!1,o.success?(S("Password changed successfully"),y.value={currentPassword:"",newPassword:"",confirmPassword:""}):m(o.error)})}function ke(){return P(this,null,function*(){if(!w.value.password){m("Password is required");return}a.value=!0;const o=yield te(w.value.password);a.value=!1,o.success?(ue.value=o.data.qrCode,q.value=!0,S("Scan the QR code with your authenticator app")):m(o.error)})}function _e(){return P(this,null,function*(){var t;if(!w.value.token){m("Token is required");return}a.value=!0;const o=yield O(w.value.token);a.value=!1,o.success?((t=o.data)!=null&&t.backupCodes&&(oe.value=o.data.backupCodes),q.value=!1,w.value={password:"",token:""},S("2FA enabled successfully! Save your backup codes."),yield i()):m(o.error)})}function Pe(){return P(this,null,function*(){if(!w.value.password||!w.value.token){m("Password and token are required");return}a.value=!0;const o=yield Y(w.value.password,w.value.token);a.value=!1,o.success?(G.value=!1,w.value={password:"",token:""},S("2FA disabled successfully"),yield i()):m(o.error)})}function $e(){return P(this,null,function*(){a.value=!0;const o=yield g(C.value);a.value=!1,o.success?S("Preferences updated successfully"):m(o.error)})}function ae(){return P(this,null,function*(){const o=yield B();o.success&&(le.value=o.data||[])})}function Ae(o){return P(this,null,function*(){if(!confirm("Are you sure you want to revoke this session?"))return;a.value=!0;const t=yield X(o);a.value=!1,t.success?(S("Session revoked successfully"),yield ae()):m(t.error)})}function Se(){return P(this,null,function*(){if(!confirm("Are you sure you want to revoke all other sessions? You will remain logged in on this device."))return;a.value=!0;const o=yield Z();a.value=!1,o.success?(S("All sessions revoked successfully"),yield ae()):m(o.error)})}function Ce(){return P(this,null,function*(){if(!T.value.password||T.value.confirmation!=="DELETE"){m("Please enter your password and type DELETE to confirm");return}if(!confirm("⚠️ WARNING: This action is irreversible! All your data will be permanently deleted. Are you absolutely sure?"))return;a.value=!0;const o=yield N(T.value.password,T.value.confirmation);a.value=!1,o.success||m(o.error)})}function ne(o){return o?new Date(o).toLocaleString():"Never"}function me(o){if(o===0)return"0 Bytes";const t=1024,l=["Bytes","KB","MB","GB"],W=Math.floor(Math.log(o)/Math.log(t));return Math.round(o/Math.pow(t,W)*100)/100+" "+l[W]}function Ee(o){return P(this,null,function*(){se(o),o==="sessions"&&(yield ae())})}return(o,t)=>(n(),ie(Ue,null,{default:j(()=>[t[61]||(t[61]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-semibold text-gray-800 tracking-wide"},"Configurações de Perfil"),e("p",{class:"text-gray-600 mt-1 tracking-wide"},"Gerencie suas configurações e preferências de conta")],-1)),s(Q)?(n(),r("div",Ot,[d(s(b),{icon:"lucide:check-circle",class:"w-5 h-5 mr-2"}),E(" "+u(s(Q)),1)])):v("",!0),s(z)?(n(),r("div",Yt,[d(s(b),{icon:"lucide:alert-circle",class:"w-5 h-5 mr-2"}),E(" "+u(s(z)),1)])):v("",!0),e("div",Qt,[e("div",Wt,[e("nav",Jt,[(n(!0),r(K,null,H(s(I),l=>(n(),r("button",{key:l.id,onClick:W=>Ee(l.id),class:k(["w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg text-left transition-all",s(D)===l.id?"bg-blue-500/10 text-blue-600 border-l-2 border-blue-500":"text-gray-700 hover:bg-white/50"])},[d(s(b),{icon:l.icon,class:"w-5 h-5 mr-3"},null,8,["icon"]),E(" "+u(l.name),1)],10,Kt))),128))]),R.value?(n(),r("div",Ht,[t[21]||(t[21]=e("h4",{class:"text-sm font-semibold text-gray-800 mb-3 tracking-wide"},"Visão Geral",-1)),e("div",Xt,[e("div",Zt,[t[18]||(t[18]=e("span",{class:"text-gray-600"},"Fluxos:",-1)),e("span",es,u(R.value.totalFlows),1)]),e("div",ts,[t[19]||(t[19]=e("span",{class:"text-gray-600"},"Execuções:",-1)),e("span",ss,u(R.value.totalExecutions),1)]),e("div",ls,[t[20]||(t[20]=e("span",{class:"text-gray-600"},"Armazenamento:",-1)),e("span",os,u(Math.round(R.value.storageUsedPercentage))+"%",1)])])])):v("",!0)]),e("div",as,[s(D)==="profile"?(n(),r("div",ns,[d(L,{title:"Profile Information",subtitle:"Update your account details"},{default:j(()=>[e("form",{onSubmit:J(ye,["prevent"]),class:"space-y-6"},[e("div",null,[t[22]||(t[22]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"}," Full Name ",-1)),A(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=l=>c.value.name=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[M,c.value.name]])]),e("div",null,[t[24]||(t[24]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email Address ",-1)),e("div",rs,[A(e("input",{id:"email","onUpdate:modelValue":t[1]||(t[1]=l=>c.value.email=l),type:"email",disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed"},null,512),[[M,c.value.email]]),ce.value?(n(),r("div",is,[d(s(b),{icon:"lucide:check-circle",class:"w-5 h-5 text-green-600"})])):v("",!0)]),t[25]||(t[25]=e("p",{class:"mt-1 text-xs text-gray-500"}," O email não pode ser alterado por questões de segurança ",-1)),ce.value?v("",!0):(n(),r("div",ds,[t[23]||(t[23]=e("span",{class:"text-sm text-yellow-800"},"Email not verified",-1)),e("button",{onClick:we,type:"button",disabled:a.value,class:"text-sm text-blue-600 hover:text-blue-800 font-medium disabled:opacity-50"}," Send verification email ",8,us)]))]),e("div",cs,[e("button",{type:"submit",disabled:a.value,class:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white px-4 py-2.5 rounded-lg transition-all shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 disabled:opacity-50 flex items-center space-x-2"},[d(s(b),{icon:a.value?"lucide:loader-2":"lucide:save",class:k(["w-4 h-4",{"animate-spin":a.value}])},null,8,["icon","class"]),e("span",null,u(a.value?"Saving...":"Save Changes"),1)],8,fs)])],32)]),_:1}),R.value?(n(),ie(L,{key:0,title:"Account Information",subtitle:"Your account details",class:"mt-6"},{default:j(()=>{var l;return[e("div",ms,[e("div",null,[t[26]||(t[26]=e("span",{class:"text-gray-600"},"Account created:",-1)),e("p",ps,u(ne(R.value.accountCreated)),1)]),e("div",null,[t[27]||(t[27]=e("span",{class:"text-gray-600"},"Last login:",-1)),e("p",bs,u(ne(R.value.lastLogin)),1)]),e("div",null,[t[28]||(t[28]=e("span",{class:"text-gray-600"},"Storage used:",-1)),e("p",gs,u(me(R.value.storageUsed))+" / "+u(me(R.value.storageQuota)),1)]),e("div",null,[t[29]||(t[29]=e("span",{class:"text-gray-600"},"Provider:",-1)),e("p",vs,u(((l=de.value)==null?void 0:l.provider)||"Local"),1)])])]}),_:1})):v("",!0)])):v("",!0),s(D)==="security"?(n(),r("div",xs,[d(L,{title:"Change Password",subtitle:"Update your account password"},{default:j(()=>[e("form",{onSubmit:J(he,["prevent"]),class:"space-y-6"},[e("div",null,[t[30]||(t[30]=e("label",{for:"currentPassword",class:"block text-sm font-medium text-gray-700 mb-2"}," Current Password ",-1)),A(e("input",{id:"currentPassword","onUpdate:modelValue":t[2]||(t[2]=l=>y.value.currentPassword=l),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[M,y.value.currentPassword]])]),e("div",null,[t[31]||(t[31]=e("label",{for:"newPassword",class:"block text-sm font-medium text-gray-700 mb-2"}," New Password ",-1)),A(e("input",{id:"newPassword","onUpdate:modelValue":t[3]||(t[3]=l=>y.value.newPassword=l),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[M,y.value.newPassword]]),t[32]||(t[32]=e("p",{class:"mt-1 text-xs text-gray-500"},"Must be at least 6 characters",-1))]),e("div",null,[t[33]||(t[33]=e("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 mb-2"}," Confirm New Password ",-1)),A(e("input",{id:"confirmPassword","onUpdate:modelValue":t[4]||(t[4]=l=>y.value.confirmPassword=l),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[M,y.value.confirmPassword]])]),e("div",ys,[e("button",{type:"submit",disabled:a.value,class:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white px-4 py-2.5 rounded-lg transition-all shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 disabled:opacity-50 flex items-center space-x-2"},[d(s(b),{icon:a.value?"lucide:loader-2":"lucide:shield-check",class:k(["w-4 h-4",{"animate-spin":a.value}])},null,8,["icon","class"]),e("span",null,u(a.value?"Updating...":"Change Password"),1)],8,ws)])],32)]),_:1}),d(L,{title:"Two-Factor Authentication (2FA)",subtitle:"Add an extra layer of security",class:"mt-6"},{default:j(()=>[!fe.value&&!q.value?(n(),r("div",hs,[t[36]||(t[36]=e("p",{class:"text-sm text-gray-600"}," Secure your account with two-factor authentication using Google Authenticator or similar apps. ",-1)),e("div",null,[t[34]||(t[34]=e("label",{for:"2fa-password",class:"block text-sm font-medium text-gray-700 mb-2"}," Enter your password to enable 2FA ",-1)),A(e("input",{id:"2fa-password","onUpdate:modelValue":t[5]||(t[5]=l=>w.value.password=l),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[M,w.value.password]])]),e("button",{onClick:ke,disabled:a.value,class:"bg-brand-purple text-white px-4 py-2 rounded-lg hover:brightness-110 transition-all disabled:opacity-50 flex items-center space-x-2"},[d(s(b),{icon:a.value?"lucide:loader-2":"lucide:shield-plus",class:k(["w-4 h-4",{"animate-spin":a.value}])},null,8,["icon","class"]),t[35]||(t[35]=e("span",null,"Enable 2FA",-1))],8,ks)])):v("",!0),q.value?(n(),r("div",_s,[e("div",Ps,[t[37]||(t[37]=e("h4",{class:"font-medium text-blue-900 mb-2"},"Step 1: Scan QR Code",-1)),t[38]||(t[38]=e("p",{class:"text-sm text-blue-800 mb-4"},"Scan this QR code with your authenticator app (Google Authenticator, Authy, etc.)",-1)),e("div",$s,[e("img",{src:ue.value,alt:"QR Code",class:"w-48 h-48"},null,8,As)])]),e("div",null,[t[39]||(t[39]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Step 2: Enter Verification Code",-1)),A(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>w.value.token=l),type:"text",placeholder:"000000",maxlength:"6",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-purple focus:border-transparent focus:border-transparent text-center text-2xl tracking-widest"},null,512),[[M,w.value.token]])]),e("div",Ss,[e("button",{onClick:_e,disabled:a.value||w.value.token.length!==6,class:"flex-1 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white px-4 py-2.5 rounded-lg transition-all shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 disabled:opacity-50 flex items-center justify-center space-x-2"},[d(s(b),{icon:a.value?"lucide:loader-2":"lucide:check",class:k(["w-4 h-4",{"animate-spin":a.value}])},null,8,["icon","class"]),t[40]||(t[40]=e("span",null,"Verify & Enable",-1))],8,Cs),e("button",{onClick:t[7]||(t[7]=l=>{q.value=!1,w.value={password:"",token:""}}),class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel ")])])):v("",!0),fe.value&&!G.value?(n(),r("div",Es,[e("div",Fs,[d(s(b),{icon:"lucide:shield-check",class:"w-5 h-5"}),t[41]||(t[41]=e("span",{class:"font-medium"},"2FA is enabled",-1))]),e("button",{onClick:t[8]||(t[8]=l=>G.value=!0),class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-all shadow-lg shadow-red-500/30 flex items-center space-x-2"},[d(s(b),{icon:"lucide:shield-off",class:"w-4 h-4"}),t[42]||(t[42]=e("span",null,"Disable 2FA",-1))])])):v("",!0),G.value?(n(),r("div",Ms,[e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Password",-1)),A(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>w.value.password=l),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[M,w.value.password]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"2FA Code",-1)),A(e("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>w.value.token=l),type:"text",maxlength:"6",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[M,w.value.token]])]),e("div",Vs,[e("button",{onClick:Pe,disabled:a.value,class:"bg-brand-red text-white px-4 py-2 rounded-lg hover:brightness-110 transition-all disabled:opacity-50 flex items-center space-x-2"},[d(s(b),{icon:a.value?"lucide:loader-2":"lucide:shield-off",class:k(["w-4 h-4",{"animate-spin":a.value}])},null,8,["icon","class"]),t[45]||(t[45]=e("span",null,"Disable 2FA",-1))],8,Rs),e("button",{onClick:t[11]||(t[11]=l=>{G.value=!1,w.value={password:"",token:""}}),class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel ")])])):v("",!0),oe.value.length>0?(n(),r("div",Us,[e("h4",Bs,[d(s(b),{icon:"lucide:alert-triangle",class:"w-5 h-5 mr-2"}),t[46]||(t[46]=E(" Save Your Backup Codes ",-1))]),t[47]||(t[47]=e("p",{class:"text-sm text-yellow-800 mb-3"}," Save these codes in a secure location. You can use them to access your account if you lose your authenticator device. ",-1)),e("div",Ns,[(n(!0),r(K,null,H(oe.value,l=>(n(),r("div",{key:l,class:"text-gray-900"},u(l),1))),128))])])):v("",!0)]),_:1})])):v("",!0),s(D)==="preferences"?(n(),r("div",Ds,[d(L,{title:"Preferences",subtitle:"Customize your experience"},{default:j(()=>[e("form",{onSubmit:J($e,["prevent"]),class:"space-y-6"},[e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Theme",-1)),A(e("select",{"onUpdate:modelValue":t[12]||(t[12]=l=>C.value.theme=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...t[48]||(t[48]=[e("option",{value:"light"},"Light",-1),e("option",{value:"dark"},"Dark",-1)])],512),[[ve,C.value.theme]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Language",-1)),A(e("select",{"onUpdate:modelValue":t[13]||(t[13]=l=>C.value.language=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...t[50]||(t[50]=[e("option",{value:"pt-BR"},"Português (Brasil)",-1),e("option",{value:"en-US"},"English (US)",-1)])],512),[[ve,C.value.language]])]),e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Timezone",-1)),A(e("input",{"onUpdate:modelValue":t[14]||(t[14]=l=>C.value.timezone=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[M,C.value.timezone]]),t[53]||(t[53]=e("p",{class:"mt-1 text-xs text-gray-500"},"e.g., America/Sao_Paulo, America/New_York",-1))]),e("div",null,[e("label",Ts,[A(e("input",{"onUpdate:modelValue":t[15]||(t[15]=l=>C.value.emailNotifications=l),type:"checkbox",class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 focus:border-transparent"},null,512),[[Re,C.value.emailNotifications]]),t[54]||(t[54]=e("span",{class:"text-sm font-medium text-gray-700"},"Email Notifications",-1))]),t[55]||(t[55]=e("p",{class:"mt-1 ml-7 text-xs text-gray-500"},"Receive email notifications about your flows and executions",-1))]),e("div",js,[e("button",{type:"submit",disabled:a.value,class:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white px-4 py-2.5 rounded-lg transition-all shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 disabled:opacity-50 flex items-center space-x-2"},[d(s(b),{icon:a.value?"lucide:loader-2":"lucide:save",class:k(["w-4 h-4",{"animate-spin":a.value}])},null,8,["icon","class"]),e("span",null,u(a.value?"Saving...":"Save Preferences"),1)],8,Ls)])],32)]),_:1})])):v("",!0),s(D)==="plan"?(n(),r("div",zs,[d(qt)])):v("",!0),s(D)==="sessions"?(n(),r("div",Is,[d(L,{title:"Active Sessions",subtitle:"Manage your logged-in devices"},{default:j(()=>[le.value.length===0?(n(),r("div",qs,[d(s(b),{icon:"lucide:monitor-off",class:"w-12 h-12 mx-auto mb-2 text-gray-400"}),t[56]||(t[56]=e("p",null,"No active sessions found",-1))])):(n(),r("div",Gs,[(n(!0),r(K,null,H(le.value,l=>(n(),r("div",{key:l.id,class:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors"},[e("div",Os,[e("div",Ys,[e("div",Qs,[d(s(b),{icon:"lucide:monitor",class:"w-5 h-5 text-gray-600"}),e("span",Ws,u(l.device||"Unknown Device"),1)]),e("div",Js,[e("div",Ks,[d(s(b),{icon:"lucide:map-pin",class:"w-4 h-4"}),e("span",null,"IP: "+u(l.ip||"Unknown"),1)]),e("div",Hs,[d(s(b),{icon:"lucide:clock",class:"w-4 h-4"}),e("span",null,"Last activity: "+u(ne(l.lastActivity)),1)])])]),e("button",{onClick:W=>Ae(l.id),class:"text-red-600 hover:text-red-800 text-sm font-medium"}," Revoke ",8,Xs)])]))),128)),e("div",Zs,[e("button",{onClick:Se,disabled:a.value,class:"bg-brand-red text-white px-4 py-2 rounded-lg hover:brightness-110 transition-all disabled:opacity-50 flex items-center space-x-2"},[d(s(b),{icon:a.value?"lucide:loader-2":"lucide:log-out",class:k(["w-4 h-4",{"animate-spin":a.value}])},null,8,["icon","class"]),t[57]||(t[57]=e("span",null,"Revoke All Other Sessions",-1))],8,el)])]))]),_:1})])):v("",!0),s(D)==="account"?(n(),r("div",tl,[d(L,{title:"Delete Account",subtitle:"Permanently delete your account and all data"},{default:j(()=>[e("div",sl,[e("div",ll,[e("div",ol,[d(s(b),{icon:"lucide:alert-triangle",class:"w-6 h-6 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),t[58]||(t[58]=e("div",{class:"text-sm text-red-800"},[e("p",{class:"font-medium mb-2"},"Warning: This action is irreversible!"),e("ul",{class:"list-disc list-inside space-y-1"},[e("li",null,"All your flows will be permanently deleted"),e("li",null,"All execution history will be lost"),e("li",null,"All schedules will be removed"),e("li",null,"All connected integrations will be disconnected"),e("li",null,"Your account cannot be recovered")])],-1))])]),e("form",{onSubmit:J(Ce,["prevent"]),class:"space-y-4"},[e("div",null,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Enter your password to confirm ",-1)),A(e("input",{"onUpdate:modelValue":t[16]||(t[16]=l=>T.value.password=l),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"},null,512),[[M,T.value.password]])]),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[E(" Type "),e("span",{class:"font-mono font-bold text-red-600"},"DELETE"),E(" to confirm ")],-1)),A(e("input",{"onUpdate:modelValue":t[17]||(t[17]=l=>T.value.confirmation=l),type:"text",required:"",placeholder:"DELETE",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"},null,512),[[M,T.value.confirmation]])]),e("button",{type:"submit",disabled:a.value||T.value.confirmation!=="DELETE",class:"w-full bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 font-medium"},[d(s(b),{icon:a.value?"lucide:loader-2":"lucide:trash-2",class:k(["w-5 h-5",{"animate-spin":a.value}])},null,8,["icon","class"]),e("span",null,u(a.value?"Deleting Account...":"Delete My Account Forever"),1)],8,al)],32)])]),_:1})])):v("",!0)])])]),_:1}))}};export{pl as default};
