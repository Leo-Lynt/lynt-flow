var _=(C,f,R)=>new Promise((T,P)=>{var q=m=>{try{s(R.next(m))}catch($){P($)}},M=m=>{try{s(R.throw(m))}catch($){P($)}},s=m=>m.done?T(m.value):Promise.resolve(m.value).then(q,M);s((R=R.apply(C,f)).next())});import{r as h,c as Z,o as Ae,i as n,b as o,m as g,k as e,F,C as D,a as B,n as I,u as i,I as c,t as l,l as b,z as k,q as N,v as ee,J as te,h as Ue,A as Ee,s as Be}from"./vue-vendor-BR4PrzJp.js";import{_ as Pe}from"./AppLayout-ufbJ5Vfo.js";import{u as je,_ as Ne}from"./ImportFlowModal-BmgwUeLJ.js";import{_ as Te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-C_Ik1XEG.js";import"./utils-nSMfNdYQ.js";const qe={class:"space-y-6"},ze={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-6"},Le={class:"flex items-start justify-between mb-4"},Oe={class:"flex items-center gap-2 mb-2"},He={class:"flex gap-1"},Je={class:"text-sm text-blue-800"},We={class:"flex gap-2"},Ge={key:0,class:"font-medium text-gray-900 mb-2"},Ke={class:"text-gray-700"},Qe={key:1,class:"text-center py-6 bg-gray-50 border border-gray-200 rounded-lg"},Xe={key:2,class:"bg-white border border-gray-200 rounded-lg p-6"},Ye={class:"font-semibold text-gray-900 mb-4"},Ze={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm"},et={class:"space-y-4"},tt={class:"flex gap-2"},st=["onClick"],at={class:"mt-1 text-xs text-gray-500"},lt={class:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200"},ot=["disabled"],it={class:"flex items-center gap-4"},rt={key:3,class:"text-center py-12 bg-gray-50 rounded-lg"},nt={key:4,class:"space-y-4"},dt={class:"flex items-start justify-between mb-4"},ut={class:"flex items-start gap-3"},ct={class:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold"},bt={class:"flex items-center gap-2 mb-1"},gt={class:"font-medium text-gray-900"},pt={class:"flex items-center gap-2"},vt={class:"flex gap-0.5"},mt={class:"text-sm text-gray-500"},xt={class:"mb-4"},ft={key:0,class:"font-medium text-gray-900 mb-2"},yt={class:"text-gray-700"},ht={class:"flex items-center justify-between pt-4 border-t border-gray-100"},wt=["onClick"],_t={__name:"FlowReviews",props:{flowId:{type:String,required:!0},userReview:Object},setup(C){const f=C,{listReviews:R,createReview:T,updateReview:P,deleteReview:q,markReviewHelpful:M,loading:s}=je(),m=h([]),$=h("helpful"),V=h(null),y=h(!1),x=h(null),p=h({rating:5,title:"",comment:""}),A=h(""),G=Z(()=>!!f.userReview);Ae(()=>_(null,null,function*(){yield j()}));function j(){return _(this,null,function*(){const v=yield R(f.flowId,{sortBy:$.value,minRating:V.value,limit:20});v.success&&(m.value=v.reviews||[])})}function K(){return _(this,null,function*(){if(A.value="",p.value.comment.length<20){A.value="Comentário deve ter pelo menos 20 caracteres";return}let v;x.value?v=yield P(x.value._id,p.value):v=yield T(f.flowId,p.value),v.success?(y.value=!1,x.value=null,p.value={rating:5,title:"",comment:""},yield j()):A.value=v.error})}function Q(){return _(this,null,function*(){f.userReview&&(x.value=f.userReview,p.value={rating:f.userReview.rating,title:f.userReview.title||"",comment:f.userReview.comment},y.value=!0)})}function X(){return _(this,null,function*(){if(!confirm("Tem certeza que deseja deletar sua avaliação?"))return;(yield q(f.userReview._id)).success&&(yield j())})}function Y(v){return _(this,null,function*(){const a=yield M(v);if(a.success){const d=m.value.find(S=>S._id===v);d&&(a.data.marked,d.helpful=a.data.helpful)}})}function L(){y.value=!1,x.value=null,p.value={rating:5,title:"",comment:""},A.value=""}function O(v){return new Date(v).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"})}function H(v){return Array.from({length:5},(a,d)=>d<v)}return(v,a)=>(o(),n("div",qe,[G.value&&!y.value?(o(),n("div",ze,[e("div",Le,[e("div",null,[a[5]||(a[5]=e("h4",{class:"font-semibold text-blue-900 mb-1"},"Sua Avaliação",-1)),e("div",Oe,[e("div",He,[(o(!0),n(F,null,D(H(C.userReview.rating),(d,S)=>(o(),B(i(c),{key:S,icon:"lucide:star",class:I(["w-4 h-4",d?"text-yellow-500 fill-yellow-500":"text-gray-300"])},null,8,["class"]))),128))]),e("span",Je,l(C.userReview.rating)+"/5",1)])]),e("div",We,[e("button",{onClick:Q,class:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1"},[b(i(c),{icon:"lucide:edit",class:"w-4 h-4"}),a[6]||(a[6]=k(" Editar ",-1))]),e("button",{onClick:X,class:"text-sm text-red-600 hover:text-red-800 flex items-center gap-1"},[b(i(c),{icon:"lucide:trash-2",class:"w-4 h-4"}),a[7]||(a[7]=k(" Deletar ",-1))])])]),C.userReview.title?(o(),n("p",Ge,l(C.userReview.title),1)):g("",!0),e("p",Ke,l(C.userReview.comment),1)])):y.value?g("",!0):(o(),n("div",Qe,[a[9]||(a[9]=e("p",{class:"text-gray-600 mb-4"},"Você ainda não avaliou este flow",-1)),e("button",{onClick:a[0]||(a[0]=d=>y.value=!0),class:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 inline-flex items-center gap-2"},[b(i(c),{icon:"lucide:star",class:"w-4 h-4"}),a[8]||(a[8]=k(" Escrever Avaliação ",-1))])])),y.value?(o(),n("div",Xe,[e("h4",Ye,l(x.value?"Editar Avaliação":"Nova Avaliação"),1),A.value?(o(),n("div",Ze,l(A.value),1)):g("",!0),e("div",et,[e("div",null,[a[10]||(a[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Classificação * ",-1)),e("div",tt,[(o(),n(F,null,D(5,d=>e("button",{key:d,onClick:S=>p.value.rating=d,type:"button",class:"focus:outline-none"},[b(i(c),{icon:"lucide:star",class:I(["w-8 h-8 transition-colors",d<=p.value.rating?"text-yellow-500 fill-yellow-500":"text-gray-300 hover:text-yellow-400"])},null,8,["class"])],8,st)),64))])]),e("div",null,[a[11]||(a[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Título (opcional) ",-1)),N(e("input",{"onUpdate:modelValue":a[1]||(a[1]=d=>p.value.title=d),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Resuma sua experiência"},null,512),[[ee,p.value.title]])]),e("div",null,[a[12]||(a[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Comentário * ",-1)),N(e("textarea",{"onUpdate:modelValue":a[2]||(a[2]=d=>p.value.comment=d),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Compartilhe sua experiência com este flow..."},null,512),[[ee,p.value.comment]]),e("p",at,l(p.value.comment.length)+" / 1000 caracteres (mínimo 20)",1)]),e("div",lt,[e("button",{onClick:L,type:"button",class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancelar "),e("button",{onClick:K,type:"button",disabled:i(s),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2"},[b(i(c),{icon:i(s)?"lucide:loader-2":"lucide:send",class:I(["w-4 h-4",{"animate-spin":i(s)}])},null,8,["icon","class"]),k(" "+l(i(s)?"Salvando...":x.value?"Atualizar":"Publicar"),1)],8,ot)])])])):g("",!0),e("div",it,[N(e("select",{"onUpdate:modelValue":a[3]||(a[3]=d=>$.value=d),onChange:j,class:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},[...a[13]||(a[13]=[e("option",{value:"helpful"},"Mais úteis",-1),e("option",{value:"recent"},"Mais recentes",-1),e("option",{value:"rating_high"},"Maior classificação",-1),e("option",{value:"rating_low"},"Menor classificação",-1)])],544),[[te,$.value]]),N(e("select",{"onUpdate:modelValue":a[4]||(a[4]=d=>V.value=d),onChange:j,class:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},[...a[14]||(a[14]=[e("option",{value:null},"Todas as classificações",-1),e("option",{value:5},"5 estrelas",-1),e("option",{value:4},"4+ estrelas",-1),e("option",{value:3},"3+ estrelas",-1)])],544),[[te,V.value]])]),m.value.length===0?(o(),n("div",rt,[b(i(c),{icon:"lucide:message-circle",class:"w-12 h-12 text-gray-400 mx-auto mb-3"}),a[15]||(a[15]=e("p",{class:"text-gray-600"},"Nenhuma avaliação ainda",-1)),a[16]||(a[16]=e("p",{class:"text-sm text-gray-500"},"Seja o primeiro a avaliar este flow!",-1))])):(o(),n("div",nt,[(o(!0),n(F,null,D(m.value,d=>{var S,r,t,w,U,E;return o(),n("div",{key:d._id,class:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow"},[e("div",dt,[e("div",ut,[e("div",ct,l(((t=(r=(S=d.userId)==null?void 0:S.name)==null?void 0:r.charAt(0))==null?void 0:t.toUpperCase())||"?"),1),e("div",null,[e("div",bt,[e("p",gt,l(((w=d.userId)==null?void 0:w.name)||"Usuário"),1),(E=(U=d.userId)==null?void 0:U.publicProfile)!=null&&E.isVerifiedCreator?(o(),B(i(c),{key:0,icon:"lucide:shield-check",class:"w-4 h-4 text-blue-500",title:"Criador Verificado"})):g("",!0)]),e("div",pt,[e("div",vt,[(o(!0),n(F,null,D(H(d.rating),(z,J)=>(o(),B(i(c),{key:J,icon:"lucide:star",class:I(["w-4 h-4",z?"text-yellow-500 fill-yellow-500":"text-gray-300"])},null,8,["class"]))),128))]),e("span",mt,l(O(d.createdAt)),1)])])])]),e("div",xt,[d.title?(o(),n("p",ft,l(d.title),1)):g("",!0),e("p",yt,l(d.comment),1)]),e("div",ht,[e("button",{onClick:z=>Y(d._id),class:"flex items-center gap-2 text-sm text-gray-600 hover:text-blue-600 transition-colors"},[b(i(c),{icon:"lucide:thumbs-up",class:"w-4 h-4"}),e("span",null,"Útil ("+l(d.helpful||0)+")",1)],8,wt)])])}),128))]))]))}},kt={key:0,class:"flex items-center justify-center py-20"},Rt={key:1,class:"max-w-7xl mx-auto"},$t={class:"mb-6"},Ct={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Mt={class:"lg:col-span-2 space-y-6"},St={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6"},Ft={class:"flex items-start justify-between mb-4"},Dt={class:"flex-1"},It={class:"flex items-center gap-2 mb-3"},Vt={class:"text-3xl font-bold text-gray-900 tracking-wide"},At={class:"flex flex-wrap gap-2 mb-4"},jt={class:"px-3 py-1 text-sm font-medium rounded-full bg-gray-100 text-gray-700 border border-gray-300"},Ut={class:"text-gray-600 mb-6"},Et={class:"flex items-center gap-6 pb-6 border-b border-gray-200"},Bt={class:"flex items-center gap-2"},Pt={class:"text-sm text-gray-600"},Nt={class:"flex items-center gap-2"},Tt={class:"text-sm text-gray-600"},qt={class:"flex items-center gap-2"},zt={class:"text-sm text-gray-600"},Lt={class:"flex items-center gap-2"},Ot={class:"flex"},Ht={class:"text-sm text-gray-600"},Jt={class:"flex items-center gap-3 pt-6"},Wt={key:0,class:"bg-brand-orange/10 border border-brand-orange/30 rounded-lg p-4"},Gt={class:"flex items-start"},Kt={class:"flex-1"},Qt={class:"list-disc list-inside space-y-1 text-sm text-yellow-800"},Xt={key:1,class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6"},Yt={class:"prose max-w-none text-gray-700 whitespace-pre-wrap"},Zt={key:2,class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6"},es={class:"flex flex-wrap gap-2"},ts={key:3,class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6"},ss={class:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2"},as={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6"},ls={class:"space-y-6"},os={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6"},is={class:"flex items-start gap-3 mb-4"},rs={class:"flex-1"},ns={class:"flex items-center gap-2 mb-1"},ds={class:"font-medium text-gray-900"},us={key:0,class:"text-sm text-gray-600"},cs={class:"text-sm text-gray-600 space-y-2"},bs={class:"flex items-center gap-2"},gs={class:"flex items-center gap-2"},ps={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6"},vs={class:"space-y-3 text-sm"},ms={class:"font-medium text-gray-900"},xs={class:"font-medium text-gray-900"},fs={class:"font-medium text-gray-900"},ys={key:0},hs={class:"flex items-start gap-2 p-3 bg-blue-50 rounded"},ws={key:1},_s={class:"flex items-start gap-2 p-3 bg-green-50 rounded"},ks={key:0,class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6"},Rs={class:"space-y-3"},$s=["onClick"],Cs={class:"font-medium text-gray-900 text-sm mb-1"},Ms={class:"text-xs text-gray-600 line-clamp-2 mb-2"},Ss={class:"flex items-center gap-3 text-xs text-gray-500"},Fs={class:"flex items-center gap-1"},Ds={class:"flex items-center gap-1"},Is={key:2,class:"fixed inset-0 z-50 overflow-y-auto"},Vs={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0"},As={class:"relative inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},js={class:"flex items-start justify-between mb-6"},Us={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg"},Es={class:"text-red-800 text-sm"},Bs={class:"space-y-4"},Ps=["value"],Ns={class:"mt-1 text-xs text-gray-500"},Ts={class:"flex items-center justify-end gap-3 mt-6 pt-6 border-t border-gray-200"},qs=["disabled"],zs={__name:"PublicFlowDetailView",setup(C){const f=Ue(),R=Ee(),{getFlowDetails:T,reportFlow:P,getUserReview:q,loading:M}=je(),s=h(null),m=h([]),$=h(null),V=h(!1),y=h(!1),x=h({category:"spam",reason:""}),p=h("");Ae(()=>_(null,null,function*(){yield A(),yield G()}));function A(){return _(this,null,function*(){const r=yield T(f.params.flowId);r.success?(s.value=r.flow,m.value=r.relatedFlows||[]):R.push("/library")})}function G(){return _(this,null,function*(){const r=yield q(f.params.flowId);r.success&&r.review&&($.value=r.review)})}function j(){V.value=!0}function K(){V.value=!1,s.value&&(s.value.publicStats.imports=(s.value.publicStats.imports||0)+1)}function Q(){return _(this,null,function*(){if(p.value="",x.value.reason.length<20){p.value="O motivo deve ter pelo menos 20 caracteres";return}const r=yield P(f.params.flowId,x.value);r.success?(y.value=!1,x.value={category:"spam",reason:""},alert("Report enviado com sucesso. Obrigado por ajudar a manter a qualidade da biblioteca.")):p.value=r.error})}function X(r){const t={automation:"bg-brand-purple/10 text-brand-purple border border-brand-purple/30","data-processing":"bg-brand-green/10 text-brand-green border border-brand-green/30","api-integration":"bg-brand-pink/10 text-brand-pink border border-brand-pink/30",notification:"bg-brand-orange/10 text-brand-orange border border-brand-orange/30",utility:"bg-gray-100 text-gray-700 border border-gray-300"};return t[r]||t.utility}function Y(r){const t={beginner:"bg-brand-green/10 text-brand-green border border-brand-green/30",intermediate:"bg-brand-orange/10 text-brand-orange border border-brand-orange/30",advanced:"bg-brand-red/10 text-brand-red border border-brand-red/30"};return t[r]||t.beginner}function L(r){return new Date(r).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"})}function O(r){const t=(r==null?void 0:r.split(" ").map(E=>E[0]).join("").substring(0,2))||"??",w=["bg-brand-purple","bg-brand-green","bg-brand-pink","bg-brand-orange","bg-brand-red"],U=w[(r==null?void 0:r.length)%w.length]||w[0];return{initials:t,color:U}}function H(r){return Array.from({length:5},(t,w)=>w<r)}const v=[{value:"automation",label:"Automação"},{value:"data-processing",label:"Processamento de Dados"},{value:"api-integration",label:"Integração de API"},{value:"notification",label:"Notificação"},{value:"utility",label:"Utilidade"}],a=[{value:"spam",label:"Spam"},{value:"malicious_code",label:"Código Malicioso"},{value:"inappropriate_content",label:"Conteúdo Inapropriado"},{value:"copyright_violation",label:"Violação de Copyright"},{value:"misleading",label:"Enganoso"},{value:"broken",label:"Não Funciona"},{value:"other",label:"Outro"}],d=Z(()=>{var r,t;return!((t=(r=s.value)==null?void 0:r.publicMetadata)!=null&&t.forkChain)||s.value.publicMetadata.forkChain.length===0?[]:s.value.publicMetadata.forkChain}),S=Z(()=>{var r,t;return((t=(r=s.value)==null?void 0:r.securityScan)==null?void 0:t.warnings)&&s.value.securityScan.warnings.length>0});return(r,t)=>(o(),B(Pe,null,{default:Be(()=>{var w,U,E,z,J,se,ae,le,oe,ie,re,ne,de,ue,ce,be,ge,pe,ve,me,xe,fe,ye,he,we,_e,ke,Re,$e,Ce,Me,Se,Fe,De;return[i(M)?(o(),n("div",kt,[b(i(c),{icon:"lucide:loader-2",class:"w-12 h-12 text-brand-purple animate-spin"})])):s.value?(o(),n("div",Rt,[e("div",$t,[e("button",{onClick:t[0]||(t[0]=u=>i(R).push("/library")),class:"text-gray-700 hover:text-gray-900 flex items-center gap-2 font-medium tracking-wide transition-all"},[b(i(c),{icon:"lucide:arrow-left",class:"w-5 h-5"}),t[8]||(t[8]=k(" Voltar para a Biblioteca ",-1))])]),e("div",Ct,[e("div",Mt,[e("div",St,[e("div",Ft,[e("div",Dt,[e("div",It,[e("h1",Vt,l(s.value.name),1),(w=s.value.publicationData)!=null&&w.isVerified?(o(),B(i(c),{key:0,icon:"lucide:shield-check",class:"w-6 h-6 text-brand-purple",title:"Fluxo Verificado"})):g("",!0)]),e("div",At,[e("span",{class:I(["px-3 py-1 text-sm font-medium rounded-full",X(s.value.category)])},l(((U=v.find(u=>u.value===s.value.category))==null?void 0:U.label)||s.value.category),3),(E=s.value.publicMetadata)!=null&&E.difficulty?(o(),n("span",{key:0,class:I(["px-3 py-1 text-sm font-medium rounded-full",Y(s.value.publicMetadata.difficulty)])},l(s.value.publicMetadata.difficulty),3)):g("",!0),e("span",jt,l(((z=s.value.publicMetadata)==null?void 0:z.license)||"MIT"),1)])])]),e("p",Ut,l(s.value.description),1),e("div",Et,[e("div",Bt,[b(i(c),{icon:"lucide:eye",class:"w-5 h-5 text-gray-400"}),e("span",Pt,l(((se=(J=s.value.publicStats)==null?void 0:J.views)==null?void 0:se.toLocaleString())||0)+" visualizações",1)]),e("div",Nt,[b(i(c),{icon:"lucide:download",class:"w-5 h-5 text-gray-400"}),e("span",Tt,l(((le=(ae=s.value.publicStats)==null?void 0:ae.imports)==null?void 0:le.toLocaleString())||0)+" imports",1)]),e("div",qt,[b(i(c),{icon:"lucide:git-fork",class:"w-5 h-5 text-gray-400"}),e("span",zt,l(((oe=s.value.publicStats)==null?void 0:oe.forks)||0)+" forks",1)]),e("div",Lt,[e("div",Ot,[(o(!0),n(F,null,D(H(Math.round(((ie=s.value.publicStats)==null?void 0:ie.averageRating)||0)),(u,W)=>(o(),B(i(c),{key:W,icon:"lucide:star",class:I(["w-4 h-4",u?"text-yellow-500 fill-yellow-500":"text-gray-300"])},null,8,["class"]))),128))]),e("span",Ht,l(((ne=(re=s.value.publicStats)==null?void 0:re.averageRating)==null?void 0:ne.toFixed(1))||"0.0")+" ("+l(((de=s.value.publicStats)==null?void 0:de.totalReviews)||0)+")",1)])]),e("div",Jt,[e("button",{onClick:j,class:"bg-brand-purple text-white px-6 py-3 rounded-lg hover:brightness-110 flex items-center gap-2 font-medium tracking-wide transition-all"},[b(i(c),{icon:"lucide:download",class:"w-5 h-5"}),t[9]||(t[9]=k(" Importar Flow ",-1))]),e("button",{onClick:t[1]||(t[1]=u=>y.value=!0),class:"border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 flex items-center gap-2 font-medium tracking-wide transition-all"},[b(i(c),{icon:"lucide:flag",class:"w-5 h-5"}),t[10]||(t[10]=k(" Reportar ",-1))])])]),S.value?(o(),n("div",Wt,[e("div",Gt,[b(i(c),{icon:"lucide:alert-triangle",class:"w-5 h-5 text-brand-orange mt-0.5 mr-3 flex-shrink-0"}),e("div",Kt,[t[11]||(t[11]=e("h4",{class:"font-medium text-yellow-900 mb-2"},"Avisos de Segurança",-1)),e("ul",Qt,[(o(!0),n(F,null,D(s.value.securityScan.warnings,u=>(o(),n("li",{key:u},l(u),1))),128))])])])])):g("",!0),(ue=s.value.publicMetadata)!=null&&ue.detailedDescription?(o(),n("div",Xt,[t[12]||(t[12]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Descrição Detalhada",-1)),e("div",Yt,l(s.value.publicMetadata.detailedDescription),1)])):g("",!0),(ce=s.value.publicMetadata)!=null&&ce.tags&&s.value.publicMetadata.tags.length>0?(o(),n("div",Zt,[t[13]||(t[13]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Tags",-1)),e("div",es,[(o(!0),n(F,null,D(s.value.publicMetadata.tags,u=>(o(),n("span",{key:u,class:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full"},l(u),1))),128))])])):g("",!0),d.value.length>0?(o(),n("div",ts,[e("h2",ss,[b(i(c),{icon:"lucide:git-fork",class:"w-5 h-5"}),t[14]||(t[14]=k(" Fork de ",-1))]),t[15]||(t[15]=e("div",{class:"text-sm text-gray-600"}," Este flow é um fork. Veja a cadeia de atribuição original. ",-1))])):g("",!0),e("div",as,[t[16]||(t[16]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Avaliações",-1)),b(_t,{"flow-id":s.value._id,"user-review":$.value},null,8,["flow-id","user-review"])])]),e("div",ls,[e("div",os,[t[17]||(t[17]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Autor",-1)),e("div",is,[e("div",{class:I(["w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold",O((ge=(be=s.value.publicMetadata)==null?void 0:be.author)==null?void 0:ge.name).color])},l(O((ve=(pe=s.value.publicMetadata)==null?void 0:pe.author)==null?void 0:ve.name).initials),3),e("div",rs,[e("div",ns,[e("p",ds,l(((xe=(me=s.value.publicMetadata)==null?void 0:me.author)==null?void 0:xe.name)||"Unknown"),1),(ye=(fe=s.value.publicMetadata)==null?void 0:fe.author)!=null&&ye.isVerifiedCreator?(o(),B(i(c),{key:0,icon:"lucide:shield-check",class:"w-4 h-4 text-blue-500",title:"Criador Verificado"})):g("",!0)]),(we=(he=s.value.publicMetadata)==null?void 0:he.author)!=null&&we.bio?(o(),n("p",us,l(s.value.publicMetadata.author.bio),1)):g("",!0)])]),e("div",cs,[e("div",bs,[b(i(c),{icon:"lucide:package",class:"w-4 h-4"}),e("span",null,l(((ke=(_e=s.value.publicMetadata)==null?void 0:_e.author)==null?void 0:ke.totalPublicFlows)||0)+" flows públicos",1)]),e("div",gs,[b(i(c),{icon:"lucide:star",class:"w-4 h-4"}),e("span",null,l(((Ce=($e=(Re=s.value.publicMetadata)==null?void 0:Re.author)==null?void 0:$e.averageRating)==null?void 0:Ce.toFixed(1))||"0.0")+" avaliação média",1)])])]),e("div",ps,[t[23]||(t[23]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Informações",-1)),e("div",vs,[e("div",null,[t[18]||(t[18]=e("p",{class:"text-gray-600"},"Publicado em",-1)),e("p",ms,l(L((Me=s.value.publicationData)==null?void 0:Me.publishedAt)),1)]),e("div",null,[t[19]||(t[19]=e("p",{class:"text-gray-600"},"Última atualização",-1)),e("p",xs,l(L(s.value.updatedAt)),1)]),e("div",null,[t[20]||(t[20]=e("p",{class:"text-gray-600"},"Licença",-1)),e("p",fs,l(((Se=s.value.publicMetadata)==null?void 0:Se.license)||"MIT"),1)]),(Fe=s.value.publicMetadata)!=null&&Fe.requireAttribution?(o(),n("div",ys,[e("div",hs,[b(i(c),{icon:"lucide:info",class:"w-4 h-4 text-blue-600 mt-0.5"}),t[21]||(t[21]=e("p",{class:"text-xs text-blue-800"},"Requer atribuição ao autor",-1))])])):g("",!0),(De=s.value.publicMetadata)!=null&&De.allowForking?(o(),n("div",ws,[e("div",_s,[b(i(c),{icon:"lucide:git-fork",class:"w-4 h-4 text-green-600 mt-0.5"}),t[22]||(t[22]=e("p",{class:"text-xs text-green-800"},"Fork permitido",-1))])])):g("",!0)])]),m.value.length>0?(o(),n("div",ks,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Flows Relacionados",-1)),e("div",Rs,[(o(!0),n(F,null,D(m.value,u=>{var W,Ie,Ve;return o(),n("div",{key:u._id,onClick:Ls=>i(R).push(`/library/${u._id}`),class:"p-3 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 cursor-pointer transition-all"},[e("h4",Cs,l(u.name),1),e("p",Ms,l(u.description),1),e("div",Ss,[e("span",Fs,[b(i(c),{icon:"lucide:download",class:"w-3 h-3"}),k(" "+l(((W=u.publicStats)==null?void 0:W.imports)||0),1)]),e("span",Ds,[b(i(c),{icon:"lucide:star",class:"w-3 h-3"}),k(" "+l(((Ve=(Ie=u.publicStats)==null?void 0:Ie.averageRating)==null?void 0:Ve.toFixed(1))||"0.0"),1)])])],8,$s)}),128))])])):g("",!0)])])])):g("",!0),b(Ne,{show:V.value,flow:s.value,onClose:t[2]||(t[2]=u=>V.value=!1),onImported:K},null,8,["show","flow"]),y.value?(o(),n("div",Is,[e("div",Vs,[e("div",{class:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t[3]||(t[3]=u=>y.value=!1)}),e("div",As,[e("div",js,[t[25]||(t[25]=e("div",null,[e("h3",{class:"text-xl font-bold text-gray-900"},"Reportar Flow"),e("p",{class:"text-sm text-gray-600 mt-1"},"Ajude-nos a manter a qualidade da biblioteca")],-1)),e("button",{onClick:t[4]||(t[4]=u=>y.value=!1),class:"text-gray-400 hover:text-gray-600"},[b(i(c),{icon:"lucide:x",class:"w-6 h-6"})])]),p.value?(o(),n("div",Us,[e("p",Es,l(p.value),1)])):g("",!0),e("div",Bs,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Categoria * ",-1)),N(e("select",{"onUpdate:modelValue":t[5]||(t[5]=u=>x.value.category=u),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},[(o(),n(F,null,D(a,u=>e("option",{key:u.value,value:u.value},l(u.label),9,Ps)),64))],512),[[te,x.value.category]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Motivo * ",-1)),N(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=u=>x.value.reason=u),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descreva o problema em detalhes..."},null,512),[[ee,x.value.reason]]),e("p",Ns,l(x.value.reason.length)+" / 1000 caracteres (mínimo 20)",1)])]),e("div",Ts,[e("button",{onClick:t[7]||(t[7]=u=>y.value=!1),class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancelar "),e("button",{onClick:Q,disabled:i(M),class:"px-4 py-2 bg-brand-red text-white rounded-lg hover:brightness-110 disabled:opacity-50 flex items-center gap-2"},[b(i(c),{icon:i(M)?"lucide:loader-2":"lucide:flag",class:I(["w-4 h-4",{"animate-spin":i(M)}])},null,8,["icon","class"]),k(" "+l(i(M)?"Enviando...":"Enviar Report"),1)],8,qs)])])])])):g("",!0)]}),_:1}))}},Xs=Te(zs,[["__scopeId","data-v-b8742d97"]]);export{Xs as default};
