var L=(w,x,r)=>new Promise((f,p)=>{var s=a=>{try{l(r.next(a))}catch(m){p(m)}},o=a=>{try{l(r.throw(a))}catch(m){p(m)}},l=a=>a.done?f(a.value):Promise.resolve(a.value).then(s,o);l((r=r.apply(w,x)).next())});import{r as g,c as M,h as S,o as F,A as N,i as d,k as t,j as q,m as j,n as B,l as b,u as n,I as v,t as u,p as D,q as z,v as P,z as y,b as c}from"./vue-vendor-BR4PrzJp.js";import{_ as U}from"./Logo-DSCBS8sK.js";import{u as R}from"./useAuth-C_Ik1XEG.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-nSMfNdYQ.js";const G={class:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden"},H={class:"relative w-full max-w-md"},J={class:"glass-card backdrop-blur-xl bg-white/30 px-10 py-12 rounded-lg shadow-lg border border-white/20"},K={class:"flex-1"},O={class:"font-medium text-sm"},Q={key:0,class:"text-xs mt-1.5 opacity-90"},W={key:1,class:"text-xs mt-1.5 opacity-90"},X={class:"group"},Y=["disabled"],Z={key:0,class:"flex items-center"},$={key:1,class:"flex items-center"},ee={class:"text-center pt-2"},te={class:"mt-8 bg-brand-purple/10 backdrop-blur-sm border border-brand-purple/20 rounded p-4"},ae={class:"flex items-start"},se={__name:"TwoFactorVerifyView",setup(w){const{verify2FALogin:x,loading:r}=R(),f=N(),p=S(),s=g(""),o=g(""),l=g(""),a=g(null),m=M(()=>p.query.returnUrl||null);F(()=>{l.value=p.query.tempToken,l.value||(o.value="Sessão inválida. Por favor, faça login novamente.",setTimeout(()=>{f.push("/login")},3e3))});function I(){return L(this,null,function*(){if(o.value="",a.value=null,!s.value||s.value.length!==6){o.value="Please enter a valid 6-digit code";return}const i=yield x(l.value,s.value,m.value);i.success||(o.value=i.error,a.value=i.attemptsInfo,s.value="")})}function T(i){const e=i.target.value.replace(/[^0-9]/g,"");s.value=e.slice(0,6)}function A(){f.push("/login")}return(i,e)=>{var h,k,_,V;return c(),d("div",G,[e[8]||(e[8]=t("div",{class:"absolute inset-0 bg-gradient-animated"},null,-1)),e[9]||(e[9]=t("div",{class:"absolute top-20 left-20 w-96 h-96 bg-gradient-to-br from-blue-200/40 to-purple-200/40 rounded-full blur-3xl animate-float-slow"},null,-1)),e[10]||(e[10]=t("div",{class:"absolute bottom-20 right-20 w-96 h-96 bg-gradient-to-br from-purple-200/40 to-pink-200/40 rounded-full blur-3xl animate-float-slow animation-delay-2000"},null,-1)),e[11]||(e[11]=t("div",{class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-indigo-200/30 to-blue-200/30 rounded-full blur-3xl animate-float-slow animation-delay-4000"},null,-1)),t("div",H,[e[7]||(e[7]=q('<div class="flex justify-center mb-6" data-v-190b99d5><img src="'+U+'" alt="LyntFlow" class="h-16 object-contain" data-v-190b99d5></div><div class="text-center mb-8" data-v-190b99d5><h2 class="text-2xl font-semibold text-gray-800 mb-1" data-v-190b99d5>Autenticação de Dois Fatores</h2><p class="text-sm text-gray-600" data-v-190b99d5>Digite o código de 6 dígitos do seu app autenticador</p></div>',2)),t("div",J,[o.value?(c(),d("div",{key:0,class:B(["mb-8 px-5 py-4 rounded flex items-start backdrop-blur-sm border-l-4",[((h=a.value)==null?void 0:h.attemptsLeft)>0?"bg-brand-orange/10 border-brand-orange text-brand-orange":"bg-brand-red/10 border-brand-red text-brand-red"]])},[b(n(v),{icon:((k=a.value)==null?void 0:k.attemptsLeft)>0?"lucide:alert-triangle":"lucide:alert-circle",class:"w-5 h-5 mr-3 flex-shrink-0 mt-0.5"},null,8,["icon"]),t("div",K,[t("p",O,u(o.value),1),((_=a.value)==null?void 0:_.attemptsLeft)>0?(c(),d("p",Q,u(a.value.attemptsLeft)+" "+u(a.value.attemptsLeft===1?"tentativa":"tentativas")+" restante"+u(a.value.attemptsLeft===1?"":"s"),1)):(V=a.value)!=null&&V.remainingMinutes?(c(),d("p",W," Aguarde "+u(a.value.remainingMinutes)+" minuto"+u(a.value.remainingMinutes===1?"":"s")+" para tentar novamente ",1)):j("",!0)])],2)):j("",!0),t("form",{onSubmit:D(I,["prevent"]),class:"space-y-6"},[t("div",X,[e[1]||(e[1]=t("label",{for:"code",class:"block text-xs font-medium text-gray-600 mb-2.5 uppercase tracking-wide"}," Código de Verificação ",-1)),z(t("input",{id:"code","onUpdate:modelValue":e[0]||(e[0]=C=>s.value=C),onInput:T,type:"text",inputmode:"numeric",pattern:"[0-9]*",autocomplete:"one-time-code",maxlength:"6",required:"",class:"appearance-none block w-full px-4 py-3 text-center text-2xl font-mono tracking-[0.5em] bg-white/50 backdrop-blur-sm border border-gray-300 rounded text-gray-900 placeholder-gray-400 focus:outline-none focus:border-brand-purple focus:bg-white/70 transition-all",placeholder:"000000"},null,544),[[P,s.value]]),e[2]||(e[2]=t("p",{class:"mt-2 text-xs text-gray-600 text-center tracking-wide"}," Abra seu app autenticador para visualizar o código ",-1))]),t("div",null,[t("button",{type:"submit",disabled:n(r)||s.value.length!==6,class:"w-full mt-8 px-6 py-3.5 bg-brand-purple hover:brightness-110 rounded text-white text-sm font-medium tracking-wide transition-all duration-300 hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center justify-center"},[n(r)?(c(),d("span",$,[b(n(v),{icon:"lucide:loader-2",class:"w-4 h-4 mr-2 animate-spin"}),e[4]||(e[4]=y(" Verificando... ",-1))])):(c(),d("span",Z,[b(n(v),{icon:"lucide:shield-check",class:"w-4 h-4 mr-2"}),e[3]||(e[3]=y(" Verificar Código ",-1))]))],8,Y)]),t("div",ee,[t("button",{type:"button",onClick:A,class:"text-sm text-gray-600 hover:opacity-70 transition-opacity flex items-center justify-center w-full"},[b(n(v),{icon:"lucide:arrow-left",class:"w-4 h-4 mr-1.5"}),e[5]||(e[5]=y(" Voltar para o login ",-1))])])],32),t("div",te,[t("div",ae,[b(n(v),{icon:"lucide:info",class:"w-5 h-5 text-brand-purple mr-3 flex-shrink-0 mt-0.5"}),e[6]||(e[6]=t("div",{class:"text-sm text-gray-700"},[t("p",{class:"font-medium mb-1"},"Precisa de ajuda?"),t("p",{class:"text-gray-600 text-xs tracking-wide"}," Se você perdeu o acesso ao seu app autenticador, entre em contato com o suporte para recuperar sua conta. ")],-1))])])])])])}}},ue=E(se,[["__scopeId","data-v-190b99d5"]]);export{ue as default};
