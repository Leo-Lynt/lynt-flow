var g=(b,v,a)=>new Promise((x,r)=>{var u=o=>{try{f(a.next(o))}catch(e){r(e)}},s=o=>{try{f(a.throw(o))}catch(e){r(e)}},f=o=>o.done?x(o.value):Promise.resolve(o.value).then(u,s);f((a=a.apply(b,v)).next())});import{r as m,o as k,h as _,i as p,j as T,k as t,l as i,u as c,I as n,t as y,n as d,z as j,A,b as h}from"./vue-vendor-BR4PrzJp.js";import{u as z}from"./useAuth-L5NC1uLI.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-nSMfNdYQ.js";const C={class:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden"},E={class:"relative w-full max-w-md"},P={class:"flex justify-center mb-6"},S={class:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-xl shadow-blue-500/30"},I={class:"glass-card backdrop-blur-xl bg-white/70 px-10 py-12 rounded-2xl shadow-xl border border-white/40"},N={key:0,class:"text-center"},B={class:"flex justify-center mb-6"},L={class:"text-2xl font-semibold text-gray-800 mb-2"},R={class:"mt-8 space-y-3"},q={key:1,class:"text-center"},O={class:"flex justify-center mb-6"},D={class:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center"},F={class:"text-sm text-gray-600 mb-6"},G={__name:"AuthCallbackView",setup(b){const v=A(),a=_(),{getProfile:x}=z(),r=m("Autenticando com Google..."),u=m(null),s=m(0);k(()=>g(null,null,function*(){try{const{token:o,email:e}=a.query;if(!o)throw new Error("Token não encontrado. Por favor, tente novamente.");s.value=1,r.value="Salvando suas credenciais...",yield new Promise(l=>setTimeout(l,300)),localStorage.setItem("accessToken",o),a.query.refreshToken?localStorage.setItem("refreshToken",a.query.refreshToken):console.warn("⚠️ No refreshToken received from OAuth callback"),s.value=2,r.value="Carregando seu perfil...",yield new Promise(l=>setTimeout(l,300));const w=yield x(!0);if(!w.success)throw new Error(w.error||"Erro ao carregar perfil do usuário");s.value=3,r.value="Login realizado com sucesso!",yield new Promise(l=>setTimeout(l,500)),s.value=4,r.value="Redirecionando para o dashboard...",yield new Promise(l=>setTimeout(l,500)),window.location.href="/dashboard"}catch(o){console.error("OAuth callback error:",o),u.value=o.message||"Erro desconhecido ao processar autenticação"}}));function f(){v.push("/login")}return(o,e)=>(h(),p("div",C,[e[6]||(e[6]=T('<div class="fixed inset-0 bg-[#f2f7ff] -z-10" data-v-28f49899></div><div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none" data-v-28f49899><div class="absolute top-1/4 right-1/4 w-[500px] h-[500px] bg-blue-300/20 rounded-full blur-3xl" data-v-28f49899></div><div class="absolute top-1/3 left-1/4 w-[450px] h-[450px] bg-cyan-300/15 rounded-full blur-3xl" data-v-28f49899></div><div class="absolute bottom-1/4 right-1/3 w-[400px] h-[400px] bg-purple-300/10 rounded-full blur-3xl" data-v-28f49899></div></div><div class="fixed inset-0 opacity-[0.02] -z-5 pointer-events-none" data-v-28f49899><div class="absolute inset-0" style="background-image:radial-gradient(circle, #3B82F6 1px, transparent 1px);background-size:40px 40px;" data-v-28f49899></div></div>',3)),t("div",E,[t("div",P,[t("div",S,[i(c(n),{icon:"lucide:workflow",class:"w-8 h-8 text-white"})])]),t("div",I,[u.value?(h(),p("div",q,[t("div",O,[t("div",D,[i(c(n),{icon:"lucide:alert-circle",class:"w-8 h-8 text-red-600"})])]),e[5]||(e[5]=t("h2",{class:"text-2xl font-semibold text-gray-800 mb-2"},"Erro no Login",-1)),t("p",F,y(u.value),1),t("button",{onClick:f,class:"w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 rounded-xl text-white text-sm font-medium tracking-wide transition-all duration-300 hover:shadow-xl hover:shadow-blue-500/30 hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center"},[i(c(n),{icon:"lucide:arrow-left",class:"w-4 h-4 mr-2"}),e[4]||(e[4]=j(" Voltar ao Login ",-1))])])):(h(),p("div",N,[t("div",B,[i(c(n),{icon:"lucide:loader-2",class:"w-16 h-16 text-blue-600 animate-spin"})]),t("h2",L,y(r.value),1),e[3]||(e[3]=t("p",{class:"text-sm text-gray-600"},"Aguarde um momento...",-1)),t("div",R,[t("div",{class:d(["flex items-center justify-center space-x-3",s.value>=1?"opacity-100":"opacity-30"])},[i(c(n),{icon:s.value>1?"lucide:check-circle-2":"lucide:circle",class:d(["w-5 h-5",s.value>1?"text-green-600":"text-blue-600"])},null,8,["icon","class"]),e[0]||(e[0]=t("span",{class:"text-sm text-gray-700"},"Salvando credenciais",-1))],2),t("div",{class:d(["flex items-center justify-center space-x-3",s.value>=2?"opacity-100":"opacity-30"])},[i(c(n),{icon:s.value>2?"lucide:check-circle-2":"lucide:circle",class:d(["w-5 h-5",s.value>2?"text-green-600":"text-blue-600"])},null,8,["icon","class"]),e[1]||(e[1]=t("span",{class:"text-sm text-gray-700"},"Carregando perfil",-1))],2),t("div",{class:d(["flex items-center justify-center space-x-3",s.value>=3?"opacity-100":"opacity-30"])},[i(c(n),{icon:s.value>3?"lucide:check-circle-2":"lucide:circle",class:d(["w-5 h-5",s.value>3?"text-green-600":"text-blue-600"])},null,8,["icon","class"]),e[2]||(e[2]=t("span",{class:"text-sm text-gray-700"},"Redirecionando",-1))],2)])]))])])]))}},U=V(G,[["__scopeId","data-v-28f49899"]]);export{U as default};
