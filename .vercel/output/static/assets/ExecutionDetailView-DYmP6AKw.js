var y=(k,p,u)=>new Promise((v,g)=>{var h=a=>{try{s(u.next(a))}catch(f){g(f)}},m=a=>{try{s(u.throw(a))}catch(f){g(f)}},s=a=>a.done?v(a.value):Promise.resolve(a.value).then(h,m);s((u=u.apply(k,p)).next())});import{h as F,r as E,o as S,A as V,a as B,s as w,b as i,i as d,u as n,l,I as x,k as e,z as R,m as b,t as r,n as A}from"./vue-vendor-BR4PrzJp.js";import{_ as M}from"./AppLayout-DfxNFnX7.js";import{B as _}from"./BaseCard-C5zSWQaB.js";import{_ as $}from"./ExecutionStatusBadge-DgNAHWYX.js";import{u as O}from"./useFlows-ZtHeo4Pl.js";import"./useAuth-L5NC1uLI.js";import"./utils-nSMfNdYQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={key:0,class:"flex justify-center items-center h-64"},T={key:1},J={class:"flex items-center justify-between mb-8"},U={class:"flex items-center space-x-3 mb-2"},q={class:"text-gray-600 ml-8 text-sm tracking-wide"},G={class:"font-medium"},L={key:0,class:"text-red-600 ml-2"},H={class:"flex items-center space-x-3"},K=["disabled"],P={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q={class:"space-y-2"},W={class:"flex justify-between text-sm"},X={class:"font-mono text-gray-900 text-xs"},Y={class:"flex justify-between text-sm"},Z={class:"font-mono text-gray-900 text-xs"},tt={class:"flex justify-between text-sm"},et={class:"text-gray-900"},st={class:"flex justify-between text-sm"},ot={class:"text-gray-900"},at={class:"flex justify-between text-sm"},lt={class:"text-gray-900"},nt={class:"flex justify-between text-sm"},it={class:"text-gray-900"},dt={class:"flex justify-between text-sm"},rt={class:"text-gray-900 font-medium"},ut={key:0,class:"bg-white/50 rounded-lg p-4 overflow-x-auto border border-gray-200"},ct={class:"text-sm text-gray-800 font-mono"},xt={key:1,class:"text-center py-8 text-gray-500"},mt={key:0,class:"bg-white/50 rounded-lg p-4 overflow-x-auto border border-gray-200"},ft={class:"text-sm text-gray-800 font-mono"},gt={key:1,class:"text-center py-8 text-gray-500"},yt={key:2,class:"text-center py-12"},Et={__name:"ExecutionDetailView",setup(k){const p=F(),u=V(),{getExecution:v,reexecuteFlow:g,loading:h}=O(),m=p.params.id,s=E(null),a=E(!1);S(()=>y(null,null,function*(){yield f()}));function f(){return y(this,null,function*(){const o=yield v(m);o.success?s.value=o.data.data||o.data:u.push("/executions")})}function j(){return y(this,null,function*(){var t;a.value=!0;const o=yield g(m);if(a.value=!1,o.success){const c=((t=o.data.data)==null?void 0:t.newExecutionId)||o.data.newExecutionId;c&&u.push(`/executions/${c}`)}})}function N(){var o;if((o=s.value)!=null&&o.flowId){const t=`http://localhost:5174/editor/?flowId=${s.value.flowId}`;window.open(t,"_blank")}}function D(o){return o?new Date(o).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"}function C(o){if(!o)return"-";const t=Math.floor(o/1e3),c=Math.floor(t/60),I=Math.floor(c/60);return I>0?`${I}h ${c%60}m ${t%60}s`:c>0?`${c}m ${t%60}s`:`${t}s`}return(o,t)=>(i(),B(M,null,{default:w(()=>[n(h)?(i(),d("div",z,[l(n(x),{icon:"lucide:loader-2",class:"w-8 h-8 animate-spin text-gray-400"})])):s.value?(i(),d("div",T,[e("div",J,[e("div",null,[e("div",U,[e("button",{onClick:t[0]||(t[0]=c=>n(u).push("/executions")),class:"text-gray-600 hover:text-gray-900 transition-colors"},[l(n(x),{icon:"lucide:arrow-left",class:"w-5 h-5"})]),t[2]||(t[2]=e("h1",{class:"text-3xl font-semibold text-gray-800 tracking-wide"},"Detalhes da Execução",-1)),l($,{status:s.value.status},null,8,["status"])]),e("p",q,[t[3]||(t[3]=R(" Fluxo: ",-1)),e("span",G,r(s.value.flowName||"Desconhecido"),1),s.value.flowDeleted?(i(),d("span",L,"(Fluxo Excluído)")):b("",!0)])]),e("div",H,[s.value.flowDeleted?b("",!0):(i(),d("button",{key:0,onClick:j,disabled:a.value,class:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white px-4 py-2.5 rounded-lg disabled:opacity-50 flex items-center space-x-2 transition-all shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 text-sm font-medium tracking-wide"},[l(n(x),{icon:a.value?"lucide:loader-2":"lucide:repeat",class:A(["w-4 h-4",{"animate-spin":a.value}])},null,8,["icon","class"]),e("span",null,r(a.value?"Reexecutando...":"Reexecutar"),1)],8,K)),s.value.flowDeleted?b("",!0):(i(),d("button",{key:1,onClick:N,class:"bg-white/70 backdrop-blur-sm border border-gray-300 text-gray-700 px-4 py-2.5 rounded-lg hover:bg-white/90 hover:brightness-95 transition-all flex items-center space-x-2 text-sm font-medium tracking-wide"},[l(n(x),{icon:"lucide:workflow",class:"w-4 h-4"}),t[4]||(t[4]=e("span",null,"Ver Fluxo",-1))]))])]),l(_,{title:"Informações da Execução",subtitle:"Detalhes gerais sobre esta execução",class:"mb-8"},{default:w(()=>[e("div",P,[e("div",null,[t[12]||(t[12]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3 tracking-wide"},"Informações Gerais",-1)),e("dl",Q,[e("div",W,[t[5]||(t[5]=e("dt",{class:"text-gray-600"},"ID da Execução:",-1)),e("dd",X,r(s.value.executionId||n(m)),1)]),e("div",Y,[t[6]||(t[6]=e("dt",{class:"text-gray-600"},"ID do Fluxo:",-1)),e("dd",Z,r(s.value.flowId||"-"),1)]),e("div",tt,[t[7]||(t[7]=e("dt",{class:"text-gray-600"},"Nome do Fluxo:",-1)),e("dd",et,r(s.value.flowName||"Desconhecido"),1)]),e("div",st,[t[8]||(t[8]=e("dt",{class:"text-gray-600"},"Status:",-1)),e("dd",ot,[l($,{status:s.value.status},null,8,["status"])])]),e("div",at,[t[9]||(t[9]=e("dt",{class:"text-gray-600"},"Iniciado em:",-1)),e("dd",lt,r(D(s.value.startedAt)),1)]),e("div",nt,[t[10]||(t[10]=e("dt",{class:"text-gray-600"},"Concluído em:",-1)),e("dd",it,r(D(s.value.completedAt)),1)]),e("div",dt,[t[11]||(t[11]=e("dt",{class:"text-gray-600"},"Tempo de Execução:",-1)),e("dd",rt,r(C(s.value.executionTime)),1)])])])])]),_:1}),l(_,{title:"Dados de Entrada",subtitle:"Dados utilizados para executar este fluxo",class:"mb-8"},{default:w(()=>[s.value.inputData&&Object.keys(s.value.inputData).length>0?(i(),d("div",ut,[e("pre",ct,r(JSON.stringify(s.value.inputData,null,2)),1)])):(i(),d("div",xt,[l(n(x),{icon:"lucide:file-input",class:"w-12 h-12 mx-auto mb-3 text-gray-400"}),t[13]||(t[13]=e("p",{class:"text-sm tracking-wide"},"Nenhum dado de entrada foi fornecido",-1))]))]),_:1}),l(_,{title:"Dados de Saída",subtitle:"Resultado da execução do fluxo",class:"mb-8"},{default:w(()=>[s.value.outputData&&Object.keys(s.value.outputData).length>0?(i(),d("div",mt,[e("pre",ft,r(JSON.stringify(s.value.outputData,null,2)),1)])):(i(),d("div",gt,[l(n(x),{icon:"lucide:file-text",class:"w-12 h-12 mx-auto mb-3 text-gray-400"}),t[14]||(t[14]=e("p",{class:"text-sm tracking-wide"},"Nenhum dado de saída disponível",-1))]))]),_:1})])):(i(),d("div",yt,[l(n(x),{icon:"lucide:alert-circle",class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t[16]||(t[16]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-2 tracking-wide"},"Execução não encontrada",-1)),t[17]||(t[17]=e("p",{class:"text-gray-600 mb-6 text-sm tracking-wide"},"A execução que você está procurando não existe.",-1)),e("button",{onClick:t[1]||(t[1]=c=>n(u).push("/executions")),class:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white px-5 py-2.5 rounded-lg transition-all shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 inline-flex items-center space-x-2 text-sm font-medium tracking-wide"},[l(n(x),{icon:"lucide:arrow-left",class:"w-4 h-4"}),t[15]||(t[15]=e("span",null,"Voltar para Execuções",-1))])]))]),_:1}))}};export{Et as default};
