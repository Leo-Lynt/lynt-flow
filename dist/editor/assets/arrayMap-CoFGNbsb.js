import{u as f}from"./dataUtils-XrCV_Bny.js";import{g as c}from"./pathUtils-D1qRpIzi.js";import"./index-vfrSo85q.js";function p({nodeData:t,inputs:i}){let o=f(i["data-input"]);if(!Array.isArray(o))throw new Error("Input deve ser um array");const d=t.fieldMode||"selector";let r=[];if(d==="custom"){const e=t.customField;e&&(r=[e])}else{const e=t.selectedField;Array.isArray(e)&&e.length>0?r=e:typeof e=="string"&&(r=[e])}if(r.length===0)return o;if(r.length===1){const e=r[0];return o.map(l=>c(l,e))}return o.map(e=>{const l={};return r.forEach(s=>{const u=s.split(".").pop();l[u]=c(e,s)}),l})}function g(t){const i=[];return(t.fieldMode||"selector")==="custom"?t.customField||i.push("Campo customField obrigatório no modo custom"):(!t.selectedField||Array.isArray(t.selectedField)&&t.selectedField.length===0)&&i.push("Seleção de campo obrigatória"),{valid:i.length===0,errors:i}}export{p as execute,g as validate};
