import{u as n}from"./dataUtils-XrCV_Bny.js";function c(l,i){if(!i)return l;const e=i.split("."),s={...l};if(e.length===1)return delete s[e[0]],s;let t=s;for(let r=0;r<e.length-1;r++){if(t[e[r]]===null||t[e[r]]===void 0)return s;t[e[r]]={...t[e[r]]},t=t[e[r]]}return delete t[e[e.length-1]],s}function f({nodeData:l,inputs:i}){let e=n(i.input);if(typeof e!="object"||e===null||Array.isArray(e))throw new Error("Input deve ser um objeto");const s=l.fieldMode||"selector";let t=[];if(s==="custom"?t=(l.customFields||"").split(",").map(o=>o.trim()).filter(o=>o.length>0):t=l.selectedFields||[],t.length===0)return e;let r={...e};return t.forEach(u=>{r=c(r,u)}),r}function m(l){const i=[];return(l.fieldMode||"selector")==="custom"?l.customFields||i.push("Campo customFields obrigatório no modo custom"):(!l.selectedFields||l.selectedFields.length===0)&&i.push("Seleção de campos obrigatória"),{valid:i.length===0,errors:i}}export{f as execute,m as validate};
