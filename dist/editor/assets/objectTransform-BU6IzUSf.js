import{u}from"./dataUtils-XrCV_Bny.js";import{g as a,s as p}from"./pathUtils-D1qRpIzi.js";import"./index-vfrSo85q.js";function d(e,r){switch(r){case"uppercase":return String(e).toUpperCase();case"lowercase":return String(e).toLowerCase();case"trim":return String(e).trim();case"number":return Number(e);case"string":return String(e);case"boolean":return!!e;default:return e}}function h({nodeData:e,inputs:r}){let t=u(r.input);if(typeof t!="object"||t===null||Array.isArray(t))throw new Error("Input deve ser um objeto");const n=e.fieldMode||"selector";let o;if(n==="custom")o=e.customField;else{const i=e.selectedField;Array.isArray(i)&&i.length>0?o=i[0]:typeof i=="string"&&(o=i)}const c=e.operation||"uppercase",s=a(t,o);if(s===void 0)throw new Error(`Campo "${o}" não encontrado no objeto`);const l=d(s,c);return p(t,o,l)}function y(e){const r=[];return(e.fieldMode||"selector")==="custom"?e.customField||r.push("Campo customField obrigatório no modo custom"):(!e.selectedField||Array.isArray(e.selectedField)&&e.selectedField.length===0)&&r.push("Seleção de campo obrigatória"),e.operation||r.push('Campo "operation" obrigatório'),{valid:r.length===0,errors:r}}export{h as execute,y as validate};
