import{u as f}from"./dataUtils-XrCV_Bny.js";import{g as u}from"./pathUtils-D1qRpIzi.js";import"./index-vfrSo85q.js";function y({nodeData:e,inputs:i}){let s=f(i["data-input"]);if(!Array.isArray(s))throw new Error("Input deve ser um array");if((e.mode||"values")==="values")return[...new Set(s)];const d=e.fieldMode||"selector";let o;if(d==="custom")o=e.customField;else{const r=e.selectedField;Array.isArray(r)&&r.length>0?o=r[0]:typeof r=="string"&&(o=r)}const t=new Map;return s.forEach(r=>{const c=o?u(r,o):r,l=JSON.stringify(c);t.has(l)||t.set(l,r)}),Array.from(t.values())}function g(e){const i=[];return e.mode||i.push('Campo "mode" obrigatório'),e.mode==="field"&&((e.fieldMode||"selector")==="custom"?e.customField||i.push("Campo customField obrigatório no modo custom"):(!e.selectedField||Array.isArray(e.selectedField)&&e.selectedField.length===0)&&i.push("Seleção de campo obrigatória")),{valid:i.length===0,errors:i}}export{y as execute,g as validate};
