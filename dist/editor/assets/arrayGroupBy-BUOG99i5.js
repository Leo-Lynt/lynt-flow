import{u}from"./dataUtils-XrCV_Bny.js";import{g as f}from"./pathUtils-D1qRpIzi.js";import"./index-vfrSo85q.js";function m({nodeData:e,inputs:t}){let s=u(t["data-input"]);if(!Array.isArray(s))throw new Error("Input deve ser um array");const c=e.fieldMode||"selector";let i;if(c==="custom")i=e.customField;else{const r=e.selectedField;Array.isArray(r)&&r.length>0?i=r[0]:typeof r=="string"&&(i=r)}const o={};return s.forEach(r=>{const d=i?f(r,i):r,l=String(d);o[l]||(o[l]=[]),o[l].push(r)}),o}function g(e){const t=[];return(e.fieldMode||"selector")==="custom"?e.customField||t.push("Campo customField obrigatório no modo custom"):(!e.selectedField||Array.isArray(e.selectedField)&&e.selectedField.length===0)&&t.push("Seleção de campo obrigatória"),{valid:t.length===0,errors:t}}export{m as execute,g as validate};
