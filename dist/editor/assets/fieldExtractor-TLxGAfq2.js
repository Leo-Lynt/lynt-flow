import{u as g}from"./dataUtils-XrCV_Bny.js";import{g as l}from"./pathUtils-D1qRpIzi.js";import{d as y}from"./index-vfrSo85q.js";function i(r,s){return{value:r,__wrapped:!0,__originalData:s}}function D({nodeData:r,inputs:s,context:o}){const e=g(s["data-input"]),d=r.selectionMode||"single",m=r.selectedFields||[],f=r.manualPath,n=f?[f]:m;if(n.length===0)return e;const p={},u=Array.isArray(e)?e[0]:e;if(u&&typeof u=="object"&&(n.forEach(t=>{const a=l(u,t);p[t]=y(a)}),o!=null&&o.updateNodeData&&o.updateNodeData({fieldTypes:p})),Array.isArray(e))if(d==="single"&&n.length===1){const t=n[0],a=e.map(c=>l(c,t));return i(a,e)}else{const t=e.map(a=>{const c={};return n.forEach(h=>{c[h]=l(a,h)}),c});return i(t,e)}if(typeof e=="object"&&e!==null)if(d==="single"&&n.length===1){const t=n[0],a=l(e,t);return i(a,e)}else{const t={};return n.forEach(a=>{t[a]=l(e,a)}),i(t,e)}return e}function F(r){const s=[],o=r.selectedFields||[],e=r.manualPath;return o.length===0&&!e&&s.push("Nenhum campo selecionado ou path manual definido"),{valid:s.length===0,errors:s}}export{D as execute,F as validate};
