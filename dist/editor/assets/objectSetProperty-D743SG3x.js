import{u as c}from"./dataUtils-XrCV_Bny.js";function d(e,t,s){if(!t)return e;const r=t.split("."),l=JSON.parse(JSON.stringify(e));let o=l;for(let i=0;i<r.length-1;i++)(!o[r[i]]||typeof o[r[i]]!="object")&&(o[r[i]]={}),o=o[r[i]];return o[r[r.length-1]]=s,l}function f({nodeData:e,inputs:t}){let s=c(t.input);if(typeof s!="object"||s===null||Array.isArray(s))throw new Error("Input deve ser um objeto");const r=e.fieldMode||"selector";let l;if(r==="custom")l=e.customField;else{const u=e.selectedField;Array.isArray(u)&&u.length>0?l=u[0]:typeof u=="string"&&(l=u)}if(!l)throw new Error("Propriedade não selecionada");const o=e.valueMode||"static";let i;return o==="input"?i=c(t["value-input"]):i=e.staticValue,d(s,l,i)}function a(e){const t=[];return(e.fieldMode||"selector")==="custom"?e.customField||t.push("Campo customField obrigatório no modo custom"):(!e.selectedField||Array.isArray(e.selectedField)&&e.selectedField.length===0)&&t.push("Seleção de propriedade obrigatória"),e.valueMode==="static"&&e.staticValue===void 0&&t.push('Campo "staticValue" obrigatório quando valueMode é "static"'),{valid:t.length===0,errors:t}}export{f as execute,a as validate};
