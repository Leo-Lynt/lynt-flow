var A=(T,j,x)=>new Promise((B,k)=>{var f=d=>{try{g(x.next(d))}catch(b){k(b)}},m=d=>{try{g(x.throw(d))}catch(b){k(b)}},g=d=>d.done?B(d.value):Promise.resolve(d.value).then(f,m);g((x=x.apply(T,j)).next())});import{r as u,o as pe,w as ge,a as se,q as ve,z as xe,b as r,i as e,h as c,l as i,u as o,I as n,t as l,p as w,v as me,F as I,C as P,G as N,y as _,E as he,k as S,n as U}from"./vue-vendor-Cs4IDGu-.js";import{A as fe}from"./AppLayout-jrBjamem.js";import{u as ye,_ as we}from"./ImportFlowModal-Xu0wIQw5.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-C1_85XZE.js";import"./utils-nSMfNdYQ.js";const ke={class:"grid grid-cols-3 gap-4 mb-6"},Ce={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg p-4 border border-white/20 hover:bg-white/40 transition-all"},Fe={class:"flex items-center"},Me={class:"text-2xl font-bold text-gray-900"},Ve={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg p-4 border border-white/20 hover:bg-white/40 transition-all"},De={class:"flex items-center"},Ae={class:"text-2xl font-bold text-gray-900"},Ie={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg p-4 border border-white/20 hover:bg-white/40 transition-all"},Pe={class:"flex items-center"},Se={class:"text-2xl font-bold text-gray-900"},je={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-4 mb-6"},Be={class:"flex flex-col sm:flex-row gap-4"},Le={class:"flex-1"},Ne={class:"relative"},Ue={class:"flex gap-2 flex-wrap"},Te=["value"],Re=["value"],$e={class:"flex items-center px-3 py-2 bg-white/50 backdrop-blur-sm rounded-lg text-sm cursor-pointer border border-white/30 hover:bg-white/70 transition-all"},ze={key:0,class:"flex items-center justify-center py-20"},Ee={key:1,class:"text-center py-12 glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20"},Oe={key:2},qe={class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-6"},Ge={class:"p-6"},Qe={class:"flex items-start justify-between mb-3"},Ze={class:"flex-1"},He={class:"flex items-center mb-2"},Je={class:"text-lg font-semibold text-gray-900 mr-2"},Ke={class:"flex gap-2 mb-2"},We={class:"text-sm text-gray-600 mb-4 line-clamp-3"},Xe={class:"flex items-center mb-4"},Ye={class:"text-sm font-medium text-gray-900"},et={class:"text-xs text-gray-500"},tt={key:0,class:"flex flex-wrap gap-1 mb-4"},at={class:"flex items-center justify-between text-sm text-gray-500"},st={class:"flex items-center space-x-4"},lt={class:"flex items-center"},ot={class:"flex items-center"},rt={class:"flex items-center"},it={class:"px-6 py-4 bg-white/20 backdrop-blur-sm border-t border-white/20"},nt={class:"flex items-center justify-between"},dt=["onClick"],ct=["onClick"],ut={key:0,class:"flex items-center justify-center gap-2"},bt=["disabled"],pt={class:"text-sm text-gray-700 font-medium tracking-wide"},gt=["disabled"],vt={__name:"LibraryView",setup(T){const j=xe(),{listPublicFlows:x,getLibraryStats:B,loading:k}=ye(),f=u([]),m=u({totalFlows:0,totalDownloads:0,verifiedFlows:0}),g=u(""),d=u("all"),b=u("all"),C=u("popular"),F=u(!1),p=u(1),y=u(1),M=u(!1),L=u(null),R=[{value:"all",label:"Todas Categorias"},{value:"automation",label:"Automação"},{value:"data-processing",label:"Processamento de Dados"},{value:"api-integration",label:"Integração de API"},{value:"notification",label:"Notificação"},{value:"utility",label:"Utilidade"}],$=[{value:"all",label:"Todos Níveis"},{value:"beginner",label:"Iniciante"},{value:"intermediate",label:"Intermediário"},{value:"advanced",label:"Avançado"}];pe(()=>A(null,null,function*(){yield V(),yield le()})),ge([g,d,b,C,F],()=>{p.value=1,V()});function V(){return A(this,null,function*(){const s={search:g.value||void 0,category:d.value!=="all"?d.value:void 0,difficulty:b.value!=="all"?b.value:void 0,verifiedOnly:F.value,sortBy:C.value,page:p.value,limit:12},t=yield x(s);t.success&&(f.value=t.flows||[],t.pagination&&(y.value=t.pagination.pages))})}function le(){return A(this,null,function*(){const s=yield B();s.success&&(m.value=s.data)})}function oe(s){j.push(`/library/${s._id}`)}function re(s){L.value=s,M.value=!0}function ie(){M.value=!1,L.value=null}function ne(s){const t={automation:"bg-brand-purple/10 text-brand-purple border border-brand-purple/30","data-processing":"bg-brand-green/10 text-brand-green border border-brand-green/30","api-integration":"bg-brand-pink/10 text-brand-pink border border-brand-pink/30",notification:"bg-brand-orange/10 text-brand-orange border border-brand-orange/30",utility:"bg-gray-100 text-gray-700 border border-gray-300"};return t[s]||t.utility}function de(s){const t={beginner:"bg-brand-green/10 text-brand-green border border-brand-green/30",intermediate:"bg-brand-orange/10 text-brand-orange border border-brand-orange/30",advanced:"bg-brand-red/10 text-brand-red border border-brand-red/30"};return t[s]||t.beginner}function ce(s){return new Date(s).toLocaleDateString("pt-BR",{year:"numeric",month:"short",day:"numeric"})}function z(s){const t=(s==null?void 0:s.split(" ").map(D=>D[0]).join("").substring(0,2))||"??",h=["bg-brand-purple","bg-brand-green","bg-brand-pink","bg-brand-orange","bg-brand-red"],a=h[(s==null?void 0:s.length)%h.length]||h[0];return{initials:t,color:a}}function ue(){p.value<y.value&&(p.value++,V())}function be(){p.value>1&&(p.value--,V())}return(s,t)=>(r(),se(fe,null,{default:ve(()=>{var h;return[t[15]||(t[15]=e("div",{class:"mb-8"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-3xl font-semibold text-gray-800 tracking-wide"},"Biblioteca Pública"),e("p",{class:"text-gray-600 mt-1 tracking-wide"},"Descubra e importe fluxos compartilhados pela comunidade")])])],-1)),e("div",ke,[e("div",Ce,[e("div",Fe,[i(o(n),{icon:"lucide:users",class:"w-8 h-8 text-brand-purple mr-3"}),e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm text-gray-700 tracking-wide"},"Fluxos da Comunidade",-1)),e("p",Me,l(m.value.totalFlows),1)])])]),e("div",Ve,[e("div",De,[i(o(n),{icon:"lucide:download",class:"w-8 h-8 text-brand-green mr-3"}),e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm text-gray-700 tracking-wide"},"Total de Downloads",-1)),e("p",Ae,l(((h=m.value.totalDownloads)==null?void 0:h.toLocaleString())||0),1)])])]),e("div",Ie,[e("div",Pe,[i(o(n),{icon:"lucide:shield-check",class:"w-8 h-8 text-brand-pink mr-3"}),e("div",null,[t[8]||(t[8]=e("p",{class:"text-sm text-gray-700 tracking-wide"},"Fluxos Verificados",-1)),e("p",Se,l(m.value.verifiedFlows),1)])])])]),e("div",je,[e("div",Be,[e("div",Le,[e("div",Ne,[i(o(n),{icon:"lucide:search",class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>g.value=a),type:"text",placeholder:"Buscar fluxos públicos...",class:"w-full pl-10 pr-3 py-2 border border-white/30 bg-white/50 backdrop-blur-sm rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-brand-purple focus:border-transparent transition-all"},null,512),[[me,g.value]])])]),e("div",Ue,[w(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>d.value=a),class:"px-3 py-2 border border-white/30 bg-white/50 backdrop-blur-sm rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-brand-purple transition-all"},[(r(),c(I,null,P(R,a=>e("option",{key:a.value,value:a.value},l(a.label),9,Te)),64))],512),[[N,d.value]]),w(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>b.value=a),class:"px-3 py-2 border border-white/30 bg-white/50 backdrop-blur-sm rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-brand-purple transition-all"},[(r(),c(I,null,P($,a=>e("option",{key:a.value,value:a.value},l(a.label),9,Re)),64))],512),[[N,b.value]]),w(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>C.value=a),class:"px-3 py-2 border border-white/30 bg-white/50 backdrop-blur-sm rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-brand-purple transition-all"},[...t[9]||(t[9]=[e("option",{value:"popular"},"Mais Popular",-1),e("option",{value:"recent"},"Adicionados Recentemente",-1),e("option",{value:"rating"},"Melhor Avaliados",-1),e("option",{value:"name"},"Nome A-Z",-1)])],512),[[N,C.value]]),e("label",$e,[w(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>F.value=a),type:"checkbox",class:"mr-2 h-4 w-4 text-brand-purple accent-brand-purple"},null,512),[[he,F.value]]),t[10]||(t[10]=_(" Apenas Verificados ",-1))])])])]),o(k)?(r(),c("div",ze,[i(o(n),{icon:"lucide:loader-2",class:"w-12 h-12 text-brand-purple animate-spin"})])):f.value.length===0?(r(),c("div",Ee,[i(o(n),{icon:"lucide:search-x",class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t[11]||(t[11]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2 tracking-wide"},"Nenhum fluxo encontrado",-1)),t[12]||(t[12]=e("p",{class:"text-gray-600 tracking-wide"},"Tente ajustar seus termos de busca ou filtros",-1))])):(r(),c("div",Oe,[e("div",qe,[(r(!0),c(I,null,P(f.value,a=>{var D,E,O,q,G,Q,Z,H,J,K,W,X,Y,ee,te,ae;return r(),c("div",{key:a._id,class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 hover:shadow-xl hover:bg-white/40 transition-all duration-200 overflow-hidden"},[e("div",Ge,[e("div",Qe,[e("div",Ze,[e("div",He,[e("h3",Je,l(a.name),1),(D=a.publicationData)!=null&&D.isVerified?(r(),se(o(n),{key:0,icon:"lucide:shield-check",class:"w-5 h-5 text-brand-purple",title:"Fluxo Verificado"})):S("",!0)]),e("div",Ke,[e("span",{class:U(["px-2 py-1 text-xs font-medium rounded-full",ne(a.category)])},l(((E=R.find(v=>v.value===a.category))==null?void 0:E.label)||a.category),3),(O=a.publicMetadata)!=null&&O.difficulty?(r(),c("span",{key:0,class:U(["px-2 py-1 text-xs font-medium rounded-full",de(a.publicMetadata.difficulty)])},l(((q=$.find(v=>v.value===a.publicMetadata.difficulty))==null?void 0:q.label)||a.publicMetadata.difficulty),3)):S("",!0)])])]),e("p",We,l(a.description),1),e("div",Xe,[e("div",{class:U(["w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-medium mr-3",z((Q=(G=a.publicMetadata)==null?void 0:G.author)==null?void 0:Q.name).color])},l(z((H=(Z=a.publicMetadata)==null?void 0:Z.author)==null?void 0:H.name).initials),3),e("div",null,[e("p",Ye,l(((K=(J=a.publicMetadata)==null?void 0:J.author)==null?void 0:K.name)||"Unknown"),1),e("p",et,"Updated "+l(ce(a.updatedAt)),1)])]),(W=a.publicMetadata)!=null&&W.tags&&a.publicMetadata.tags.length>0?(r(),c("div",tt,[(r(!0),c(I,null,P(a.publicMetadata.tags.slice(0,5),v=>(r(),c("span",{key:v,class:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded"},l(v),1))),128))])):S("",!0),e("div",at,[e("div",st,[e("span",lt,[i(o(n),{icon:"lucide:download",class:"w-4 h-4 mr-1"}),_(" "+l(((Y=(X=a.publicStats)==null?void 0:X.imports)==null?void 0:Y.toLocaleString())||0),1)]),e("span",ot,[i(o(n),{icon:"lucide:star",class:"w-4 h-4 mr-1 text-yellow-500"}),_(" "+l(((te=(ee=a.publicStats)==null?void 0:ee.averageRating)==null?void 0:te.toFixed(1))||"0.0"),1)]),e("span",rt,[i(o(n),{icon:"lucide:message-circle",class:"w-4 h-4 mr-1"}),_(" "+l(((ae=a.publicStats)==null?void 0:ae.totalReviews)||0),1)])])])]),e("div",it,[e("div",nt,[e("button",{onClick:v=>oe(a),class:"text-gray-700 hover:text-gray-900 flex items-center text-sm font-medium tracking-wide transition-all"},[i(o(n),{icon:"lucide:eye",class:"w-4 h-4 mr-1"}),t[13]||(t[13]=_(" Ver Detalhes ",-1))],8,dt),e("button",{onClick:v=>re(a),class:"bg-brand-purple text-white px-4 py-2 rounded-lg hover:brightness-110 text-sm transition-all flex items-center space-x-1 font-medium tracking-wide"},[i(o(n),{icon:"lucide:download",class:"w-4 h-4"}),t[14]||(t[14]=e("span",null,"Importar",-1))],8,ct)])])])}),128))]),y.value>1?(r(),c("div",ut,[e("button",{onClick:be,disabled:p.value===1,class:"px-4 py-2 backdrop-blur-sm bg-white/30 border border-white/20 rounded-lg hover:bg-white/40 disabled:opacity-50 disabled:cursor-not-allowed transition-all"},[i(o(n),{icon:"lucide:chevron-left",class:"w-5 h-5"})],8,bt),e("span",pt," Página "+l(p.value)+" de "+l(y.value),1),e("button",{onClick:ue,disabled:p.value===y.value,class:"px-4 py-2 backdrop-blur-sm bg-white/30 border border-white/20 rounded-lg hover:bg-white/40 disabled:opacity-50 disabled:cursor-not-allowed transition-all"},[i(o(n),{icon:"lucide:chevron-right",class:"w-5 h-5"})],8,gt)])):S("",!0)])),i(we,{show:M.value,flow:L.value,onClose:t[5]||(t[5]=a=>M.value=!1),onImported:ie},null,8,["show","flow"])]}),_:1}))}},kt=_e(vt,[["__scopeId","data-v-b24c3ada"]]);export{kt as default};
