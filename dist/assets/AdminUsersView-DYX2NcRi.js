var h=(B,V,v)=>new Promise((S,k)=>{var M=a=>{try{b(v.next(a))}catch(l){k(l)}},m=a=>{try{b(v.throw(a))}catch(l){k(l)}},b=a=>a.done?S(a.value):Promise.resolve(a.value).then(M,m);b((v=v.apply(B,V)).next())});import{r as u,o as O,a as T,q as W,b as p,i as e,h as g,k as A,l as d,u as r,I as n,t as i,p as U,H as X,v as Y,G as $,y as E,F as Z,C as ee,n as P,E as te}from"./vue-vendor-Cs4IDGu-.js";import{A as se}from"./AppLayout-jrBjamem.js";import{u as oe}from"./useAdmin-BlFDCXcN.js";import{_ as re}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-C1_85XZE.js";import"./utils-nSMfNdYQ.js";const ae={class:"max-w-7xl mx-auto"},le={key:0,class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},ie={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6 hover:bg-white/40 transition-all"},ne={class:"flex items-center justify-between mb-2"},de={class:"text-3xl font-bold text-gray-900"},ce={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6 hover:bg-white/40 transition-all"},ue={class:"flex items-center justify-between mb-2"},pe={class:"text-3xl font-bold text-gray-900"},be={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6 hover:bg-white/40 transition-all"},xe={class:"flex items-center justify-between mb-2"},ge={class:"text-3xl font-bold text-gray-900"},ve={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6 hover:bg-white/40 transition-all"},me={class:"flex items-center justify-between mb-2"},fe={class:"text-3xl font-bold text-gray-900"},ye={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-4 mb-6"},he={class:"flex flex-col md:flex-row gap-4"},we={class:"flex-1"},_e={class:"relative"},ke={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 overflow-hidden"},Ce={class:"overflow-x-auto"},Ae={class:"min-w-full divide-y divide-gray-200"},Ue={class:"bg-white divide-y divide-gray-200"},Ve={key:0},Se={colspan:"5",class:"px-6 py-12 text-center"},Me={key:1},je={class:"px-6 py-4 whitespace-nowrap"},Ee={class:"flex items-center"},Pe={class:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center"},Be={class:"text-blue-600 font-semibold"},Re={class:"ml-4"},De={class:"text-sm font-medium text-gray-900 flex items-center gap-2"},Fe={class:"text-sm text-gray-500"},Ie={class:"px-6 py-4 whitespace-nowrap"},Ne={class:"px-6 py-4 whitespace-nowrap"},Te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},$e={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ze=["onClick"],Ge=["onClick","title"],Le={key:0,class:"px-6 py-4 border-t border-gray-200 flex items-center justify-between"},Ke={class:"text-sm text-gray-700"},qe={class:"flex gap-2"},He=["disabled"],Qe=["disabled"],Je={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Oe={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0"},We={class:"relative inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},Xe={class:"flex items-start justify-between mb-6"},Ye={class:"text-sm text-gray-600 mt-1"},Ze={class:"space-y-4"},et={class:"flex items-center gap-2 cursor-pointer"},tt={class:"flex items-center justify-end gap-3 mt-6 pt-6 border-t border-gray-200"},st=["disabled"],ot={__name:"AdminUsersView",setup(B){const{listUsers:V,getUserStats:v,updateUserRole:S,toggleUserStatus:k,toggleVerifiedCreator:M,loading:m}=oe(),b=u([]),a=u(null),l=u(1),w=u(1),j=u(""),C=u("all"),f=u(!1),y=u(null),c=u({role:"",isActive:!0});O(()=>h(null,null,function*(){yield R(),yield x()}));function R(){return h(this,null,function*(){const o=yield v();o.success&&(a.value=o.data)})}function x(){return h(this,null,function*(){const o={page:l.value,limit:20,role:C.value!=="all"?C.value:void 0,search:j.value||void 0},t=yield V(o);t.success&&(b.value=t.data.users,w.value=t.data.pagination.pages)})}function D(){l.value=1,x()}function z(){l.value=1,x()}function G(o){y.value=o,c.value={role:o.role,isActive:o.isActive},f.value=!0}function L(){return h(this,null,function*(){if(!y.value)return;const o=y.value._id;if(c.value.role!==y.value.role){const t=yield S(o,c.value.role);if(!t.success){alert("Erro ao atualizar role: "+t.error);return}}if(c.value.isActive!==y.value.isActive){const t=yield k(o,c.value.isActive);if(!t.success){alert("Erro ao atualizar status: "+t.error);return}}f.value=!1,yield x(),yield R()})}function K(o){return h(this,null,function*(){var s;const t=!((s=o.publicProfile)!=null&&s.isVerifiedCreator),_=yield M(o._id,t);_.success?yield x():alert("Erro: "+_.error)})}function F(o){const t={user:{color:"bg-gray-100 text-gray-700 border border-gray-300",label:"Usuário"},moderator:{color:"bg-brand-purple/10 text-brand-purple border border-brand-purple/30",label:"Moderador"},administrator:{color:"bg-brand-pink/10 text-brand-pink border border-brand-pink/30",label:"Administrador"}};return t[o]||t.user}function q(o){return new Date(o).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})}function H(){l.value<w.value&&(l.value++,x())}function Q(){l.value>1&&(l.value--,x())}return(o,t)=>(p(),T(se,null,{default:W(()=>{var _;return[e("div",ae,[t[15]||(t[15]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-semibold text-gray-800 mb-2 tracking-wide"},"Gerenciamento de Usuários"),e("p",{class:"text-gray-600 tracking-wide"},"Gerencie usuários, roles e permissões")],-1)),a.value?(p(),g("div",le,[e("div",ie,[e("div",ne,[t[7]||(t[7]=e("span",{class:"text-sm font-medium text-gray-700 tracking-wide"},"Total de Usuários",-1)),d(r(n),{icon:"lucide:users",class:"w-5 h-5 text-brand-purple"})]),e("p",de,i(a.value.totalUsers),1)]),e("div",ce,[e("div",ue,[t[8]||(t[8]=e("span",{class:"text-sm font-medium text-gray-700 tracking-wide"},"Usuários Ativos",-1)),d(r(n),{icon:"lucide:check-circle",class:"w-5 h-5 text-brand-green"})]),e("p",pe,i(a.value.activeUsers),1)]),e("div",be,[e("div",xe,[t[9]||(t[9]=e("span",{class:"text-sm font-medium text-gray-700 tracking-wide"},"Moderadores",-1)),d(r(n),{icon:"lucide:shield",class:"w-5 h-5 text-brand-purple"})]),e("p",ge,i(a.value.roleStats.moderator),1)]),e("div",ve,[e("div",me,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-gray-700 tracking-wide"},"Administradores",-1)),d(r(n),{icon:"lucide:crown",class:"w-5 h-5 text-brand-pink"})]),e("p",fe,i(a.value.roleStats.administrator),1)])])):A("",!0),e("div",ye,[e("div",he,[e("div",we,[e("div",_e,[d(r(n),{icon:"lucide:search",class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),U(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>j.value=s),onKeyup:X(D,["enter"]),type:"text",placeholder:"Buscar por nome ou email...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-purple focus:border-transparent"},null,544),[[Y,j.value]])])]),U(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>C.value=s),onChange:z,class:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-purple focus:border-transparent"},[...t[11]||(t[11]=[e("option",{value:"all"},"Todos os roles",-1),e("option",{value:"user"},"Usuários",-1),e("option",{value:"moderator"},"Moderadores",-1),e("option",{value:"administrator"},"Administradores",-1)])],544),[[$,C.value]]),e("button",{onClick:D,class:"px-6 py-2 bg-brand-purple text-white rounded-lg hover:brightness-110 transition-all flex items-center gap-2"},[d(r(n),{icon:"lucide:search",class:"w-5 h-5"}),t[12]||(t[12]=E(" Buscar ",-1))])])]),e("div",ke,[e("div",Ce,[e("table",Ae,[t[14]||(t[14]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Usuário "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Role "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Criado em "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ações ")])],-1)),e("tbody",Ue,[r(m)?(p(),g("tr",Ve,[e("td",Se,[d(r(n),{icon:"lucide:loader-2",class:"w-8 h-8 text-blue-600 animate-spin mx-auto"})])])):b.value.length===0?(p(),g("tr",Me,[...t[13]||(t[13]=[e("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-500"}," Nenhum usuário encontrado ",-1)])])):(p(!0),g(Z,{key:2},ee(b.value,s=>{var I,N;return p(),g("tr",{key:s._id,class:"hover:bg-gray-50"},[e("td",je,[e("div",Ee,[e("div",Pe,[e("span",Be,i(s.name.charAt(0).toUpperCase()),1)]),e("div",Re,[e("div",De,[E(i(s.name)+" ",1),(I=s.publicProfile)!=null&&I.isVerifiedCreator?(p(),T(r(n),{key:0,icon:"lucide:badge-check",class:"w-4 h-4 text-blue-500",title:"Criador Verificado"})):A("",!0)]),e("div",Fe,i(s.email),1)])])]),e("td",Ie,[e("span",{class:P(["px-2 py-1 text-xs font-medium rounded-full",F(s.role).color])},i(F(s.role).label),3)]),e("td",Ne,[e("span",{class:P(["px-2 py-1 text-xs font-medium rounded-full",s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},i(s.isActive?"Ativo":"Inativo"),3)]),e("td",Te,i(q(s.createdAt)),1),e("td",$e,[e("button",{onClick:J=>G(s),class:"text-blue-600 hover:text-blue-900 mr-4",title:"Editar usuário"},[d(r(n),{icon:"lucide:edit",class:"w-5 h-5"})],8,ze),e("button",{onClick:J=>K(s),class:"text-purple-600 hover:text-purple-900",title:(N=s.publicProfile)!=null&&N.isVerifiedCreator?"Remover verificação":"Verificar criador"},[d(r(n),{icon:"lucide:badge-check",class:"w-5 h-5"})],8,Ge)])])}),128))])])]),w.value>1?(p(),g("div",Le,[e("div",Ke," Página "+i(l.value)+" de "+i(w.value),1),e("div",qe,[e("button",{onClick:Q,disabled:l.value===1,class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Anterior ",8,He),e("button",{onClick:H,disabled:l.value===w.value,class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Próxima ",8,Qe)])])):A("",!0)])]),f.value?(p(),g("div",Je,[e("div",Oe,[e("div",{class:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t[2]||(t[2]=s=>f.value=!1)}),e("div",We,[e("div",Xe,[e("div",null,[t[16]||(t[16]=e("h3",{class:"text-xl font-bold text-gray-900"},"Editar Usuário",-1)),e("p",Ye,i((_=y.value)==null?void 0:_.name),1)]),e("button",{onClick:t[3]||(t[3]=s=>f.value=!1),class:"text-gray-400 hover:text-gray-600"},[d(r(n),{icon:"lucide:x",class:"w-6 h-6"})])]),e("div",Ze,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Role",-1)),U(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>c.value.role=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-purple focus:border-transparent"},[...t[17]||(t[17]=[e("option",{value:"user"},"Usuário",-1),e("option",{value:"moderator"},"Moderador",-1),e("option",{value:"administrator"},"Administrador",-1)])],512),[[$,c.value.role]])]),e("div",null,[e("label",et,[U(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=s=>c.value.isActive=s),class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-brand-purple focus:border-transparent"},null,512),[[te,c.value.isActive]]),t[19]||(t[19]=e("span",{class:"text-sm font-medium text-gray-700"},"Usuário ativo",-1))])])]),e("div",tt,[e("button",{onClick:t[6]||(t[6]=s=>f.value=!1),class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancelar "),e("button",{onClick:L,disabled:r(m),class:"px-4 py-2 bg-brand-purple text-white rounded-lg hover:brightness-110 transition-all disabled:opacity-50 flex items-center gap-2"},[d(r(n),{icon:r(m)?"lucide:loader-2":"lucide:save",class:P(["w-4 h-4",{"animate-spin":r(m)}])},null,8,["icon","class"]),t[20]||(t[20]=E(" Salvar ",-1))],8,st)])])])])):A("",!0)]}),_:1}))}},ut=re(ot,[["__scopeId","data-v-addfb192"]]);export{ut as default};
