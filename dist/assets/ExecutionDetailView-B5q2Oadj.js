var p=(k,v,r)=>new Promise((w,y)=>{var b=a=>{try{s(r.next(a))}catch(m){y(m)}},f=a=>{try{s(r.throw(a))}catch(m){y(m)}},s=a=>a.done?w(a.value):Promise.resolve(a.value).then(b,f);s((r=r.apply(k,v)).next())});import{B,r as E,o as F,z as R,a as S,q as g,b as n,h as u,u as i,l,I as x,i as e,y as A,k as _,t as d,n as V}from"./vue-vendor-Cs4IDGu-.js";import{A as O}from"./AppLayout-jrBjamem.js";import{B as h}from"./BaseCard-Co3fH4X5.js";import{_ as $}from"./ExecutionStatusBadge-BtYUDsGU.js";import{u as M}from"./useFlows-D_qEO5GI.js";import"./useAuth-C1_85XZE.js";import"./utils-nSMfNdYQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={key:0,class:"flex justify-center items-center h-64"},U={key:1},z={class:"flex items-center justify-between mb-6"},J={class:"flex items-center space-x-3 mb-2"},L={class:"text-gray-600 ml-8"},q={class:"font-medium"},G={key:0,class:"text-red-600 ml-2"},H={class:"flex items-center space-x-3"},K=["disabled"],P={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q={class:"space-y-2"},W={class:"flex justify-between text-sm"},X={class:"font-mono text-gray-900"},Y={class:"flex justify-between text-sm"},Z={class:"font-mono text-gray-900"},tt={class:"flex justify-between text-sm"},et={class:"text-gray-900"},st={class:"flex justify-between text-sm"},ot={class:"text-gray-900"},at={class:"flex justify-between text-sm"},lt={class:"text-gray-900"},nt={class:"flex justify-between text-sm"},it={class:"text-gray-900"},ut={class:"flex justify-between text-sm"},dt={class:"text-gray-900"},rt={key:0,class:"bg-gray-50 rounded-lg p-4 overflow-x-auto"},ct={class:"text-sm text-gray-800"},xt={key:1,class:"text-center py-8 text-gray-500"},ft={key:0,class:"bg-gray-50 rounded-lg p-4 overflow-x-auto"},mt={class:"text-sm text-gray-800"},yt={key:1,class:"text-center py-8 text-gray-500"},pt={key:2,class:"text-center py-8"},Et={__name:"ExecutionDetailView",setup(k){const v=B(),r=R(),{getExecution:w,reexecuteFlow:y,loading:b}=M(),f=v.params.id,s=E(null),a=E(!1);F(()=>p(null,null,function*(){yield m()}));function m(){return p(this,null,function*(){const o=yield w(f);o.success?s.value=o.data.data||o.data:r.push("/executions")})}function j(){return p(this,null,function*(){var t;a.value=!0;const o=yield y(f);if(a.value=!1,o.success){const c=((t=o.data.data)==null?void 0:t.newExecutionId)||o.data.newExecutionId;c&&r.push(`/executions/${c}`)}})}function N(){var o;if((o=s.value)!=null&&o.flowId){const t=`http://localhost:5174/editor/?flowId=${s.value.flowId}`;window.open(t,"_blank")}}function D(o){return o?new Date(o).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"}function C(o){if(!o)return"-";const t=Math.floor(o/1e3),c=Math.floor(t/60),I=Math.floor(c/60);return I>0?`${I}h ${c%60}m ${t%60}s`:c>0?`${c}m ${t%60}s`:`${t}s`}return(o,t)=>(n(),S(O,null,{default:g(()=>[i(b)?(n(),u("div",T,[l(i(x),{icon:"lucide:loader-2",class:"w-8 h-8 animate-spin text-gray-400"})])):s.value?(n(),u("div",U,[e("div",z,[e("div",null,[e("div",J,[e("button",{onClick:t[0]||(t[0]=c=>i(r).push("/executions")),class:"text-gray-600 hover:text-gray-900"},[l(i(x),{icon:"lucide:arrow-left",class:"w-5 h-5"})]),t[2]||(t[2]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Execution Response",-1)),l($,{status:s.value.status},null,8,["status"])]),e("p",L,[t[3]||(t[3]=A(" Flow: ",-1)),e("span",q,d(s.value.flowName||"Unknown"),1),s.value.flowDeleted?(n(),u("span",G,"(Flow Deleted)")):_("",!0)])]),e("div",H,[s.value.flowDeleted?_("",!0):(n(),u("button",{key:0,onClick:j,disabled:a.value,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2"},[l(i(x),{icon:a.value?"lucide:loader-2":"lucide:repeat",class:V(["w-4 h-4",{"animate-spin":a.value}])},null,8,["icon","class"]),e("span",null,d(a.value?"Re-executing...":"Re-execute"),1)],8,K)),s.value.flowDeleted?_("",!0):(n(),u("button",{key:1,onClick:N,class:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 flex items-center space-x-2"},[l(i(x),{icon:"lucide:workflow",class:"w-4 h-4"}),t[4]||(t[4]=e("span",null,"View Flow",-1))]))])]),l(h,{title:"Execution Information",class:"mb-8"},{default:g(()=>[e("div",P,[e("div",null,[t[12]||(t[12]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"General Information",-1)),e("dl",Q,[e("div",W,[t[5]||(t[5]=e("dt",{class:"text-gray-600"},"Execution ID:",-1)),e("dd",X,d(s.value.executionId||i(f)),1)]),e("div",Y,[t[6]||(t[6]=e("dt",{class:"text-gray-600"},"Flow ID:",-1)),e("dd",Z,d(s.value.flowId||"-"),1)]),e("div",tt,[t[7]||(t[7]=e("dt",{class:"text-gray-600"},"Flow Name:",-1)),e("dd",et,d(s.value.flowName||"Unknown"),1)]),e("div",st,[t[8]||(t[8]=e("dt",{class:"text-gray-600"},"Status:",-1)),e("dd",ot,[l($,{status:s.value.status},null,8,["status"])])]),e("div",at,[t[9]||(t[9]=e("dt",{class:"text-gray-600"},"Started At:",-1)),e("dd",lt,d(D(s.value.startedAt)),1)]),e("div",nt,[t[10]||(t[10]=e("dt",{class:"text-gray-600"},"Completed At:",-1)),e("dd",it,d(D(s.value.completedAt)),1)]),e("div",ut,[t[11]||(t[11]=e("dt",{class:"text-gray-600"},"Execution Time:",-1)),e("dd",dt,d(C(s.value.executionTime)),1)])])])])]),_:1}),l(h,{title:"Input Data",subtitle:"Data used to execute this flow",class:"mb-8"},{default:g(()=>[s.value.inputData&&Object.keys(s.value.inputData).length>0?(n(),u("div",rt,[e("pre",ct,d(JSON.stringify(s.value.inputData,null,2)),1)])):(n(),u("div",xt,[l(i(x),{icon:"lucide:file-input",class:"w-12 h-12 mx-auto mb-3 text-gray-400"}),t[13]||(t[13]=e("p",null,"No input data was provided",-1))]))]),_:1}),l(h,{title:"Output Data",subtitle:"Result data from the execution",class:"mb-8"},{default:g(()=>[s.value.outputData&&Object.keys(s.value.outputData).length>0?(n(),u("div",ft,[e("pre",mt,d(JSON.stringify(s.value.outputData,null,2)),1)])):(n(),u("div",yt,[l(i(x),{icon:"lucide:file-text",class:"w-12 h-12 mx-auto mb-3 text-gray-400"}),t[14]||(t[14]=e("p",null,"No output data available",-1))]))]),_:1})])):(n(),u("div",pt,[l(i(x),{icon:"lucide:alert-circle",class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t[15]||(t[15]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Execution not found",-1)),t[16]||(t[16]=e("p",{class:"text-gray-600 mb-4"},"The execution you're looking for doesn't exist.",-1)),e("button",{onClick:t[1]||(t[1]=c=>i(r).push("/executions")),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"}," Back to Executions ")]))]),_:1}))}};export{Et as default};
