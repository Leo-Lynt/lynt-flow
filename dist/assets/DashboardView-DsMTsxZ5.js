var C=(a,u,n)=>new Promise((f,b)=>{var c=x=>{try{v(n.next(x))}catch(m){b(m)}},y=x=>{try{v(n.throw(x))}catch(m){b(m)}},v=x=>x.done?f(x.value):Promise.resolve(x.value).then(c,y);v((n=n.apply(a,u)).next())});import{c as h,h as l,b as o,i as e,k,t as d,n as P,l as p,u as i,I as g,a as F,y as B,r as S,o as O,q as R,z as G,F as V,C as L,D as J}from"./vue-vendor-Cs4IDGu-.js";import{A as W}from"./AppLayout-jrBjamem.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as Y}from"./ExecutionStatusBadge-BtYUDsGU.js";import{a as K,u as Q}from"./useAuth-C1_85XZE.js";import"./utils-nSMfNdYQ.js";const X={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 shadow-sm p-6"},Z={class:"flex items-center justify-between"},ee={class:"flex-1"},te={class:"flex items-center justify-between"},se={class:"text-xs font-medium text-gray-600 uppercase tracking-wider"},re={class:"mt-3"},oe={class:"flex items-baseline"},ae={class:"text-2xl font-semibold text-gray-900"},ne={key:0,class:"mt-1.5 text-xs text-gray-600 tracking-wide"},ie={key:0,class:"mt-4 pt-4 border-t border-gray-200/30"},le={__name:"StatsCard",props:{title:String,value:[String,Number],change:Number,changeType:{type:String,default:"percentage",validator:a=>["percentage","absolute"].includes(a)},subtitle:String,icon:String,color:{type:String,default:"blue",validator:a=>["blue","green","red","yellow","purple","indigo"].includes(a)},actionText:String,actionHref:String},emits:["action-click"],setup(a,{emit:u}){const n=a,f=u,b=h(()=>n.change>0),c=h(()=>n.change<0),y=h(()=>{if(!n.change)return"";const m=b.value?"+":"",D=n.changeType==="percentage"?"%":"";return`${m}${n.change}${D}`}),v=h(()=>{const m={blue:"bg-brand-purple/10 text-brand-purple",green:"bg-brand-green/10 text-brand-green",red:"bg-brand-red/10 text-brand-red",yellow:"bg-brand-orange/10 text-brand-orange",purple:"bg-brand-pink/10 text-brand-pink",indigo:"bg-brand-purple/10 text-brand-purple"};return m[n.color]||m.blue});function x(){n.actionHref?window.open(n.actionHref,"_blank"):f("action-click")}return(m,D)=>(o(),l("div",X,[e("div",Z,[e("div",ee,[e("div",te,[e("p",se,d(a.title),1),a.icon?(o(),l("div",{key:0,class:P(["w-10 h-10 rounded flex items-center justify-center backdrop-blur-sm",v.value])},[p(i(g),{icon:a.icon,class:"w-5 h-5"},null,8,["icon"])],2)):k("",!0)]),e("div",re,[e("div",oe,[e("p",ae,d(a.value),1),a.change!==void 0?(o(),l("p",{key:0,class:P(["ml-2 flex items-baseline text-sm font-medium",b.value?"text-brand-green":c.value?"text-brand-red":"text-gray-500"])},[b.value?(o(),F(i(g),{key:0,icon:"lucide:trending-up",class:"self-center flex-shrink-0 h-4 w-4 mr-1"})):c.value?(o(),F(i(g),{key:1,icon:"lucide:trending-down",class:"self-center flex-shrink-0 h-4 w-4 mr-1"})):k("",!0),B(" "+d(y.value),1)],2)):k("",!0)]),a.subtitle?(o(),l("p",ne,d(a.subtitle),1)):k("",!0)])])]),a.actionText?(o(),l("div",ie,[e("button",{onClick:x,class:"text-sm font-medium text-brand-purple hover:text-brand-purple/80 transition-colors flex items-center"},[B(d(a.actionText)+" ",1),p(i(g),{icon:"lucide:arrow-right",class:"ml-1 w-4 h-4"})])])):k("",!0)]))}},ce=I(le,[["__scopeId","data-v-b631964f"]]),A=S(null),j=S(!1),T=S(null);let _=null;function de(){function a(u=!1){return C(this,null,function*(){return!u&&A.value?{success:!0,data:A.value}:(!u&&_||(u&&(_=null),_=C(null,null,function*(){var n,f;try{j.value=!0,T.value=null;const b=yield K.get("/dashboard/overview"),c=b.data.data||b.data;return A.value=c,{success:!0,data:c}}catch(b){return T.value=((f=(n=b.response)==null?void 0:n.data)==null?void 0:f.message)||"Erro ao carregar dashboard",{success:!1,error:T.value}}finally{j.value=!1,_=null}})),_)})}return{overview:h(()=>A.value),loading:h(()=>j.value),error:h(()=>T.value),getOverview:a}}const ue={class:"mb-8"},be={class:"text-gray-600 mt-2 text-sm tracking-wide"},ge={key:0,class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6 mb-8"},xe={class:"flex justify-center items-center h-32"},me={key:1,class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6 mb-8"},pe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},he={class:"text-center p-4 bg-white/40 backdrop-blur-sm rounded border border-white/30"},ve={class:"font-semibold text-gray-900 mt-1"},fe={class:"text-center p-4 bg-white/40 backdrop-blur-sm rounded border border-white/30"},we={class:"font-semibold text-gray-900 mt-1"},ye={class:"text-center p-4 bg-white/40 backdrop-blur-sm rounded border border-white/30"},_e={class:"font-semibold text-gray-900 mt-1"},ke={class:"text-center p-4 bg-white/40 backdrop-blur-sm rounded border border-white/30"},$e={class:"font-semibold text-gray-900 mt-1"},Ce={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Se={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},De={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6"},Ae={class:"flex items-center justify-between mb-4"},Te={key:0,class:"space-y-3"},Fe=["onClick"],Ne={class:"flex items-center space-x-3 flex-1 min-w-0"},Ee={class:"min-w-0 flex-1"},Ve={class:"text-sm font-medium text-gray-900 truncate"},Le={class:"text-xs text-gray-600 tracking-wide"},je={key:1,class:"text-center py-8 text-gray-500"},Me={class:"glass-card backdrop-blur-xl bg-white/30 rounded-lg border border-white/20 p-6"},Pe={class:"flex items-center justify-between mb-4"},Be={key:0,class:"space-y-3"},Ie={class:"flex items-center space-x-3 flex-1 min-w-0"},Ue={class:"min-w-0 flex-1"},He={class:"text-sm font-medium text-gray-900 truncate"},qe={class:"text-xs text-gray-600 tracking-wide"},ze={class:"text-xs px-2 py-1 bg-brand-green/20 text-brand-green rounded"},Oe={key:1,class:"text-center py-8 text-gray-500"},Re={__name:"DashboardView",setup(a){const u=G(),{user:n}=Q(),{overview:f,getOverview:b}=de(),c=S(null),y=S(!0),v=h(()=>{var s;return((s=c.value)==null?void 0:s.profile)||{}}),x=h(()=>{var s;return((s=c.value)==null?void 0:s.recentExecutions)||[]}),m=h(()=>{var s;return((s=c.value)==null?void 0:s.activeSchedules)||[]}),D=h(()=>{var t;const s=(t=c.value)==null?void 0:t.stats;return s?[{title:"Total de Fluxos",value:s.totalFlows||0,change:0,subtitle:"Fluxos criados no seu workspace",icon:"lucide:workflow",color:"blue",actionText:"Criar novo fluxo"},{title:"Fluxos Compartilhados",value:s.sharedFlows||0,change:0,subtitle:"Publicados na biblioteca",icon:"lucide:share-2",color:"purple"},{title:"Agendamentos Ativos",value:s.activeSchedules||0,change:0,subtitle:"Fluxos automatizados",icon:"lucide:calendar-clock",color:"indigo"},{title:"Total de Execuções",value:s.totalExecutions||0,change:0,subtitle:"Execuções de todos os tempos",icon:"lucide:activity",color:"green"}]:[]});O(()=>C(null,null,function*(){f.value?(c.value=f.value,y.value=!1):yield U()}));function U(s=!1){return C(this,null,function*(){try{y.value=!0;const t=yield b(s);t.success&&(c.value=t.data)}catch(t){}finally{y.value=!1}})}function H(){u.push("/flows/create")}function q(s){if(!s)return"Never";const t=new Date,$=new Date(s),r=t-$,w=Math.floor(r/6e4),N=Math.floor(r/36e5),E=Math.floor(r/864e5);return w<1?"Just now":w<60?`${w} minute${w>1?"s":""} ago`:N<24?`${N} hour${N>1?"s":""} ago`:E===1?"Yesterday":E<30?`${E} days ago`:$.toLocaleDateString("en-US",{month:"short",year:"numeric"})}function z(s){return s?new Date(s).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"Unknown"}function M(s){return new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}return(s,t)=>(o(),F(W,null,{default:R(()=>{var $;return[e("div",ue,[e("div",null,[t[3]||(t[3]=e("h1",{class:"text-3xl font-semibold text-gray-800 tracking-wide"},"Painel",-1)),e("p",be,"Bem-vindo de volta, "+d((($=i(n))==null?void 0:$.name)||"Usuário")+"! Aqui está sua visão geral do LyntFlow.",1)])]),y.value?(o(),l("div",ge,[e("div",xe,[p(i(g),{icon:"lucide:loader-2",class:"w-8 h-8 text-brand-purple animate-spin"})])])):c.value?(o(),l("div",me,[t[8]||(t[8]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4 tracking-wide"},"Visão Geral do Workspace",-1)),e("div",pe,[e("div",he,[p(i(g),{icon:"lucide:calendar",class:"w-6 h-6 text-brand-purple mx-auto mb-2"}),t[4]||(t[4]=e("p",{class:"text-xs text-gray-600 uppercase tracking-wider"},"Conta Criada",-1)),e("p",ve,d(z(v.value.accountCreated)),1)]),e("div",fe,[p(i(g),{icon:"lucide:clock",class:"w-6 h-6 text-brand-green mx-auto mb-2"}),t[5]||(t[5]=e("p",{class:"text-xs text-gray-600 uppercase tracking-wider"},"Último Login",-1)),e("p",we,d(q(v.value.lastLoginAt)),1)]),e("div",ye,[p(i(g),{icon:"lucide:users",class:"w-6 h-6 text-brand-orange mx-auto mb-2"}),t[6]||(t[6]=e("p",{class:"text-xs text-gray-600 uppercase tracking-wider"},"Membros da Equipe",-1)),e("p",_e,d(v.value.teamMembers||1)+" (Você)",1)]),e("div",ke,[p(i(g),{icon:"lucide:star",class:"w-6 h-6 text-brand-pink mx-auto mb-2"}),t[7]||(t[7]=e("p",{class:"text-xs text-gray-600 uppercase tracking-wider"},"Plano",-1)),e("p",$e,d(v.value.plan||"Gratuito"),1)])])])):k("",!0),e("div",Ce,[(o(!0),l(V,null,L(D.value,r=>(o(),F(ce,J({key:r.title},{ref_for:!0},r,{onActionClick:w=>r.actionText==="Criar novo fluxo"?H():null}),null,16,["onActionClick"]))),128))]),e("div",Se,[e("div",De,[e("div",Ae,[t[9]||(t[9]=e("h2",{class:"text-lg font-semibold text-gray-800 tracking-wide"},"Execuções Recentes",-1)),e("button",{onClick:t[0]||(t[0]=r=>i(u).push("/executions")),class:"text-sm text-brand-purple hover:text-brand-purple/80 transition-colors"}," Ver todas → ")]),x.value.length>0?(o(),l("div",Te,[(o(!0),l(V,null,L(x.value,r=>(o(),l("div",{key:r.id||r._id,onClick:w=>i(u).push(`/executions/${r.id||r._id}`),class:"flex items-center justify-between p-3 bg-white/40 backdrop-blur-sm rounded border border-white/30 hover:bg-white/50 hover:brightness-95 cursor-pointer transition-all"},[e("div",Ne,[p(i(g),{icon:"lucide:play-circle",class:"w-5 h-5 text-brand-purple flex-shrink-0"}),e("div",Ee,[e("div",Ve,d(r.flowName||"Fluxo Desconhecido"),1),e("div",Le,d(M(r.startedAt)),1)])]),p(Y,{status:r.status},null,8,["status"])],8,Fe))),128))])):(o(),l("div",je,[p(i(g),{icon:"lucide:inbox",class:"w-12 h-12 mx-auto mb-2 text-gray-400"}),t[10]||(t[10]=e("p",{class:"text-sm tracking-wide"},"Nenhuma execução recente",-1))]))]),e("div",Me,[e("div",Pe,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold text-gray-800 tracking-wide"},"Agendamentos Ativos",-1)),e("button",{onClick:t[1]||(t[1]=r=>i(u).push("/schedules")),class:"text-sm text-brand-purple hover:text-brand-purple/80 transition-colors"}," Ver todos → ")]),m.value.length>0?(o(),l("div",Be,[(o(!0),l(V,null,L(m.value.slice(0,5),r=>{var w;return o(),l("div",{key:r.id||r._id,class:"flex items-center justify-between p-3 bg-white/40 backdrop-blur-sm rounded border border-white/30"},[e("div",Ie,[p(i(g),{icon:"lucide:clock",class:"w-5 h-5 text-brand-green flex-shrink-0"}),e("div",Ue,[e("div",He,d(r.flowName||((w=r.flowId)==null?void 0:w.name)||"Fluxo Desconhecido"),1),e("div",qe," Próximo: "+d(M(r.nextExecutionAt)),1)])]),e("span",ze,d(r.scheduleType),1)])}),128))])):(o(),l("div",Oe,[p(i(g),{icon:"lucide:calendar-off",class:"w-12 h-12 mx-auto mb-2 text-gray-400"}),t[12]||(t[12]=e("p",{class:"text-sm tracking-wide"},"Nenhum agendamento ativo",-1)),e("button",{onClick:t[2]||(t[2]=r=>i(u).push("/schedules")),class:"mt-3 text-sm text-brand-purple hover:text-brand-purple/80 transition-colors underline decoration-brand-purple/30 hover:decoration-brand-purple/60 underline-offset-2"}," Crie seu primeiro agendamento ")]))])])]}),_:1}))}},Ze=I(Re,[["__scopeId","data-v-d1ca621b"]]);export{Ze as default};
