var y=(h,f,u)=>new Promise((p,i)=>{var c=t=>{try{n(u.next(t))}catch(o){i(o)}},r=t=>{try{n(u.throw(t))}catch(o){i(o)}},n=t=>t.done?p(t.value):Promise.resolve(t.value).then(c,r);n((u=u.apply(h,f)).next())});import{r as m,o as V,B,h as b,i as e,l as a,u as l,I as d,k,t as x,m as N,p as _,v as P,n as j,q,A as M,z as E,b as g}from"./vue-vendor-Cs4IDGu-.js";import{u as I}from"./useAuth-C1_85XZE.js";import"./utils-nSMfNdYQ.js";const S={class:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center px-4"},z={class:"max-w-md w-full"},A={class:"text-center mb-8"},D={class:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl mb-4"},T={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8"},U={key:0,class:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center text-sm"},F={key:1,class:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center text-sm"},G={class:"relative"},H={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},J={class:"relative"},K={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},L=["disabled"],O={class:"mt-6 text-center"},Z={__name:"ResetPasswordView",setup(h){const f=B(),u=E(),{resetPassword:p,loading:i}=I(),c=m(""),r=m(""),n=m(""),t=m(""),o=m("");V(()=>{c.value=f.query.token||"",c.value||(o.value="Invalid or missing reset token")});function R(){return y(this,null,function*(){if(o.value="",t.value="",!r.value||!n.value){o.value="Please fill in all fields";return}if(r.value!==n.value){o.value="Passwords do not match";return}if(r.value.length<6){o.value="Password must be at least 6 characters long";return}const v=yield p(c.value,r.value);v.success?(t.value="Password reset successfully! Redirecting to login...",setTimeout(()=>{u.push("/login")},2e3)):o.value=v.error})}return(v,s)=>{const C=M("router-link");return g(),b("div",S,[e("div",z,[e("div",A,[e("div",D,[a(l(d),{icon:"lucide:lock-keyhole",class:"w-8 h-8 text-white"})]),s[2]||(s[2]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Reset Password",-1)),s[3]||(s[3]=e("p",{class:"text-gray-600 mt-2"},"Enter your new password below",-1))]),e("div",T,[t.value?(g(),b("div",U,[a(l(d),{icon:"lucide:check-circle",class:"w-5 h-5 mr-2 flex-shrink-0"}),e("span",null,x(t.value),1)])):k("",!0),o.value?(g(),b("div",F,[a(l(d),{icon:"lucide:alert-circle",class:"w-5 h-5 mr-2 flex-shrink-0"}),e("span",null,x(o.value),1)])):k("",!0),e("form",{onSubmit:N(R,["prevent"]),class:"space-y-6"},[e("div",null,[s[4]||(s[4]=e("label",{for:"newPassword",class:"block text-sm font-medium text-gray-700 mb-2"}," New Password ",-1)),e("div",G,[e("div",H,[a(l(d),{icon:"lucide:lock",class:"w-5 h-5 text-gray-400"})]),_(e("input",{id:"newPassword","onUpdate:modelValue":s[0]||(s[0]=w=>r.value=w),type:"password",required:"",placeholder:"Enter new password",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[P,r.value]])]),s[5]||(s[5]=e("p",{class:"mt-1 text-xs text-gray-500"},"Must be at least 6 characters",-1))]),e("div",null,[s[6]||(s[6]=e("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 mb-2"}," Confirm New Password ",-1)),e("div",J,[e("div",K,[a(l(d),{icon:"lucide:lock-keyhole",class:"w-5 h-5 text-gray-400"})]),_(e("input",{id:"confirmPassword","onUpdate:modelValue":s[1]||(s[1]=w=>n.value=w),type:"password",required:"",placeholder:"Confirm new password",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[P,n.value]])])]),e("button",{type:"submit",disabled:l(i)||!c.value,class:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-4 rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-all flex items-center justify-center space-x-2"},[a(l(d),{icon:l(i)?"lucide:loader-2":"lucide:check",class:j(["w-5 h-5",{"animate-spin":l(i)}])},null,8,["icon","class"]),e("span",null,x(l(i)?"Resetting...":"Reset Password"),1)],8,L)],32),e("div",O,[a(C,{to:"/login",class:"text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center justify-center space-x-1"},{default:q(()=>[a(l(d),{icon:"lucide:arrow-left",class:"w-4 h-4"}),s[7]||(s[7]=e("span",null,"Back to login",-1))]),_:1})])])])])}}};export{Z as default};
