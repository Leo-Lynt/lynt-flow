var P=Object.defineProperty;var k=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var S=(n,e,c)=>e in n?P(n,e,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[e]=c,i=(n,e)=>{for(var c in e||(e={}))L.call(e,c)&&S(n,c,e[c]);if(k)for(var c of k(e))j.call(e,c)&&S(n,c,e[c]);return n};var p=(n,e,c)=>new Promise((y,h)=>{var $=f=>{try{g(c.next(f))}catch(m){h(m)}},w=f=>{try{g(c.throw(f))}catch(m){h(m)}},g=f=>f.done?y(f.value):Promise.resolve(f.value).then($,w);g((c=c.apply(n,e)).next())});import{a as v}from"./utils-nSMfNdYQ.js";import{r as A}from"./vue-vendor-Cs4IDGu-.js";const d="http://localhost:3001";function D(){const n=A(!1),e=A(null);function c(){return p(this,arguments,function*(a={}){var u,o,t;n.value=!0,e.value=null;try{const s=localStorage.getItem("accessToken"),r=new URLSearchParams;a.page&&r.append("page",a.page),a.limit&&r.append("limit",a.limit),a.role&&r.append("role",a.role),a.search&&r.append("search",a.search);const l=yield v.get(`${d}/api/admin/users?${r}`,{headers:{Authorization:`Bearer ${s}`}});return i({success:!0},l.data)}catch(s){return e.value=((t=(o=(u=s.response)==null?void 0:u.data)==null?void 0:o.error)==null?void 0:t.message)||"Erro ao listar usuários",{success:!1,error:e.value}}finally{n.value=!1}})}function y(){return p(this,null,function*(){var a,u,o;n.value=!0,e.value=null;try{const t=localStorage.getItem("accessToken"),s=yield v.get(`${d}/api/admin/users/stats`,{headers:{Authorization:`Bearer ${t}`}});return i({success:!0},s.data)}catch(t){return e.value=((o=(u=(a=t.response)==null?void 0:a.data)==null?void 0:u.error)==null?void 0:o.message)||"Erro ao buscar estatísticas",{success:!1,error:e.value}}finally{n.value=!1}})}function h(a){return p(this,null,function*(){var u,o,t;n.value=!0,e.value=null;try{const s=localStorage.getItem("accessToken"),r=yield v.get(`${d}/api/admin/users/${a}`,{headers:{Authorization:`Bearer ${s}`}});return i({success:!0},r.data)}catch(s){return e.value=((t=(o=(u=s.response)==null?void 0:u.data)==null?void 0:o.error)==null?void 0:t.message)||"Erro ao buscar usuário",{success:!1,error:e.value}}finally{n.value=!1}})}function $(a,u){return p(this,null,function*(){var o,t,s;n.value=!0,e.value=null;try{const r=localStorage.getItem("accessToken"),l=yield v.put(`${d}/api/admin/users/${a}/role`,{role:u},{headers:{Authorization:`Bearer ${r}`}});return i({success:!0},l.data)}catch(r){return e.value=((s=(t=(o=r.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Erro ao atualizar role",{success:!1,error:e.value}}finally{n.value=!1}})}function w(a,u){return p(this,null,function*(){var o,t,s;n.value=!0,e.value=null;try{const r=localStorage.getItem("accessToken"),l=yield v.put(`${d}/api/admin/users/${a}/status`,{isActive:u},{headers:{Authorization:`Bearer ${r}`}});return i({success:!0},l.data)}catch(r){return e.value=((s=(t=(o=r.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Erro ao alterar status",{success:!1,error:e.value}}finally{n.value=!1}})}function g(a,u){return p(this,null,function*(){var o,t,s;n.value=!0,e.value=null;try{const r=localStorage.getItem("accessToken"),l=yield v.put(`${d}/api/admin/users/${a}/verified-creator`,{isVerified:u},{headers:{Authorization:`Bearer ${r}`}});return i({success:!0},l.data)}catch(r){return e.value=((s=(t=(o=r.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Erro ao alterar status de criador",{success:!1,error:e.value}}finally{n.value=!1}})}function f(a=1,u=20){return p(this,null,function*(){var o,t,s;n.value=!0,e.value=null;try{const r=localStorage.getItem("accessToken"),l=yield v.get(`${d}/api/public-flows/moderation/pending?page=${a}&limit=${u}`,{headers:{Authorization:`Bearer ${r}`}});return i({success:!0},l.data)}catch(r){return e.value=((s=(t=(o=r.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Erro ao listar flows pendentes",{success:!1,error:e.value}}finally{n.value=!1}})}function m(){return p(this,arguments,function*(a={}){var u,o,t;n.value=!0,e.value=null;try{const s=localStorage.getItem("accessToken"),r=new URLSearchParams;a.status&&r.append("status",a.status),a.page&&r.append("page",a.page),a.limit&&r.append("limit",a.limit);const l=yield v.get(`${d}/api/public-flows/moderation/reports?${r}`,{headers:{Authorization:`Bearer ${s}`}});return i({success:!0},l.data)}catch(s){return e.value=((t=(o=(u=s.response)==null?void 0:u.data)==null?void 0:o.error)==null?void 0:t.message)||"Erro ao listar reports",{success:!1,error:e.value}}finally{n.value=!1}})}function B(a,u=""){return p(this,null,function*(){var o,t,s;n.value=!0,e.value=null;try{const r=localStorage.getItem("accessToken"),l=yield v.post(`${d}/api/public-flows/moderation/${a}/approve`,{notes:u},{headers:{Authorization:`Bearer ${r}`}});return i({success:!0},l.data)}catch(r){return e.value=((s=(t=(o=r.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Erro ao aprovar flow",{success:!1,error:e.value}}finally{n.value=!1}})}function z(a,u){return p(this,null,function*(){var o,t,s;n.value=!0,e.value=null;try{const r=localStorage.getItem("accessToken"),l=yield v.post(`${d}/api/public-flows/moderation/${a}/reject`,{reason:u},{headers:{Authorization:`Bearer ${r}`}});return i({success:!0},l.data)}catch(r){return e.value=((s=(t=(o=r.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Erro ao rejeitar flow",{success:!1,error:e.value}}finally{n.value=!1}})}function I(a){return p(this,null,function*(){var u,o,t;n.value=!0,e.value=null;try{const s=localStorage.getItem("accessToken"),r=yield v.post(`${d}/api/public-flows/moderation/${a}/verify`,{},{headers:{Authorization:`Bearer ${s}`}});return i({success:!0},r.data)}catch(s){return e.value=((t=(o=(u=s.response)==null?void 0:u.data)==null?void 0:o.error)==null?void 0:t.message)||"Erro ao verificar flow",{success:!1,error:e.value}}finally{n.value=!1}})}function E(a,u,o=""){return p(this,null,function*(){var t,s,r;n.value=!0,e.value=null;try{const l=localStorage.getItem("accessToken"),R=yield v.post(`${d}/api/public-flows/moderation/reports/${a}/resolve`,{action:u,reviewNotes:o},{headers:{Authorization:`Bearer ${l}`}});return i({success:!0},R.data)}catch(l){return e.value=((r=(s=(t=l.response)==null?void 0:t.data)==null?void 0:s.error)==null?void 0:r.message)||"Erro ao resolver report",{success:!1,error:e.value}}finally{n.value=!1}})}function T(){return p(this,null,function*(){var a,u,o;n.value=!0,e.value=null;try{const t=localStorage.getItem("accessToken"),s=yield v.get(`${d}/api/public-flows/moderation/stats`,{headers:{Authorization:`Bearer ${t}`}});return i({success:!0},s.data)}catch(t){return e.value=((o=(u=(a=t.response)==null?void 0:a.data)==null?void 0:u.error)==null?void 0:o.message)||"Erro ao buscar estatísticas",{success:!1,error:e.value}}finally{n.value=!1}})}function b(){return p(this,arguments,function*(a={}){var u,o,t;n.value=!0,e.value=null;try{const s=localStorage.getItem("accessToken"),r=new URLSearchParams;a.search&&r.append("search",a.search),a.category&&r.append("category",a.category),a.verified!==void 0&&r.append("verified",a.verified),a.sortBy&&r.append("sortBy",a.sortBy),a.page&&r.append("page",a.page),a.limit&&r.append("limit",a.limit);const l=yield v.get(`${d}/api/public-flows/moderation/all-flows?${r}`,{headers:{Authorization:`Bearer ${s}`}});return i({success:!0},l.data)}catch(s){return e.value=((t=(o=(u=s.response)==null?void 0:u.data)==null?void 0:o.error)==null?void 0:t.message)||"Erro ao listar flows",{success:!1,error:e.value}}finally{n.value=!1}})}function U(a){return p(this,null,function*(){var u,o,t;n.value=!0,e.value=null;try{const s=localStorage.getItem("accessToken"),r=yield v.post(`${d}/api/public-flows/moderation/${a}/unverify`,{},{headers:{Authorization:`Bearer ${s}`}});return i({success:!0},r.data)}catch(s){return e.value=((t=(o=(u=s.response)==null?void 0:u.data)==null?void 0:o.error)==null?void 0:t.message)||"Erro ao remover verificação",{success:!1,error:e.value}}finally{n.value=!1}})}function F(a,u=""){return p(this,null,function*(){var o,t,s;n.value=!0,e.value=null;try{const r=localStorage.getItem("accessToken"),l=yield v.post(`${d}/api/public-flows/moderation/${a}/quarantine`,{reason:u},{headers:{Authorization:`Bearer ${r}`}});return i({success:!0},l.data)}catch(r){return e.value=((s=(t=(o=r.response)==null?void 0:o.data)==null?void 0:t.error)==null?void 0:s.message)||"Erro ao mover para quarentena",{success:!1,error:e.value}}finally{n.value=!1}})}return{loading:n,error:e,listUsers:c,getUserStats:y,getUserDetails:h,updateUserRole:$,toggleUserStatus:w,toggleVerifiedCreator:g,listPendingFlows:f,listReports:m,listAllPublicFlows:b,approveFlow:B,rejectFlow:z,verifyFlow:I,unverifyFlow:U,quarantineFlow:F,resolveReport:E,getModerationStats:T}}export{D as u};
